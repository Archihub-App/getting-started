"use strict";(self.webpackChunkarchihub=self.webpackChunkarchihub||[]).push([[8213],{9920:function(t,e,n){n.d(e,{FZ:function(){return f},Hc:function(){return i},RS:function(){return a},Rm:function(){return m},S7:function(){return b},U3:function(){return x},Z$:function(){return y},ao:function(){return g},bn:function(){return w},de:function(){return h},f2:function(){return p},lk:function(){return l},ll:function(){return u},v:function(){return v},vv:function(){return c},wp:function(){return d},xU:function(){return s}});var o=n(88120),r=n(91280);function i(t){var e="/records/"+t,n={method:"GET",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch((0,o.H6)()+e,n).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function s(t){var e="/records/"+t+"/stream",n={method:"GET",headers:new Headers({Authorization:(0,r.g)()}),mode:"cors",cache:"default"};return fetch((0,o.H6)()+e,n).then((function(t){if(t.ok){var e=t.body.getReader(),n=[];function o(){return e.read().then((function(t){var e=t.done,r=t.value;return e?new Blob(n):(n.push(r),o())}))}return o()}return Promise.reject(t)}))}function a(t,e){var n="/records/"+t+"/transcription",i={method:"POST",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify({slug:e})};return fetch((0,o.H6)()+n,i).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function c(t,e){var n="/records/"+t+"/metadata",i={method:"POST",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify({slug:e})};return fetch((0,o.H6)()+n,i).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function l(t,e){var n="/records/"+t+"/result",i={method:"POST",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify({slug:e})};return fetch((0,o.H6)()+n,i).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function u(t){var e={method:"POST",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch((0,o.H6)()+"/liquidText/save",e).then((function(t){return 201!==t.status?Promise.reject(t):t.json()}))}function d(t){var e="/records/"+t+"/document",n={method:"GET",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch((0,o.H6)()+e,n).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function h(t){if((0,r.g)()){var e={method:"POST",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch((0,o.H6)()+"/records/galleryinfo",e).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}e={method:"POST",headers:new Headers({"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch((0,o.H6)()+"/records/public/galleryinfo",e).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function p(t,e,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if((0,r.g)()){var s="/records/"+t+"/pages",a={method:"POST",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify({pages:e,size:n,gallery:!i})};return fetch((0,o.H6)()+s,a).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}var c="/records/public/"+t+"/pages";a={method:"POST",headers:new Headers({"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify({pages:e,size:n,gallery:!i})};return fetch((0,o.H6)()+c,a).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function f(t,e,n,i){var s="/records/"+t+"/blocks",a={method:"POST",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify({page:e,block:i,slug:n})};return fetch((0,o.H6)()+s,a).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function m(t){var e={method:"POST",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch((0,o.H6)()+"/records/setBlock",e).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function g(t){var e={method:"PUT",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch((0,o.H6)()+"/records/setBlock",e).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function b(t){var e={method:"DELETE",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch((0,o.H6)()+"/records/setBlock",e).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function y(t,e){var n="/records/"+t+"/edit-transcription-speaker",i={method:"PUT",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch((0,o.H6)()+n,i).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function v(t,e){var n="/records/"+t+"/edit-transcription",i={method:"PUT",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch((0,o.H6)()+n,i).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function w(t,e){var n="/records/"+t+"/edit-transcription",i={method:"DELETE",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch((0,o.H6)()+n,i).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function x(t,e){var n=(0,r.g)();return new Promise(n?function(n,i){var s=new XMLHttpRequest;s.open("POST",(0,o.H6)()+"/records/download",!0),s.responseType="blob",s.setRequestHeader("Authorization",(0,r.g)()),s.setRequestHeader("Content-Type","application/json"),s.addEventListener("progress",(function(t){if(t.lengthComputable&&e){var n=t.loaded/t.total*100;e(n)}})),s.addEventListener("load",(function(){if(200===s.status){var t,e=s.response,o=(null===(t=s.getResponseHeader("content-disposition"))||void 0===t?void 0:t.split("filename=")[1])||"download",r=window.URL.createObjectURL(e),a=document.createElement("a");a.href=r,a.download=o,document.body.appendChild(a),a.click(),setTimeout((function(){document.body.removeChild(a),window.URL.revokeObjectURL(r),n()}),100)}else i(new Error("Download failed with status ".concat(s.status)))})),s.addEventListener("error",(function(){i(new Error("Download failed"))})),s.timeout=6e4,s.addEventListener("timeout",(function(){i(new Error("Download timed out"))})),s.send(JSON.stringify(t))}:function(n,r){var i=new XMLHttpRequest;i.open("POST",(0,o.H6)()+"/records/public/download",!0),i.responseType="blob",i.setRequestHeader("Content-Type","application/json"),i.addEventListener("progress",(function(t){if(t.lengthComputable&&e){var n=t.loaded/t.total*100;e(n)}})),i.addEventListener("load",(function(){if(200===i.status){var t,e=i.response,o=(null===(t=i.getResponseHeader("content-disposition"))||void 0===t?void 0:t.split("filename=")[1])||"download",s=window.URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download=o,document.body.appendChild(a),a.click(),setTimeout((function(){document.body.removeChild(a),window.URL.revokeObjectURL(s),n()}),100)}else r(new Error("Download failed with status ".concat(i.status)))})),i.addEventListener("error",(function(){r(new Error("Download failed"))})),i.timeout=6e4,i.addEventListener("timeout",(function(){r(new Error("Download timed out"))})),i.send(JSON.stringify(t))})}},48084:function(t,e,n){var o=n(5544),r=n(65043),i=n(83003),s=n(85211),a=n(55263),c=n(17392),l=n(30279),u=n(99070),d=n(77739),h=n(30492),p=n(54536),f=n(26240),m=n(64621),g=n(64846),b=n(9856),y=n(38749),v=n(99246),w=n(57770),x=n(41453),A=n(70579);e.A=function(t){var e=(0,i.wA)(),n=((0,i.d4)((function(t){return t.app.adjustements})),(0,r.useState)(!1)),j=(0,o.A)(n,2),C=j[0],z=j[1],S=(0,r.useState)(1),T=(0,o.A)(S,2),H=T[0],k=T[1],E=(0,r.useState)(1),L=(0,o.A)(E,2),P=L[0],R=L[1],O=(0,r.useState)(1),M=(0,o.A)(O,2),N=M[0],B=M[1],D=(0,r.useState)(0),J=(0,o.A)(D,2),U=J[0],q=J[1],F=(0,r.useState)(0),_=(0,o.A)(F,2),I=_[0],Z=_[1],G=(0,f.A)(),X=(0,v.A)();(0,i.d4)((function(t){return t.app.isDarkMode}));return(0,r.useEffect)((function(){e((0,s.n_)({contrast:H,brightness:P,saturation:N,invert:U,rotation:I}))}),[]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(a.A,{style:{minHeight:"auto",padding:0,justifyContent:"space-between",alignContent:"center"},children:[t.children?t.children:(0,A.jsx)("div",{}),(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",paddingLeft:10},children:[(0,A.jsx)(h.A,{style:{color:"white",opacity:C?1:.5,fontSize:20,transition:"opacity 0.3s"}}),(0,A.jsx)(c.A,{onClick:function(){return z(!C)},children:(0,A.jsx)(p.A,{style:{color:"white",opacity:.5,fontSize:20,transform:C?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s"}})})]})]}),(0,A.jsxs)(l.A,{in:C,children:[(0,A.jsxs)(a.A,{style:{minHeight:"auto",padding:0,justifyContent:"center",alignContent:"center",backgroundColor:G.palette.grey[900],borderTopLeftRadius:10,borderTopRightRadius:10,color:"white"},children:[(0,A.jsx)(u.Ay,{size:"small",min:0,max:5,step:.1,value:H,onChange:function(t,n){k(n),e((0,s.n_)({contrast:n,brightness:P,saturation:N,invert:U,rotation:I}))},style:{width:"calc(100% - 20px)",margin:"10px"},valueLabelDisplay:"auto"}),(0,A.jsx)(d.A,{title:X.formatMessage({id:"contrast"}),arrow:!0,placement:"top",style:{color:"white",opacity:.5,fontSize:20,marginRight:10},children:(0,A.jsx)(g.A,{style:{color:"white",opacity:.5,fontSize:20,marginRight:10}})})]}),(0,A.jsxs)(a.A,{style:{minHeight:"auto",padding:0,justifyContent:"center",alignContent:"center",backgroundColor:G.palette.grey[900],color:"white"},children:[(0,A.jsx)(u.Ay,{size:"small",min:0,max:3,step:.1,value:P,onChange:function(t,n){R(n),e((0,s.n_)({contrast:H,brightness:n,saturation:N,invert:U,rotation:I}))},style:{width:"calc(100% - 20px)",margin:"10px"},valueLabelDisplay:"auto"}),(0,A.jsx)(d.A,{title:X.formatMessage({id:"brightness"}),arrow:!0,placement:"top",style:{color:"white",opacity:.5,fontSize:20,marginRight:10},children:(0,A.jsx)(m.A,{style:{color:"white",opacity:.5,fontSize:20,marginRight:10}})})]}),(0,A.jsxs)(a.A,{style:{minHeight:"auto",padding:0,justifyContent:"center",alignContent:"center",backgroundColor:G.palette.grey[900],color:"white"},children:[(0,A.jsx)(u.Ay,{size:"small",min:0,max:2,step:.1,value:N,onChange:function(t,n){B(n),e((0,s.n_)({contrast:H,brightness:P,saturation:n,invert:U,rotation:I}))},style:{width:"calc(100% - 20px)",margin:"10px"},valueLabelDisplay:"auto"}),(0,A.jsx)(d.A,{title:X.formatMessage({id:"saturation"}),arrow:!0,placement:"top",style:{color:"white",opacity:.5,fontSize:20,marginRight:10},children:(0,A.jsx)(y.A,{style:{color:"white",opacity:.5,fontSize:20,marginRight:10}})})]}),(0,A.jsxs)(a.A,{style:{minHeight:"auto",padding:0,justifyContent:"center",alignContent:"center",backgroundColor:G.palette.grey[900],borderBottomLeftRadius:10,borderBottomRightRadius:10,color:"white"},children:[(0,A.jsx)(u.Ay,{size:"small",min:0,max:1,step:1,value:U,onChange:function(t,n){q(n),e((0,s.n_)({contrast:H,brightness:P,saturation:N,invert:n,rotation:I}))},style:{width:"calc(100% - 20px)",margin:"10px"},valueLabelDisplay:"auto"}),(0,A.jsx)(d.A,{title:X.formatMessage({id:"invert"}),arrow:!0,placement:"top",style:{color:"white",opacity:.5,fontSize:20,marginRight:10},children:(0,A.jsx)(b.A,{style:{color:"white",opacity:.5,fontSize:20,marginRight:10}})})]}),(0,A.jsxs)(a.A,{style:{minHeight:"auto",justifyContent:"center",alignContent:"center",backgroundColor:G.palette.grey[900],borderRadius:10,color:"white",marginTop:10},children:[(0,A.jsx)(d.A,{title:X.formatMessage({id:"rotateLeft"}),arrow:!0,placement:"top",style:{color:"white",opacity:.5,fontSize:20},children:(0,A.jsx)(c.A,{onClick:function(){Z(I-90),e((0,s.n_)({contrast:H,brightness:P,saturation:N,invert:U,rotation:I-90}))},children:(0,A.jsx)(w.A,{style:{color:"white",opacity:.5,fontSize:20}})})}),(0,A.jsx)(d.A,{title:X.formatMessage({id:"rotateRight"}),arrow:!0,placement:"top",style:{color:"white",opacity:.5,fontSize:20},children:(0,A.jsx)(c.A,{onClick:function(){Z(I+90),e((0,s.n_)({contrast:H,brightness:P,saturation:N,invert:U,rotation:I+90}))},children:(0,A.jsx)(x.A,{style:{color:"white",opacity:.5,fontSize:20}})})})]})]})]})}},48210:function(t,e,n){n.d(e,{_e:function(){return s},rQ:function(){return c},u5:function(){return a},vt:function(){return i}});var o=n(88120),r=n(91280);function i(t){var e={method:"POST",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch((0,o.H6)()+"/snaps",e).then((function(t){return 201!==t.status?Promise.reject(t):t.json()}))}function s(t){var e={method:"POST",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch((0,o.H6)()+"/users/snaps",e).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function a(t){var e="/snaps/"+t,n={method:"DELETE",headers:new Headers({Authorization:(0,r.g)()}),mode:"cors",cache:"default"};return fetch((0,o.H6)()+e,n).then((function(t){return 204!==t.status?Promise.reject(t):t}))}function c(t){var e="/snaps/"+t,n={method:"GET",headers:new Headers({Authorization:(0,r.g)()}),mode:"cors",cache:"default"};return fetch((0,o.H6)()+e,n).then((function(t){return 200!==t.status?Promise.reject(t):t.blob()}))}},90151:function(t,e,n){n.d(e,{D8:function(){return E},P4:function(){return F},RI:function(){return B},Ts:function(){return D},Zv:function(){return M},a7:function(){return q},i0:function(){return I},kx:function(){return L},oS:function(){return P},qV:function(){return N},vs:function(){return Z}});var o,r,i,s=n(89379),a=n(29408),c=n(84538),l=n(17583),u=n(50208),d=n(9920),h=n(49658),p=n(2936),f=n.n(p),m=[],g=[],b=[],y=!1,v=0,w=1e3,x=null,A=null,j=null,C=null,z=null,S=0,T=h.UMr(h.t55),H=!0;function k(t){if(t.target.classList.contains("block_viewer")){var e=x.enabled;x.enabled=!1;var n=function(){x.enabled=e,document.removeEventListener("mouseup",n)};document.addEventListener("mouseup",n)}}function E(t){z=t}function L(t){0}function P(t){0}function R(t,e,n,o,r){var i=document.querySelector(".tooltip");if(i)i.style.left=e+"px",i.style.top=n+"px",i.style.opacity=1,i.style.backgroundColor=o,i.style.boxShadow="0px 0px 5px 0px "+o,i.innerHTML=t;else{var s=document.createElement("div");s.classList.add("tooltip"),s.style.left=e+"px",s.style.top=n+"px",s.style.opacity=1,s.style.backgroundColor=o,s.style.boxShadow="0px 0px 5px 0px "+o,s.innerHTML=t,document.body.appendChild(s)}}function O(){var t=document.querySelector(".tooltip");t&&t.remove()}function M(t){C=t}function N(t,e,n,r){var i=o.position.y,s=o.position.z,a=100*t;if(r){var c=100*(t-1);c<0&&(c=0),a=100*t+(o.position.x-c)}o.position.set(a,i,s),o.rotation.set(0,0,0),v=t,U(t,e,n)}var B=function(t){var e=m[v-1];if(e){var n=e.element.style.filter;n.includes("contrast")&&(t.contrast||0===t.contrast)?n=n.replace(/contrast\((.*?)\)/,"contrast("+t.contrast+")"):(t.contrast||0===t.contrast)&&(n+=" contrast("+t.contrast+")"),n.includes("brightness")&&(t.brightness||0===t.brightness)?n=n.replace(/brightness\((.*?)\)/,"brightness("+t.brightness+")"):(t.brightness||0===t.brightness)&&(n+=" brightness("+t.brightness+")"),n.includes("saturate")&&(t.saturation||0===t.saturation)?n=n.replace(/saturate\((.*?)\)/,"saturate("+t.saturation+")"):(t.saturation||0===t.saturation)&&(n+=" saturate("+t.saturation+")"),n.includes("invert")&&(t.invert||0===t.invert)?n=n.replace(/invert\((.*?)\)/,"invert("+t.invert+")"):(t.invert||0===t.invert)&&(n+=" invert("+t.invert+")"),e.element.style.filter=n;var o=e.element.style.transform;o.includes("rotate")&&(t.rotation||0===t.rotation)?o=o.replace(/rotate\((.*?)\)/,"rotate("+t.rotation+"deg)"):(t.rotation||0===t.rotation)&&(o+=" rotate("+t.rotation+"deg)"),e.element.style.transform=o}};function D(t,e,n,s){var d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;H=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],A=e,T=h.UMr(h.t55);var p=window.innerWidth/window.innerHeight,f=A.getBoundingClientRect();(o=new a.qUd(w*p/-2,w*p/2,w/2,w/-2,1,1e3)).position.set(-0,0,200),o.rotation.set(0,0,0),r=new a.Z58;for(var j=1;j<=t;j++)b.push(!1),E(72,72/n,j,new a.Pq0(1e4*Math.random()-5e3,2e3*Math.random()-1e3,2e3*Math.random()),new a.O9p(0,0,0));for(var C={line:[]},z=0;z<m.length;z++){var S=new a.B69;S.position.x=100*z,S.position.y=0,S.position.z=0,C.line.push(S)}function E(t,e,i,a,l){var u=document.createElement("div");u.style.width=t+"px",u.style.height=e+"px",u.style.backgroundColor="white",u.style.backgroundSize="contain",u.style.backgroundRepeat="no-repeat",u.style.backgroundPosition="center",u.style.display="flex",u.style.justifyContent="center",u.style.alignItems="center",u.className="plane",u.addEventListener("pointerdown",(function(){if(v===i)y||(y=!0);else{v=i,y=!0;var t=o.position.y,e=o.position.z;o.position.set(100*v,t,e)}U(i,n,s)}));var d=new c.on(u);d.position.copy(a),d.rotation.copy(l),r.add(d),m.push(d),g.push(u)}A.style.height=f.height+"px",(i=new c.a0).setSize(f.width,f.height),i.domElement.style.position="absolute",i.domElement.style.top=0,A.appendChild(i.domElement),o.zoom=.45,(x=new l.N(o,i.domElement)).minZoom=.3,x.maxZoom=5,x.zoomSpeed=2,x.enableRotate=!1,x.enablePan=!1,x.enableZoom=!1,x.mouseButtons={LEFT:a.kBv.PAN,MIDDLE:a.kBv.DOLLY,RIGHT:a.kBv.ROTATE},i.domElement.addEventListener("mousedown",k,!0),x.update(),setTimeout((function(){!function(t,e){u.Ay.removeAll();for(var n=0;n<m.length;n++){var o=m[n],r=t[n];o.position.x=r.position.x,o.position.y=r.position.y,o.position.z=r.position.z,o.element.style.transition="all "+e*Math.random()+"s cubic-bezier(0.215, 0.610, 0.355, 1)"}}(C.line,3)}),350),setTimeout((function(){y=!0,v=d,U(d,n,s)}),1e3),window.addEventListener("resize",_)}function J(t){var e=v-1,n=e-10,o=e+10;n<0&&(n=0,o=20),o>m.length&&(n=m.length-20,o=m.length);for(var r=[],i=n;i<o;i++)!1===b[i]&&r.push(i);d.f2(t,r,"small",H).then((function(t){for(var e=0;e<r.length;e++){b[r[e]]=!0;var n=m[r[e]],o="data:image/jpg;base64,"+t[e].data;v!==r[e]+1&&(n.element.style.backgroundColor="transparent",n.element.style.backgroundImage='url("'+o+'")')}}))}function U(t,e,n){if(C(t),y){j&&clearTimeout(j),j=setTimeout((function(){J(n),function(t){d.f2(t,[v-1],"big",H).then((function(t){try{var e=m[v-1],n="data:image/jpg;base64,"+t[0].data;e.element.style.backgroundColor="transparent",e.element.style.backgroundImage='url("'+n+'")'}catch(o){console.log(o)}}))}(n)}),250),x.enablePan=!0,x.enableZoom=!0,x.update();for(var o=0;o<t-1;o++){for(var r=m[o];r.element.firstChild;)r.element.removeChild(r.element.firstChild);r.element.style.transition="all 1s cubic-bezier(0.215, 0.610, 0.355, 1)",r.element.style.width="72px",r.element.style.height=72/e+"px",r.position.x=100*o-1e3,r.position.y=0,r.position.z=0}for(var i=t;i<m.length;i++){for(var s=m[i];s.element.firstChild;)s.element.removeChild(s.element.firstChild);s.element.style.transition="all 1s cubic-bezier(0.215, 0.610, 0.355, 1)",s.element.style.width="72px",s.element.style.height=72/e+"px",s.position.x=100*i+1e3,s.position.y=0,s.position.z=0}var a=m[t-1];a&&(a.element.style.transition="all 1s cubic-bezier(0.215, 0.610, 0.355, 1)",a.element.style.width="1440px",a.element.style.height=1440/e+"px",a.position.z=1e3,a.position.y=10,a.position.x=100*(t-1))}else{j&&clearTimeout(j),j=setTimeout((function(){J(n)}),250),x.enablePan=!1,x.enableZoom=!1,x.update();for(var c=0;c<t-1;c++){var l=m[c];l.element.style.transition="all 1s cubic-bezier(0.215, 0.610, 0.355, 1)",l.element.style.width="72px",l.element.style.height=72/e+"px",l.position.x=100*c,l.position.y=0,l.position.z=0}for(var u=t;u<m.length;u++){var h=m[u];h.element.style.transition="all 1s cubic-bezier(0.215, 0.610, 0.355, 1)",h.element.style.width="72px",h.element.style.height=72/e+"px",h.position.x=100*u,h.position.y=0,h.position.z=0}var p=m[t-1];p.element.style.transition="all 1s cubic-bezier(0.215, 0.610, 0.355, 1)",p.element.style.width="72px",p.element.style.height=72/e+"px",p.position.x=100*(t-1),p.position.z=1e3,p.position.y=10}}function q(t){var e=m[t-1];if(e.element)for(;e.element.firstChild;)e.element.removeChild(e.element.firstChild);e.element.classList.remove("dark")}function F(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t,e){};q(e);var r=new Image;r.src=g[e-1].style.backgroundImage.slice(5,-2);var i=r.width/r.height,a=i>1?100:100*i,c=i>1?100/i:100,l=document.createElementNS("http://www.w3.org/2000/svg","svg");function u(t){return Array.isArray(t.label)?t.label.length>0?"O"===t.label[0]?"transparent":T(t.label[0]):void 0:t.type?T(t.type):t.label?T(t.label):"transparent"}if(l.setAttribute("width","".concat(a,"%")),l.setAttribute("height","".concat(c,"%")),l.setAttribute("viewBox","0 0 ".concat(a," ").concat(c)),l.setAttribute("preserveAspectRatio","none"),null===z)t.forEach((function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","rect"),r=100*t.bbox.y/i;i<1&&(r=100*t.bbox.y);var s=100*t.bbox.height/i;i<1&&(s=100*t.bbox.height);var a=100*t.bbox.x*i;i>1&&(a=100*t.bbox.x);var c=100*t.bbox.width*i;i>1&&(c=100*t.bbox.width),n.setAttribute("x",a),n.setAttribute("y",r),n.setAttribute("width",c),n.setAttribute("height",s),n.setAttribute("class","block_viewer"),n.setAttribute("fill",u(t,n)),n.setAttribute("fill-opacity",.3),n.addEventListener("mousemove",(function(e){!function(t,e,n){var o=t.clientX,r=t.clientY;Array.isArray(e.label)?e.label.length>0&&("O"===e.label[0]?(n.setAttribute("stroke","black"),n.setAttribute("stroke-width",.05),n.setAttribute("fill","transparent")):(n.setAttribute("stroke","black"),n.setAttribute("stroke-width",.05),n.setAttribute("fill","transparent"),R(e.label[0],o,r-20,u(e),n.getBoundingClientRect().height))):e.type?(n.setAttribute("stroke","black"),n.setAttribute("stroke-width",.05),n.setAttribute("fill","transparent"),R(e.type,o,r-20,u(e),n.getBoundingClientRect().height)):e.label?(n.setAttribute("stroke","black"),n.setAttribute("stroke-width",.05),n.setAttribute("fill","transparent"),R(e.label,o,r-20,u(e),n.getBoundingClientRect().height)):(n.setAttribute("stroke","black"),n.setAttribute("stroke-width",.05),n.setAttribute("fill","transparent"),R(e.text,o,r-20,T(e.text),n.getBoundingClientRect().height))}(e,t,n)})),n.addEventListener("mouseout",(function(){n.setAttribute("stroke","transparent"),n.setAttribute("fill",u(t)),O()})),n.addEventListener("mousedown",(function(n){!function(t,e,n){o(e,n)}(0,t,e)})),l.appendChild(n)}));else{O();var d=document.createElementNS("http://www.w3.org/2000/svg","rect"),h=100*z.bbox.y/i;i<1&&(h=100*z.bbox.y);var p=100*z.bbox.height/i;i<1&&(p=100*z.bbox.height);var b=100*z.bbox.x*i;i>1&&(b=100*z.bbox.x);var y=100*z.bbox.width*i;i>1&&(y=100*z.bbox.width),d.setAttribute("x",b),d.setAttribute("y",h),d.setAttribute("width",y),d.setAttribute("height",p),d.setAttribute("class","block_viewer"),d.setAttribute("fill",u(z,d)),d.setAttribute("fill-opacity",.3);var v=document.createElementNS("http://www.w3.org/2000/svg","circle");v.setAttribute("cx",b+y),v.setAttribute("cy",h+p),v.setAttribute("r",Math.max(.5,.025)),v.setAttribute("fill","#4285F4"),v.setAttribute("stroke","white"),v.setAttribute("stroke-width","0.2"),v.setAttribute("class","resize-handle"),v.style.cursor="nwse-resize",f()(d).resizable({edges:{left:!1,right:!0,bottom:!0,top:!1},listeners:{move:function(t){var n=m[e-1].element.querySelector("svg").getBoundingClientRect(),r=parseFloat(d.getAttribute("x")),u=parseFloat(d.getAttribute("y")),h=(t.client.x-n.left)/S,p=(t.client.y-n.top)/S,f=h/n.width*a*S-r,g=p/n.height*c*S-u;d.setAttribute("width",Math.max(1,f)),d.setAttribute("height",Math.max(1,g));var b=l.querySelector(".resize-handle");b&&(b.setAttribute("cx",r+Math.max(1,f)),b.setAttribute("cy",u+Math.max(1,g)));var y={x:r/(i<1?100*i:100),y:u/(i>1?100/i:100),width:f/(i<1?100*i:100),height:g/(i>1?100/i:100)},v=(0,s.A)({},z);v.bbox=y,o(v)}}}).draggable({listeners:{move:function(t){var n=parseFloat(t.target.getAttribute("x")),r=parseFloat(t.target.getAttribute("y")),u=parseFloat(t.target.getAttribute("width")),d=parseFloat(t.target.getAttribute("height"));u/=a,d/=c;var h=m[e-1].element.getBoundingClientRect().width,p=r/100*h;n=(n=n/100*h+t.delta.x)/h*100,r=(r=p+t.delta.y)/h*100,t.target.setAttribute("x",n),t.target.setAttribute("y",r);var f=l.querySelector(".resize-handle");f&&(f.setAttribute("cx",n+u*a),f.setAttribute("cy",r+d*c));var g={x:n/(i<1?100*i:100),y:r/(i>1?100/i:100),width:u,height:d},b=(0,s.A)({},z);b.bbox=g,o(b)}}}),v.addEventListener("mousedown",(function(t){var e=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,clientX:t.clientX,clientY:t.clientY,button:t.button});t.stopPropagation(),t.preventDefault(),d.dispatchEvent(e)})),l.appendChild(v),l.appendChild(d)}m[e-1].element.appendChild(l)}function _(){var t=A.getBoundingClientRect(),e=window.innerWidth/window.innerHeight;A.style.height=t.width/e+"px",o.left=-w*e/2,o.right=w*e/2,o.top=w/2,o.bottom=-w/2,o.updateProjectionMatrix(),i.setSize(t.width,t.width/e)}function I(){i&&(requestAnimationFrame(I),o.rotation.set(0,0,0),S=o.zoom,.5===o.zoom&&o.position.set(100*(v-1),0,200),i.render(r,o))}function Z(){r&&i&&(i.domElement.removeEventListener("mousedown",k,!0),r.clear()),window.removeEventListener("resize",_),m=[],b=[],g=[],i=null,r=null,T=h.UMr(h.t55)}}}]);
//# sourceMappingURL=8213.6767b16a.chunk.js.map