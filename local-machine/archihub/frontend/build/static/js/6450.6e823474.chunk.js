"use strict";(self.webpackChunkarchihub=self.webpackChunkarchihub||[]).push([[6450],{5670:function(e,t,r){r.d(t,{BD:function(){return c},C5:function(){return j},Gm:function(){return g},HU:function(){return f},Hc:function(){return l},Jt:function(){return d},S:function(){return b},UK:function(){return h},XG:function(){return m},hG:function(){return y},ke:function(){return p},kz:function(){return u},nH:function(){return x},qM:function(){return v},vE:function(){return s},vt:function(){return i},yo:function(){return a}});var n=r(88120),o=r(91280);function a(e){var t={method:"PUT",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch((0,n.H6)()+"/users/update",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function s(e){var t={method:"PUT",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch((0,n.H6)()+"/users/update-me",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function i(e){var t={method:"POST",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch((0,n.H6)()+"/users/register",t).then((function(e){return 201!==e.status?Promise.reject(e):e.json()}))}function u(e){var t={method:"POST",headers:new Headers({"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch((0,n.H6)()+"/users/register-me",t).then((function(e){return 201!==e.status?Promise.reject(e):e.json()}))}function c(e){var t={method:"POST",headers:new Headers({"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch((0,n.H6)()+"/users/forgot-password",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function d(){var e={method:"GET",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch((0,n.H6)()+"/users/me",e).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function l(e){var t="/users/"+e,r={method:"GET",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch((0,n.H6)()+t,r).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function h(e){var t={method:"POST",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch((0,n.H6)()+"/users",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function f(e){var t={method:"POST",headers:{Authorization:(0,o.g)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch((0,n.H6)()+"/users/token",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function p(e){var t={method:"POST",headers:{Authorization:(0,o.g)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch((0,n.H6)()+"/users/admin-token",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function m(e){var t={method:"POST",headers:{Authorization:(0,o.g)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch((0,n.H6)()+"/users/node-token",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function b(e){var t={method:"POST",headers:{Authorization:(0,o.g)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch((0,n.H6)()+"/users/viz-token",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function g(e){var t={method:"POST",headers:{Authorization:(0,o.g)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch((0,n.H6)()+"/users/favorites",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function y(e){var t={method:"DELETE",headers:{Authorization:(0,o.g)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch((0,n.H6)()+"/users/delete",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function j(e){var t={method:"DELETE",headers:{Authorization:(0,o.g)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch((0,n.H6)()+"/users/favorites",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function v(e){var t={method:"POST",headers:{Authorization:(0,o.g)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch((0,n.H6)()+"/users/favorites_list",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function x(){var e={method:"GET",headers:{Authorization:(0,o.g)(),"Content-Type":"application/json"},mode:"cors",cache:"default"};return fetch((0,n.H6)()+"/users/requests",e).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}},27631:function(e,t,r){var n=r(24994);t.A=void 0;var o=n(r(40039)),a=r(70579);t.A=(0,o.default)((0,a.jsx)("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"}),"PersonOutline")},72378:function(e,t,r){r.d(t,{EL:function(){return u},WB:function(){return c}});var n=r(89379),o=(r(65043),r(26240)),a=r(81551),s=r(83003),i=r(70579),u=function(e){var t=(0,o.A)(),r=(0,s.d4)((function(e){return e.app.isDarkMode})),u=(0,a.A)((function(e){return{bloque:{"&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:t.palette.primary.main,border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:t.palette.primary.main},"&::-webkit-scrollbar-thumb:active":{background:t.palette.primary.main},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}}}}))();return(0,i.jsx)("div",{id:e.id,style:(0,n.A)({width:"100%",height:"calc(100% - 40px)",display:"flex",margin:"10px",borderRadius:"10px",padding:"10px",background:r?t.palette.grey[900]:"white",boxShadow:"0px 0px 1px rgba(0,0,0,0.1)",justifyContent:"center",alignItems:"center",alignContent:"center",flexWrap:"wrap"},e.style),className:u.bloque,onScroll:e.onScroll,children:e.children})},c=function(e){var t=(0,o.A)(),r=(0,a.A)((function(e){return{bloque:{"&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:t.palette.grey[500],border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:t.palette.grey[500]},"&::-webkit-scrollbar-thumb:active":{background:t.palette.grey[500]},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}}}}))();return(0,i.jsx)("div",{id:e.id,style:(0,n.A)({padding:10,backgroundColor:t.palette.grey[100],borderRadius:5,color:t.palette.grey[600],height:100,overflow:"auto",width:"100%"},e.style),className:r.bloque,children:e.children})};t.Ay=function(e){var t=e.children,r=e.style;e.onScroll;return(0,i.jsx)("section",{style:(0,n.A)({display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh"},r),children:t})}},86450:function(e,t,r){r.r(t),r.d(t,{Main:function(){return k}});var n=r(89379),o=r(5544),a=r(65043),s=r(83003),i=r(73216),u=r(81551),c=r(16702),d=r(66187),l=r(5670),h=r(19853),f=r(27631),p=r(24394),m=r(63516),b=r(11238),g=r(43288),y=r(58140),j=r(26240),v=r(72378),x=r(70579),w=(0,u.A)((function(e){return{item:{paddingTop:10,paddingLeft:5,alignContent:"flex-start",alignItems:"center",textAlign:"left",borderBottom:"1px solid #ccc",paddingBottom:20,"& h6":{margin:0,marginBottom:5,color:"#666",fontWeight:"bold"},"&:last-child":{borderBottom:"none",borderBottomLeftRadius:10,borderBottomRightRadius:10},"&:nth-child(odd)":{background:e.palette.grey[100]},"&:first-child":{marginTop:10},"& label":{width:150,textAlign:"left",paddingRight:10,fontWeight:"bold",color:"#666","& span":{color:"red",marginLeft:5},"&.simple":{fontWeight:"normal"}},"& input":{width:"100%",padding:5,border:"1px solid #ccc",borderTopLeftRadius:5,borderBottomLeftRadius:5,borderRight:"none"},"& textarea":{width:"100%",padding:5,borderRadius:5,border:"1px solid #ccc"},"& select":{width:"100%",padding:5,borderRadius:5,border:"1px solid #ccc"},"& input[type=checkbox]":{width:"auto"},"& input, & textarea, & select":{"&:focus":{outline:"none",border:"1px solid rgba(42, 80, 130, 0.8)"}},"&.error":{background:"rgba(255,0,0,0.05)","& label":{color:"red"}}},generateBlock:{display:"flex"},leftInput:{borderTopRightRadius:0,borderBottomRightRadius:0},rightButton:{borderTopLeftRadius:0,borderBottomLeftRadius:0,boxShadow:"none"}}})),k=function(e){var t=w(),r=(0,a.useState)(!1),u=(0,o.A)(r,2),k=u[0],A=u[1],C=(0,a.useState)(null),S=(0,o.A)(C,2),T=S[0],P=S[1],R=(0,a.useState)(null),H=(0,o.A)(R,2),O=H[0],B=H[1],z=(0,a.useState)(null),E=(0,o.A)(z,2),N=E[0],q=E[1],L=(0,a.useState)({}),J=(0,o.A)(L,2),W=J[0],D=J[1],G=((0,s.d4)((function(e){return e.user})),(0,i.g)().id),M=(0,y.M)().showAlert,I=(0,i.Zp)(),U=(0,j.A)(),F=(0,s.d4)((function(e){return e.app.isDarkMode}));return(0,a.useEffect)((function(){G?(A(!0),l.Hc(G).then((function(e){var t=(0,n.A)({},e);h.O0().then((function(e){var r=[];t.roles.forEach((function(t){var n=e.options.find((function(e){return e.id===t}));r.push(n)})),t.roles=r,B(e.options),h.WP().then((function(e){var r=[];t.accessRights.forEach((function(t){var n=e.options.find((function(e){return e.id===t}));r.push(n)})),t.accessRights=r,q(e.options),P(t)}))}))}))):(A(!1),P({name:"",username:"",password:"",confirmPassword:"",roles:[],accessRights:[]}),h.O0().then((function(e){B(e.options)})),h.WP().then((function(e){q(e.options)})))}),[]),(0,x.jsx)(v.Ay,{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-start"},children:(0,x.jsxs)(v.EL,{style:{width:"100%",maxWidth:700,display:"block",overflow:"auto",placeContent:"flex-start"},children:[!T&&(0,x.jsx)(g.A,{}),T&&O&&N&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{style:{display:"flex"},children:[(0,x.jsx)(b.nA,{startIcon:(0,x.jsx)(f.A,{}),label:T.name,style:{borderRadius:5,backgroundColor:F?U.palette.grey[700]:U.palette.grey[200],color:U.palette.grey[500],fontSize:20,margin:2},disabled:!0}),(0,x.jsx)(b.nA,{label:T.username,style:{borderRadius:5,backgroundColor:F?U.palette.grey[700]:U.palette.grey[200],color:U.palette.grey[500],fontSize:16,margin:2},disabled:!0})]}),(0,x.jsx)(m.l1,{initialValues:T,onSubmit:function(e,t){var r=t.setSubmitting;k?M("confirm","\xbfDesea guardar los cambios?").then((function(t){t&&l.yo(JSON.stringify(e)).then((function(e){M("success","El usuario se ha guardado correctamente"),I("/admin/users")})).catch((function(e){r(!1),e.json().then((function(e){D(e.errors),M("error",e.msg)}))}))})):M("confirm","\xbfDesea crear un nuevo usuario?").then((function(t){t&&l.vt(JSON.stringify(e)).then((function(e){M("success","El usuario se ha creado correctamente"),I("/admin/users")})).catch((function(e){r(!1),e.json().then((function(e){D(e.errors),M("error",e.msg)}))}))}))},children:function(e){var r=e.values,n=(e.errors,e.touched,e.handleChange),o=e.handleBlur,a=e.handleSubmit,s=e.isSubmitting,i=e.setFieldValue;return(0,x.jsxs)("form",{onSubmit:a,children:[!k&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(p.BR,{name:"Nombre",value:r.name,handleChange:n,handleBlur:o,errors:null===W||void 0===W?void 0:W.name,required:!0,id:"name"}),(0,x.jsx)(p.BR,{name:"Correo electr\xf3nico",value:r.username,handleChange:n,handleBlur:o,errors:null===W||void 0===W?void 0:W.username,required:!0,id:"username"}),(0,x.jsx)(p.BR,{name:"Contrase\xf1a",value:r.password,handleChange:n,handleBlur:o,errors:null===W||void 0===W?void 0:W.password,required:!0,id:"password",type:"password"}),(0,x.jsx)(p.BR,{name:"Confirmar contrase\xf1a",value:r.confirmPassword,handleChange:n,handleBlur:o,errors:null===W||void 0===W?void 0:W.confirmPassword,required:!0,id:"confirmPassword",type:"password"})]}),(0,x.jsxs)(c.A,{className:t.item,sx:{background:F?"rgba(255,255,255,0.1) !important":"rgba(255,255,255,0.1)"},children:[(0,x.jsxs)(c.A,{children:[(0,x.jsx)(d.A,{variant:"h6",style:{color:F?U.palette.grey[300]:U.palette.grey[700],fontWeight:"normal"},children:"Roles de usuario"}),(0,x.jsx)(d.A,{variant:"body1",style:{fontSize:14,color:F?U.palette.grey[300]:U.palette.grey[700]},children:"Los roles de usuario desempe\xf1an un papel fundamental en el aplicativo, ya que permiten definir las habilidades y capacidades de cada usuario dentro de la herramienta."})]}),(0,x.jsx)(p.lH,{label:"Roles",options:O,multiple:!0,value:r.roles,handleChange:function(e){i("roles",e)}})]}),(0,x.jsxs)(c.A,{className:t.item,children:[(0,x.jsxs)(c.A,{children:[(0,x.jsx)(d.A,{variant:"h6",style:{color:F?U.palette.grey[300]:U.palette.grey[700],fontWeight:"normal"},children:"Niveles de acceso del usuario"}),(0,x.jsx)(d.A,{variant:"body1",style:{fontSize:14,color:F?U.palette.grey[300]:U.palette.grey[700]},children:"Los niveles de acceso juegan un papel crucial en la aplicaci\xf3n, ya que determinan qu\xe9 informaci\xf3n puede acceder un usuario. Por defecto un usuario puede ver todo el contenido P\xfablico."})]}),(0,x.jsx)(p.lH,{label:"accessRights",options:N,multiple:!0,value:r.accessRights,handleChange:function(e){i("accessRights",e)}})]}),(0,x.jsx)(c.A,{style:{display:"flex",justifyContent:"flex-end",gap:10,marginTop:10},children:(0,x.jsx)(b.nA,{type:"submit",label:k?"Guardar cambios":"Crear usuario",disabled:s,style:{margin:5,width:"auto"}})})]})}})]})]})})};t.default=k}}]);
//# sourceMappingURL=6450.6e823474.chunk.js.map