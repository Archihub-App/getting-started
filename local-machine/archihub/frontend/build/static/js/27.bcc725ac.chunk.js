(this.webpackJsonpsim=this.webpackJsonpsim||[]).push([[27],{1371:function(e,t,n){"use strict";n.r(t),n.d(t,"BloqueContenido",(function(){return b})),n.d(t,"Main",(function(){return g}));var a=n(35),r=n(2),o=n.n(r),i=n(50),c=n(139),l=n(940),s=n(941),u=n(843),d=n(926),f=(n(938),n(943),n(950)),m=n.n(f),p=(n(944),n(46),n(939),n(138),n(989)),h=Object(u.a)((function(e){return{bloque:{padding:"10px",backgroundColor:"rgba(255,255,255,.9)",margin:5,width:"100%",height:"100%",overflow:"auto",position:"relative",borderRadius:10,border:"3px solid #fff","&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:"#56749a",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:"#56749a"},"&::-webkit-scrollbar-thumb:active":{background:"#56749a"},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}},tituloBloque:{top:0,fontSize:15,fontWeight:"bold",padding:"10px 15px",position:"sticky",zIndex:10,width:"100%",left:0,background:"#e6e6e6",borderTopLeftRadius:10,borderTopRightRadius:10,color:"#56749a",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},breadcrumbs:{padding:"5px 15px",color:"#fff",borderBottomLeftRadius:10,borderBottomRightRadius:10,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},linkBreadcrumb:{color:"#fff",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:200,display:"inline-block","&:hover":{color:"#fff"}},selectedBread:{color:"#fff !important",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:150,backgroundColor:"rgba(255,255,255,.2)",display:"inline-block",padding:"0 5px",borderRadius:2},columnas:{display:"flex",height:"calc(100vh - 150px)"},separador:{borderBottom:"1px solid #dcdcdc",paddingTop:25,paddingBottom:10,fontWeight:"bold",color:"#56749a","& svg":{marginRight:10,marginLeft:5,width:20,height:20,padding:3,backgroundColor:"#56749a",borderRadius:50,"& path":{fill:"#fff"}}},toolbar:{minHeight:"auto",padding:5,backgroundColor:"#56749a",color:"#fff",borderTopLeftRadius:10,overflow:"hidden","& h6":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",fontSize:16}},itemMenu:{display:"flex",alignItems:"center",padding:15,borderBottom:"1px solid #dcdcdc","& svg":{"& path":{fill:"#9fb0c6"}},"&:hover":{backgroundColor:e.palette.grey[100],cursor:"pointer"},"&.selected":{backgroundColor:"#9fb0c6",color:"#fff","& path":{fill:"#fff"}}}}})),b=function(e){var t=h();return o.a.createElement(d.a,{className:t.bloque,style:e.style},e.title&&o.a.createElement(d.a,{className:t.tituloBloque},e.title),e.topBar&&o.a.createElement(o.a.Fragment,null,e.topBar),e.children)},g=function(e){h();var t=Object(r.useState)(null),n=Object(a.a)(t,2),i=(n[0],n[1],Object(r.useState)(null)),c=Object(a.a)(i,2),u=(c[0],c[1],Object(r.useState)(!1)),d=Object(a.a)(u,2);d[0],d[1];Object(r.useEffect)((function(){}),[]);return o.a.createElement(s.a,null,o.a.createElement(l.a,{userRoles:e.user.roles,list:function(){var t=[];return t.push({name:"Volver",icon:o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null)),callback:function(){e.history.push("/dashboard")}}),t}()}),o.a.createElement(b,{style:{width:"calc(50% - 20px)",height:"calc(100vh - 100px)",overflow:"auto"},title:"Logs del sistema"},o.a.createElement(p.a,{selectedType:"logs",filters:{}})))};t.default=Object(i.b)((function(e){return{user:e.auth.user}}),c.a)(g)},944:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m}));var a=n(2),r=n.n(a),o=n(488),i=n(1406),c=n(202),l=n(1062),s=n(926),u=n(945),d=n.n(u),f=Object(o.a)(i.a)((function(e){var t=e.theme;return{backgroundColor:"light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[200],height:t.spacing(3),color:t.palette.text.primary,fontWeight:t.typography.fontWeightRegular,border:"1px solid #dcdcdc",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:300,"& svg":{width:15,marginLeft:10,marginRight:5}}})),m=Object(o.a)(i.a)((function(e){var t=e.theme;return{backgroundColor:"rgb(85 116 154)",height:t.spacing(3),color:"white",fontWeight:t.typography.fontWeightRegular,border:"1px solid #dcdcdc",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:300,"& svg":{width:15,marginLeft:10,marginRight:5},"& path":{fill:"#fff"}}}));t.c=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,{variant:"body2"},e.selectedType.description),r.a.createElement(l.a,{separator:r.a.createElement(d.a,{fontSize:"small",style:{margin:0}})},e.selectedType.parentsTypes.reverse().map((function(e,t){return r.a.createElement(f,{key:t,label:e.name})})),r.a.createElement(c.a,{variant:"body2",color:"text.primary"},e.selectedType.name)),e.selectedType.hierarchical&&r.a.createElement(s.a,null,r.a.createElement(c.a,{variant:"body2",color:"text.primary"},"Este tipo de contenido puede ser jer\xe1rquico entre si")),e.selectedType.metadata&&r.a.createElement(s.a,null,r.a.createElement(c.a,{variant:"body2",color:"text.primary"},"La estructura de metadatos es: ",e.selectedType.metadata.name)))}},953:function(e,t,n){"use strict";n.d(t,"k",(function(){return o})),n.d(t,"l",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"j",(function(){return b}));n(997);var a=n(46),r=n(204);function o(e){var t={method:"PUT",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch(a.e+"/users/update",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function i(e){var t={method:"PUT",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch(a.e+"/users/update-me",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function c(e){var t={method:"POST",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch(a.e+"/users/register",t).then((function(e){return 201!==e.status?Promise.reject(e):e.json()}))}function l(e){var t="/users/"+e,n={method:"GET",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch(a.e+t,n).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function s(e){var t={method:"POST",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch(a.e+"/users",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function u(e){var t={method:"POST",headers:{Authorization:Object(r.a)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(a.e+"/users/token",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function d(e){var t={method:"POST",headers:{Authorization:Object(r.a)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(a.e+"/users/admin-token",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function f(e){var t={method:"POST",headers:{Authorization:Object(r.a)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(a.e+"/users/node-token",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function m(e){var t={method:"POST",headers:{Authorization:Object(r.a)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(a.e+"/users/favorites",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function p(e){var t={method:"DELETE",headers:{Authorization:Object(r.a)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(a.e+"/users/favorites",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function h(e){var t={method:"POST",headers:{Authorization:Object(r.a)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(a.e+"/users/favorites_list",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function b(){var e={method:"GET",headers:{Authorization:Object(r.a)(),"Content-Type":"application/json"},mode:"cors",cache:"default"};return fetch(a.e+"/users/requests",e).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}},989:function(e,t,n){"use strict";var a=n(18),r=n(203),o=n(35),i=n(2),c=n.n(i),l=n(953),s=n(937),u=n(46),d=n(204);var f=n(938),m=n(969),p=function(e,t){var n,a=t.split("."),r=e,o=Object(m.a)(a);try{for(o.s();!(n=o.n()).done;){r=r[n.value]}}catch(i){o.e(i)}finally{o.f()}return r},h=n(843),b=n(930),g=n(1397),y=n(1398),v=n(1400),j=n(1396),E=n(1401),O=n(1387),T=n(1399),w=n(1402),x=n(1393),k=n(1404),S=n(1390),C=n(1391),P=n(955),z=n.n(P),R=n(942),A=n.n(R),N=n(979),B=n.n(N),F=n(960),J=n.n(F),L=n(138),W=n.n(L),q=n(36),H=n(1394),_=(n(951),Object(h.a)((function(e){return{btn_color:{color:"#869bb7 !important",padding:"5px !important",width:"30px !important",height:"30px !important",margin:"0 2px !important",border:"1px solid #c6d0dd !important","&:hover":{color:"#fff !important",backgroundColor:"#56749a !important"},"& .MuiSvgIcon-root":{width:"14px !important"}}}})));function I(e){e.onSelectAllClick;var t=e.order,n=e.orderBy,a=(e.numSelected,e.rowCount,e.onRequestSort,e.headCells);return c.a.createElement(E.a,null,c.a.createElement(T.a,null,a.map((function(e){return c.a.createElement(v.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"normal",sortDirection:n===e.id&&t},e.label)}))))}function D(e){e.numSelected;return c.a.createElement(O.a,{rowsPerPage:20,rowsPerPageOptions:[],count:e.total,page:e.page,onPageChange:function(t,n){e.setPage(n)}})}t.a=function(e){var t=Object(q.k)(),n=_(),m=Object(i.useState)([]),h=Object(o.a)(m,2),E=h[0],O=h[1],P=Object(i.useState)([]),R=Object(o.a)(P,2),N=R[0],F=R[1],L=c.a.useState(!1),G=Object(o.a)(L,2),U=G[0],M=(G[1],Object(i.useState)([])),V=Object(o.a)(M,2),K=V[0],Q=(V[1],Object(i.useState)(0)),X=Object(o.a)(Q,2),Y=X[0],Z=X[1],$=Object(i.useState)(0),ee=Object(o.a)($,2),te=ee[0],ne=ee[1];Object(i.useEffect)((function(){if(O([]),F([]),e.selectedType&&"string"!==typeof e.selectedType){e.filters.page=te,s.b(e.selectedType.slug,JSON.stringify(e.filters)).then((function(e){O(e),e.length>0&&Z(e[0].total)}));var t=e.selectedType.metadata.fields.map((function(e){return{destiny:e.destiny,label:e.label}}));t=[{destiny:"",label:""}].concat(Object(r.a)(t)),F(t=[{destiny:"",label:""},{destiny:"metadata.firstLevel.title",label:"T\xedtulo"},{destiny:"accessRights",label:"Derechos de acceso"}])}else if(e.selectedType&&"string"===typeof e.selectedType)if("users"===e.selectedType)l.g(JSON.stringify({page:te,filters:e.filters})).then((function(e){O(e.map((function(e){return Object(a.a)({},e)}))),e.length>0&&Z(e[0].total);F([{destiny:"",label:""},{destiny:"name",label:"Nombre"},{destiny:"username",label:"Usuario"},{destiny:"roles",label:"Roles"},{destiny:"accessRights",label:"Niveles de acceso"}])}));else if("logs"===e.selectedType)(function(e){var t={method:"POST",headers:new Headers({Authorization:Object(d.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch(u.e+"/logs",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))})(JSON.stringify({page:te,filters:e.filters})).then((function(e){O(e.map((function(e){return Object(a.a)({},e)}))),e.length>0&&Z(e[0].total);F([{destiny:"username",label:"Usuario"},{destiny:"action",label:"Evento"}])}));else if("plugins"===e.selectedType)f.g().then((function(e){O(e.plugins);F([{destiny:"name",label:"Nombre"},{destiny:"description",label:"Descripci\xf3n"},{destiny:"active",label:"Activo"}])})).catch((function(e){console.log(e)}));else if("tasks"===e.selectedType)f.j("beta").then((function(e){O(e);F([{destiny:"name",label:"Nombre"},{destiny:"status",label:"Estado"},{destiny:"",label:"Acciones"}])}));else if("files"!==e.selectedType){s.b(e.selectedType,JSON.stringify(e.filters)).then((function(e){O(e.resources)}));F([{destiny:"",label:""},{destiny:"metadata.firstLevel.title",label:"T\xedtulo"}])}else e.resourceId||s.c(JSON.stringify({page:te,filters:e.filters})).then((function(e){e.length>0&&Z(e[0].total),O(e.map((function(e){return Object(a.a)({},e)})));F([{destiny:"name",label:"T\xedtulo"},{destiny:"size",label:"Tama\xf1o"},{destiny:"parent",label:"Carpeta"}])}))}),[e.selectedType,e.filters,te]);var ae=function(e){t.push("/detail/".concat(e))};return E.length>0&&console.log(p(E[0],"accessRights")),c.a.createElement(c.a.Fragment,null,E.length>0&&c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,{sx:{width:"100%"}},c.a.createElement(x.a,{sx:{width:"100%",mb:2}},c.a.createElement(j.a,null,c.a.createElement(g.a,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:U?"small":"medium",padding:"none"},c.a.createElement(I,{numSelected:K.length,headCells:N}),c.a.createElement(y.a,null,E.map((function(a){return c.a.createElement(T.a,{hover:!0,role:"checkbox",tabIndex:-1,key:a.id,onClick:function(){}},N.map((function(r){return c.a.createElement(v.a,{component:"th",id:r.destiny,scope:"row",key:r.destiny,sx:{padding:"6px 2px",fontSize:"1rem",minHeight:"auto"}},""!==r.label&&"active"!==r.destiny&&"accessRights"!==r.destiny&&c.a.createElement(c.a.Fragment,null,("string"===typeof p(a,r.destiny)||"number"===typeof p(a,r.destiny))&&c.a.createElement(c.a.Fragment,null,p(a,r.destiny)),Array.isArray(p(a,r.destiny))&&c.a.createElement(c.a.Fragment,null,p(a,r.destiny).map((function(t,n){return c.a.createElement(c.a.Fragment,null,"users"===e.selectedType&&c.a.createElement(H.a,{size:"small",label:t,style:{margin:"2px"}}),"files"===e.selectedType&&c.a.createElement(S.a,{onClick:function(){ae(t.id)}},n))})))),""===r.label&&c.a.createElement(w.a,{disableGutters:!0,variant:"dense",style:{minHeight:"auto",display:"flex",justifyContent:"center"}},"tasks"!==e.selectedType&&c.a.createElement(k.a,{className:n.btn_color,size:"small",variant:"contained",onClick:function(){return n=a.id,void("users"===e.selectedType?t.push("/admin/users/edit/".concat(n)):t.push("/cataloging/".concat(e.selectedType.slug,"/edit/").concat(n)));var n}},c.a.createElement(A.a,null)),"users"!==e.selectedType&&c.a.createElement(c.a.Fragment,null,c.a.createElement(k.a,{className:n.btn_color,size:"small",variant:"contained",onClick:function(){return ae(a.id)}},c.a.createElement(B.a,null)),c.a.createElement(k.a,{className:n.btn_color,size:"small",variant:"contained"},c.a.createElement(J.a,null)),c.a.createElement(k.a,{className:n.btn_color,size:"small",variant:"contained",onClick:function(){return e=a.id,void W.a.fire({title:"\xbfEst\xe1s seguro?",text:"No podr\xe1s revertir esta acci\xf3n",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar"}).then((function(t){t.isConfirmed&&s.a(e).then((function(e){W.a.fire({title:"Eliminado",text:"El recurso ha sido eliminado",icon:"success",confirmButtonText:"Aceptar"}).then((function(){window.location.reload()}))})).catch((function(e){e.json().then((function(e){W.a.fire({title:"Error",text:e.msg,icon:"error",confirmButtonText:"Aceptar"})}))}))}));var e}},c.a.createElement(z.a,null)))),"active"===r.destiny&&c.a.createElement(w.a,{disableGutters:!0,variant:"dense"},c.a.createElement(C.a,{checked:a.active,onChange:function(t){e.onPluginChange(a.slug,t.target.checked).then((function(){W.a.fire({title:"Actualizado",text:"El plugin ha sido actualizado. Para que los cambios surtan efecto, es necesario reiniciar el servidor.",icon:"success",confirmButtonText:"Aceptar"}),f.g().then((function(e){O(e.plugins)})).catch((function(e){console.log(e)}))}))}})),"accessRights"===r.destiny&&p(a,r.destiny)&&c.a.createElement(c.a.Fragment,null,Array.isArray(p(a,r.destiny))&&c.a.createElement(c.a.Fragment,null,p(a,r.destiny).map((function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement(H.a,{size:"small",label:e,style:{margin:"2px"}}))})))))})))}))),"plugins"!==e.selectedType&&c.a.createElement(D,{page:te,setPage:ne,total:Y})))))))}}}]);
//# sourceMappingURL=27.bcc725ac.chunk.js.map