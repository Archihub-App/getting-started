"use strict";(self.webpackChunkarchihub=self.webpackChunkarchihub||[]).push([[621],{94072:function(e,t,n){n.d(t,{G:function(){return S},A:function(){return L}});var i=n(5544),a=n(65043),r=n(81551),o=n(16702),s=n(9989),l=n(60436),c=n(71322),d=n(51962),p=n(2050),u=n(48734),f=n(30279),g=n(35721),h=n(85473),m=n(39244),y=n(21337),x=n(44834),v=n(78717),j=n(33664),A=n(88120),w=n(53536),b=n(26240),k=n(70579),T=function(e){var t=(0,b.A)(),n=(0,r.A)((function(e){return{check:{padding:0},icon:{marginLeft:t.spacing(2),marginRight:t.spacing(1),minWidth:"auto","& path":{fill:t.palette.primary.main}},text:{"& span":{display:"inline-block",padding:"0 10px",fontSize:"14px",transition:"all 0.3s ease-in-out"},"&.selected span":{background:t.palette.primary.light,borderRadius:"5px",color:t.palette.primary.main}}}}))(),o=(0,a.useState)(!1),s=(0,i.A)(o,2),l=s[0],f=s[1],g=(0,a.useState)(!1),h=(0,i.A)(g,2),m=h[0],y=h[1];(0,a.useEffect)((function(){if((0,w.isArray)(e.path)){var t=e.path.find((function(t){return!!t&&t.id===e.id}));y(!!t)}}),[e.path]),(0,a.useEffect)((function(){if(e.selected)if(e.selected.length>0){var t=e.selected.find((function(t){return!!t&&t.id===e.id}));f(!!t)}else f(!1);else f(!1)}),[e.selected]);var x=function(){e.setFondo(e.original,e.parent)};return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(c.Ay,{className:e.class,style:{padding:0},children:[(e.activeTypes.filter((function(t){return t.slug===e.original.post_type}))[0].direct||e.directMode)&&(0,k.jsx)(d.A,{checked:l,className:n.check,edge:"start",color:"primary",onClick:function(){x()}}),(0,k.jsx)(p.A,{className:n.icon,children:A.dR.filter((function(t){return t.value===e.original.icon}))?A.dR.filter((function(t){return t.value===e.original.icon}))[0].iconlight:(0,k.jsx)(j.A,{})}),(0,k.jsx)(u.A,{style:{cursor:"pointer"},onClick:function(){x()},primary:e.original.name,className:"".concat(n.text," ").concat(m||l?"selected":"")})]})})},F=function(e){var t=(0,b.A)(),n=(0,r.A)((function(e){return{root:{flexGrow:1,display:"flex",paddingTop:t.spacing(4)},check:{padding:0},accordeons:{flexGrow:1,paddingLeft:t.spacing(2),paddingRight:t.spacing(2)},listado:{flexGrow:1,paddingLeft:t.spacing(2),paddingRight:t.spacing(2),maxWidth:600},nested:{paddingLeft:t.spacing(3)+"px !important",marginLeft:t.spacing(1)},icon:{marginLeft:t.spacing(2),marginRight:t.spacing(1),minWidth:"auto","&.loading":{"-webkit-animation":"rotate-center 1s linear infinite both !important",animation:"rotate-center 1s linear infinite both !important"},"& path":{fill:t.palette.primary.main}},iconExpand:{marginRight:t.spacing(1),minWidth:"auto","& path":{fill:"#999"}},text:{"& span":{display:"inline-block",padding:"0 10px",transition:"all 0.3s ease-in-out",fontSize:"14px"},"&.selected span":{background:t.palette.primary.light,borderRadius:"5px",color:t.palette.primary.main}}}}))(),o=(0,a.useState)(!1),s=(0,i.A)(o,2),j=s[0],N=s[1],C=(0,a.useState)(!1),R=(0,i.A)(C,2),M=R[0],S=R[1],L=(0,a.useState)(!1),E=(0,i.A)(L,2),_=E[0],B=E[1],W=(0,a.useState)(!1),G=(0,i.A)(W,2),J=G[0],z=G[1],O=(0,a.useState)([]),P=(0,i.A)(O,2),D=P[0],K=P[1],I=function(){N(!j)},H=function(){return[].concat((0,l.A)(e.parent),[{id:e.id,name:e.name}])};return(0,a.useEffect)((function(){0===D.length&&j&&(z(!0),v.Jv(JSON.stringify({root:e.id,tree:e.activeTypes,view:"tree"})).then((function(e){K(e),z(!1)})))}),[j]),(0,a.useEffect)((function(){if(z(!1),(0,w.isArray)(e.path)){var t=e.path.find((function(t){return!!t&&t.id===e.id}));B(!!t),N(!!t)}}),[e.path]),(0,a.useEffect)((function(){e.selected?e.selected.length>0&&e.selected.filter((function(t){return t.id===e.original.id})).length>0?S(!0):S(!1):S(!1)}),[e.selected]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(c.Ay,{className:e.class,style:{padding:0},children:[!e.onlyType&&(0,k.jsx)(k.Fragment,{children:(e.activeTypes.filter((function(t){return t.slug===e.original.post_type}))[0].direct||e.directMode)&&(0,k.jsx)(d.A,{checked:M,color:"primary",edge:"start",className:n.check,onClick:function(){e.setFondo(e.original,e.parent)},style:{padding:0}})}),e.onlyType&&e.original.post_type===e.selectedType&&(0,k.jsx)(d.A,{checked:M,color:"primary",edge:"start",className:n.check,onClick:function(){e.setFondo(e.original,e.parent)},style:{padding:0}}),J?(0,k.jsx)(p.A,{className:"loading ".concat(n.icon),style:{minWidth:"auto"},children:(0,k.jsx)(x.A,{})}):(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(p.A,{className:n.icon,style:{color:M||_?t.palette.primary.dark:t.palette.secondary.dark,minWidth:"auto"},children:A.dR.filter((function(t){return t.value===e.original.icon}))?A.dR.filter((function(t){return t.value===e.original.icon}))[0].icon:(0,k.jsx)(m.A,{})})}),j&&!J?(0,k.jsx)(h.A,{style:{cursor:"pointer"},onClick:I,className:n.iconExpand}):(0,k.jsx)(k.Fragment,{children:J?(0,k.jsx)(y.A,{className:n.iconExpand}):(0,k.jsx)(y.A,{style:{cursor:"pointer"},onClick:I,className:n.iconExpand})}),(0,k.jsx)(u.A,{style:{cursor:"pointer"},className:"".concat(n.text," ").concat(_||M?"selected":""),primary:e.original.name,onClick:function(){e.setFondo(e.original,e.parent)}})]}),(0,k.jsx)(f.A,{in:j,timeout:"auto",unmountOnExit:!0,children:(0,k.jsx)(g.A,{component:"div",disablePadding:!0,style:{paddingLeft:"30px"},children:D.map((function(t){return!0!==t.children?(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(T,{name:t.text,original:t,class:"".concat(e.class," ").concat(n.nested),setFondo:e.setFondo,fondo:e.fondo,id:t.id,parent:null!==e.parent?H():[{id:e.id,name:e.name}],path:e.path,selected:e.selected,activeTypes:e.activeTypes})}):(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(F,{name:t.text,class:"".concat(n.nested," ").concat(e.class),children:t.children,original:t,id:t.id,path:e.path,setFondo:e.setFondo,fondo:e.fondo,parent:null!==e.parent?H():[{id:e.id,name:e.name}],activeTypes:e.activeTypes,selected:e.selected})})}))})})]})},N=F,C=(0,r.A)((function(e){return{root:{flexGrow:1,display:"flex",paddingTop:e.spacing(4)},tabs:{},accordeons:{flexGrow:1,paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},listado:{flexGrow:1,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),maxWidth:600},nested:{paddingLeft:e.spacing(3),marginLeft:e.spacing(3),borderLeft:"1px solid #dcdcdc"},item:{padding:1}}})),R=function(e){var t=C();return(0,k.jsx)(o.A,{className:t.listado,children:(0,k.jsx)(s.A,{disablePadding:!0,component:"nav","aria-labelledby":"nested-list-subheader",children:e.root.map((function(n){return!0===n.children?(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(N,{name:"".concat(n.text),children:n.children,id:n.id,original:n,setFondo:e.setFondo,setLoading:e.setLoading,fondo:e.fondo,class:t.item,parent:null,path:e.path,activeTypes:e.activeTypes,selected:e.selected,directMode:e.directMode,selectedTypes:e.selectedTypes,onlyType:e.onlyType})}):(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(T,{id:n.id,name:n.text,original:n,setFondo:e.setFondo,fondo:e.fondo,parent:null,path:e.path,class:t.item,selected:e.selected,activeTypes:e.activeTypes,directMode:e.directMode})})}))})})},M=n(13870),S=function(e){var t=(0,a.useState)(0),n=(0,i.A)(t,2),r=(n[0],n[1],(0,a.useState)([])),o=(0,i.A)(r,2),s=o[0],l=o[1];return(0,a.useEffect)((function(){var t,n,i={root:e.root?e.root:"all",tree:e.parents,view:"tree"};e.parents.length>0&&(null!==(t=e.filters)&&void 0!==t&&t.treeKeyword&&""!==(null===(n=e.filters)||void 0===n?void 0:n.treeKeyword)?(i.keyword=e.filters.treeKeyword,(0,M.N)(JSON.stringify(i)).then((function(e){l(e)}))):(0,v.Jv)(JSON.stringify(i)).then((function(e){l(e)})))}),[e.parents,e.filters]),(0,k.jsx)("div",{style:{marginTop:10},children:(0,k.jsx)(R,{root:s,path:e.path,selected:e.selected,setFondo:e.setFondo,activeTypes:e.activeTypes,childrenEditing:e.childrenEditing,setPath:e.setPath,directMode:e.directMode,onlyType:e.onlyType,selectedType:e.selectedType})})},L=S},19541:function(e,t,n){n.d(t,{AI:function(){return g},Xm:function(){return f}});var i=n(5544),a=n(65043),r=n(34535),o=n(19227),s=n(749),l=n(16702),c=n(31445),d=n(98344),p=n(65892),u=n(70579),f=(0,r.Ay)(o.A)((function(e){var t=e.theme;return{backgroundColor:"white",height:t.spacing(3),color:t.palette.secondary.dark,border:"none",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:200,"& svg":{width:15,marginLeft:10,marginRight:0},"& path":{fill:t.palette.secondary.main},"&:hover":{backgroundColor:t.palette.secondary.light,color:t.palette.secondary.dark,"& path":{fill:t.palette.secondary.main}}}})),g=(0,r.Ay)(o.A)((function(e){var t=e.theme;return{backgroundColor:t.palette.primary.light,height:t.spacing(3),color:t.palette.primary.main,border:"none",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:200,"& svg":{width:15,marginLeft:10,marginRight:0},"& path":{fill:t.palette.primary.main}}})),h=function(e){var t=(0,a.useState)([]),n=(0,i.A)(t,2),r=n[0],o=n[1];return(0,a.useEffect)((function(){e.type&&e.slug&&c.sF(e.slug,e.type).then((function(e){var t=p.UMr(p.t55);o(e.map((function(e,n){return e.color=t(e._id),e})))})).catch((function(e){console.log(e)}))}),[]),(0,u.jsxs)(s.A,{style:{margin:"5px",maxWidth:"600px",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:["timeCreated"===e.type&&r.length>0&&(0,u.jsx)(d.bl,{data:r,legend:!0,scaleType:"time"}),"statusCount"===e.type&&r.length>0&&(0,u.jsx)(d.RJ,{data:r,legend:!0}),"authorCount"===e.type&&r.length>0&&(0,u.jsx)(d._8,{data:r,legend:!0})]})};t.Ay=function(e){return(0,u.jsxs)(l.A,{style:{display:"flex",width:"100%"},children:[(0,u.jsx)(h,{type:"timeCreated",slug:e.selectedType.slug}),(0,u.jsx)(h,{type:"statusCount",slug:e.selectedType.slug}),(0,u.jsx)(h,{type:"authorCount",slug:e.selectedType.slug})]})}},42588:function(e,t,n){n.d(t,{AD:function(){return k},M2:function(){return b},oF:function(){return T}});var i=n(60436),a=n(65043),r=n(15316),o=n(17392),s=n(43845),l=n(81551),c=n(66187),d=n(88120),p=n(39244),u=n(26240),f=n(11238),g=n(83003),h=n(85211),m=n(98344),y=n(5983),x=n(58140),v=n(70579),j=(0,l.A)((function(e){return{container:{display:"flex",flexDirection:"column",width:"calc(100% - 20px)",overflowY:"auto",marginLeft:"10px"},item:{borderBottom:"1px solid #dcdcdc",overflow:"hidden",color:"#777",fontSize:14,position:"relative",marginBottom:10,paddingBottom:10},itemName:{fontSize:15},chip:{margin:2,padding:2,"& .MuiChip-avatar":{backgroundColor:"transparent !important"}}}})),A=function(e){var t=j(),n=(0,u.A)(),i=(0,x.M)().showAlert;return(0,v.jsxs)(r.A,{className:t.item,style:e.style?e.style:{},children:[(0,v.jsxs)(r.A,{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,v.jsx)(c.A,{className:t.itemName,style:{color:n.palette.primary.main},children:e.title}),e.help&&(0,v.jsx)(o.A,{onClick:function(){i("video-info",e.help)},children:(0,v.jsx)(y.A,{})})]}),e.item?e.item:e.children]})},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=t<0?0:t,i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]},b=function(e){var t,n,i=j();return(0,a.useEffect)((function(){0===e.record.parent.length?e.setMetadata(null):e.metadata&&e.setMetadata(e.record.parent[0])}),[e.record]),(0,v.jsxs)(r.A,{className:i.container,children:[(0,v.jsx)(A,{title:"Nombre del archivo",item:null!==e&&void 0!==e&&null!==(t=e.record)&&void 0!==t&&t.displayName?null===e||void 0===e||null===(n=e.record)||void 0===n?void 0:n.displayName:e.record.name}),(0,v.jsx)(A,{title:"HASH",item:e.record.hash}),(0,v.jsx)(A,{title:"Tama\xf1o",item:w(e.record.size)}),e.record.parent.length>0&&(0,v.jsx)(A,{title:"Contenido relacionado",children:e.record.parent.map((function(t,n){return(0,v.jsx)(s.A,{avatar:d.dR.filter((function(e){return e.value===t.icon}))?d.dR.filter((function(e){return e.value===t.icon}))[0].iconlight:(0,v.jsx)(p.A,{}),label:t.name,className:i.chip,onClick:function(){e.setMetadata(t)}},n)}))})]})},k=function(e){var t=j();(0,g.wA)(),(0,g.d4)((function(e){return e.app.filters}));return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(r.A,{className:t.container,children:[(0,v.jsx)(A,{title:"Descripci\xf3n",item:(0,v.jsx)(c.A,{children:e.type.description})}),e.files.total>0&&(0,v.jsx)(A,{title:"Balance general de los documentos",item:(0,v.jsx)(m.RJ,{data:e.files.data,legend:!0})}),(0,v.jsx)(T,{view:e.view,parents:e.parents,root:e.root})]})})},T=function(e){var t,n=(0,g.wA)(),a=(0,g.d4)((function(e){return e.app.filters})),r=j();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(A,{title:"Estructura de carpetas para",item:(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(f.$k,{label:"Tipo de recurso",showLabel:!1,value:a[e.view]?!e.single&&a[e.view].post_type?a[e.view].post_type.slug:e.single&&!Array.isArray(a[e.view].post_type_single)&&a[e.view].post_type_single?a[e.view].post_type_single.slug:"*":"*",onChange:function(t){if(e.onChange)e.onChange(t);else{var i=e.single?"post_type_single":"post_type";if("*"===t.target.value){var r=(0,h.e)(a,e.view,i,null);n((0,h.vm)(r))}else{var o=(0,h.e)(a,e.view,i,{slug:t.target.value});n((0,h.vm)(o))}}},options:function(){var t=(0,i.A)(e.parents.map((function(e){return{value:e.slug,label:e.name}})));return"cataloging"!==e.view&&(t=[{value:"*",label:"Todos los tipos"}].concat((0,i.A)(t))),t}()})}),help:"folder-structure"}),a[e.view]&&(null===(t=a[e.view].parents)||void 0===t?void 0:t.name)&&(0,v.jsx)("div",{style:{marginBottom:10},children:(0,v.jsx)(s.A,{avatar:d.dR.filter((function(t){return t.value===a[e.view].parents.icon}))?d.dR.filter((function(t){return t.value===a[e.view].parents.icon}))[0].iconlight:(0,v.jsx)(p.A,{}),label:a[e.view].parents.name,className:r.chip,onDelete:function(){var t=(0,h.e)(a,e.view,"parents",{id:e.root});n((0,h.vm)(t))},size:"small",color:"primary"})})]})}}}]);
//# sourceMappingURL=621.0e9e5fd7.chunk.js.map