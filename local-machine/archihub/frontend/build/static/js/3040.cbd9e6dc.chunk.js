"use strict";(self.webpackChunkarchihub=self.webpackChunkarchihub||[]).push([[3040],{90151:function(t,e,n){n.d(e,{D8:function(){return P},Ot:function(){return L},P4:function(){return I},Ts:function(){return N},Zv:function(){return F},a7:function(){return D},i0:function(){return q},kx:function(){return S},oS:function(){return E},qV:function(){return B},vs:function(){return G},zB:function(){return H}});var o,r,i,s=n(89379),a=n(29408),u=n(84538),l=n(17583),c=n(50208),d=n(9920),h=n(65892),f=n(2936),p=n.n(f),m=[],b=[],g=[],y=!1,v=0,w=1e3,x=null,A=null,T=null,j=null,C=null,k=h.UMr(h.t55),z=!0;function P(t){x&&t?(x.mouseButtons={LEFT:a.kBv.ROTATE,MIDDLE:a.kBv.DOLLY,RIGHT:a.kBv.PAN},x.update()):x&&(x.mouseButtons={LEFT:a.kBv.PAN,MIDDLE:a.kBv.DOLLY,RIGHT:a.kBv.ROTATE},x.update()),C=t}function S(t){t}function E(t){t}function O(t,e,n,o,r){var i=document.querySelector(".tooltip");if(i)i.style.left=e+"px",i.style.top=n+"px",i.style.opacity=1,i.style.backgroundColor=o,i.style.boxShadow="0px 0px 5px 0px "+o,i.innerHTML=t;else{var s=document.createElement("div");s.classList.add("tooltip"),s.style.left=e+"px",s.style.top=n+"px",s.style.opacity=1,s.style.backgroundColor=o,s.style.boxShadow="0px 0px 5px 0px "+o,s.innerHTML=t,document.body.appendChild(s)}}function M(){var t=document.querySelector(".tooltip");t&&t.remove()}function F(t){j=t}function B(t,e,n,r){var i=o.position.y,s=o.position.z,a=100*t;if(r){var u=100*(t-1);u<0&&(u=0),a=100*t+(o.position.x-u)}o.position.set(a,i,s),o.rotation.set(0,0,0),v=t,J(t,e,n)}function H(t){var e=m[v-1];if(e){var n=e.element.style.filter;n.includes("contrast")?n=n.replace(/contrast\((.*?)\)/,"contrast("+t+")"):n+=" contrast("+t+")",e.element.style.filter=n}}function L(t){var e=m[v-1];if(e){var n=e.element.style.filter;n.includes("brightness")?n=n.replace(/brightness\((.*?)\)/,"brightness("+t+")"):n+=" brightness("+t+")",e.element.style.filter=n}}function N(t,e,n,s){var d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;z=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],A=e,k=h.UMr(h.t55);var f=window.innerWidth/window.innerHeight,p=A.getBoundingClientRect();(o=new a.qUd(w*f/-2,w*f/2,w/2,w/-2,1,1e3)).position.set(-0,0,200),o.rotation.set(0,0,0),r=new a.Z58;for(var T=1;T<=t;T++)g.push(!1),S(72,72/n,T,new a.Pq0(1e4*Math.random()-5e3,2e3*Math.random()-1e3,2e3*Math.random()),new a.O9p(0,0,0));for(var j={line:[]},C=0;C<m.length;C++){var P=new a.B69;P.position.x=100*C,P.position.y=0,P.position.z=0,j.line.push(P)}function S(t,e,i,a,l){var c=document.createElement("div");c.style.width=t+"px",c.style.height=e+"px",c.style.backgroundColor="white",c.style.backgroundSize="contain",c.style.backgroundRepeat="no-repeat",c.style.backgroundPosition="center",c.style.display="flex",c.style.justifyContent="center",c.style.alignItems="center",c.className="plane",c.addEventListener("pointerdown",(function(){if(v===i)y||(y=!0);else{v=i,y=!0;var t=o.position.y,e=o.position.z;o.position.set(100*v,t,e)}J(i,n,s)}));var d=new u.on(c);d.position.copy(a),d.rotation.copy(l),r.add(d),m.push(d),b.push(c)}A.style.height=p.height+"px",(i=new u.a0).setSize(p.width,p.height),i.domElement.style.position="absolute",i.domElement.style.top=0,A.appendChild(i.domElement),o.zoom=.45,(x=new l.N(o,i.domElement)).minZoom=.3,x.maxZoom=5,x.zoomSpeed=2,x.enableRotate=!1,x.enablePan=!1,x.enableZoom=!1,x.mouseButtons={LEFT:a.kBv.PAN,MIDDLE:a.kBv.DOLLY,RIGHT:a.kBv.ROTATE},x.update(),setTimeout((function(){!function(t,e){c.Ay.removeAll();for(var n=0;n<m.length;n++){var o=m[n],r=t[n];o.position.x=r.position.x,o.position.y=r.position.y,o.position.z=r.position.z,o.element.style.transition="all "+e*Math.random()+"s cubic-bezier(0.215, 0.610, 0.355, 1)"}}(j.line,3)}),350),setTimeout((function(){y=!0,v=d,J(d,n,s)}),1e3),window.addEventListener("resize",Z)}function R(t){var e=v-1,n=e-10,o=e+10;n<0&&(n=0,o=20),o>m.length&&(n=m.length-20,o=m.length);for(var r=[],i=n;i<o;i++)!1===g[i]&&r.push(i);d.f2(t,r,"small",z).then((function(t){for(var e=0;e<r.length;e++){g[r[e]]=!0;var n=m[r[e]],o="data:image/jpg;base64,"+t[e].data;v!==r[e]+1&&(n.element.style.backgroundColor="transparent",n.element.style.backgroundImage='url("'+o+'")')}}))}function J(t,e,n){if(j(t),y){T&&clearTimeout(T),T=setTimeout((function(){R(n),function(t){d.f2(t,[v-1],"big",z).then((function(t){try{var e=m[v-1],n="data:image/jpg;base64,"+t[0].data;e.element.style.backgroundColor="transparent",e.element.style.backgroundImage='url("'+n+'")'}catch(o){console.log(o)}}))}(n)}),250),x.enablePan=!0,x.enableZoom=!0,x.update();for(var o=0;o<t-1;o++){for(var r=m[o];r.element.firstChild;)r.element.removeChild(r.element.firstChild);r.element.style.transition="all 1s cubic-bezier(0.215, 0.610, 0.355, 1)",r.element.style.width="72px",r.element.style.height=72/e+"px",r.position.x=100*o-1e3,r.position.y=0,r.position.z=0}for(var i=t;i<m.length;i++){for(var s=m[i];s.element.firstChild;)s.element.removeChild(s.element.firstChild);s.element.style.transition="all 1s cubic-bezier(0.215, 0.610, 0.355, 1)",s.element.style.width="72px",s.element.style.height=72/e+"px",s.position.x=100*i+1e3,s.position.y=0,s.position.z=0}var a=m[t-1];a&&(a.element.style.transition="all 1s cubic-bezier(0.215, 0.610, 0.355, 1)",a.element.style.width="1440px",a.element.style.height=1440/e+"px",a.position.z=1e3,a.position.y=10,a.position.x=100*(t-1))}else{T&&clearTimeout(T),T=setTimeout((function(){R(n)}),250),x.enablePan=!1,x.enableZoom=!1,x.update();for(var u=0;u<t-1;u++){var l=m[u];l.element.style.transition="all 1s cubic-bezier(0.215, 0.610, 0.355, 1)",l.element.style.width="72px",l.element.style.height=72/e+"px",l.position.x=100*u,l.position.y=0,l.position.z=0}for(var c=t;c<m.length;c++){var h=m[c];h.element.style.transition="all 1s cubic-bezier(0.215, 0.610, 0.355, 1)",h.element.style.width="72px",h.element.style.height=72/e+"px",h.position.x=100*c,h.position.y=0,h.position.z=0}var f=m[t-1];f.element.style.transition="all 1s cubic-bezier(0.215, 0.610, 0.355, 1)",f.element.style.width="72px",f.element.style.height=72/e+"px",f.position.x=100*(t-1),f.position.z=1e3,f.position.y=10}}function D(t){var e=m[t-1];if(e.element)for(;e.element.firstChild;)e.element.removeChild(e.element.firstChild);e.element.classList.remove("dark")}function I(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t,e){};D(e);var r=new Image;r.src=b[e-1].style.backgroundImage.slice(5,-2);var i=r.width/r.height,a=i>1?100:100*i,u=i>1?100/i:100,l=document.createElementNS("http://www.w3.org/2000/svg","svg");function c(t){return Array.isArray(t.label)?t.label.length>0?"O"===t.label[0]?"transparent":k(t.label[0]):void 0:t.type?k(t.type):t.label?k(t.label):"transparent"}if(l.setAttribute("width","".concat(a,"%")),l.setAttribute("height","".concat(u,"%")),l.setAttribute("viewBox","0 0 ".concat(a," ").concat(u)),l.setAttribute("preserveAspectRatio","none"),null===C)t.forEach((function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","rect"),r=100*t.bbox.y/i;i<1&&(r=100*t.bbox.y);var s=100*t.bbox.height/i;i<1&&(s=100*t.bbox.height);var a=100*t.bbox.x*i;i>1&&(a=100*t.bbox.x);var u=100*t.bbox.width*i;i>1&&(u=100*t.bbox.width),n.setAttribute("x",a),n.setAttribute("y",r),n.setAttribute("width",u),n.setAttribute("height",s),n.setAttribute("fill",c(t,n)),n.setAttribute("fill-opacity",.3),n.addEventListener("mousemove",(function(e){!function(t,e,n){var o=t.clientX,r=t.clientY;Array.isArray(e.label)?e.label.length>0&&("O"===e.label[0]?(n.setAttribute("stroke","black"),n.setAttribute("stroke-width",.05),n.setAttribute("fill","transparent")):(n.setAttribute("stroke","black"),n.setAttribute("stroke-width",.05),n.setAttribute("fill","transparent"),O(e.label[0],o,r-20,c(e),n.getBoundingClientRect().height))):e.type?(n.setAttribute("stroke","black"),n.setAttribute("stroke-width",.05),n.setAttribute("fill","transparent"),O(e.type,o,r-20,c(e),n.getBoundingClientRect().height)):e.label?(n.setAttribute("stroke","black"),n.setAttribute("stroke-width",.05),n.setAttribute("fill","transparent"),O(e.label,o,r-20,c(e),n.getBoundingClientRect().height)):(n.setAttribute("stroke","black"),n.setAttribute("stroke-width",.05),n.setAttribute("fill","transparent"),O(e.text,o,r-20,k(e.text),n.getBoundingClientRect().height))}(e,t,n)})),n.addEventListener("mouseout",(function(){n.setAttribute("stroke","transparent"),n.setAttribute("fill",c(t)),M()})),n.addEventListener("mousedown",(function(n){!function(t,e,n){o(e,n)}(0,t,e)})),l.appendChild(n)}));else{M();var d=document.createElementNS("http://www.w3.org/2000/svg","rect"),h=100*C.bbox.y/i;i<1&&(h=100*C.bbox.y);var f=100*C.bbox.height/i;i<1&&(f=100*C.bbox.height);var g=100*C.bbox.x*i;i>1&&(g=100*C.bbox.x);var y=100*C.bbox.width*i;i>1&&(y=100*C.bbox.width),d.setAttribute("x",g),d.setAttribute("y",h),d.setAttribute("width",y),d.setAttribute("height",f),d.setAttribute("fill",c(C,d)),d.setAttribute("fill-opacity",.3),p()(d).resizable({edges:{left:!1,right:!0,bottom:!0,top:!1},listeners:{move:function(t){var n=t.target.width.animVal.value,r=t.target.height.animVal.value,a=m[e-1].element.getBoundingClientRect().width;a/=2;var l=m[e-1].element.querySelector("svg"),c=n/100*a,d=r/u*l.getBoundingClientRect().height,h=c+t.delta.x,f=d+t.delta.y;h=h/a*100,f=f/l.getBoundingClientRect().height*u,t.target.setAttribute("width","".concat(h)),t.target.setAttribute("height","".concat(f));var p=parseFloat(t.target.getAttribute("x")),b=parseFloat(t.target.getAttribute("y")),g={x:p/(i<1?100*i:100),y:b/(i>1?100/i:100),width:h/(i<1?100/i:100),height:f/(i>1?100/i:100)},y=(0,s.A)({},C);y.bbox=g,o(y)}}}).draggable({listeners:{move:function(t){var n=parseFloat(t.target.getAttribute("x")),r=parseFloat(t.target.getAttribute("y")),l=parseFloat(t.target.getAttribute("width")),c=parseFloat(t.target.getAttribute("height"));l/=a,c/=u;var d=m[e-1].element.getBoundingClientRect().width,h=r/100*d;n=(n=n/100*d+t.delta.x)/d*100,r=(r=h+t.delta.y)/d*100,t.target.setAttribute("x",n),t.target.setAttribute("y",r);var f={x:n/(i<1?100*i:100),y:r/(i>1?100/i:100),width:l,height:c},p=(0,s.A)({},C);p.bbox=f,o(p)}}}),l.appendChild(d)}m[e-1].element.appendChild(l)}function Z(){var t=A.getBoundingClientRect(),e=window.innerWidth/window.innerHeight;A.style.height=t.width/e+"px",o.left=-w*e/2,o.right=w*e/2,o.top=w/2,o.bottom=-w/2,o.updateProjectionMatrix(),i.setSize(t.width,t.width/e)}function q(){i&&(requestAnimationFrame(q),o.rotation.set(0,0,0),.5===o.zoom&&o.position.set(100*(v-1),0,200),i.render(r,o))}function G(){r&&i&&r.clear(),window.removeEventListener("resize",Z),m=[],g=[],b=[],i=null,r=null,k=h.UMr(h.t55)}},9920:function(t,e,n){n.d(e,{FZ:function(){return h},Hc:function(){return i},RS:function(){return a},Rm:function(){return f},S7:function(){return m},ao:function(){return p},bn:function(){return g},de:function(){return c},f2:function(){return d},v:function(){return b},vv:function(){return u},wp:function(){return l},xU:function(){return s}});var o=n(88120),r=n(91280);function i(t){var e="/records/"+t,n={method:"GET",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch(o.FM+e,n).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function s(t){var e="/records/"+t+"/stream",n={method:"GET",headers:new Headers({Authorization:(0,r.g)()}),mode:"cors",cache:"default"};return fetch(o.FM+e,n).then((function(t){return 200!==t.status?Promise.reject(t):t.blob()}))}function a(t,e){var n="/records/"+t+"/transcription",i={method:"POST",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify({slug:e})};return fetch(o.FM+n,i).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function u(t,e){var n="/records/"+t+"/metadata",i={method:"POST",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify({slug:e})};return fetch(o.FM+n,i).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function l(t){var e="/records/"+t+"/document",n={method:"GET",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch(o.FM+e,n).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function c(t){if((0,r.g)()){var e={method:"POST",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch(o.FM+"/records/galleryinfo",e).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}e={method:"POST",headers:new Headers({"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch(o.FM+"/records/public/galleryinfo",e).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function d(t,e,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if((0,r.g)()){var s="/records/"+t+"/pages",a={method:"POST",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify({pages:e,size:n,gallery:!i})};return fetch(o.FM+s,a).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}var u="/records/public/"+t+"/pages";a={method:"POST",headers:new Headers({"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify({pages:e,size:n,gallery:!i})};return fetch(o.FM+u,a).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function h(t,e,n,i){var s="/records/"+t+"/blocks",a={method:"POST",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify({page:e,block:i,slug:n})};return fetch(o.FM+s,a).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function f(t){var e={method:"POST",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch(o.FM+"/records/setBlock",e).then((function(t){return 201!==t.status?Promise.reject(t):t.json()}))}function p(t){var e={method:"PUT",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch(o.FM+"/records/setBlock",e).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function m(t){var e={method:"DELETE",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch(o.FM+"/records/setBlock",e).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function b(t,e){var n="/records/"+t+"/edit-transcription",i={method:"PUT",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(o.FM+n,i).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function g(t,e){var n="/records/"+t+"/edit-transcription",i={method:"DELETE",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(o.FM+n,i).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}},48210:function(t,e,n){n.d(e,{_e:function(){return s},rQ:function(){return u},u5:function(){return a},vt:function(){return i}});var o=n(88120),r=n(91280);function i(t){var e={method:"POST",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch(o.FM+"/snaps",e).then((function(t){return 201!==t.status?Promise.reject(t):t.json()}))}function s(t){var e={method:"POST",headers:new Headers({Authorization:(0,r.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch(o.FM+"/users/snaps",e).then((function(t){return 200!==t.status?Promise.reject(t):t.json()}))}function a(t){var e="/snaps/"+t,n={method:"DELETE",headers:new Headers({Authorization:(0,r.g)()}),mode:"cors",cache:"default"};return fetch(o.FM+e,n).then((function(t){return 204!==t.status?Promise.reject(t):t}))}function u(t){var e="/snaps/"+t,n={method:"GET",headers:new Headers({Authorization:(0,r.g)()}),mode:"cors",cache:"default"};return fetch(o.FM+e,n).then((function(t){return 200!==t.status?Promise.reject(t):t.blob()}))}}}]);
//# sourceMappingURL=3040.cbd9e6dc.chunk.js.map