/*! For license information please see 17.c5694622.chunk.js.LICENSE.txt */
(this.webpackJsonpsim=this.webpackJsonpsim||[]).push([[17],{1011:function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"h",(function(){return i})),a.d(t,"f",(function(){return c})),a.d(t,"e",(function(){return s})),a.d(t,"g",(function(){return l})),a.d(t,"i",(function(){return u})),a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return h})),a.d(t,"c",(function(){return f}));var n=a(40),r=a(43);function o(){var e={method:"GET",headers:new Headers({Authorization:Object(r.c)()}),mode:"cors",cache:"default"};return fetch(n.i+"/api/forms/advanced-search",e).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function i(e){var t={method:"GET",headers:new Headers({Authorization:Object(r.c)()}),mode:"cors",cache:"default"},a=n.i+"/api/forms/options/"+e;return fetch(a,t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function c(e,t){var a={method:"GET",headers:new Headers({Authorization:Object(r.c)()}),mode:"cors",cache:"default"},o=n.i+e.schema.url+t;return fetch(o,a).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function s(){var e={method:"GET",headers:new Headers({Authorization:Object(r.c)()}),mode:"cors",cache:"default"};return fetch(n.i+"/forms",e).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new Headers({Authorization:Object(r.c)(),"Content-Type":"application/json"}),o="/forms/"+e,i={method:"POST",headers:a,mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch(n.i+o,i).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function u(e,t){var a="/forms/"+e,o={method:"PUT",headers:new Headers({Authorization:Object(r.c)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:t};return fetch(n.i+a,o).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function d(e){var t={method:"POST",headers:new Headers({Authorization:Object(r.c)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch(n.i+"/forms",t).then((function(e){return 201!==e.status?Promise.reject(e):e.json()}))}function h(e){var t="/forms/"+e,a={method:"DELETE",headers:new Headers({Authorization:Object(r.c)()}),mode:"cors",cache:"default"};return fetch(n.i+t,a).then((function(e){if(204!==e.status)return Promise.reject(e)}))}function f(e){var t="/forms/duplicate/"+e,a={method:"POST",headers:new Headers({Authorization:Object(r.c)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch(n.i+t,a).then((function(e){if(201!==e.status)return Promise.reject(e)}))}},1184:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return c}));a(8),a(19),a(267);var n=a(211),r=a.n(n),o=(a(1365),function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}),i=function(e){return"[object Array]"===Object.prototype.toString.call(e)},c=function(e){var t=e.error,a=e.text,n=e.confirmButtonText,o=e.action;401==t?console.log(t):r.a.fire({title:t,text:a,icon:"error",confirmButtonText:n}).then((function(e){o()}))}},1280:function(e,t,a){"use strict";a.d(t,"b",(function(){return h}));var n=a(35),r=a(2),o=a.n(r),i=a(512),c=a(516),s=a(99),l=a(267),u=a(361),d=(a(1305),a(365)),h=Object(i.a)((function(e){return{root:{backgroundColor:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(20px)",borderRadius:"10px",width:"100%",maxWidth:"900px",marginTop:"20vh",boxShadow:"0px 0px 10px 0px rgba(0,0,0,0.15)"},items:{display:"flex",justifyContent:"center",flexWrap:"wrap",padding:25},item:{width:130,height:130,backgroundColor:"white",borderRadius:"10px",cursor:"pointer",transform:"scale(1)",transition:"0.2s ease all",display:"flex",justifyContent:"center",alignItems:"center",alignContent:"flex-start",flexWrap:"wrap",margin:10,"&.undo":{backgroundColor:"#a7b7cb",color:"white","& svg":{backgroundColor:"rgba(255, 255, 255, 0.3)","& path":{fill:"white"}},"& h3":{color:"white"}},"& svg":{backgroundColor:"rgba(150, 150, 150, 0.1)",height:70,paddingTop:20,paddingBottom:20,borderRadius:10,marginBottom:5},"& h3":{width:"100%",color:"#2A5080",fontWeight:"bold",fontSize:13,textAlign:"center",padding:5},"&:hover":{transform:"scale(1.1)"}}}}));t.a=function(){var e=h(),t=s.a.getState().auth.user.roles,a=Object(r.useState)(null),i=Object(n.a)(a,2),f=i[0],p=i[1];return o.a.createElement(c.a,{className:e.root},o.a.createElement(c.a,{className:e.items},!f&&d.a.elements.map((function(a,n){if(Object(l.intersection)(a.roles,t).length>0)return o.a.createElement(c.a,{key:n,className:e.item,onClick:function(){a.children.length>0?p(a.children):window.location.href=a.route}},Object(u.a)(a,"",{width:"100%",fontSize:50,color:"#2A5080"}),o.a.createElement("h3",null,a.tag))})),f&&o.a.createElement(c.a,{className:"".concat(e.item," undo"),onClick:function(){p(null)}},Object(u.a)({material_icon:"Undo",tag:"Volver"},"",{width:"100%",fontSize:60,color:"#2A5080"}),o.a.createElement("h3",null,"Volver")),f&&f.map((function(a,n){if(Object(l.intersection)(a.roles,t).length>0)return o.a.createElement(c.a,{key:n,className:e.item,onClick:function(){a.route&&(window.location.href=a.route)}},console.log(a),Object(u.a)(a,"",{width:"100%",fontSize:60,color:"#2A5080"}),o.a.createElement("h3",null,a.tag))}))))}},1281:function(e,t,a){"use strict";a.d(t,"f",(function(){return i})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return u})),a.d(t,"e",(function(){return d}));var n=a(40),r=a(43),o=a(988);function i(){var e=new Headers({"Content-Type":"application/json",Authorization:Object(r.c)()}),t="/api/resource-groups/first-level-cache",a={method:"GET",headers:e,mode:"cors",cache:"default"};return fetch(n.i+t,a).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function c(e){var t="/api/resource-groups/get-all-children?ident="+e,a={method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:Object(r.c)()}),mode:"cors",cache:"default"};return fetch(n.i+t,a).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function s(e){var t="/api/resource-groups/recursive-metadata/"+e,a={method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:Object(r.c)()}),mode:"cors",cache:"default"};return fetch(n.i+t,a).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function l(e){var t="/api/resource-groups/metadata/"+e,a={method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:Object(r.c)()}),mode:"cors",cache:"default"};return fetch(n.i+t,a).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function u(e){var t="/api/resource-groups/"+e,a={method:"DELETE",headers:new Headers({Authorization:Object(r.c)()}),mode:"cors",cache:"default"};return fetch(n.i+t,a).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}a.n(o)()(document).ajaxSend((function(e,t,a){t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("Authorization",Object(r.c)())}));function d(e){var t="/api/resource-groups/simple/"+e,a={method:"GET",headers:new Headers({Authorization:Object(r.c)()}),mode:"cors",cache:"default"};return fetch(n.i+t,a).then((function(e){return[200,304].includes(e.status)?e.json():Promise.reject(e.status)}))}},1305:function(e,t,a){"use strict";a(35);var n=a(92),r=a(212),o=a(213),i=a(342),c=a(216),s=a(217),l=a(2),u=a.n(l),d=a(56),h=a(38),f=a(978),p=a(151),m=a(1281),v=a(1011),g=a(1304);var y=function(e){return u.a.createElement("div",{className:"cev-custom-textarea"},e.tags&&e.tags.length>0&&e.tags.map((function(t,a){return u.a.createElement(u.a.Fragment,{key:"r-".concat(a)},0===e.currentPosition&&0===a&&u.a.createElement("input",{autoFocus:!0,type:"text",className:"form-control",onKeyDown:function(t){e.events.onKeyDown(t)},onChange:function(t){e.events.onChange(t)}}),u.a.createElement("button",{type:"button",className:"cev-close-button",key:a,onClick:function(t){e.events.deleteTag(a)}},t),e.currentPosition>0&&a===e.currentPosition-1&&u.a.createElement("input",{autoFocus:!0,type:"text",className:"form-control",onKeyDown:function(t){e.events.onKeyDown(t)},onChange:function(t){e.events.onChange(t)}}))})),0===e.tags.length&&u.a.createElement("input",{autoFocus:!0,type:"text",className:"form-control",onKeyDown:function(t){e.events.onKeyDown(t)},onChange:function(t){e.events.onChange(t)}}))},b=a(2122),E=a(2123),w=a(2098),j=a(905),O=a(2097),x=u.a.forwardRef((function(e,t){return u.a.createElement("div",{ref:t,onClick:function(t){t.preventDefault(),e.onClick(t)},onMouseOver:function(t){t.preventDefault(),e.onMouseOver&&e.onMouseOver(t)}},e.children)})),S=a(19),k=a(2138),C=a(2155),L=a(2139),N=a(1586),_=a(1108),T=a.n(_),P=a(267),D=a.n(P),R=a(1585),F=(a(179),a(40)),A=a(43);var G=a(2096),M=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e))._onEdited=function(e){n._onChange()},n._onCreated=function(e){n._onChange()},n._onDeleted=function(e){n._onChange()},n._editableFG=null,n._onFeatureGroupReady=function(e){if(e){var t=new T.a.GeoJSON({type:"FeatureCollection",features:[]}),a=e.leafletElement;t.eachLayer((function(e){a.addLayer(e)})),n._editableFG=e}},n._onChange=function(){var e=n.props.onChange;if(n._editableFG&&e){var t=n._editableFG.leafletElement.toGeoJSON();n.setState({selected:!1},(function(){n.props.onChange("Pol\xedgono",t)}))}},n.state={z:n.props.zoom?n.props.zoom:5,c:n.props.center?n.props.center:[4.36,-74.04],anteriorH:-1,anteriorW:-1,minHeigth:n.props.minHeigth?n.props.minHeigth:350,levels:[{label:"Macroregi\xf3n",value:3},{label:"Departamento",value:1},{label:"Municipio",value:2}],level:void 0,selected:void 0,locationsValue:void 0},n}return Object(o.a)(a,[{key:"update",value:function(){var e=this;setTimeout((function(){var t=e.map;if(null!=t){var a=t.clientHeight;a<e.state.minHeigth&&(a=e.state.minHeigth),-1!==e.state.anteriorH&&0!==e.state.anteriorH&&-1!==e.state.anteriorW&&0!==e.state.anteriorW||e.setState({height:a,width:t.clientWidth,anteriorH:t.clientHeight,anteriorW:t.clientWidth},(function(){e.updateLocations()}))}}),1)}},{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.map;n.clientHeight>0&&n.clientWidth>0&&(0===this.state.height||0===this.state.width)&&setTimeout((function(){a.setState({height:n.clientHeight,width:n.clientWidth,anteriorH:n.clientHeight,anteriorW:n.clientWidth})}),500)}},{key:"componentDidMount",value:function(){this.update()}},{key:"updateLocations",value:function(){var e=this;(function(e,t){var a="/api/admin/locations?"+(e=e?"q="+e:"")+"&skip="+2e3*(t-1)+"&limit=2000",n={method:"GET",headers:new Headers({Authorization:Object(A.c)()}),mode:"cors",cache:"default"};return fetch(F.i+a,n).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))})("",1).then((function(t){var a=t.map((function(e){return 1===e.admin_level||2===e.admin_level?Object(S.a)({},{_id:e._id,admin_level:e.admin_level,dpto:e.properties.DPTO,nombre_dpt:e.properties.NOMBRE_DPT,mpio:e.properties.MPIO?e.properties.MPIO:"",nombre_mpi:e.properties.NOMBRE_MPI?e.properties.NOMBRE_MPI:"",nombre_cab:e.properties.NOMBRE_CAB?e.properties.NOMBRE_CAB:"",clasemun:e.properties.CLASEMUN?e.properties.CLASEMUN:"",mpios:e.properties.MPIOS?e.properties.MPIOS:"",zona:e.properties.ZONA?e.properties.ZONA:"",of_reg:e.properties.OF_REG?e.properties.OF_REG:"",reg_zonas:e.properties.REG_ZONAS?e.properties.REG_ZONAS:"",area:e.properties.AREA,perimeter:e.properties.PERIMETER,hectares:e.properties.HECTARES,poligon:e.geometry,pais:e.pais,localidad:e.localidad,value:e._id,label:e.properties.NOMBRE_DPT+(e.properties.NOMBRE_MPI?" - "+e.properties.NOMBRE_MPI:"")}):3===e.admin_level?Object(S.a)({},{_id:e._id,admin_level:e.admin_level,nombre_dpt:e.properties.NOMBRE_MR,area:e.properties.AREA,poligon:e.geometry,value:e._id,label:e.properties.NOMBRE_MR}):e}));e.setState({locations:a})}))}},{key:"addNew",value:function(e,t,a){var n=this._editableFG;if(n){var r={type:"FeatureCollection",features:[]};r.features.push(t);var o=new T.a.GeoJSON(r),i=n.leafletElement;o.eachLayer((function(e){i.addLayer(e)}));var c=n.leafletElement.toGeoJSON();this._editableFG=n,this.props.onChange(e,c,a)}}},{key:"clear",value:function(){var e=this,t=this._editableFG.leafletElement._layers;Object.keys(t).forEach((function(a,n){var r=t[a];e._editableFG.leafletElement.removeLayer(r)})),this.props.clear()}},{key:"unselect",value:function(){var e=this;this.setState({selected:void 0,levelsValue:-1,locationsValue:-1,level:void 0},(function(){e.clear()}))}},{key:"select",value:function(){this.props.onAdd(this.state),this.setState({selected:!0})}},{key:"locationChange",value:function(e){var t=this,a=e.value;this.setState({locationsValue:e,loading:!0},(function(){t.clear(),function(e){var t="/api/admin/locations/"+e,a={method:"GET",headers:new Headers({Authorization:Object(A.c)()}),mode:"cors",cache:"default"};return fetch(F.i+t,a).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}(a).then((function(e){1===e.admin_level&&t.addNew(e.properties.NOMBRE_DPT,e.geometry,e._id),2===e.admin_level&&t.addNew(e.properties.NOMBRE_DPT+" "+e.properties.NOMBRE_MPI,e.geometry,e._id),3===e.admin_level&&t.addNew(e.properties.NOMBRE_MR,e.geometry,e._id),t.setState({selected:!1,loading:!1})}))}))}},{key:"levelChange",value:function(e){this.setState({level:e,locationsValue:null,selected:void 0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.level,n=t.locationsValue,r=this.state.level?this.state.level.value:this.state.level,o=D.a.orderBy(D.a.filter(this.state.locations,{admin_level:r}),["nombre_dpt","nombre_mpi"]);return u.a.createElement("div",{className:"map"},u.a.createElement("div",{className:"space"}),u.a.createElement("div",{ref:function(t){return e.map=t},className:"mw-100"},this.state.height&&u.a.createElement(k.a,{style:{width:this.state.width,height:this.state.height},center:this.state.c,zoom:this.state.z,scrollWheelZoom:!1},u.a.createElement(C.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),u.a.createElement(L.a,{ref:function(t){e._onFeatureGroupReady(t)}},void 0===this.state.selected&&!this.state.selected&&u.a.createElement(N.a,{position:"topright",onEdited:this._onEdited,onCreated:function(t){e._onCreated(t)},onDeleted:function(t){e._onDeleted(t)},draw:{polyline:!1,polygon:!0,rectangle:!1,circle:!1,circlemarker:!1,marker:!1}}))),!this.state.selected&&u.a.createElement(u.a.Fragment,null,u.a.createElement(R.a,{value:this.state.level,onChange:function(t){e.levelChange(t)},options:this.state.levels,placeholder:"Seleccione nivel"}),this.state.level&&u.a.createElement(R.a,{value:this.state.locationsValue,onChange:function(t){return e.locationChange(t)},options:o,placeholder:"Seleccione el pol\xedgono"})),this.state.loading&&u.a.createElement(u.a.Fragment,null,u.a.createElement(G.a,{fluid:!0,className:"my-5"},u.a.createElement(O.a,{variant:"success"},u.a.createElement("div",{className:"alert-icon"},u.a.createElement("i",{className:"fas fa-sync fa-spin"})),u.a.createElement("div",{className:"alert-text"},"Cargando...")))),void 0!==this.state.selected&&!this.state.selected&&-1!==this.state.locationsValue&&!this.state.loading&&u.a.createElement("div",null,u.a.createElement("button",{type:"button",onClick:function(){return e.select()},className:"btn btn-success"},"Seleccionar")),this.state.selected&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,u.a.createElement("button",{type:"button",onClick:function(){return e.unselect()},className:"btn btn-danger"},"Borrar")),u.a.createElement("div",{className:""},u.a.createElement("i",{className:"flaticon2-map"}),"Mapa seleccionado: ",a.label+" - "+n.label))))}}]),a}(l.Component);var z=Object(d.b)((function(e){return{searchFilters:e.app.filters}}))(M),B=a(1326),q=a.n(B),I=a(1503),H=a.n(I),V=a(1052),U=a.n(V),W=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={newLabel:"",show:!1,alert:!1,form:void 0,isLoading:!1},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setState({oldLabel:this.props.label,newLabel:this.props.label,show:!1})}},{key:"selectForm",value:function(e){var t=this,a=this.props.config.forms[e.target.value];void 0!==a?"form-select"===a.type?v.h(a.field).then((function(e){if(e.aggregations.options.buckets.length>0){var n=D.a.map(e.aggregations.options.buckets,"key");n.length>20?(a.type="autocomplete",a.data=n):a.schema.properties[a.name].enum=n}else a.schema.properties[a.name].enum=["Sin Registros"];a.schema.properties[a.name].enum=a.schema.properties[a.name].enum.sort(),t.setState({form:a})})):this.setState({form:a}):this.setState({form:null})}},{key:"onChange",value:function(e){if(e.selected.length>0){var t=e.selected[0],a=this.state.form.queryAlias?this.state.form.queryAlias:this.state.form.query;a=a.split("["+this.state.form.name+"]").join(t),this.setState({query:a,formData:t})}}},{key:"onClick",value:function(){var e=this.state.query;this.setState({show:!1,form:void 0},this.props.addQuery(e))}},{key:"onSubmit",value:function(e,t){t.preventDefault();var a=this.state.form.queryAlias?this.state.form.queryAlias:this.state.form.query;if("object"===typeof e)for(var n in e)"Sin Registros"!==e[n]&&(a=a.split("["+n+"]").join(e[n]));else a=e;a!==this.state.form.query?this.setState({query:a,formData:e,show:!1,form:void 0},this.props.addQuery(a)):console.log("No se puede agregar registro")}},{key:"asyncSearch",value:function(e){var t=this;this.setState({isLoading:!0}),v.f(this.state.form,e).then((function(e){t.setState({isLoading:!1,options:e.items})}))}},{key:"mapSelect",value:function(e){this.setState({mapData:e})}},{key:"mapAdd",value:function(){var e="",t="";D.a.map(this.state.mapData.features,(function(a,n){e+=t+a.geometry.type[0]+"_";var r="";D.a.map(a.geometry.coordinates,(function(t,a){e+=r+t,r="-"})),t="|"})),this.setState({show:!1,form:void 0},this.props.addMap(this.state.mapData,e))}},{key:"render",value:function(){var e=this,t=this.state,a=t.show,n=t.alert,r=this.props.showSearchBar?"":"cev-advancedform";return u.a.createElement(b.a,{drop:"down",show:a,onToggle:function(){e.setState({show:!1})}},u.a.createElement(b.a.Toggle,{as:x,onClick:function(){e.setState({show:!0})}},u.a.createElement("button",{title:"B\xfasqueda avanzada",type:"button",className:"btn-small ml-2 btn btn-primary"},u.a.createElement(H.a,null))),u.a.createElement(b.a.Menu,{flip:"false",className:"dropdown-menu-fit dropdown-menu-left dropdown-menu-anim dropdown-menu-xl ".concat(r," advanceSearch")},u.a.createElement("div",{className:"cev-portlet"},u.a.createElement("div",{className:"cev-portlet__head-title"},u.a.createElement("h3",null,"Agregar b\xfasqueda"),u.a.createElement("button",{type:"button",className:"btn-small ml-2 btn btn-danger",onClick:function(){e.setState({show:!1})}},u.a.createElement(U.a,null))),u.a.createElement("div",{className:"cev-portlet__head-toolbar"},(!this.props.config||!this.props.config.forms)&&u.a.createElement("span",null,"Cargando configuraci\xf3n de formularios"),this.props.config&&this.props.config.forms&&u.a.createElement("select",{onChange:function(t){return e.selectForm(t)}},u.a.createElement("option",{value:"-1"},"Seleccione una opci\xf3n"),this.props.config.forms.map((function(e,t){return u.a.createElement("option",{key:t,value:t},e.title)})))),u.a.createElement("div",{className:"cev-portlet__body"},u.a.createElement("div",{className:"input-group"},this.state.form&&("form"===this.state.form.type||"form-select"===this.state.form.type)&&u.a.createElement(q.a,{schema:this.state.form.schema,uiSchema:this.state.form.uiSchema,widgets:this.state.form.widgets,fields:this.state.form.fields,onSubmit:function(t,a){var n=t.formData;a.preventDefault(),e.onSubmit(n,a)}},u.a.createElement("div",null,u.a.createElement("button",{type:"submit",className:"btn btn-success"},"Agregar"))),this.state.form&&"autocomplete"===this.state.form.type&&u.a.createElement(E.a.Group,{className:"w-100 mb-10"},u.a.createElement(w.a,null,u.a.createElement(g.a,{id:"autocompletado",paginate:!0,defaultOpen:!0,options:this.state.form.data,onChange:function(t){return e.onChange({selected:t})}}),u.a.createElement(w.a.Append,null,u.a.createElement(j.a,{onClick:function(){return e.onClick()},variant:"outline-secondary"},"Agregar")))),this.state.form&&"map"===this.state.form.type&&u.a.createElement(z,{addQuery:this.props.addQuery,onChange:function(t){e.mapSelect(t)},onAdd:function(){e.mapAdd()}})),u.a.createElement(O.a,{variant:"danger",show:n},"Introduzca datos")))))}}]),a}(u.a.Component),Q=Object(d.b)((function(e){return{user:e.auth.user._id,showSearchBar:e.app.showSearch}}))(W),J=(a(104),a(1504)),K=a.n(J),Y=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={newLabel:"",show:!1,alert:!1,form:void 0,isLoading:!1},n.validate=n.validate.bind(Object(i.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setState({oldLabel:this.props.label,newLabel:this.props.label,show:!1})}},{key:"validate",value:function(e){e.preventDefault()}},{key:"selectForm",value:function(e){var t=this,a=this.props.config.forms[e.target.value];void 0!==a?"form-select"===a.type?v.h(a.field).then((function(e){e.aggregations.options.buckets.length>0?a.schema.properties[a.name].enum=D.a.map(e.aggregations.options.buckets,"key"):a.schema.properties[a.name].enum=["Sin Registros"],a.schema.properties[a.name].enum=a.schema.properties[a.name].enum.sort(),t.setState({form:a})})):this.setState({form:a}):this.setState({form:null})}},{key:"change",value:function(e){}},{key:"onSubmit",value:function(e,t){t.preventDefault();var a=this.state.form.queryAlias?this.state.form.queryAlias:this.state.form.query;if("object"===typeof e)for(var n in e)console.log(n,e[n]),"Sin Registros"!==e[n]&&(a=a.split("["+n+"]").join(e[n]));else a=e;a!==this.state.form.query?this.setState({query:a,formData:e,show:!1,form:void 0},this.props.addQuery(a)):console.log("No se puede agregar registro")}},{key:"asyncSearch",value:function(e){var t=this;this.setState({isLoading:!0}),v.f(this.state.form,e).then((function(e){t.setState({isLoading:!1,options:e.items})}))}},{key:"mapSelect",value:function(e,t,a){this.setState({mapData:t,nameMap:e,mapId:a})}},{key:"mapAdd",value:function(){if("Pol\xedgono"===this.state.nameMap){var e="",t="";D.a.map(this.state.mapData.features,(function(a,n){e+=t+a.geometry.type[0]+"_";var r="";D.a.map(a.geometry.coordinates,(function(t,a){e+=r+t,r="-"})),t="|"})),this.setState({show:!1,form:void 0},this.props.addMap(this.state.mapData,e,this.state.nameMap))}else this.setState({show:!1,form:void 0},this.props.addMap(this.state.mapData,"M_"+this.state.mapId,this.state.nameMap))}},{key:"render",value:function(){var e=this,t=this.state.show,a=this.props.showSearchBar?"":"cev-advancedform";return u.a.createElement(b.a,{drop:"down",show:t,onToggle:function(){e.setState({show:!1})}},u.a.createElement(b.a.Toggle,{as:x,onClick:function(){e.setState({show:!0})}},u.a.createElement("button",{type:"button",className:"btn-small ml-2 btn btn-primary",title:"Busqueda por cobertura geogr\xe1fica"},u.a.createElement(K.a,null))),u.a.createElement(b.a.Menu,{flip:"false",className:"dropdown-menu-fit dropdown-menu-left dropdown-menu-anim dropdown-menu-xl ".concat(a," advanceSearch")},u.a.createElement("div",{className:"cev-portlet"},u.a.createElement("h3",null,"B\xfasqueda por cobertura geogr\xe1fica"),u.a.createElement("div",{className:"cev-portlet__body"},u.a.createElement(z,{addQuery:this.props.addQuery,onChange:function(t,a,n){e.mapSelect(t,a,n)},onAdd:function(t){e.mapAdd(t)},clear:function(){e.props.addMap(void 0,void 0,void 0)}})))))}}]),a}(u.a.Component),Z=Object(d.b)((function(e){return{user:e.auth.user._id,showSearchBar:e.app.showSearch}}))(Y),X=a(877),$=a(176),ee=a(2153),te=a(1106),ae=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.svg=te.l(this.refs.d3_canvas),this.updateViz()}},{key:"updateViz",value:function(){var e=this,t=10,a=10,n=10,r=10,o=te.g().domain(te.f(this.props.data.length)).range([n,550-r]).padding(.1),i=te.h().domain([0,te.d(this.props.data,(function(e){return e.value}))]).nice().range([200-t,a]),c=te.l("body").append("div").attr("class","d3-tooltip").style("opacity",0);return this.svg.attr("viewBox",[0,0,540,200]),this.svg.append("g").attr("fill","steelblue").attr("transform","translate(0,-10)").selectAll("rect").data(this.props.data).join("rect").attr("x",(function(e,t){return o(t)})).attr("y",(function(e){return i(e.value)})).attr("height",(function(e){return i(0)-i(e.value)})).attr("width",o.bandwidth()).on("mouseover",(function(e){c.transition().duration(200).style("opacity",.9),c.html("A\xf1o: "+e.name+"<br/>Registros: "+e.data).style("left",te.c.pageX+"px").style("top",te.c.pageY-28+"px")})).on("mouseleave",(function(e){c.transition().duration(500).style("opacity",0)})),this.svg.append("g").call((function(a){return a.attr("transform","translate(0,".concat(200-t-10,")")).style("font-size","8px").call(te.b(o).tickFormat((function(t){return e.props.data[t].name})).tickSizeOuter(0))})),this.svg.node()}},{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement("svg",{ref:"d3_canvas",width:"550",height:"200",viewBox:"0 0 630 200"}))}}]),a}(l.Component);var ne=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={value:[0,100],valuetext:"",min:0,max:100,marks:[]},n.valueLabelFormat=n.valueLabelFormat.bind(Object(i.a)(n)),n}return Object(o.a)(a,[{key:"valueLabelFormat",value:function(e){return this.state.marks[e].label}},{key:"handleChange",value:function(e,t){this.setState({value:t})}},{key:"normalizeData",value:function(e){var t=100/e.length;return(e=e.sort((function(e,t){return e.value-t.value}))).map((function(e,a){return 0===a?{name:e.name,value:3*t,data:e.value}:{name:e.name,value:3*a*t,data:e.value}})).sort((function(e,t){return e.name-t.name}))}},{key:"componentDidMount",value:function(){var e=this;(function(e){var t={method:"POST",headers:new Headers({"Content-Type":"application/json",Authorization:Object(A.c)()}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(F.i+"/api/viz/getHistogramDates",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))})({}).then((function(t){console.log("Datos visualizaci\xf3n");var a=[],n=0,r=D.a.map(t.aggregations.resource_by_month.buckets,(function(e,t){return 0!==e.doc_count&&(a.push({value:n,label:new Date(e.key).getUTCFullYear()}),n++),{name:new Date(e.key).getUTCFullYear(),value:e.doc_count}})).filter((function(e){return 0!==e.value}));r.length>0&&e.setState({histogramData:e.normalizeData(r),max:r.length-1,value:[0,r.length-1],marks:a})}),(function(e){console.log("Error en la consulta getHistogramDates"),console.log(e)}))}},{key:"addSearch",value:function(){var e=new Date(this.state.marks[this.state.value[0]].label+"-01-01"),t=new Date(this.state.marks[this.state.value[1]].label+"-12-31");this.props.addQuery("temporal.inicio: ["+e.toISOString().substring(0,10)+" TO "+t.toISOString().substring(0,10)+"]")}},{key:"addSearchWithout",value:function(){this.props.addQuery("!_exists_:temporal.inicio")}},{key:"render",value:function(){var e=this,t=this.props.classes;return u.a.createElement("div",{className:t.root},this.state.histogramData&&u.a.createElement(u.a.Fragment,null,u.a.createElement($.a,{id:"range-slider",gutterBottom:!0},"Cobertura temporal"),u.a.createElement(ae,{data:this.state.histogramData}),u.a.createElement(ee.a,{value:this.state.value,onChange:function(t,a){e.handleChange(t,a)},"aria-labelledby":"range-slider",valueLabelDisplay:"on",min:this.state.min,max:this.state.max,getAriaValueText:this.valueLabelFormat,valueLabelFormat:this.valueLabelFormat,marks:this.state.marks}),u.a.createElement("button",{type:"button",className:"btn btn-success btn-sm",onClick:function(){e.addSearch()}},u.a.createElement("i",{className:"flaticon2-plus"}," Agregar rango fechas")),u.a.createElement("button",{type:"button",className:"btn btn-warning btn-sm",onClick:function(){e.addSearchWithout()}},u.a.createElement("i",{className:"flaticon2-plus"},"Sin Cobertura"))))}}]),a}(l.Component),re=Object(X.a)((function(e){return{root:{width:550,background:"#fffe"}}}))(ne),oe=a(1505),ie=a.n(oe),ce=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={newLabel:"",show:!1,alert:!1,form:void 0,isLoading:!1},n.validate=n.validate.bind(Object(i.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setState({oldLabel:this.props.label,newLabel:this.props.label,show:!1})}},{key:"validate",value:function(e){e.preventDefault()}},{key:"selectForm",value:function(e){var t=this,a=this.props.config.forms[e.target.value];void 0!==a?"form-select"===a.type?v.h(a.field).then((function(e){e.aggregations.options.buckets.length>0?a.schema.properties[a.name].enum=D.a.map(e.aggregations.options.buckets,"key"):a.schema.properties[a.name].enum=["Sin Registros"],a.schema.properties[a.name].enum=a.schema.properties[a.name].enum.sort(),t.setState({form:a})})):this.setState({form:a}):this.setState({form:null})}},{key:"onSubmit",value:function(e,t){t.preventDefault();var a=this.state.form.queryAlias?this.state.form.queryAlias:this.state.form.query;if("object"===typeof e)for(var n in e)console.log(n,e[n]),"Sin Registros"!==e[n]&&(a=a.split("["+n+"]").join(e[n]));else a=e;a!==this.state.form.query?this.setState({query:a,formData:e,show:!1,form:void 0},this.props.addQuery(a)):console.log("No se puede agregar registro")}},{key:"asyncSearch",value:function(e){var t=this;this.setState({isLoading:!0}),v.f(this.state.form,e).then((function(e){t.setState({isLoading:!1,options:e.items},(function(){console.log("El estado ahora es ",t.state)}))}))}},{key:"mapSelect",value:function(e){this.setState({mapData:e})}},{key:"mapAdd",value:function(){var e="",t="";D.a.map(this.state.mapData.features,(function(a,n){e+=t+a.geometry.type[0]+"_";var r="";D.a.map(a.geometry.coordinates,(function(t,a){e+=r+t,r="-"})),t="|"})),this.setState({show:!1,form:void 0},this.props.addMap(this.state.mapData,e))}},{key:"render",value:function(){var e=this,t=this.state.show,a=this.props.showSearchBar?"":"cev-advancedform";return u.a.createElement(b.a,{drop:"down",show:t,onToggle:function(){e.setState({show:!1})},flip:"false"},u.a.createElement(b.a.Toggle,{as:x,onClick:function(){e.setState({show:!0})}},u.a.createElement("button",{type:"button",className:"btn-small ml-2 btn btn-primary",title:"B\xfasqueda por fecha"},u.a.createElement(ie.a,null))),u.a.createElement(b.a.Menu,{flip:"false",className:"dropdown-menu-fit dropdown-menu-left dropdown-menu-anim dropdown-menu-xl ".concat(a," advanceSearch")},u.a.createElement("div",{className:"cev-portlet"},u.a.createElement("div",{className:"cev-portlet__head"},u.a.createElement("div",{className:"cev-portlet__head-label"},u.a.createElement("h3",{className:"cev-portlet__head-title cev-font-primary"},"B\xfasqueda por tiempo"))),u.a.createElement("div",{className:"cev-portlet__body"},u.a.createElement(re,{addQuery:function(t){return e.props.addQuery(t)}})))))}}]),a}(u.a.Component),se=Object(d.b)((function(e){return{user:e.auth.user._id,showSearchBar:e.app.showSearch}}))(ce),le=a(8),ue=a(973),de=a(2132),he=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={annotations:null,entitiesTree:null,documentText:null,entitiesColorMap:null,showEntities:!1},n.toggleEntities=n.toggleEntities.bind(Object(i.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;(function(){var e={method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:Object(A.c)()}),mode:"cors",cache:"default"};return fetch(F.i+"/api/viz/getEtiquetas",e).then((function(e){if(200!==e.status)return Promise.reject(e.status);var t=e.json();return console.log(t),t}))})().then((function(t){console.log(t);var a=D.a.map(D.a.sortBy(t.aggregations.tipo.etiquetas.buckets,"key"),"key"),n=e.createEntitiesColorMap(a.map((function(e){return JSON.parse('"'.concat(e,'"'))})),F.a),r=e.createEntitiesTree(a.map((function(e){return JSON.parse('"'.concat(e,'"'))})),n);e.setState({entitiesColorMap:n,entitiesTree:r,entitiesList:a})})),this.props.showSearch(!0),this.props.showSearchTags(!1),this.props.fromComponent("metadata-tesauro")}},{key:"componentWillUnmount",value:function(){this.props.showSearch(!1),this.props.showSearchTags(!1),this.props.fromComponent("")}},{key:"createEntitiesTree",value:function(e,t){var a=[];return e.forEach((function(e,n){var r=a,o=e.split(" - ");"Entidades"!==o[0]&&o.forEach((function(a,o){if(a&&void 0!==r){var i=r.find((function(e){return e.text===a}));i||(i=r.push({id:n,text:a,state:{opened:!1,selected:!1},icon:"fas fa-square",children:[],data:'etiquetado:"'+e+'"',a_attr:{href:'/search?from=1&q=etiquetado:"'.concat(e,'"'),style:"color: ".concat(t[e])}})),r=i.children}}))})),{core:{data:a,expand_selected_onload:!1,themes:{dots:!1}},plugins:[],checkbox:{three_state:!0}}}},{key:"createEntitiesColorMap",value:function(e,t){return e.reduce((function(e,a,n){return Object(S.a)(Object(S.a)({},e),{},Object(le.a)({},a,t[n%t.length]))}),{})}},{key:"handleNodeSelection",value:function(e,t){var a=t.event.target,n=t.node.a_attr.href,r=t.node.data;"a"===a.tagName.toLowerCase()&&"#"!==n&&(this.props.filters({filters:{keyword:r,resourceGroup:{resourceGroupText:"",resourceGroupIDS:""},mapPolygon:""}}),this.props.addQuery(r))}},{key:"toggleEntities",value:function(){this.setState({showEntities:!this.state.showEntities})}},{key:"render",value:function(){var e=this,t=this.state.entitiesTree;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(de.a,null,u.a.createElement(de.a.Header,{className:"text-center"},"Etiquetas"),u.a.createElement(de.a.Body,null,u.a.createElement(ue.a,{treeData:t,onNodeSelected:function(t,a){return e.handleNodeSelection(t,a)}}))),!t&&u.a.createElement(u.a.Fragment,null,u.a.createElement(G.a,{fluid:!0,className:"my-5"},u.a.createElement(O.a,{variant:"success"},u.a.createElement("div",{className:"alert-icon"},u.a.createElement("i",{className:"fas fa-sync fa-spin"})),u.a.createElement("div",{className:"alert-text"},"Cargando etiquetas ...")))))}}]),a}(l.Component),fe=Object(d.b)((function(e){return{user:e.auth.user}}),p.a)(he),pe=a(1506),me=a.n(pe),ve=a(1507),ge=a.n(ve),ye=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleSync=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(){for(var n=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];clearTimeout(t),t=setTimeout((function(){return e.apply(n,o)}),a)}}((function(e){e.update()}),1e3),n.state={newLabel:"",show:!1,alert:!1,form:void 0,isLoading:!1},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setState({oldLabel:this.props.label,newLabel:this.props.label,show:!1})}},{key:"selectForm",value:function(e){var t=this,a=this.props.config.forms[e.target.value];void 0!==a?"form-select"===a.type?v.h(a.field).then((function(e){e.aggregations.options.buckets.length>0?a.schema.properties[a.name].enum=D.a.map(e.aggregations.options.buckets,"key"):a.schema.properties[a.name].enum=["Sin Registros"],a.schema.properties[a.name].enum=a.schema.properties[a.name].enum.sort(),t.setState({form:a})})):this.setState({form:a}):this.setState({form:null})}},{key:"onSubmit",value:function(e,t){t.preventDefault();var a=this.state.form.queryAlias?this.state.form.queryAlias:this.state.form.query;if("object"===typeof e)for(var n in e)"Sin Registros"!==e[n]&&(a=a.split("["+n+"]").join(e[n]));else a=e;a!==this.state.form.query&&this.setState({query:a,formData:e,show:!1,form:void 0},this.props.addQuery(a))}},{key:"asyncSearch",value:function(e){var t=this;this.setState({isLoading:!0}),v.f(this.state.form,e).then((function(e){t.setState({isLoading:!1,options:e.items})}))}},{key:"mapSelect",value:function(e){this.setState({mapData:e})}},{key:"mapAdd",value:function(){var e="",t="";D.a.map(this.state.mapData.features,(function(a,n){e+=t+a.geometry.type[0]+"_";var r="";D.a.map(a.geometry.coordinates,(function(t,a){e+=r+t,r="-"})),t="|"})),this.setState({show:!1,form:void 0},this.props.addMap(this.state.mapData,e))}},{key:"render",value:function(){var e=this,t=this.state.show,a=this.props.showSearchBar?"":"cev-advancedform";return u.a.createElement(b.a,{drop:"down",show:t,onToggle:function(){e.setState({show:!1})}},u.a.createElement(b.a.Toggle,{as:x,onClick:function(){e.setState({show:!0})}},u.a.createElement("button",{type:"button",className:"btn-small ml-2 btn btn-primary",title:"B\xfasqueda por etiquetas"},u.a.createElement(ge.a,null))),u.a.createElement(b.a.Menu,{flip:"false",className:"dropdown-menu-fit dropdown-menu-left dropdown-menu-anim dropdown-menu-xl ".concat(a," advanceSearch")},u.a.createElement("div",{className:"cev-portlet"},u.a.createElement("div",{className:"cev-portlet__head-title"},u.a.createElement("h3",null,"B\xfasqueda por etiquetas"),u.a.createElement("button",{type:"button",className:"btn-small ml-2 btn btn-danger",onClick:function(){e.setState({show:!1})}},u.a.createElement(U.a,null))),u.a.createElement("div",{className:"cev-portlet__body"},u.a.createElement(me.a,{className:"cev-scroll",options:{wheelSpeed:1,wheelPropagation:!1},style:{height:"300px"},"data-scroll":"true",onSync:this.handleSync},u.a.createElement("div",{className:"cev-portlet"},u.a.createElement(fe,{addQuery:this.props.addQuery})))))))}}]),a}(u.a.Component),be=Object(d.b)((function(e){return{user:e.auth.user._id,showSearchBar:e.app.showSearch}}))(ye),Ee=(a(1364),function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"AdvancedSearchForm"},u.a.createElement("span",{className:"buttons"},u.a.createElement("button",{title:"agregar condicional OR",type:"button",className:"btn-small ml-2 btn btn-primary",onClick:function(t){return e.props.addQuery("OR")}},"OR"),u.a.createElement("button",{title:"agregar condicional AND",type:"button",className:"btn-small ml-2 btn btn-primary",onClick:function(t){return e.props.addQuery("AND")}},"AND")),u.a.createElement(Q,{config:this.props.config,addQuery:this.props.addQuery}),this.props.dashboard&&u.a.createElement(Z,{config:this.props.config,addQuery:this.props.addQuery,addMap:this.props.addMap}),u.a.createElement(be,{config:this.props.config,addQuery:this.props.addQuery}),u.a.createElement(u.a.Fragment,null,u.a.createElement(se,{config:this.props.config,addQuery:this.props.addQuery})))}}]),a}(l.Component)),we=a(1184),je=a(1508),Oe=a.n(je),xe=(a(2145),a(2124),a(516),a(886),function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e))._renderItems=function(e,t,a){return[null!==e.parent?u.a.createElement("div",{key:e.id,className:"d-flex flex-column flex-grow-1 font-weight-bold"},u.a.createElement("span",{className:"text-dark text-hover-primary mb-1 font-size-lg"},e.text),u.a.createElement("small",{className:"text-muted"},e.sublevel)):u.a.createElement("div",{key:e.id,className:"d-flex flex-column flex-grow-1 font-weight-bold"},u.a.createElement("span",{href:"#",className:"text-dark text-hover-primary mb-1 font-size-lg"},e.text))]},n.state={ResourceGroup:[],open:!1,advancedSearchConfig:void 0,mapQuery:void 0,filters:[],currentPosition:0,showTime:!1,currentKey:null,query:"",mapPlace:void 0},n.TypeaheadRef=u.a.createRef(),n.ResourceGroup=n.ResourceGroup.bind(Object(i.a)(n)),n.deleteTag=n.deleteTag.bind(Object(i.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.ResourceGroup(),this.AdvancedSearhConfig()}},{key:"AdvancedSearhConfig",value:function(){var e=this;v.d().then((function(t){e.setState({advancedSearchConfig:t})}),(function(e){console.log(e)}))}},{key:"ResourceGroup",value:function(){var e=this;m.f("").then((function(t){var a=[];t.forEach((function(e){e.children.length>0?e.children.forEach((function(t){t.sublevel=e.text,a.push(t)})):a.push(e)})),e.setState({ResourceGroup:a})}),(function(e){Object(we.a)({error:e,text:"Se ha presentado un error al cargar la informaci\xf3n",confirmButtonText:"Aceptar",action:function(){}})}))}},{key:"getAllChildren",value:function(e){var t=[];return function e(a){a.children.length>0?(t.push.apply(t,Object(n.a)(a.resourceGroup)),a.children.forEach((function(t){e(t)}))):t.push.apply(t,Object(n.a)(a.resourceGroup))}(e),t}},{key:"addQuery",value:function(e,t,a){var n=this.state.currentPosition,r=this.state.filters;("AND"!==e&&"OR"!==e||(0===n?e="":"AND"!==r[n]&&"OR"!==r[n]&&"AND"!==r[n-1]&&"OR"!==r[n-1]||(e="")),e)&&(n===r.length?r.push(e):r.splice(n,0,e),a("searchValue",r.join(" ")),this.setState({filters:r,currentPosition:r.length}))}},{key:"addMap",value:function(e,t,a,n){this.setState({mapQuery:e,mapPlace:n}),a("map",t)}},{key:"removeMap",value:function(){this.setState({mapQuery:void 0})}},{key:"handleChangeInput",value:function(e){this.setState({query:e.target.value})}},{key:"handleKeyUP",value:function(e,t,a){if(13===e.which&&0!==e.target.value.length&&(this.setState({query:""}),this.addQuery(e.target.value,t,a)),'"'===e.key&&('"'===this.state.currentKey?this.setState({currentKey:null}):this.setState({currentKey:e.key})),32===e.which&&'"'!==this.state.currentKey&&(e.preventDefault(),this.addQuery(e.target.value,t,a),this.setState({query:""})),-1!==[8,37,39,46].indexOf(e.which)&&0===e.target.value.length){var n=this.state.currentPosition;8===e.which&&n>0&&this.deleteTag(n-1,t,a),37===e.which&&this.setState({currentPosition:0===n?0:n-1}),39===e.which&&this.setState({currentPosition:n===this.state.filters.length?this.state.filters.length:n+1}),46===e.which&&n<this.state.filters.length&&this.deleteTag(n,t,a)}}},{key:"deleteTag",value:function(e,t,a){var n=this.state.filters;n.splice(e,1),a("searchValue",n.join(" ")),this.setState({filters:n,currentPosition:n.length})}},{key:"toggleTime",value:function(){this.setState({showTime:!this.state.showTime})}},{key:"render",value:function(){var e=this;return u.a.createElement(u.a.Fragment,null,this.state.ResourceGroup.length>0&&u.a.createElement(f.c,{enableReinitialize:!0,initialValues:{searchValue:"",searchResourceGroup:[],map:""},validate:function(t){var a={};return""===e.state.query&&(t.searchValue||0!==t.searchResourceGroup.length||t.map||(a.validate="Debe ingresar un par\xe1metro de b\xfasqueda, seleccionar un fondo o seleccionar un area georreferenciada")),a},onSubmit:function(t){var a=t.searchResourceGroup.children&&t.searchResourceGroup.children.length>0?t.searchResourceGroup.children.join(","):"",n=t.searchResourceGroup.text&&t.searchResourceGroup.text.length>0?t.searchResourceGroup.text.join(","):"",r="from="+encodeURIComponent(1),o="";(t.searchValue||""!==e.state.query)&&("OR"!==(o=t.searchValue.split(" "))[o.length-1]&&"AND"!==o[o.length-1]||o.pop(),t.searchValue=o.join(" ")+" "+e.state.query,o="q="+encodeURIComponent(t.searchValue)),e.props.fromComponent("search"),e.props.filters({filters:{keyword:t.searchValue,resourceGroup:{resourceGroupText:n,resourceGroupIDS:a},mapPolygon:t.map?t.map:""}}),o?e.props.history.push("/search?"+o+"&"+r):e.props.history.push("/search?"+r)}},(function(t){var a=t.values,n=t.errors,r=t.touched,o=(t.handleChange,t.handleBlur,t.handleSubmit),i=(t.isSubmitting,t.setFieldValue);return u.a.createElement("div",null,u.a.createElement("form",{onSubmit:o},u.a.createElement("div",{className:"input-group"},u.a.createElement("div",{className:"input-group-prepend"}),u.a.createElement(y,{tags:e.state.filters,currentPosition:e.state.currentPosition,events:{onKeyDown:function(t){e.handleKeyUP(t,a,i)},deleteTag:function(t){e.deleteTag(t,a,i)},onChange:function(t){e.handleChangeInput(t)}}}),u.a.createElement("button",{type:"submit",className:"btn-small ml-2 btn btn-primary",disabled:!1},u.a.createElement(Oe.a,null)," Buscar")),e.state.mapPlace&&u.a.createElement("div",{className:"mapPlace"},u.a.createElement("i",{className:"flaticon2-map"}),"Mapa seleccionado: ",e.state.mapPlace),u.a.createElement("br",null)),u.a.createElement("div",{className:"resources-group-search resources-group-zindex"},e.state.advancedSearchConfig&&u.a.createElement(Ee,{dashboard:!0,className:"advanced-search-zindex",config:e.state.advancedSearchConfig,addQuery:function(t){return e.addQuery(t,a,i)},addMap:function(t,a,n){return e.addMap(t,a,i,n)}}),u.a.createElement("div",{className:"resources-group-list"},u.a.createElement(g.a,{id:"resources-group",labelKey:"text",clearButton:!0,multiple:!0,options:e.state.ResourceGroup.filter((function(e){return!["001-ERR","000-ERR"].includes(e.parent)})),renderMenuItemChildren:e._renderItems,placeholder:"Selecciona un fondo",searchText:"Cargando fondos",promptText:"Buscar fondos",emptyLabel:"No se encontraron fondos",onChange:function(t){var a=t.map((function(t,a){return e.getAllChildren(t)})),n=t.map((function(e,t){return e.text}));i("searchResourceGroup",{children:a,text:n})},open:e.state.open,onBlur:function(){return e.setState({open:!1})},onFocus:function(){return e.setState({open:!0})},ref:e.TypeaheadRef}))),u.a.createElement("br",null),u.a.createElement("div",{className:"text-center"},u.a.createElement("span",{className:"badge badge-danger"},n.validate&&(r.searchValue||r.searchResourceGroup)&&n.validate)))})))}}]),a}(l.Component));Object(h.o)(Object(d.b)(null,p.a)(xe))},1364:function(e,t,a){},1366:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i}));var n=a(40),r=a(43);a(179);function o(e){var t={method:"POST",headers:new Headers({"Content-Type":"application/json",Authorization:Object(r.c)()}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(n.i+"/api/resources/getAllResources",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function i(e){var t={method:"DELETE",headers:new Headers({Authorization:Object(r.c)()}),mode:"cors",cache:"default"};return fetch(n.i+"/api/resources/"+e,t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}},1916:function(e,t){},1918:function(e,t){},1928:function(e,t){},1930:function(e,t){},1955:function(e,t){},1957:function(e,t){},1958:function(e,t){},1963:function(e,t){},1965:function(e,t){},1971:function(e,t){},1973:function(e,t){},1992:function(e,t){},2004:function(e,t){},2007:function(e,t){},2120:function(e,t,a){"use strict";a.r(t);var n=a(35),r=a(2),o=a.n(r),i=a(965),c=a(966),s=a(1280),l=a(516),u=a.p+"static/media/01.c1a7dc2c.png",d=a.p+"static/media/02.cee71cf7.png",h=a.p+"static/media/03.f01ff957.png",f=a.p+"static/media/04.22aae574.png",p=a.p+"static/media/05.fdd0333c.png",m=(a.p,a.p,a.p,a.p,a.p+"static/media/10.208c0a36.png"),v=a.p+"static/media/11.307e6213.png",g=a.p+"static/media/12.49bf22aa.png",y=a.p+"static/media/13.29dff9dd.png",b=a.p+"static/media/14.8c450f36.png",E=function(e){return o.a.createElement(l.a,{style:{background:"url(".concat(e.img,")"),backgroundColor:"rgb(42, 80, 128)",width:200,height:300,borderRadius:10,backgroundSize:"cover",backgroundPosition:"center",margin:5,cursor:"pointer","&:hover":{transform:"scale(1.1)"}},onClick:function(){return e.callback(e.form,e.apipath,e.img,e.title,e.instructions)}},o.a.createElement(l.a,{style:{background:"rgba(86, 116, 154,0.5)",backdropFilter:"blur(10px)",color:"#fff",fontWeight:"bold",borderTopRightRadius:10,borderTopLeftRadius:10,padding:15,textAlign:"center"}},e.title))},w=function(e){var t=Object(s.b)();return o.a.createElement(l.a,{className:t.root,style:{backgroundColor:"rgba(42, 80, 128,0.65)",marginTop:0,maxWidth:"calc(100% - 20px)"}},o.a.createElement(l.a,{className:t.items},o.a.createElement(E,{callback:e.callback,img:u,title:"Generar inventarios"}),o.a.createElement(E,{callback:e.callback,img:m,apipath:"/youtube-scrap",form:[{name:"url_single",label:"URL del video",type:"text"},{name:"limit",label:"Limit",type:"number"}],title:"Importar de YouTube",instructions:o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,"Este proceso permite descargar videos de YouTube y realizar una indexaci\xf3n del contenido del video, incluyendo informaci\xf3n como el t\xedtulo, autor y fecha de publicaci\xf3n. Adem\xe1s, el proceso tambi\xe9n descarga la transcripci\xf3n del video en caso de estar disponible. En caso de que el video no cuente con una transcripci\xf3n, puedes acceder al procesamiento de transcripci\xf3n en el men\xfa principal para realizar dicha tarea."),o.a.createElement("p",null,"Para importar un solo video, solo ingresa la URL del video en el campo URL del video. Para importar un canal, ingresa la URL del canal en el campo URL del canal y el l\xedmite de videos a importar en el campo Limit."))}),o.a.createElement(E,{callback:e.callback,img:v,apipath:"/web-scrap",form:[{name:"url",label:"URLs separadas por comas",type:"text"}],title:"Importar sitios web",instructions:o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,"Este proceso te permite descargar art\xedculos web y guardarlos en la base de datos del aplicativo. Durante el proceso, se extrae informaci\xf3n importante como el t\xedtulo del art\xedculo, su contenido, el autor y la fecha de publicaci\xf3n."),o.a.createElement("p",null,"Recuerda indexar el contenido para que sea recuperable en la b\xfasqueda."))}),o.a.createElement(E,{callback:e.callback,img:g,apipath:"/anonimizar",form:[{name:"model",label:"Modelo",type:"select",options_service:"models_ner"},{name:"overwrite",label:"Sobreescribir la versi\xf3n anonimizada",type:"checkbox"}],title:"Anonimizar contenido"}),o.a.createElement(E,{callback:e.callback,img:y,apipath:"/index",form:[],title:"Indexar contenido",instructions:o.a.createElement("p",null,"Este proceso te permite realizar una indexaci\xf3n del contenido para hacerlo f\xe1cilmente recuperable durante la b\xfasqueda.")}),o.a.createElement(E,{callback:e.callback,img:b,apipath:"/textprocessing",form:[],title:"Procesar relaciones de texto"}),o.a.createElement(E,{callback:e.callback,img:d,apipath:"/ocrprocessing",form:[{name:"overwrite",label:"Sobreescribir la versi\xf3n transcrita",type:"checkbox"}],title:"Generar OCR"}),o.a.createElement(E,{callback:e.callback,img:f,title:"Procesar archivos"}),o.a.createElement(E,{callback:e.callback,img:h,apipath:"/transcribe",form:[{name:"model",label:"Modelo",type:"select",options_service:"models_transcribe"},{name:"overwrite",label:"Sobreescribir las transcripciones",type:"checkbox"}],title:"Transcribir videos y audios"}),o.a.createElement(E,{callback:e.callback,img:p,apipath:"/ner",form:[{name:"model",label:"Modelo",type:"select",options_service:"models_ner"},{name:"overwrite",label:"Sobreescribir las entidades nombradas",type:"checkbox"}],title:"Detectar entidades nombradas"})))},j=a(152),O=a(19),x=a(889),S=a(2154),k=a(2101),C=a(2128),L=a(514),N=a(518),_=a(2125),T=a(2102),P=a(40);function D(){var e={method:"GET",headers:new Headers({"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch(P.j+"/get_models_ner",e).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function R(){var e={method:"GET",headers:new Headers({"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch(P.j+"/get_models_transcribe",e).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}var F=a(211),A=a.n(F);function G(){G=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(L){s=function(e,t,a){return e[t]=a}}function l(e,t,a,r){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new S(r||[]);return n(i,"_invoke",{value:w(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(L){return{type:"throw",arg:L}}}e.wrap=l;var d={};function h(){}function f(){}function p(){}var m={};s(m,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(k([])));g&&g!==t&&a.call(g,o)&&(m=g);var y=p.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var r;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(r,i){!function n(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}(n,o,r,i)}))}return r=r?r.then(i,i):i()}})}function w(e,t,a){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return C()}for(a.method=r,a.arg=o;;){var i=a.delegate;if(i){var c=j(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function j(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,r,o){void 0===o&&(o=Promise);var i=new E(l(t,a,n,r),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(y),s(y,c,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return i.type="throw",i.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),s=a.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),x(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;x(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:k(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var M=function(e){var t=Object(r.useState)({}),a=Object(n.a)(t,2),i=a[0],c=a[1],s=Object(r.useState)({}),l=Object(n.a)(s,2),u=l[0],d=l[1];Object(r.useEffect)((function(){var e=Object(O.a)({},u);function t(){return(t=Object(j.a)(G().mark((function t(){var a,n;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D();case 2:return a=t.sent,e.models_ner=a.message,t.next=6,R();case 6:n=t.sent,e.models_transcribe=n.message,d(e);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]);var h=function(e,t){var a=Object(O.a)({},i);""===e&&" "===e||(a[t]=e,c(a))},f=function(){A.a.fire({title:"Procesando",allowEscapeKey:!1,allowOutsideClick:!1,onBeforeOpen:function(){A.a.showLoading()}});var t=Object(O.a)({},i);t.fondo=e.selected.id,function(e,t){var a=t,n={method:"POST",headers:new Headers({"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(P.j+a,n).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}(t,e.form.path).then((function(e){console.log(e),A.a.close()})).catch((function(e){console.log(e),A.a.close()}))};return o.a.createElement(o.a.Fragment,null,e.form.form.map((function(e,t){var a;return o.a.createElement(o.a.Fragment,null,"text"===e.type&&o.a.createElement(S.a,{label:e.label,variant:"outlined",type:e.type,onChange:function(t){return h(t.target.value,e.name)},style:{width:"100%",marginBottom:20}}),"checkbox"===e.type&&o.a.createElement("div",null,o.a.createElement(k.a,{control:o.a.createElement(C.a,{onChange:function(t){return h(t.target.checked,e.name)},name:e.name,color:"primary"}),label:e.label})),"select"===e.type&&o.a.createElement("div",null,o.a.createElement(L.a,null,o.a.createElement(N.a,{id:"demo-simple-select-label"},e.label),o.a.createElement(_.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",onChange:function(t){return h(t.target.value,e.name)}},null===(a=u[e.options_service])||void 0===a?void 0:a.map((function(e,t){return o.a.createElement(T.a,{value:e},e)}))))))})),o.a.createElement(x.a,{variant:"outlined",style:{},onClick:function(){return f()}},"Procesar"))},z=a(92),B=a(38),q=a(56),I=a(151),H=a(1281),V=a(1366),U=(a(992),a(1365)),W=a.n(U),Q=a(1184),J=a(973),K=a(212),Y=a(213),Z=a(342),X=a(216),$=a(217),ee=a(988),te=a.n(ee),ae=(a(1367),a(1509),a(1882),a(1883),a(1885),a(267)),ne=a.n(ae),re=(a(361),function(e){Object(X.a)(a,e);var t=Object($.a)(a);function a(e){var n;return Object(K.a)(this,a),(n=t.call(this,e)).state={table:null,itemsSelected:void 0!==e.itemsSelected?e.itemsSelected:[],id:e.id,columns:e.columns,data:e.data?e.data:[],isMounted:!1,paging:void 0===e.paging||e.paging,ordering:void 0===e.ordering||e.ordering,isSelected:void 0!==e.isSelected&&e.isSelected,filter:void 0===e.filter||e.filter,info:void 0===e.info||e.info,actions:e.actions?e.actions:[]},n.clickActions=n.clickActions.bind(Object(Z.a)(n)),n.outputFilterAndPagination=n.outputFilterAndPagination.bind(Object(Z.a)(n)),n}return Object(Y.a)(a,[{key:"clickActions",value:function(e){this.props.outputEvent(e)}},{key:"outputFilterAndPagination",value:function(e){this.props.outputFilterAndPagination(e)}},{key:"outputSelectedData",value:function(e){this.props.outputSelected(e)}},{key:"componentDidMount",value:function(){var e=this,t=this;console.log("create datatable","#".concat(t.state.id)),te()("#".concat(t.state.id)).DataTable({data:t.state.data,columns:t.state.columns,responsive:!0,ordering:t.state.ordering,select:t.state.isSelected,paging:t.state.paging,filter:t.state.filter,info:t.state.info,language:{totalPages:t.state.data,emptyTable:"Ning\xfan dato disponible en esta tabla",info:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",lengthMenu:"Mostrar _MENU_ registros",search:'<i class="la la-search"></i>Buscar',zeroRecords:"No se encontraron resultados",paginate:{first:'<i class="la la-angle-double-left"></i>',last:'<i class="la la-angle-double-right"></i>',next:'<i class="la la-angle-right"></i>',previous:'<i class="la la-angle-left"></i>'}},columnDefs:t.state.columns.map((function(a,n){var r={};switch(a.type){case"action":r={targets:n,orderable:!1,width:a.width?a.width:null,render:function(t,a,n,r){var o=e.state.actions.map((function(e){return'<button class="btn btn-sm btn-clean btn-icon btn-icon-md" id="cev_button_'.concat(e.action,'" title="').concat(e.title,'">\n                                                    <i class="').concat(e.classLaIcon,'"></i>\n                                                </button>')}));return o.length>0?o.reduce((function(e,t){return e+t})):""},createdCell:function(a,n,r,o){e.state.actions.map((function(e){return te()(a).find("#cev_button_".concat(e.action)).on("click",(function(a){a.stopPropagation(),a.preventDefault(),t.clickActions({action:e,row:r})}))}))}};break;case"list":r={targets:n,orderable:!0,width:a.width?a.width:null,render:function(e,t,a,n){return(Array.isArray(e)?e:[]).map((function(e){return"<li>\n                                                    ".concat(e,"\n                                                </li>")})).reduce((function(e,t){return e+t}),"")}};break;case"range-date":r={targets:n,orderable:!0,width:a.width?a.width:null,render:function(e,t,a,n){return JSON.stringify(e)}};break;case"miniature":r={targets:n,orderable:!0,width:a.width?a.width:null,render:function(e,t,a,n){return"no-photo"===e?e:'<img style="max-width: 50px; border-radius: 25px" src='.concat(a.photo,' alt="user" />')}};break;default:r={targets:n,orderable:!0,width:a.width?a.width:null,render:function(e,t,a,n){return"[object String]"===Object.prototype.toString.call(e)?e||"":"[object Object]"===Object.prototype.toString.call(e)?e?JSON.stringify(e):"":"[object Number]"===Object.prototype.toString.call(e)?e?"".concat(e):"":e?JSON.stringify(e):""}}}return r}))})}},{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&this.loadSelectedData(),e.actions!==this.props.actions&&this.setState({actions:this.props.actions})}},{key:"loadSelectedData",value:function(){var e=this;console.log("loading data ... ");var t=te()("#".concat(this.state.id)).DataTable();if(t.clear(),t.rows.add(this.props.data),t.draw(),this.state.isSelected){this.checkPageSelection(this.props.data);for(var a=document.getElementsByTagName("tr"),n=function(n){a[n].addEventListener("click",(function(){if(a[n].classList.toggle("selected"),a[n].classList.value.includes("selected")){var r=t.rows(".selected")[0].map((function(t){return e.props.data[t]}));e.updateMySelected(r)}else{var o=e.props.data[n-1];e.removeSelected(o)}}))},r=1;r<a.length;r++)n(r)}}},{key:"removeSelected",value:function(e){var t=this.state.itemsSelected.filter((function(t){return e.ident!==t.ident}));this.outputSelectedData(t),this.setState({itemsSelected:t})}},{key:"updateMySelected",value:function(e){var t=ne.a.unionBy(this.state.itemsSelected,e,"ident");this.outputSelectedData(t),this.setState({itemsSelected:t})}},{key:"checkPageSelection",value:function(e){for(var t=ne.a.intersectionWith(this.state.itemsSelected,e,ne.a.isEqual),a=document.getElementsByTagName("tr"),n=0;n<t.length;n++){var r=ne.a.findIndex(e,t[n]);-1!==r&&a[r+1].classList.add("selected")}}},{key:"componentWillUnmount",value:function(){te()("#".concat(this.state.id)).DataTable().destroy(!0)}},{key:"selectPage",value:function(){for(var e=this,t=te()("#".concat(this.state.id)).DataTable(),a=document.getElementsByTagName("tr"),n=1;n<a.length;n++)a[n].classList.add("selected");var r=t.rows(".selected")[0].map((function(t){return e.props.data[t]}));this.outputSelectedData(r),this.updateMySelected(r)}},{key:"clearSelect",value:function(){for(var e=this,t=te()("#".concat(this.state.id)).DataTable(),a=document.getElementsByTagName("tr"),n=1;n<a.length;n++)a[n].classList.remove("selected");t.rows(".selected")[0].map((function(t){return e.props.data[t]}));this.outputSelectedData([]),this.setState({itemsSelected:[]})}},{key:"render",value:function(){var e=this.state,t=e.id,a=e.isSelected,n=e.itemsSelected;e.data;return o.a.createElement(o.a.Fragment,null,a&&o.a.createElement("div",{className:"d-flex justify-content-between"},o.a.createElement("div",{className:"d-flex justify-content-between"},o.a.createElement("span",{className:"m-2 "},n.length>0?n.length+" recursos eleccionados":"")),o.a.createElement("div",{className:"d-flex justify-content-between"})),o.a.createElement("table",{className:"table table-striped- table-bordered table-hover dt-responsive table-checkable",id:t}))}}]),a}(r.Component)),oe=(Object(q.b)((function(e){return{user:e.auth.user}}),I.a)(re),a(8)),ie=a(2123),ce=a(1879),se=a(1368),le=a(1886),ue=a(905),de=function(e){Object(X.a)(a,e);var t=Object($.a)(a);function a(e){var n;return Object(K.a)(this,a),(n=t.call(this,e)).state={name:n.props.name,authorConfig:e.authorConfig,formData:{},required:e.required,author:[{nombre:"",apellido:"",organizacion:"",sigla:""}],authorOutput:[""],loaded:!1},n.handleSwitch=n.handleSwitch.bind(Object(Z.a)(n)),n.handleChange=n.handleChange.bind(Object(Z.a)(n)),n.removeField=n.removeField.bind(Object(Z.a)(n)),n.removeField=n.removeField.bind(Object(Z.a)(n)),n}return Object(Y.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this;if(e.formData!==this.props.formData&&!this.state.loaded&&this.props.formData){this.setState({loaded:!0});var a=this.props.formData.map((function(e){var t=e.split(","),a=e.split("-");return 2===t.length&&a.length<2?{nombre:t[1],apellido:t[0],organizacion:"",sigla:""}:{nombre:"",apellido:"",organizacion:a[0],sigla:a[1]}})),n=a.map((function(e,a){return""===e.organizacion&&""===e.nombre?t.props.authorConfig[0]:{key:a,statusOrg:""!==e.organizacion}}));this.setState({authorConfig:n}),this.setState({author:a}),this.setState({authorOutput:this.props.formData}),this.props.outputEvent(Object(oe.a)({},this.props.name,this.props.formData))}}},{key:"addField",value:function(e){var t=Object(z.a)(this.state.authorConfig),a=Object(z.a)(this.state.author),n=Object(z.a)(this.state.authorOutput);t.push({key:e+1,statusOrg:this.state.authorConfig[e].statusOrg}),a.push({nombre:"",apellido:"",organizacion:"",sigla:""}),n.push(""),this.setState({authorConfig:t}),this.setState({author:a}),this.setState({authorOutput:n})}},{key:"removeField",value:function(e){var t=this.state.authorConfig,a=this.state.author,n=this.state.authorOutput;t.splice(e,1),a.splice(e,1),n.splice(e,1),this.setState({authorConfig:t}),this.setState({author:a}),this.setState({authorOutput:n})}},{key:"handleSwitch",value:function(e){var t=e.target,a=t.value,n=t.checked,r=this.state.authorConfig,o=this.state.author;r[a]={key:a,statusOrg:n},o[a]=Object(O.a)(Object(O.a)({},o[a]),{nombre:"",apellido:"",organizacion:"",sigla:""}),this.setState({authorConfig:r})}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value,r=a.split("-"),o=parseInt(r[1],10),i=this.state.author;i[o]=Object(O.a)(Object(O.a)({},i[o]),Object(oe.a)({},r[0],n)),this.setState({author:i});var c=this.state.authorOutput;this.state.authorConfig[o].statusOrg?c[o]="".concat(this.state.author[o].organizacion,"-").concat(this.state.author[o].sigla?this.state.author[o].sigla:""):c[o]="".concat(this.state.author[o].apellido,",").concat(this.state.author[o].nombre?this.state.author[o].nombre:""),this.setState({authorOutput:c}),this.props.outputEvent(Object(oe.a)({},this.props.name,c))}},{key:"render",value:function(){var e=this;return this.state.authorConfig.map((function(t,a){return t.statusOrg?o.a.createElement(ie.a.Row,{key:a},o.a.createElement("div",{className:"col-md-12"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-1 switch-element"},o.a.createElement("label",{class:"switch"},o.a.createElement("input",{className:"switch",checked:t.statusOrg,type:"checkbox",value:a,name:"check-"+a,onChange:e.handleSwitch}),o.a.createElement("span",{className:"slider round"}))),o.a.createElement(ie.a.Group,{as:ce.a,md:"8",controlId:"organizacion-"+a},o.a.createElement(ie.a.Label,null),o.a.createElement(ie.a.Control,{type:"text",value:e.state.author[a].organizacion,name:"organizacion-"+a,placeholder:"Nombre de la instituci\xf3n",required:e.state.required,onChange:e.handleChange})),o.a.createElement(ie.a.Group,{as:ce.a,md:"2",controlId:"sigla-"+a},o.a.createElement(ie.a.Label,null),o.a.createElement(ie.a.Control,{type:"text",value:e.state.author[a].sigla,name:"sigla-"+a,placeholder:"Sigla",onChange:e.handleChange})),o.a.createElement("div",{className:"col-md-1 container-button"},e.state.authorConfig.length>1&&o.a.createElement(ue.a,{variant:"btn btn-secondary btn-sm btn-icon btn-circle ml-2",onClick:function(){e.removeField(a)}},o.a.createElement("i",{className:"la la-trash"})),e.state.authorConfig.length-1===a&&o.a.createElement(ue.a,{variant:"btn btn-primary btn-sm btn-icon btn-circle ml-2",onClick:function(){e.addField(a)}},o.a.createElement("i",{className:"la la-plus"})))))):o.a.createElement(ie.a.Row,{key:a},o.a.createElement("div",{className:"col-md-12"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-1 switch-element"},o.a.createElement("label",{class:"switch"},o.a.createElement("input",{className:"switch",checked:t.statusOrg,type:"checkbox",value:a,name:"check-"+a,onChange:e.handleSwitch}),o.a.createElement("span",{className:"slider round"}))),o.a.createElement(ie.a.Group,{as:ce.a,md:"5",controlId:"nombre-"+a},o.a.createElement(ie.a.Label,null),o.a.createElement(ie.a.Control,{type:"text",value:e.state.author[a].nombre,name:"nombre-"+a,placeholder:"Nombre(s)",required:e.state.required,onChange:e.handleChange})),o.a.createElement(ie.a.Group,{as:ce.a,md:"5",controlId:"apellido-"+a},o.a.createElement(ie.a.Label,null),o.a.createElement(ie.a.Control,{type:"text",value:e.state.author[a].apellido,name:"apellido-"+a,placeholder:"Apellido(s)",required:e.state.required,onChange:e.handleChange})),o.a.createElement("div",{className:"col-md-1 container-button"},e.state.authorConfig.length>1&&e.state.authorConfig.length-1===a&&o.a.createElement(ue.a,{variant:"btn btn-secondary btn-sm btn-icon btn-circle ml-2",onClick:function(){e.removeField(a)}},o.a.createElement("i",{className:"la la-trash"})),e.state.authorConfig.length-1===a&&o.a.createElement(ue.a,{variant:"btn btn-primary btn-sm btn-icon btn-circle ml-2",onClick:function(){e.addField(a)}},o.a.createElement("i",{className:"la la-plus"}))))))}))}}]),a}(r.Component),he=a(43);function fe(){fe=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(L){s=function(e,t,a){return e[t]=a}}function l(e,t,a,r){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new S(r||[]);return n(i,"_invoke",{value:w(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(L){return{type:"throw",arg:L}}}e.wrap=l;var d={};function h(){}function f(){}function p(){}var m={};s(m,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(k([])));g&&g!==t&&a.call(g,o)&&(m=g);var y=p.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var r;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(r,i){!function n(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}(n,o,r,i)}))}return r=r?r.then(i,i):i()}})}function w(e,t,a){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return C()}for(a.method=r,a.arg=o;;){var i=a.delegate;if(i){var c=j(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function j(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,r,o){void 0===o&&(o=Promise);var i=new E(l(t,a,n,r),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(y),s(y,c,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return i.type="throw",i.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),s=a.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),x(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;x(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:k(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}function pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a="https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/suggest?f=json&text=".concat(e,"&maxSuggestions=").concat(t),n={method:"GET",mode:"cors",cache:"default"};return fetch(a,n).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function me(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"*",r="https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/findAddressCandidates?SingleLine=".concat(e,"&f=json&outSR=%7B%22wkid%22%3A102100%7D&outFields=").concat(n,"&magicKey=").concat(t,"&maxLocations=").concat(a),o={method:"GET",mode:"cors",cache:"default"};return fetch(r,o).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function ve(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(j.a)(fe().mark((function e(t){var a,n,r,o=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:1,n=o.length>2&&void 0!==o[2]?o[2]:"*",e.next=4,pe(t);case 4:if(!(r=e.sent).suggestions[0].magicKey){e.next=9;break}return e.abrupt("return",me(t,r.suggestions[0].magicKey,a,n));case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(){ye=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(L){s=function(e,t,a){return e[t]=a}}function l(e,t,a,r){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new S(r||[]);return n(i,"_invoke",{value:w(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(L){return{type:"throw",arg:L}}}e.wrap=l;var d={};function h(){}function f(){}function p(){}var m={};s(m,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(k([])));g&&g!==t&&a.call(g,o)&&(m=g);var y=p.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var r;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(r,i){!function n(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}(n,o,r,i)}))}return r=r?r.then(i,i):i()}})}function w(e,t,a){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return C()}for(a.method=r,a.arg=o;;){var i=a.delegate;if(i){var c=j(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function j(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,r,o){void 0===o&&(o=Promise);var i=new E(l(t,a,n,r),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(y),s(y,c,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return i.type="throw",i.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),s=a.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),x(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;x(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:k(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var be=function(e){Object(X.a)(a,e);var t=Object($.a)(a);function a(e){var n;return Object(K.a)(this,a),(n=t.call(this,e)).state={formData:{},countries:[],departaments:[],cities:[],formConfig:e.formConfig,place:[],code:[],geoPoint:{lat:0,lon:0},showCity:!0,loaded:!1},n.handleChangeSelectContry=n.handleChangeSelectContry.bind(Object(Z.a)(n)),n.handleChangeSelectDepartament=n.handleChangeSelectDepartament.bind(Object(Z.a)(n)),n.handleChangeSelectCity=n.handleChangeSelectCity.bind(Object(Z.a)(n)),n.loadContries(),n.loadColDepartaments(),n}return Object(Y.a)(a,[{key:"componentDidUpdate",value:function(){var e=Object(j.a)(ye().mark((function e(t){var a,n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!1,this.props.keyValue>0|JSON.stringify(t.formConfig)!==JSON.stringify(this.props.formConfig)&&(a=!0),!a||this.state.loaded){e.next=16;break}n=this.props.formData.code?this.props.formData.code.split("-"):"",r={local:n[2]?n[2]:"",departament:n[1]?n[1]:"",country:n[0]?n[0]:""},e.t0=n.length,e.next=1===e.t0?8:2===e.t0?10:3===e.t0?12:14;break;case 8:return"CO"!==n[0]&&(this.loadDepartaments(n[0]),this.setState({showCity:!1})),e.abrupt("break",15);case 10:return"CO"===n[0]?this.loadColMunicipality(n[1]):(this.setState({showCity:!1}),this.loadDepartaments(n[0])),e.abrupt("break",15);case 12:return this.loadColMunicipality(n[1]),e.abrupt("break",15);case 14:return e.abrupt("break",15);case 15:this.setState({loaded:!0,formData:r,place:this.props.formData.name?this.props.formData.name.split(","):[]});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChangeSelectContry",value:function(e){var t=e.target,a=t.name,n=t.value;""===n&&this.setState({departaments:[],cities:[]});var r=Object(oe.a)({},a,n);if(n){var o=this.state.countries.filter((function(e){return e.value===n}));this.setState({place:[o[0].name?o[0].name.toUpperCase():""],geoPoint:o[0].geoPoint}),this.setState({formData:r}),this.props.outputEvent({formData:r,place:[o[0].name.toUpperCase()],geoPoint:o[0].geoPoint}),this.setState({cities:[]}),this.setState({departaments:[]}),"CO"===n?(this.loadColDepartaments(),this.setState({showCity:!0})):(this.loadDepartaments(n),this.setState({showCity:!1}))}else console.log({name:a,value:n}),this.setState({formData:r}),this.props.outputEvent({formData:r,place:null})}},{key:"handleChangeSelectDepartament",value:function(e){var t=e.target,a=t.name,n=t.value,r=Object(O.a)(Object(O.a)({},this.state.formData),Object(oe.a)({},a,n)),o=this.state.departaments.filter((function(e){return e.value===n})),i=this.state.place;i[1]=(o[0]&&o[0].name?o[0].name:"").toUpperCase(),this.setState({place:i}),this.setState({formData:r}),this.props.outputEvent({formData:r,place:i}),"CO"===this.state.formData.country&&this.loadColMunicipality(n)}},{key:"handleChangeSelectCity",value:function(e){var t=e.target,a=t.name,n=t.value;console.log({name:a,value:n});var r=this.state.cities.filter((function(e){return e.value===n})),o=this.state.place;o[2]=r[0].name.toUpperCase(),this.setState({place:o});var i=Object(O.a)(Object(O.a)({},this.state.formData),Object(oe.a)({},a,n));this.setState({formData:i}),this.props.outputEvent({formData:i,place:o})}},{key:"loadContries",value:function(){var e=this;(function(){var e="".concat(P.i,"/api/resources/countries"),t=new Headers({"Content-Type":"application/json",Authorization:Object(he.c)()});return fetch(e,{method:"GET",mode:"cors",headers:t,cache:"default"}).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))})().then((function(t){e.setState({countries:t});var a={formData:Object(O.a)(Object(O.a)({},e.state.formData),{country:"CO"})};e.state.formData||e.setState(a)}))}},{key:"loadDepartaments",value:function(e){var t=this;(function(e){var t="https://services.arcgis.com/P3ePLMYs2RVChkJx/ArcGIS/rest/services/World_Administrative_Divisions/FeatureServer/0/query?where=ISO_CC+%3D+%27".concat(e,"%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=false&returnCentroid=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=4326&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=pjson&token=");return fetch(t,{method:"GET",mode:"cors",cache:"default"}).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))})(e).then((function(e){t.setState({departaments:ne.a.uniqBy(e.features.map((function(e){return{name:e.attributes.NAME,value:e.attributes.ISO_SUB}})),"value")})}))}},{key:"loadColDepartaments",value:function(){var e=this;(function(){var e="".concat(P.i,"/api/resources/departaments"),t=new Headers({"Content-Type":"application/json",Authorization:Object(he.c)()});return fetch(e,{method:"GET",mode:"cors",headers:t,cache:"default"}).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))})().then((function(t){e.setState({departaments:t})}))}},{key:"loadColMunicipality",value:function(e){var t=this;(function(e){var t="".concat(P.i,"/api/resources/municipality/").concat(e),a=new Headers({"Content-Type":"application/json",Authorization:Object(he.c)()});return fetch(t,{method:"GET",mode:"cors",headers:a,cache:"default"}).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))})(e).then((function(e){t.setState({cities:ne.a.orderBy(e,[function(e){return e.name.toLowerCase().trim()}],["asc"])})}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"col-md-12"},o.a.createElement(ie.a.Row,null,o.a.createElement(ie.a.Group,{as:ce.a,md:!0===this.state.showCity?"4":"6",controlId:"country"},o.a.createElement(ie.a.Label,null,"Pais",this.state.formConfig.country.required?" *":""),o.a.createElement(ie.a.Control,{as:"select",name:"country",value:this.state.formData.country?this.state.formData.country:"",onChange:this.handleChangeSelectContry,required:!!this.state.formConfig.country.required&&this.state.formConfig.country.required},o.a.createElement("option",{key:-1,value:""},"Seleccione el pa\xeds"),this.state.countries.map((function(e,t){return o.a.createElement("option",{key:t,value:e.value},e.name)})))),o.a.createElement(ie.a.Group,{as:ce.a,md:!0===this.state.showCity?"4":"6",controlId:"departament"},o.a.createElement(ie.a.Label,null,"Departamento",this.state.formConfig.departament.required?" *":""),o.a.createElement(ie.a.Control,{as:"select",name:"departament",value:this.state.formData.departament?this.state.formData.departament:"",onChange:this.handleChangeSelectDepartament,required:!!this.state.formConfig.departament.required&&this.state.formConfig.departament.required},o.a.createElement("option",{key:-1,value:""},"Seleccione el departamento"),this.state.departaments.map((function(e,t){return o.a.createElement("option",{key:t,value:e.value},e.name)})))),this.state.showCity&&o.a.createElement(ie.a.Group,{as:ce.a,md:!0===this.state.showCity?"4":"6",controlId:"local"},o.a.createElement(ie.a.Label,null,"Ciudad / Municipio",this.state.formConfig.city.require?" *":""),o.a.createElement(ie.a.Control,{as:"select",name:"local",value:this.state.formData.local?this.state.formData.local:"",onChange:this.handleChangeSelectCity,required:!!this.state.formConfig.city.required&&this.state.formConfig.city.required},o.a.createElement("option",{key:-1,value:""},"Seleccione Ciudad / Municipio"),this.state.cities.map((function(e,t){return o.a.createElement("option",{key:t,value:e.value},e.name)}))))))}}]),a}(r.Component);function Ee(){Ee=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(L){s=function(e,t,a){return e[t]=a}}function l(e,t,a,r){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new S(r||[]);return n(i,"_invoke",{value:w(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(L){return{type:"throw",arg:L}}}e.wrap=l;var d={};function h(){}function f(){}function p(){}var m={};s(m,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(k([])));g&&g!==t&&a.call(g,o)&&(m=g);var y=p.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var r;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(r,i){!function n(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}(n,o,r,i)}))}return r=r?r.then(i,i):i()}})}function w(e,t,a){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return C()}for(a.method=r,a.arg=o;;){var i=a.delegate;if(i){var c=j(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function j(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,r,o){void 0===o&&(o=Promise);var i=new E(l(t,a,n,r),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(y),s(y,c,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return i.type="throw",i.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),s=a.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),x(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;x(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:k(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var we=function(e){Object(X.a)(a,e);var t=Object($.a)(a);function a(e){var n;return Object(K.a)(this,a),(n=t.call(this,e)).state={name:e.name,multiple:e.multiple,formData:e.formData?e.formData:[{geoPoint:{lat:0,lon:0}}],formConfig:[{country:{required:!1},departament:{required:!1},city:{required:!1}}],formReturn:[{geoPoint:{lat:0,lon:0}}],loaded:!1},n.outputLocation=n.outputLocation.bind(Object(Z.a)(n)),n}return Object(Y.a)(a,[{key:"componentDidUpdate",value:function(e){if(e.formData!==this.props.formData&&!this.state.loaded&&this.props.formData){var t=this.props.formData.map((function(e){return{key:Object(Q.c)(),country:{required:!1},departament:{required:!1},city:{required:!1}}}));this.setState({formConfig:t}),this.setState({loaded:!0,formData:this.props.formData,formReturn:this.props.formData})}}},{key:"outputLocation",value:function(){var e=Object(j.a)(Ee().mark((function e(t){var a,n,r,o,i,c,s,l;return Ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.key,n=t.event,r=Object(z.a)(this.state.formReturn),!n.place){e.next=22;break}if(!(n.place.length>1)){e.next=17;break}return o="",o+=n.formData.country,o+=n.formData.departament?"-".concat(n.formData.departament):"",o+=n.formData.local?"-".concat(n.formData.local):"",e.next=10,ve(n.place.join(","));case 10:i=e.sent,c=i.candidates[0].attributes,s=c.X,l=c.Y,r[a]={code:o,name:n.place.join(","),geoPoint:{lat:l,lon:s}},this.setState({formReturn:r}),this.props.outputEvent(Object(oe.a)({},this.state.name,r)),e.next=20;break;case 17:r[a]={code:n.formData.country,name:n.place.join(","),geoPoint:n.geoPoint},this.setState({formReturn:r}),this.props.outputEvent(Object(oe.a)({},this.state.name,r));case 20:e.next=25;break;case 22:r[a]={code:null,name:null,geoPoint:{lat:0,lon:0}},this.setState({formReturn:r}),this.props.outputEvent(Object(oe.a)({},this.state.name,r));case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addField",value:function(e){var t=Object(z.a)(this.state.formConfig),a=Object(z.a)(this.state.formData),n=Object(z.a)(this.state.formReturn);t.push({country:{required:!0},departament:{required:!1},city:{required:!1}}),a.push([{code:"",name:"",geopoint:{lat:0,lon:0}}]),this.setState({formConfig:t,formReturn:n,formData:a})}},{key:"removeField",value:function(e){var t=this.state.formConfig,a=Object(z.a)(this.state.formData),n=Object(z.a)(this.state.formReturn);t.splice(e,1),n.splice(e,1),a.splice(e,1),this.props.outputEvent(Object(oe.a)({},this.state.name,n)),this.setState({formData:a,formConfig:t,formReturn:n})}},{key:"openMap",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.formConfig,n=t.formData,r=t.multiple;return o.a.createElement(o.a.Fragment,null,a.map((function(t,i){return o.a.createElement("div",{className:"row col-12",key:i},o.a.createElement("div",{className:r?"col-md-11":"col-md-12"},o.a.createElement(ie.a.Row,null,o.a.createElement("div",{className:"col-12"},o.a.createElement(be,{keyValue:i,formConfig:t,formData:n[i],outputEvent:function(t){e.outputLocation({key:i,event:t})}})))),r&&o.a.createElement("div",{className:"col-md-1 container-button"},a.length>1&&o.a.createElement(ue.a,{variant:"btn btn-secondary btn-sm btn-icon btn-circle ml-2",onClick:function(){e.removeField(i)}},o.a.createElement("i",{className:"la la-trash"})),a.length-1===i&&o.a.createElement(ue.a,{variant:"btn btn-primary btn-sm btn-icon btn-circle ml-2",onClick:function(){e.addField(i)}},o.a.createElement("i",{className:"la la-plus"}))))})))}}]),a}(r.Component),je=a(946),Oe=new je.a({}),xe=(Oe.asObservable(),new je.a({})),Se=(xe.asObservable(),new je.a({})),ke=Se.asObservable(),Ce={},Le=function(e){Object(X.a)(a,e);var t=Object($.a)(a);function a(e){var n;return Object(K.a)(this,a),(n=t.call(this,e)).state={item:e.item,level:e.level,field:e.field,fieldChild:null,data:e.data,datachild:e.datachild,formData:null,itemChild:e.itemChild,baseData:null,changed:e.changed,changedChild:e.changedChild},n.handleChangeSelect=n.handleChangeSelect.bind(Object(Z.a)(n)),n}return Object(Y.a)(a,[{key:"handleChangeSelect",value:function(e){var t=this;this.setState({itemChild:null}),e.stopPropagation();var a=e.target,n=a.name,r=a.value,o=a.selectedOptions,i=a.multiple,c=Object(O.a)(Object(O.a)({},this.state.formData),Object(oe.a)({},n,i?Object(z.a)(o).map((function(e){return e.value})).filter((function(e){return""!==e})):r)),s=n.split("-").join(""),l=r.split("-").map((function(e){return e.trim()})).filter((function(e,a){return a<t.state.level-1}));!function(e){Ce=Object(O.a)(Object(O.a)({},Ce),e),Se.next(Ce)}(Object(oe.a)({},s,c[n])),this.updateField(this.state.field,c,!0,l.join(" - "))}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.item!==e.item&&this.setState({item:this.props.item}),JSON.stringify(this.props.data)!==JSON.stringify(e.data)){var a=this.state,n=a.field,r=(a.data,a.level),o=this.props.data.split("-").map((function(e){return e.trim()})).filter((function(e,a){return a<t.state.level-1})),i=document.getElementById(this.state.field.id),c=this.props.data.split("-").map((function(e){return e.trim()})).filter((function(e,a){return a<t.state.level}));i.value=""===c.join(" - ")?o.join(" - "):c.join(" - "),this.setState({data:this.props.data,fieldBase:o.join(" - ")}),this.mountField({field:n,data:this.props.data,level:r})}}},{key:"updateField",value:function(e,t,a,n){var r=this;if(t&&t[e.id]){var o=document.getElementById(e.id),i=t[e.id].split("-").map((function(e){return e.trim()})).filter((function(e,t){return t<r.state.level}));o.value=""===i.join(" - ")?n:i.join(" - ");var c=this.state.item.filter((function(a){return t[e.id].includes(a.value)})),s="[]"!==JSON.stringify(c)&&(!!c[0].lists&&c[0].lists.options);s?this.setState({datachild:t&&t[e.id]?t[e.id]:n,data:t&&t[e.id]?t[e.id]:n,baseData:n,itemChild:Object(ae.isArray)(s)?s:null,fieldChild:void 0!==s?Object(O.a)(Object(O.a)({},this.state.field),{id:this.state.field.id+"-"}):null}):this.setState({datachild:t&&t[e.id]?t[e.id]:n,data:t&&t[e.id]?t[e.id]:n,baseData:n,itemChild:null,fieldChild:null})}else this.setState({datachild:t&&t[e.id]?t[e.id]:n,data:t&&t[e.id]?t[e.id]:n,baseData:n,itemChild:null,fieldChild:null})}},{key:"mountField",value:function(e){var t=e.field,a=e.data,n=e.level;if(a){var r=a.split("-").map((function(e){return e.trim()})).filter((function(e,t){return t<n-1}));this.updateField(t,Object(oe.a)({},t.id,a),!1,r.join(" - "))}}},{key:"componentDidMount",value:function(){var e=this.state,t=e.field,a=e.data,n=e.level;this.mountField({field:t,data:a,level:n})}},{key:"render",value:function(){var e=this.state,t=e.item,n=e.itemChild,r=e.level,i=e.field,c=e.baseData,s=e.data,l=e.fieldChild,u=e.datachild;return c=s.split("-").map((function(e){return e.trim()})).filter((function(e,t){return t<r-1})).join(" - "),o.a.createElement(o.a.Fragment,null,Object(ae.isArray)(t)&&"[]"!==JSON.stringify(t)&&o.a.createElement(o.a.Fragment,null,o.a.createElement(ie.a.Group,{as:ce.a,md:i.col?i.col:"6",controlId:i.id},o.a.createElement(ie.a.Label,{className:"form-label"},1==r?i.label:"",1==r&&i.required?" *":""),o.a.createElement(ie.a.Control,{as:"select",name:i.id,required:1==r&&(!!i.required&&i.required),onChange:this.handleChangeSelect},o.a.createElement("option",{key:0,value:c},i.placeholder),t.map((function(e,t){return o.a.createElement("option",{key:t,value:e.value},e.name)}))),o.a.createElement(ie.a.Text,{className:"text-muted"},i.info),i.infoHTML&&o.a.createElement("div",{dangerouslySetInnerHTML:{__html:i.infoHTML}})),null!==n&&void 0!==n&&o.a.createElement(a,{field:l,item:n,data:u,level:r+1})))}}]),a}(r.Component),Ne=Object(q.b)((function(e){return{user:e.auth.user}}),I.a)(Le),_e=(r.Component,a(104),a(1888)),Te=a.n(_e),Pe=Te.a.ExcelFile,De=Te.a.ExcelFile.ExcelSheet,Re=Te.a.ExcelFile.ExcelColumn;function Fe(e){var t=function(e){if(e){var t=e.map((function(e){return e.origin}));return t.push("history"),t.push("authorizationRights"),t.push("status"),t}return[]}(e.statment),a=function(t){var a=[];return(e.dataset.length>15e3?e.dataset.slice(0,1e4):e.dataset.slice()).forEach((function(e){var n={};t.forEach((function(t){e[t]?n[t]=function(e,t){var a,n;return"temporalCoverage"==t&&e&&(a="description",(n=e).hasOwnProperty(a)&&delete n[a],e=n),"geographicCoverage"!=t&&"editionPlace"!=t||!e?"history"==t&&e?e[0].includes("")?"No registra":e=e[0].join("|"):Array.isArray(e)?e=e.join("|"):"object"===typeof e&&null!==e?(e=Object.values(e),"temporalCoverage"==t&&null!==e[0]&&null!==e[1]&&(e[0].includes("NaN")||e[1].includes("NaN"))&&(e[0]="",e[1]=""),null===e[0]&&null===e[1]&&(e[0]="",e[1]=""),""===e.join("")?"":e.join("|")):e:e.map((function(e){return e&&e.name?e.name:""})).join("|")}(e[t],t):n[t]=""})),a.push(n)})),a}(t),n=[];return t.forEach((function(e,t){n.push(o.a.createElement(Re,{key:t,label:e,value:e}))})),A.a.close(),o.a.createElement("div",null,a&&e.frmType&&o.a.createElement(Pe,{hideElement:!0,filename:(new Date).toLocaleString()+"_"+e.frmType},o.a.createElement(De,{data:a,name:"hoja"},n)))}function Ae(){Ae=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(L){s=function(e,t,a){return e[t]=a}}function l(e,t,a,r){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new S(r||[]);return n(i,"_invoke",{value:w(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(L){return{type:"throw",arg:L}}}e.wrap=l;var d={};function h(){}function f(){}function p(){}var m={};s(m,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(k([])));g&&g!==t&&a.call(g,o)&&(m=g);var y=p.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var r;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(r,i){!function n(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}(n,o,r,i)}))}return r=r?r.then(i,i):i()}})}function w(e,t,a){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return C()}for(a.method=r,a.arg=o;;){var i=a.delegate;if(i){var c=j(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function j(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,r,o){void 0===o&&(o=Promise);var i=new E(l(t,a,n,r),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(y),s(y,c,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return i.type="throw",i.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),s=a.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),x(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;x(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:k(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}function Ge(e){var t={method:"GET",headers:new Headers({Authorization:Object(he.c)()}),mode:"cors",cache:"default"};return fetch(P.i+e,t).then(function(){var e=Object(j.a)(Ae().mark((function e(t){var a;return Ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=7;break}return e.next=3,t.json();case 3:return a=e.sent,e.abrupt("return",Promise.reject(a));case 7:return console.log("Response.status: ",t.status),console.log("Response: ",t),e.abrupt("return",t.json());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}var Me=a(2014),ze=a.n(Me),Be=a(2016),qe=a.n(Be),Ie=a(2015),He=a.n(Ie),Ve=a(2012),Ue=a.n(Ve),We=a(2013),Qe=a.n(We),Je=a(2017),Ke=a.n(Je),Ye=a(321),Ze=a.n(Ye),Xe=a(272),$e=a.n(Xe),et=a(972),tt=a.n(et),at=a(1276),nt=a(512),rt=a(2137),ot=a(2029),it=a(2126);function ct(){ct=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(L){s=function(e,t,a){return e[t]=a}}function l(e,t,a,r){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new S(r||[]);return n(i,"_invoke",{value:w(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(L){return{type:"throw",arg:L}}}e.wrap=l;var d={};function h(){}function f(){}function p(){}var m={};s(m,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(k([])));g&&g!==t&&a.call(g,o)&&(m=g);var y=p.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var r;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(r,i){!function n(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}(n,o,r,i)}))}return r=r?r.then(i,i):i()}})}function w(e,t,a){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return C()}for(a.method=r,a.arg=o;;){var i=a.delegate;if(i){var c=j(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function j(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,r,o){void 0===o&&(o=Promise);var i=new E(l(t,a,n,r),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(y),s(y,c,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return i.type="throw",i.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),s=a.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),x(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;x(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:k(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var st=[{title:"Acciones",data:"ident",type:"action",width:"12%"},{title:"Identificador",data:"ident"},{title:"T\xedtulo",data:"title"},{title:"Fondo principal",data:"resourcegroup"},{title:"\xdaltima edici\xf3n",data:"history",type:"list"}],lt=Object(nt.a)((function(e){return{bloque:{padding:"10px",backgroundColor:"rgba(255,255,255,.9)",margin:5,width:"100%",height:"100%",overflow:"auto",position:"relative",borderRadius:10,border:"3px solid #fff","&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:"#56749a",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:"#56749a"},"&::-webkit-scrollbar-thumb:active":{background:"#56749a"},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}},tituloBloque:{top:0,fontSize:15,fontWeight:"bold",padding:"10px 15px",position:"sticky",zIndex:10,width:"100%",left:0,background:"#e6e6e6",borderTopLeftRadius:10,borderTopRightRadius:10,color:"#56749a",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},breadcrumbs:{padding:"5px 15px",background:"#56749a",position:"sticky",color:"#fff",borderBottomLeftRadius:10,borderBottomRightRadius:10,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},linkBreadcrumb:{color:"#fff",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:200,display:"inline-block","&:hover":{color:"#fff"}},selectedBread:{color:"#fff !important",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:150,backgroundColor:"rgba(255,255,255,.2)",display:"inline-block",padding:"0 5px",borderRadius:2},columnas:{display:"flex",height:"calc(100vh - 150px)"}}})),ut=function(e){var t=lt();return o.a.createElement(l.a,{className:t.bloque,style:e.style},e.title&&o.a.createElement(l.a,{className:t.tituloBloque},e.title),e.topBar&&o.a.createElement(o.a.Fragment,null,e.topBar),e.children)},dt=(Object(q.b)((function(e){return{user:e.auth.user}}),I.a)((function(e){var t=Object(B.m)().id,a=lt(),s=Object(r.useState)(null),u=Object(n.a)(s,2),d=u[0],h=u[1],f=Object(r.useState)(null),p=Object(n.a)(f,2),m=p[0],v=p[1],g=Object(r.useState)([]),y=Object(n.a)(g,2),b=y[0],E=y[1],w=Object(r.useState)([]),O=Object(n.a)(w,2),x=O[0],S=O[1],k=Object(r.useState)([]),C=Object(n.a)(k,2),L=C[0],N=C[1],_=Object(r.useState)(0),T=Object(n.a)(_,2),D=T[0],R=T[1],F=Object(r.useState)(0),G=Object(n.a)(F,2),M=G[0],q=G[1],I=Object(r.useState)(0),U=Object(n.a)(I,2),K=U[0],Y=U[1],Z=Object(r.useState)(Math.random()),X=Object(n.a)(Z,2),$=X[0],ee=X[1],te=Object(r.useState)([]),ae=Object(n.a)(te,2),ne=ae[0],oe=ae[1],ie=Object(r.useState)("FAE"),ce=Object(n.a)(ie,2),se=ce[0],le=ce[1],ue=Object(r.useState)(null),de=Object(n.a)(ue,2),he=de[0],fe=de[1],pe=Object(r.useState)("none"),me=Object(n.a)(pe,2),ve=me[0],ge=me[1],ye=Object(r.useState)("none"),be=Object(n.a)(ye,2),Ee=be[0],we=be[1],je=Object(r.useState)([]),Oe=Object(n.a)(je,2),xe=Oe[0],Se=Oe[1],ke=function(){d&&d.id?A.a.fire({title:"Esta descarga puede tomar tiempo, \xbfdesea continuar?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"S\xed",cancelButtonText:"No"}).then(function(){var e=Object(j.a)(ct().mark((function e(t){return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isConfirmed&&(A.a.fire({title:"\xa1Por favor espere!",html:"Exportando metadatos ...",allowOutsideClick:!1,onBeforeOpen:function(){A.a.showLoading()}}),Object(H.d)(d.id).then(function(){var e=Object(j.a)(ct().mark((function e(t){var a;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(t.fondos),e.next=3,Ge("/api/forms/statment/RESOURCEGROUPS_FAE");case 3:a=e.sent,le("FONDOS"),fe(a),ge("actual"),setTimeout(function(){ge("none")}.bind(void 0),1e3),A.a.close();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):A.a.fire({title:"Primero debe seleccionar un fondo.",confirmButtonText:"Aceptar",showCancelButton:!1})},Ce=function(){console.log(),A.a.fire({title:"Exportar p\xe1gina actual o toda la b\xfasqueda",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"P\xe1gina actual",cancelButtonText:"Todo",denyButtonText:"Todo"}).then(function(){var e=Object(j.a)(ct().mark((function e(t){var a,n,r,o,i,c;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],!t.isConfirmed){e.next=5;break}b&&(b.map((function(e){e.metadataExcel&&a.push(e.metadataExcel)})),Se(a)),e.next=16;break;case 5:if("cancel"!=t.dismiss){e.next=16;break}return(n={from:1,ResourceGroupParentId:m}).size=D,A.a.fire({title:"\xa1Por favor espere!",html:"Exportando metadatos ...",allowOutsideClick:!1,onBeforeOpen:function(){A.a.showLoading()}}),e.next=11,Object(V.b)(n);case 11:r=e.sent,A.a.close(),r.resources.map((function(e){return{_id:e._id,metadataExcel:e.metadataExcel,metadata:e.metadataHTML,ident:e.ident&&"string"===typeof e.ident?e.ident:"",rg:"".concat(e.extra.resourcegroup.ident?e.extra.resourcegroup.ident:""),title:e.metadata.firstLevel.title?e.metadata.firstLevel.title:"",description:e.metadata.firstLevel.description?e.metadata.firstLevel.description.length>100?e.metadata.firstLevel.description.substring(0,100):e.metadata.firstLevel.description:"",resourcegroup:"".concat(e.extra&&e.extra.resourcegroup?e.extra.resourcegroup.ident?e.extra.resourcegroup.ident:e.identifier?e.identifier:"":""," ").concat(e.extra.resourcegroup.metadata.firstLevel.title?e.extra.resourcegroup.metadata.firstLevel.title:""),history:Object(Q.b)(e.extra.history)?[e.extra.history.map((function(e){return"".concat("created"===e.status?"Creado":"Actualizado"," el ").concat(W()(e.date).local().format("LL"))}))[e.extra.history.length-1]]:["NO REGISTRA"]}})).map((function(e){e.metadataExcel&&a.push(e.metadataExcel)})),Se(a);case 16:if(!(a.length>0)){e.next=28;break}return o=a[0].origin,i="/api/forms/statment/RESOURCES_FAE","CatalogacionFuentesInternas"==o||"CargasFuentesInternas"==o||"VisualizacionesGeograficas"==o||"Visualizaciones"==o?(i="/api/forms/statment/RESOURCES_FAI",le("FAI")):"Objetos"==o?(i="/api/forms/statment/RESOURCES_OBJ",le("OBJ")):le("FAE"),e.next=22,Ge(i);case 22:c=e.sent,fe(c),we("actual"),setTimeout(function(){we("none")}.bind(void 0),1e3),e.next=29;break;case 28:A.a.fire({title:"No hay datos para exportar",html:"<b>".concat(m.ResourceGroupId," - ").concat(m.text,"</b>"),icon:"info"});case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Le=function(){var t=Object(j.a)(ct().mark((function t(){return ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(H.b)(d.id);case 2:0===t.sent.length?A.a.fire({title:"Eliminar fondo",html:"Se eliminar\xe1 el fondo<br><b>".concat(m.ResourceGroupId," - ").concat(m.text,"</b>"),icon:"warning",showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonText:"Eliminar fondo"}).then((function(t){t.value&&A.a.fire({title:"Esta operaci\xf3n no es reversible",html:"Se eliminar\xe1 el fondo<br><b>".concat(m.ResourceGroupId," - ").concat(m.text,"</b>"),icon:"warning",showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonText:"Eliminar fondo"}).then((function(t){t.value&&(A.a.fire({title:"\xa1Por favor espere!",html:"Eliminando fondo ...",allowOutsideClick:!1,onBeforeOpen:function(){A.a.showLoading()}}),Object(H.a)(m.ResourceGroupId).then((function(t){t.error?(A.a.close(),A.a.fire("Error","".concat(t.error),"error")):(e.history.push("/admin-cataloging/main/all"),setTimeout((function(){ee(Math.random())}),200),A.a.close(),A.a.fire("Eliminado","Se eliminado exitosamente el fondo ".concat(t.ident," - ").concat(t.metadata.firstLevel.title),"success"))})).catch((function(e){A.a.close(),A.a.fire("No se ha podido eliminar el fondo","ERROR: ".concat(e),"error")})))}))})):A.a.fire({title:"No se puede eliminar el fondo",html:"<b>".concat(m.ResourceGroupId," - ").concat(m.text,"</b>"),icon:"error",showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonText:"Eliminar fondo"});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ne=function(){Object(H.c)(d.id).then((function(e){A.a.fire({title:"Metadata",width:600,heightAuto:!1,html:e.metadataHTML})}))},_e=function(t){e.history.push("".concat(t))};Object(r.useEffect)((function(){if(d){var a=d.id;x.length>0&&(a=x.map((function(e){return e.id})).join("|")+"|"+d.id),"all"!==t&&t===a||e.history.push("/admin-cataloging/main/".concat(a)),A.a.fire({title:"\xa1Por favor espere!",html:"Cargando recursos ...",allowOutsideClick:!1,onBeforeOpen:function(){A.a.showLoading()}}),Object(V.b)({ResourceGroupParentId:m,size:25,from:M+1}).then((function(e){var t=e.total,a=(e.totalPages,e.currentPage,e.resources);if(a.length>0){var n=a.map((function(e){return{_id:e._id,metadataExcel:e.metadataExcel,metadata:e.metadataHTML,ident:e.ident&&"string"===typeof e.ident?e.ident:"",rg:"".concat(e.extra.resourcegroup.ident?e.extra.resourcegroup.ident:""),title:e.metadata.firstLevel.title?e.metadata.firstLevel.title:"",description:e.metadata.firstLevel.description?e.metadata.firstLevel.description.length>100?e.metadata.firstLevel.description.substring(0,100):e.metadata.firstLevel.description:"",resourcegroup:"".concat(e.extra.resourcegroup.ident?e.extra.resourcegroup.ident:""," ").concat(e.extra.resourcegroup.metadata.firstLevel.title?e.extra.resourcegroup.metadata.firstLevel.title:""),history:Object(Q.b)(e.extra.history)?[e.extra.history.map((function(e){return"".concat("created"===e.status?"Creado":"Actualizado"," el ").concat(W()(e.date).local().format("LL"))}))[e.extra.history.length-1]]:["NO REGISTRA"]}}));E(n),R(t),Y(Math.ceil(t/25))}else E([]),R(0),Y(0),q(0);A.a.close()})).catch((function(e){console.log(e),A.a.close()}))}}),[d,M]),Object(r.useEffect)((function(){if("all"!==t){var e=t.split("|");e[e.length-1];A.a.fire({title:"\xa1Por favor espere!",html:"Cargando recursos ...",allowOutsideClick:!1,onBeforeOpen:function(){A.a.showLoading()}});var a=[];Object(H.e)(t).then((function(t){console.log(t),e.forEach((function(e,n){var r=t.find((function(t){return t.ident===e}));a.push({id:r.ident,name:r.metadata.firstLevel.title})}));var n=a.pop();S(a),v({text:n.name,ResourceGroupId:n.id,id:n.id,metadata:n.id}),h(n)}))}}),[t]);return o.a.createElement(i.a,null,"actual"==ve&&o.a.createElement(Fe,{dataset:ne,statment:he,frmType:se}),"actual"==Ee&&o.a.createElement(Fe,{dataset:xe,statment:he,frmType:se}),o.a.createElement(c.a,{userRoles:e.user.roles,list:function(){var t=[];return e.user.roles.includes("catalogador_gestor")&&t.push({name:"Reordenar fondos",icon:o.a.createElement(Ue.a,null),action:"edit",callback:function(){return _e("/admin-cataloging/resourcegroups/all")}}),e.user.roles.includes("catalogador_gestor")&&d&&e.user.roles.includes("catalogador")&&t.push({name:"Ver metadatos",icon:o.a.createElement(Qe.a,null),callback:function(){return Ne()}}),e.user.roles.includes("catalogador_gestor")&&d&&e.user.roles.includes("catalogador")&&t.push({name:"Editar fondo",icon:o.a.createElement(o.a.Fragment,null,o.a.createElement(tt.a,null),o.a.createElement($e.a,null)),action:"edit",callback:function(){return _e("/resourcegroupmanagment/edit/".concat(d.id?d.id:"0"))}}),e.user.roles.includes("catalogador_gestor")&&e.user.roles.includes("catalogador")&&t.push({name:"Nuevo fondo",icon:o.a.createElement(ze.a,null),action:"new",callback:function(){return _e("/resourcegroupmanagment/new/".concat((null===d||void 0===d?void 0:d.id)?d.id:"0"))}}),e.user.roles.includes("catalogador_gestor")&&d&&t.push({name:"Eliminar fondo",icon:o.a.createElement(He.a,null),action:"delete",callback:function(){return Le()}}),e.user.roles.includes("catalogador_gestor")&&d&&e.user.roles.includes("catalogador")&&t.push({name:"Nuevo recurso",icon:o.a.createElement(qe.a,null),action:"new",callback:function(){return _e("/resources/resource/".concat(d.id?d.id:"0","/0"))}}),e.user.roles.includes("catalogador_gestor")&&d&&b.length>0&&t.push({name:"Exportar metadatos de recursos",icon:o.a.createElement(o.a.Fragment,null,o.a.createElement(Ke.a,null),o.a.createElement(Ze.a,null)),callback:function(){return Ce()}}),e.user.roles.includes("catalogador_gestor")&&d&&t.push({name:"Exportar metadatos del fondo",icon:o.a.createElement(o.a.Fragment,null,o.a.createElement(Ke.a,null),o.a.createElement($e.a,null)),callback:function(){return ke()}}),t}()}),o.a.createElement(l.a,{className:a.columnas},o.a.createElement(ut,{style:{width:"70%",maxWidth:500},title:"\xc1rbol de fondos"},o.a.createElement(J.b,{key:$,path:[].concat(Object(z.a)(x),[d]),depth:P.g,setFondo:function(e,t){var a;S(t||[]),q(0),console.log(e),v(e),h({name:(a=e).text,id:a.ResourceGroupId})},fondo:[d],lazy:!0})),o.a.createElement(ut,{title:"".concat(d?"Recursos del fondo: "+d.name:"No hay fondo seleccionado")},d&&o.a.createElement(at.a,{className:a.breadcrumbs},x&&x.map((function(e,t){return o.a.createElement(rt.a,{key:t,underline:"hover",color:"inherit",className:a.linkBreadcrumb,href:"/admin-cataloging/main/".concat(x.slice(0,t+1).map((function(e){return e.id})).join("|"))},e.name)})),o.a.createElement(ot.a,{className:a.selectedBread,color:"textPrimary"},d.name)),d&&o.a.createElement(o.a.Fragment,null,o.a.createElement(re,{id:"queries",columns:st,data:b,paging:!1,itemsSelected:L,ordering:!1,filter:!1,info:!1,isSelected:e.user.roles.includes("catalogador_gestor"),outputSelected:function(e){N(e)},actions:[{action:"edit",title:"Editar",classLaIcon:"la la-edit"},{action:"open",title:"Ver detalle",classLaIcon:"la la-link"},{action:"metadata",title:"Ver metadata",classLaIcon:"la la-list"},{action:"delete",title:"Eliminar",classLaIcon:"la la-trash"}].concat(),outputEvent:function(e){var t=e.action,a=e.row;switch(t.action){case"edit":_e("/resources/resource/".concat(a&&a.rg?a.rg:"0","/").concat(a&&a.ident?a.ident:"0"));break;case"delete":Object(V.a)();break;case"open":_e("/detail/".concat(a&&a.ident?a.ident:"0"));break;case"metadata":A.a.fire({title:"Metadata",width:600,heightAuto:!1,html:a.metadata})}}}),o.a.createElement(it.a,{onChange:function(e,t){q(t-1)},count:K,page:M+1})))))})),Object(nt.a)((function(e){return{columnas:{display:"flex",height:"calc(100vh - 150px)"}}}))),ht=function(e){var t=dt(),a=Object(r.useState)([]),i=Object(n.a)(a,2),c=i[0],s=i[1],u=Object(r.useState)(null),d=Object(n.a)(u,2),h=d[0],f=d[1],p=Object(r.useState)(null),m=Object(n.a)(p,2),v=(m[0],m[1]);return o.a.createElement(l.a,{className:t.columnas},o.a.createElement(ut,{style:{width:"70%",maxWidth:500},title:"\xc1rbol de fondos"},o.a.createElement(J.a,{path:[].concat(Object(z.a)(c),[h]),setFondo:function(e,t){var a;s(t||[]),v(e),f({name:(a=e).text,id:a.ResourceGroupId})},fondo:[h]})),o.a.createElement(ut,{title:e.form.title},o.a.createElement(l.a,{style:{backgroundColor:"rgb(95 124 160)",display:"flex",marginBottom:20}},o.a.createElement(l.a,{style:{background:"url(".concat(e.form.img,")"),width:300,height:300,backgroundSize:"cover",backgroundPosition:"center"}}),o.a.createElement(l.a,{style:{color:"#fff",padding:15,width:"calc(100% - 300px)",maxWidth:400}},e.form.instructions)),o.a.createElement(M,{form:e.form,callback:e.callback,selected:h})))},ft=a(1111),pt=a.n(ft);t.default=function(){var e=Object(r.useState)(null),t=Object(n.a)(e,2),a=t[0],s=t[1],l=function(e,t,a,n,r){s(e&&t&&a?{form:e,path:t,img:a,title:n,instructions:r}:null)};return o.a.createElement("div",{className:"cev-dashboard"},o.a.createElement(i.a,null,a?o.a.createElement(o.a.Fragment,null,o.a.createElement(c.a,{list:[{name:"Atr\xe1s",icon:o.a.createElement(pt.a,null),callback:function(){return s(null)}}]}),o.a.createElement(ht,{form:a,callback:l})):o.a.createElement(w,{callback:l})))}},963:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"g",(function(){return i})),a.d(t,"f",(function(){return c})),a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"h",(function(){return u})),a.d(t,"e",(function(){return d})),a.d(t,"c",(function(){return h}));var n=a(43),r=a(40);function o(e,t){var a="/resources/"+e;var o={method:"POST",headers:new Headers({Authorization:Object(n.c)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:t};return fetch(r.i+a,o).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function i(e){var t={method:"POST",headers:new Headers({Authorization:Object(n.c)()}),mode:"cors",cache:"default",body:e};return fetch(r.i+"/resources",t).then((function(e){return 201!==e.status?Promise.reject(e):e.json()}))}function c(e){var t={method:"POST",headers:new Headers({Authorization:Object(n.c)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch(r.i+"/resources/tree",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function s(e){var t="/resources/"+e,a={method:"DELETE",headers:new Headers({Authorization:Object(n.c)()}),mode:"cors",cache:"default"};return fetch(r.i+t,a).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function l(e){var t="/resources/"+e,a={method:"GET",headers:new Headers({Authorization:Object(n.c)()}),mode:"cors",cache:"default"};return fetch(r.i+t,a).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function u(e,t){var a="/resources/"+e,o={method:"PUT",headers:new Headers({Authorization:Object(n.c)()}),mode:"cors",cache:"default",body:t};return fetch(r.i+a,o).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=new Headers({Authorization:Object(n.c)(),"Content-Type":"application/json"}),o="/resources/"+e+"/records",i={method:"POST",headers:a,mode:"cors",cache:"default",body:JSON.stringify({page:t})};return fetch(r.i+o,i).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function h(e){var t={method:"POST",headers:new Headers({Authorization:Object(n.c)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch(r.i+"/records",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}},965:function(e,t,a){"use strict";var n=a(2),r=a.n(n);t.a=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"mainContent"},t))}},966:function(e,t,a){"use strict";var n=a(8),r=a(2),o=a.n(r),i=a(512),c=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("svg",{viewBox:"0 0 53.2 53.2",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{fill:"#a3d4ff",d:"M33.3 7.7v8.4h8.4z"}),o.a.createElement("path",{fill:"#2a5082",d:"M39.8 46.9h-27c-1.5 0-2.8-1.3-2.8-2.8V9.6c0-1.5 1.3-2.8 2.8-2.8h21.8l8 8v29.3c0 1.5-1.2 2.8-2.8 2.8zm-27-38.2c-.5 0-.9.4-.9.9v34.5c0 .5.4.9.9.9h27c.5 0 .9-.4.9-.9V15.6l-6.9-6.9h-21z"}),o.a.createElement("path",{fill:"#2a5082",d:"M38.9 17.1h-6.5v-6.6h1.9v4.7h4.6zM47.3 30.1h1.9V32h-1.9zM47.3 33.8h1.9v1.9h-1.9zM43.6 53.4H32.4v-1.9h11.2c2.1 0 3.7-1.7 3.7-3.7V37.6h1.9v10.2c0 3.1-2.5 5.6-5.6 5.6zM24.9 51.5h1.9v1.9h-1.9zM21.2 51.5h1.9v1.9h-1.9zM28.7 51.5h1.9v1.9h-1.9zM9.1 51.5c-2.1 0-3.7-1.7-3.7-3.7V31.4l2.1 2.1 1.3-1.3-4.4-4.4L0 32.2l1.3 1.3 2.1-2.1v16.4c0 3.1 2.5 5.6 5.6 5.6h10.2v-1.9H9.1zM3.5 24.5h1.9v1.9H3.5zM3.5 20.8h1.9v1.9H3.5zM51.3 22.9L49.2 25V5.9c0-3.1-2.5-5.6-5.6-5.6H32.4v1.9h11.2c2.1 0 3.7 1.7 3.7 3.7v19.2L45.2 23l-1.3 1.3 4.4 4.4 4.4-4.4-1.4-1.4zM5.4 18.9H3.5v-13C3.5 2.8 6 .3 9.1.3h10.2v1.9H9.1C7 2.2 5.4 3.8 5.4 5.9v13zM24.9.3h1.9v1.9h-1.9zM21.2.3h1.9v1.9h-1.9zM28.7.3h1.9v1.9h-1.9z"})))},s=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1",x:"0",y:"0",version:"1.1",viewBox:"0 0 53.2 53.2"},o.a.createElement("defs",null),o.a.createElement("path",{d:"M33.3 50.2h-3.6l-3-4.6c-.6-.9-1.6-1.4-2.6-1.4h-9.9c-1.1 0-2.1.6-2.7 1.5l-2.8 4.6H5.1v2.4l28.4-.2-.2-2.3zm-19.9-3.3c.1-.2.4-.4.7-.4H24c.3 0 .5.1.7.4l2.1 3.3-15.7.1 2.3-3.4z",class:"st0"}),o.a.createElement("path",{fill:"#a3d4ff",d:"M20.1 17.1L32.8 6.4l6.4 7.5L26 24.8z"}),o.a.createElement("path",{d:"M52.2 37.2L36.1 17.5l3-2.4.1.1 4.8-2c.9-.4 1.6-1.2 1.8-2.1.2-1 0-2-.6-2.7l-5.8-7C38.8.7 37.9.3 36.9.3s-1.8.5-2.4 1.3l-3.1 4.1.2.2-11.4 9.5-.3-.4-4.7 2c-.9.4-1.5 1.1-1.8 2.1-.2.9-.1 1.9.5 2.7l5.5 7.3c.6.8 1.5 1.2 2.5 1.2s1.9-.5 2.5-1.3l3-4.2-.2-.2 2.7-2.1 16.3 19.7c.6.7 1.4 1.1 2.2 1.1h.2c.8 0 1.6-.3 2.2-.8l.9-.8c1.4-1.2 1.5-3.1.5-4.5zM36.4 2.9c.2-.3.4-.3.6-.3.2 0 .4 0 .6.3l5.8 7c.2.3.2.5.1.7s-.1.4-.4.5l-3.2 1.3-5.5-6.8 2-2.7zM22.5 27.6c-.1.2-.4.3-.6.3-.2 0-.4 0-.6-.3l-5.5-7.3c-.2-.3-.2-.5-.1-.6 0-.1.1-.4.4-.5l3-1.3 5.4 6.9-2 2.8zM32.6 8.1l4.6 5.5-11.2 9-4.3-5.4 10.9-9.1zm17.6 31.8l-.9.8c-.2.2-.4.2-.6.2-.2 0-.4-.1-.6-.3L32.6 21.9 35 20l15.3 18.8c.3.3.3.8-.1 1.1z",class:"st0"})))},l=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1",x:"0",y:"0",version:"1.1",viewBox:"0 0 53.2 53.2"},o.a.createElement("defs",null),o.a.createElement("path",{className:"back",d:"M11.3,46.4c0,2.4,1.9,4.3,4.3,4.3h23.3c-2.4,0-4.3-1.9-4.3-4.3H11.3z"}),o.a.createElement("path",{className:"back",d:"M8.7,41.6l-2.5,7.7l-2.6-7.8v-31c0-1,0.8-1.7,1.7-1.7H7c1,0,1.7,0.8,1.7,1.7V41.6z"}),o.a.createElement("line",{className:"front",fill:"currentColor",x1:"3.6",y1:"40.7",x2:"8.7",y2:"40.7"}),o.a.createElement("path",{className:"front",fill:"currentColor",d:"M11.3,9.7v2.6H9.6v-1.7c0-0.7-0.3-1.4-0.8-1.8V6.2c0-1.4-1.2-2.6-2.6-2.6c-1.4,0-2.6,1.2-2.6,2.6v2.5 c-0.5,0.5-0.9,1.2-0.9,1.9v31L6.2,52l3.4-10.2V14h1.7v8.6H13V9.7H11.3z M4.4,10.5c0-0.4,0.2-0.7,0.5-0.8h2.4 c0.3,0.1,0.5,0.4,0.5,0.8v1.8H4.4V10.5z M5.3,6.2c0-0.5,0.3-0.9,0.8-0.9S7,5.7,7,6.2v1.7H5.3V6.2z M6.1,46.6l-1.7-5.1h3.3L6.1,46.6z M7.8,39.8H4.4V14h3.4V39.8z"}),o.a.createElement("g",null,o.a.createElement("g",null,o.a.createElement("g",null,o.a.createElement("rect",{x:"21.7",y:"19.1",className:"front",fill:"currentColor",width:"15.5",height:"1.7"})),o.a.createElement("g",null,o.a.createElement("rect",{x:"21.7",y:"22.6",className:"front",fill:"currentColor",width:"15.5",height:"1.7"})),o.a.createElement("g",null,o.a.createElement("rect",{x:"21.7",y:"26",className:"front",fill:"currentColor",width:"15.5",height:"1.7"})),o.a.createElement("g",null,o.a.createElement("rect",{x:"21.7",y:"29.5",className:"front",fill:"currentColor",width:"9.5",height:"1.7"}))),o.a.createElement("path",{className:"front",fill:"currentColor",d:"M47.6,10.6L47.6,10.6l-0.1-0.1H20.8c-2.9,0-5.2,2.3-5.2,5.2v30.1h-5.2v0.9c0,2.9,2.3,5.2,5.2,5.2h23.2h0.1 c2.9,0,5.2-2.3,5.2-5.2v-31c0-1.9,1.5-3.4,3.4-3.4h0.1c1.9,0,3.4,1.5,3.4,3.4h-5.2v1.7h6.9h0.1v-1.6C52.8,12.9,50.5,10.6,47.6,10.6 z M17.7,50.2h-2.1c-1.6,0-2.9-1.1-3.3-2.6h21.5c0.1,1,0.6,1.9,1.2,2.6H17.7z M42.4,15.8v31c0,1.9-1.5,3.4-3.4,3.4h-0.2v-0.1 c-1.9,0-3.4-1.5-3.4-3.4v-0.9h-18v-30c0-1.9,1.5-3.4,3.4-3.4h22.9C42.9,13.3,42.4,14.5,42.4,15.8z"}))))},u=function(e){var t=e.className;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{key:e.index,className:t,onClick:function(){return e.onClick(e.title)}},o.a.createElement("div",{className:"icon"},e.children),o.a.createElement("div",{className:"tooltipUi"},e.title)))},d=Object(i.a)((function(e){var t;return{root:{position:"fixed",width:"54px",background:"rgba(42, 80, 130, 0.8)",borderRadius:"10px",top:"50%",transform:"translateY(-50%)",left:"10px",zIndex:15},item:{cursor:"pointer",position:"relative",margin:2,"& .tooltipUi":{position:"absolute",top:"50%",transform:"translate(calc(50px + 5px), -50%)",background:"rgba(20, 20, 20, 0.9)",padding:"1em",color:"white",borderRadius:"10px",opacity:0,zIndex:-1,visibility:"hidden",transition:"all 0.25s ease"},"& .icon":(t={width:"50px",height:"50px",position:"relative",borderRadius:"10px",background:"rgba(255, 255, 255, 0.1)"},Object(n.a)(t,"background","rgba(42, 80, 130, 1)"),Object(n.a)(t,"display","flex"),Object(n.a)(t,"justifyContent","center"),Object(n.a)(t,"alignItems","center"),Object(n.a)(t,"&::before",{content:'""',position:"absolute",top:"5%",left:"5%",width:"90%",height:"90%",background:"rgba(255, 255, 255, 0.2)",borderRadius:"10px",transform:"scale(0.8)",opacity:0,transition:"all 0.25s ease"}),Object(n.a)(t,"& svg",{position:"relative","& path, & circle, & rect":{fill:"rgba(255, 255, 255, 0.8)"}}),t),"&:hover":{"& .icon":{"&::before":{transform:"scale(1)",opacity:1}},"& .tooltipUi":{transform:"translate(calc(50px + 10px), -50%)",opacity:1,zIndex:20,visibility:"visible"}},"&.edit .icon":{background:"#ed9f31"},"&.new .icon":{background:"#59b359"},"&.delete .icon":{background:"#d34a46"}}}})),h=[{name:"Patrones de texto",icon:o.a.createElement(c,null)},{name:"Informaci\xf3n de fichas",icon:o.a.createElement(l,null)},{name:"Resultados",icon:o.a.createElement(s,null)}];t.a=function(e){var t=d(),a=e.list?e.list:h;return o.a.createElement(o.a.Fragment,null,o.a.createElement("nav",{className:t.root},a.map((function(e,a){return o.a.createElement(u,{className:"".concat(t.item," ").concat(e.action?e.action:""),title:e.name,key:a,onClick:e.callback?e.callback:function(){}},e.icon)}))))}},973:function(e,t,a){"use strict";a.d(t,"a",(function(){return F}));var n=a(35),r=a(2),o=a.n(r),i=(a(988),a(1034),a(1035),a(516)),c=a(512),s=a(883),l=a(92),u=a(879),d=a(2128),h=a(882),f=a(881),p=a(880),m=a(345),v=a.n(m),g=a(1037),y=a.n(g),b=a(346),E=a.n(b),w=a(1038),j=a.n(w),O=a(963),x=a(1036),S=a.n(x),k=a(40),C=a(267),L=Object(c.a)((function(e){return{check:{padding:0},icon:{marginLeft:e.spacing(2),marginRight:e.spacing(1),minWidth:"auto","& path":{fill:"#56749a"}},text:{"& span":{display:"inline-block",padding:"0 10px",transition:"all 0.3s ease-in-out"},"&.selected span":{background:"#c5cfdc",borderRadius:"5px",color:"#375374"}}}})),N=function(e){var t=Object(r.useState)(!1),a=Object(n.a)(t,2),i=a[0],c=a[1],s=L(),l=Object(r.useState)(!1),h=Object(n.a)(l,2),m=h[0],v=h[1];Object(r.useEffect)((function(){if(Object(C.isArray)(e.path)){var t=e.path.find((function(t){return!!t&&t.id===e.id}));v(!!t)}}),[e.path]),Object(r.useEffect)((function(){if(e.selected)if(e.selected.length>0){var t=e.selected.find((function(t){return!!t&&t.id===e.id}));c(!!t)}else c(!1);else c(!1)}),[e.selected]);var g=function(){e.setFondo(e.original,e.parent)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{className:e.class},e.activeTypes.filter((function(t){return t.slug===e.original.post_type}))[0].direct&&o.a.createElement(d.a,{checked:i,className:s.check,edge:"start",color:"primary",onClick:function(){g()}}),o.a.createElement(p.a,{className:s.icon},k.h.filter((function(t){return t.value===e.original.icon}))?k.h.filter((function(t){return t.value===e.original.icon}))[0].iconlight:o.a.createElement(S.a,null)),o.a.createElement(f.a,{style:{cursor:"pointer"},onClick:function(){g()},primary:e.original.name,className:"".concat(s.text," ").concat(m||i?"selected":"")})))},_=Object(c.a)((function(e){return{root:{flexGrow:1,display:"flex",paddingTop:e.spacing(4)},check:{padding:0},accordeons:{flexGrow:1,paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},listado:{flexGrow:1,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),maxWidth:600},nested:{paddingLeft:e.spacing(3)+"px !important",marginLeft:e.spacing(1),borderLeft:"1px solid #dcdcdc"},icon:{marginLeft:e.spacing(2),marginRight:e.spacing(1),minWidth:"auto","&.loading":{"-webkit-animation":"rotate-center 1s linear infinite both",animation:"rotate-center 1s linear infinite both"},"& path":{fill:"#56749a"}},iconExpand:{marginRight:e.spacing(1),minWidth:"auto","& path":{fill:"#999"}},text:{"& span":{display:"inline-block",padding:"0 10px",transition:"all 0.3s ease-in-out"},"&.selected span":{background:"#c5cfdc",borderRadius:"5px",color:"#375374"}}}})),T=function e(t){var a=_(),i=Object(r.useState)(!1),c=Object(n.a)(i,2),m=c[0],g=c[1],b=Object(r.useState)(!1),w=Object(n.a)(b,2),x=w[0],S=w[1],L=Object(r.useState)(!1),T=Object(n.a)(L,2),P=T[0],D=T[1],R=Object(r.useState)(!1),F=Object(n.a)(R,2),A=F[0],G=F[1],M=Object(r.useState)([]),z=Object(n.a)(M,2),B=z[0],q=z[1],I=function(){g(!m)},H=function(){return[].concat(Object(l.a)(t.parent),[{id:t.id,name:t.name}])};return Object(r.useEffect)((function(){0===B.length&&m&&(G(!0),O.f(JSON.stringify({root:t.id,tree:t.activeTypes})).then((function(e){q(e),G(!1)})))}),[m]),Object(r.useEffect)((function(){if(G(!1),Object(C.isArray)(t.path)){var e=t.path.find((function(e){return!!e&&e.id===t.id}));D(!!e),g(!!e)}}),[t.path]),Object(r.useEffect)((function(){t.selected?t.selected.length>0&&t.selected.filter((function(e){return e.id===t.original.id})).length>0?S(!0):S(!1):S(!1)}),[t.selected]),o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{className:t.class},t.activeTypes.filter((function(e){return e.slug===t.original.post_type}))[0].direct&&o.a.createElement(d.a,{checked:x,color:"primary",edge:"start",className:a.check,onClick:function(){t.setFondo(t.original,t.parent)}}),A?o.a.createElement(p.a,{className:"loading ".concat(a.icon)},o.a.createElement(j.a,null)):o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{className:a.icon},k.h.filter((function(e){return e.value===t.original.icon}))?k.h.filter((function(e){return e.value===t.original.icon}))[0].icon:o.a.createElement(y.a,null))),m&&!A?o.a.createElement(v.a,{style:{cursor:"pointer"},onClick:I,className:a.iconExpand}):o.a.createElement(o.a.Fragment,null,A?o.a.createElement(E.a,{className:a.iconExpand}):o.a.createElement(E.a,{style:{cursor:"pointer"},onClick:I,className:a.iconExpand})),o.a.createElement(f.a,{style:{cursor:"pointer"},className:"".concat(a.text," ").concat(P||x?"selected":""),primary:t.original.name,onClick:function(){t.setFondo(t.original,t.parent)}})),o.a.createElement(h.a,{in:m,timeout:"auto",unmountOnExit:!0},o.a.createElement(s.a,{component:"div",disablePadding:!0,className:t.class},B.map((function(n){return!0!==n.children?o.a.createElement(o.a.Fragment,null,o.a.createElement(N,{name:n.text,original:n,class:"".concat(t.class," ").concat(a.nested),setFondo:t.setFondo,fondo:t.fondo,id:n.id,parent:null!==t.parent?H():[{id:t.id,name:t.name}],path:t.path,selected:t.selected,activeTypes:t.activeTypes})):o.a.createElement(o.a.Fragment,null,o.a.createElement(e,{name:n.text,class:"".concat(a.nested," ").concat(t.class),children:n.children,original:n,id:n.id,path:t.path,setFondo:t.setFondo,fondo:t.fondo,parent:null!==t.parent?H():[{id:t.id,name:t.name}],activeTypes:t.activeTypes,selected:t.selected}))})))))},P=Object(c.a)((function(e){return{root:{flexGrow:1,display:"flex",paddingTop:e.spacing(4)},tabs:{},accordeons:{flexGrow:1,paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},listado:{flexGrow:1,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),maxWidth:600},nested:{paddingLeft:e.spacing(3),marginLeft:e.spacing(3),borderLeft:"1px solid #dcdcdc"},item:{padding:1}}})),D=function(e){var t=P();return o.a.createElement(i.a,{className:t.listado},o.a.createElement(s.a,{disablePadding:!0,component:"nav","aria-labelledby":"nested-list-subheader"},e.root.map((function(a){return!0===a.children?o.a.createElement(o.a.Fragment,null,o.a.createElement(T,{name:"".concat(a.text),children:a.children,id:a.id,original:a,setFondo:e.setFondo,setLoading:e.setLoading,fondo:e.fondo,class:t.item,parent:null,path:e.path,activeTypes:e.activeTypes,selected:e.selected})):o.a.createElement(o.a.Fragment,null,o.a.createElement(N,{id:a.id,name:a.text,original:a,setFondo:e.setFondo,fondo:e.fondo,parent:null,path:e.path,class:t.item,selected:e.selected,activeTypes:e.activeTypes}))}))))},R=a(523),F=function(e){var t=Object(r.useState)(0),a=Object(n.a)(t,2),i=(a[0],a[1],Object(r.useState)([])),c=Object(n.a)(i,2),s=c[0],l=c[1];return Object(r.useEffect)((function(){var t,a,n={root:e.root?e.root:"all",tree:e.parents};e.parents.length>0&&((null===(t=e.filters)||void 0===t?void 0:t.treeKeyword)&&""!==(null===(a=e.filters)||void 0===a?void 0:a.treeKeyword)?(n.keyword=e.filters.treeKeyword,Object(R.b)(JSON.stringify(n)).then((function(e){l(e)}))):Object(O.f)(JSON.stringify(n)).then((function(e){l(e)})))}),[e.parents,e.filters]),o.a.createElement("div",{style:{marginTop:10}},o.a.createElement(D,{root:s,path:e.path,selected:e.selected,setFondo:e.setFondo,activeTypes:e.activeTypes,childrenEditing:e.childrenEditing,setPath:e.setPath}))};t.b=F},992:function(e,t,a){"use strict";a.d(t,"j",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"h",(function(){return c})),a.d(t,"g",(function(){return s})),a.d(t,"f",(function(){return l})),a.d(t,"d",(function(){return u})),a.d(t,"e",(function(){return d})),a.d(t,"a",(function(){return h})),a.d(t,"c",(function(){return f})),a.d(t,"i",(function(){return p}));a(179);var n=a(40),r=a(43);function o(e){var t={method:"PUT",headers:new Headers({Authorization:Object(r.c)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch(n.i+"/users/update",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function i(e){var t={method:"POST",headers:new Headers({Authorization:Object(r.c)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch(n.i+"/users/register",t).then((function(e){return 201!==e.status?Promise.reject(e):e.json()}))}function c(e){var t="/users/"+e,a={method:"GET",headers:new Headers({Authorization:Object(r.c)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch(n.i+t,a).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function s(e){var t={method:"POST",headers:new Headers({Authorization:Object(r.c)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch(n.i+"/users",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function l(e){var t={method:"POST",headers:{Authorization:Object(r.c)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(n.i+"/users/token",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function u(e){var t={method:"POST",headers:{Authorization:Object(r.c)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(n.i+"/users/admin-token",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function d(e){var t={method:"POST",headers:{Authorization:Object(r.c)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(n.i+"/users/node-token",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function h(e){var t={method:"POST",headers:{Authorization:Object(r.c)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(n.i+"/users/favorites",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function f(e){var t={method:"DELETE",headers:{Authorization:Object(r.c)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(n.i+"/users/favorites",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function p(){var e={method:"GET",headers:{Authorization:Object(r.c)(),"Content-Type":"application/json"},mode:"cors",cache:"default"};return fetch(n.i+"/users/requests",e).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}}}]);
//# sourceMappingURL=17.c5694622.chunk.js.map