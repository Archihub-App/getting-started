"use strict";(self.webpackChunkarchihub=self.webpackChunkarchihub||[]).push([[1950],{14993:function(e,t,r){r.r(t),r.d(t,{Main:function(){return Ee},default:function(){return Le}});var n=r(89379),i=r(64467),a=r(5544),o=r(65043),s=r(72378),l=r(9920),c=r(19853),u=r(85865),d=r(96446),p=r(55263),f=r(17392),g=r(5670),h=r(42588),m=r(5374),x=r(95501),v=r(83003),b=r(41905),y=r(12110),k=r(63336),A=r(30064),w=r.n(A),j=r(54469),_=r(29704),C=r(6512),S=r(4319),T=r(76370),E=r(80045),L=r(60436),M=r(49658),R=r(26240),P=r(99246),V=r(25012),I=r(70579),N=["node"],z=["node"],D=function(e){var t=(0,v.d4)((function(e){return e.app.isDarkMode})),r=(0,P.A)(),n=(0,R.A)(),a=(0,b.A)((function(e){return{bloque:{"&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:n.palette.primary.main,border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:n.palette.primary.main},"&::-webkit-scrollbar-thumb:active":{background:n.palette.primary.main},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}}}}))();return(0,I.jsx)(d.A,{style:{padding:"5px",background:"transparent",maxHeight:"200px",overflow:"auto"},className:a.bloque,children:e.speakers.map((function(n,a){return(0,I.jsxs)(d.A,{style:{padding:"10px",border:"#444",marginBottom:"5px",borderRadius:"5px",display:"flex",maxWidth:"450px",background:t?"#333":"white",alignItems:"center"},children:[(0,I.jsx)("div",{style:{width:"150px",textAlign:"center",fontWeight:"bold",color:n.color},children:n.name.replace("SPEAKER",r.formatMessage({id:"general.speaker"}))}),(0,I.jsx)("div",{style:{position:"relative",width:"350px",marginLeft:"10px",background:t?"#555":"#f2f2f2",borderRadius:"3px",height:"10px"},children:n.segments.map((function(t,r){return(0,I.jsx)("div",{style:{position:"absolute",top:"0",height:"100%",left:"".concat(t.start/e.totalTime*100,"%"),width:"".concat((t.end-t.start)/e.totalTime*100,"%"),background:n.color,cursor:"pointer"},onClick:function(r){e.setVideoTime(t.start)}})}))}),(0,I.jsx)("div",{style:(0,i.A)({marginLeft:"10px",background:"transparent",color:"white",padding:"5px",fontSize:"10px",borderRadius:"5px",border:"2px solid "+n.color,fontWeight:"bold"},"color",n.color),children:e.totalTime&&(0,I.jsxs)(I.Fragment,{children:[Math.round(n.total/e.totalTime*100),"%"]})})]},a)}))})},B=function(e){var t=e.segment,r=(e.index,e.isCurrentSegment,e.onSave),n=e.refProp,i=e.segmentClass,s=(0,o.useState)(!1),l=(0,a.A)(s,2),c=l[0],u=l[1],d=(0,o.useState)(t.text),p=(0,a.A)(d,2),f=p[0],g=p[1],h=(0,o.useRef)(null),m=(0,R.A)();(0,o.useEffect)((function(){c&&h.current&&h.current.focus()}),[c]);return(0,I.jsx)("span",{ref:n,className:i,children:c?(0,I.jsx)("span",{ref:h,contentEditable:!0,suppressContentEditableWarning:!0,onBlur:function(){f!==t.text&&r(t,f),u(!1)},onKeyDown:function(e){"Enter"===e.key&&!1===e.shiftKey&&(e.preventDefault(),h.current.blur())},onInput:function(e){return g(e.currentTarget.textContent)},style:{outline:"none",background:m.palette.primary.light,color:m.palette.primary.main},children:t.text}):(0,I.jsx)("span",{onClick:function(){u(!0)},style:{cursor:"text"},children:t.text})})},F=function(e){var t=(0,R.A)(),r=(0,v.d4)((function(e){return e.app.isDarkMode})),i=(0,b.A)((function(e){return{segment:{transition:"all .35s",cursor:"pointer",color:r?t.palette.grey[400]:t.palette.grey[800],"&:hover":{background:t.palette.primary.light,color:t.palette.primary.main},"&.selected":{opacity:1,background:t.palette.primary.main,color:"white"}},speaker:{fontWeight:"bold",marginRight:"10px"},paragraph:{fontSize:"16px",maxWidth:"650px",margin:"0 auto",marginBottom:"20px"},selected:{background:t.palette.primary.main,color:"white",borderRadius:"3px"},bloque:{"&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:t.palette.primary.main,border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:t.palette.primary.main},"&::-webkit-scrollbar-thumb:active":{background:t.palette.primary.main},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}}}}))(),s=(0,o.useState)(null),c=(0,a.A)(s,2),u=c[0],p=c[1],f=(0,o.useState)(1),g=(0,a.A)(f,2),h=g[0],m=(g[1],(0,o.useState)(null)),x=(0,a.A)(m,2),y=x[0],k=x[1],A=(0,o.useState)([]),w=(0,a.A)(A,2),j=w[0],_=w[1],C=(0,P.A)(),S=function(){l.RS(e.id,e.slug).then((function(t){var r=M.Ks0,n=!1;if(t.speakers&&(n=!0),n){var i=M.UMr(t.speakers.map((function(e){return e.name})),r);t.segments.forEach((function(e){e.color=i(e.speaker)})),p(t.segments),_(t.segments.map((function(){return o.createRef()}))),t.speakers.forEach((function(e){e.color=i(e.name)})),e.setSpeakers(t.speakers)}else p(t.segments),_(t.segments.map((function(){return o.createRef()})))}))},T=function(t,r){if(t.text!==r){var i=(0,L.A)(u),a=i.findIndex((function(e){return e===t}));-1!==a&&(i[a].text=r,p(i),l.v(e.id,(0,n.A)((0,n.A)({},t),{},{text:r,slug:e.slug})))}};(0,o.useEffect)((function(){S()}),[]),(0,o.useEffect)((function(){e.updateTranscription&&(S(),e.setUpdateTranscription(!1))}),[e.updateTranscription]),(0,o.useEffect)((function(){if(u){u.forEach((function(t,r){if(t.index=r,t.start<=e.time&&t.end>=e.time&&y!==r){k(r),e.setCurrentLabel(t);var n=j[r].current;n&&n.scrollIntoView({behavior:"smooth",block:"center"})}}))}}),[e.time]);return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(d.A,{style:{position:"absolute",top:0,width:"100%",height:"100%",overflow:"auto"},className:i.bloque,children:1===h&&u&&(0,I.jsx)("div",{style:{float:"right",paddingTop:"50vh",paddingBottom:"50vh"},children:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=null,a=[],s=[];return u.forEach((function(o,l){var c;c={container:c=t?(0,I.jsx)(B,{segment:o,index:l,isCurrentSegment:l===y,onSave:T,refProp:j[l],segmentClass:"".concat(i.segment," segment_transcription seg_").concat(l," ").concat(l===y?"selected":"")},l):(0,I.jsx)("span",{ref:j[l],onClick:function(t){return e.setVideoTime(o.start)},className:"".concat(i.segment," segment_transcription seg_").concat(l," ").concat(l===y?"selected":""),children:(0,I.jsx)(V.$,{components:{p:function(e){e.node;var t=(0,E.A)(e,N);return(0,I.jsx)("span",(0,n.A)({},t))},a:function(e){e.node;var t=(0,E.A)(e,z);return(0,I.jsx)("a",(0,n.A)((0,n.A)({},t),{},{target:"_blank",rel:"noopener noreferrer",onClick:function(e){return e.stopPropagation()}}))}},children:o.text})},l),speaker:o.speaker,color:o.color},o.speaker!==r&&(r=o.speaker,a.length>0&&s.push(a),a=[]),a.push(c)})),a.length>0&&s.push(a),(0,I.jsx)(I.Fragment,{children:s.filter((function(e){return e.length>0})).map((function(e,t){return(0,I.jsx)("p",{className:i.paragraph,children:e.map((function(e,t){var r;return t>0?e.container:e.speaker?(0,I.jsxs)(o.Fragment,{children:[(0,I.jsx)("span",{style:{color:e.color},className:i.speaker,children:null===(r=e.speaker)||void 0===r?void 0:r.replace("SPEAKER",C.formatMessage({id:"general.speaker"}))}),e.container]},"speaker-".concat(t)):e.container}))},t)}))})}(e.activeEditTranscription)})})})},K=r(43845),W=r(24394),q=r(93440),O=r(74054),U=r(6456),$=r(81551),H=(0,$.A)((function(e){return{close:{width:24,height:24,"& .MuiChip-label":{display:"none"},"& svg":{margin:"0 !important"}}}})),G=function(e){var t=H(),r=(0,o.useState)(""),i=(0,a.A)(r,2),s=i[0],c=i[1],u=(0,o.useState)(""),p=(0,a.A)(u,2),f=p[0],g=p[1],h=(0,o.useState)(""),m=(0,a.A)(h,2),x=m[0],b=m[1],y=(0,o.useState)(""),k=(0,a.A)(y,2),A=k[0],w=k[1],j=(0,o.useState)(!1),_=(0,a.A)(j,2),C=(_[0],_[1]),S=(0,v.d4)((function(e){return e.app.isDarkMode})),T=(0,o.useState)("text"),E=(0,a.A)(T,2),L=E[0],M=E[1],V=(0,P.A)(),N=(0,R.A)();(0,o.useEffect)((function(){e.currentLabel&&(c(e.currentLabel.text),w(e.currentLabel.speaker))}),[e.currentLabel]);return(0,I.jsxs)(d.A,{style:{padding:"5px",background:"transparent",backdropFilter:"blur(10px)"},children:[(0,I.jsxs)(d.A,{style:{display:"flex",justifyContent:"center",border:"#444",background:S?"#333":"white",borderRadius:"5px",marginBottom:"5px"},children:[(0,I.jsx)(q.A,{title:V.formatMessage({id:"general.editTranscription"}),labelPos:"top",onClick:function(){M("text")},children:"TextFields",selected:"text"===L,disabled:e.activeEditTranscription}),(0,I.jsx)(q.A,{title:V.formatMessage({id:"general.editSpeakers"}),labelPos:"top",onClick:function(){M("speaker")},children:"InterpreterMode",selected:"speaker"===L}),(0,I.jsx)(q.A,{title:V.formatMessage({id:"general.directTextEdit"}),labelPos:"top",onClick:function(){e.setActiveEdit(),M("activeTextEdit")},children:"FormatColorText,EditNote",selected:e.activeEditTranscription})]}),!e.currentLabel&&(0,I.jsx)(d.A,{style:{border:"#444",background:S?"#333":"white",borderRadius:"5px",padding:"15px",color:S?N.palette.grey[400]:N.palette.grey[800]},children:V.formatMessage({id:"general.noSegmentSelected"})}),e.currentLabel&&"text"===L&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(d.A,{style:{border:"#444",background:S?"#333":"white",borderRadius:"5px"},children:[(0,I.jsx)(W.QA,{value:s,handleChange:function(e){return c(e.target.value)},handleBlur:function(){},style:{padding:"5px",width:"450px"}}),A&&(0,I.jsx)(W.BR,{value:A,handleChange:function(e){return w(e.target.value)},style:{padding:"5px",width:"450px"}})]}),(0,I.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",width:"100px",margin:"0 auto",marginTop:"10px",background:S?"#333":"white",borderRadius:"50px"},children:[(0,I.jsx)(K.A,{label:"Guardar",size:"small",onClick:function(){!function(){var t=(0,n.A)({},e.currentLabel);t.text=s,t.speaker=A,t.slug=e.slug,C(!0),l.v(e.id,t).then((function(t){e.setUpdateTranscription(!0),C(!1)})).catch((function(e){console.log(e)}))}()},icon:(0,I.jsx)(O.A,{}),style:{margin:10,border:"none"},variant:"outlined",className:t.close}),(0,I.jsx)(K.A,{label:"Eliminar",size:"small",onClick:function(){!function(){var t={slug:e.slug,index:e.currentLabel.index};l.bn(e.id,t).then((function(t){e.setUpdateTranscription(!0)})).catch((function(e){console.log(e)}))}()},icon:(0,I.jsx)(U.A,{}),style:{margin:10,border:"none"},variant:"outlined",className:t.close})]})]}),"speaker"===L&&(0,I.jsx)(d.A,{style:{border:"#444",background:S?"#333":"white",borderRadius:"5px"},children:(0,I.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,I.jsx)(W.Q5,{value:x,handleChange:function(e){g(e.target.value),b(e.target.value)},options:e.speakers.map((function(e){return{value:e.name,label:e.name}})),rootStyle:{padding:"5px",width:"50%",margin:"0"}}),(0,I.jsx)(W.BR,{value:f,handleChange:function(e){return g(e.target.value)},style:{padding:"5px",width:"50%"}}),(0,I.jsx)(K.A,{label:"Guardar",size:"small",onClick:function(){!function(){var t={oldSpeaker:x,speaker:f,slug:e.slug};C(!0),l.Z$(e.id,t).then((function(t){e.setUpdateTranscription(!0),C(!1)})).catch((function(e){console.log(e)}))}()},icon:(0,I.jsx)(O.A,{}),style:{margin:10,border:"none"},variant:"outlined",className:t.close})]})})]})},Q=r(65226),J=r(72003),Y=r(72221),X=r(10673),Z=function(e){var t=(0,v.d4)((function(e){return e.app.isDarkMode})),r=(0,P.A)(),n=(0,R.A)();return(0,I.jsx)(d.A,{style:{background:"transparent",maxHeight:"200px",overflow:"auto",borderRadius:"5px"},children:(0,I.jsxs)(d.A,{style:{display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid "+(t?"#444":"#dcdcdc"),background:t?"#333":"white",borderRadius:"5px",paddingRight:"5px",paddingLeft:"5px"},children:[(0,I.jsx)(q.A,{title:r.formatMessage({id:"general.rewind30"}),labelPos:"top",onClick:function(){e.handleForward(-30)},children:"Replay30"}),(0,I.jsx)(q.A,{title:r.formatMessage({id:"general.rewind10"}),labelPos:"top",onClick:function(){e.handleForward(-10)},children:"Replay10"}),(0,I.jsx)(q.A,{title:r.formatMessage({id:"general.rewind5"}),labelPos:"top",onClick:function(){e.handleForward(-5)},children:"Replay5",style:{marginRight:"5px"}}),(0,I.jsxs)(Y.A,{value:e.speed,onChange:function(t){e.setSpeed(t.target.value)},style:{margin:"5px",width:"100px",background:t?"#333":"white",color:t?n.palette.grey[400]:n.palette.grey[800]},children:[(0,I.jsx)(X.A,{value:.25,children:"0.25x"}),(0,I.jsx)(X.A,{value:.5,children:"0.5x"}),(0,I.jsx)(X.A,{value:1,children:"1x"}),(0,I.jsx)(X.A,{value:1.5,children:"1.5x"}),(0,I.jsx)(X.A,{value:2,children:"2x"})]}),(0,I.jsx)(q.A,{title:r.formatMessage({id:"general.forward5"}),labelPos:"top",onClick:function(){e.handleForward(5)},children:"Forward5",style:{marginLeft:"5px"}}),(0,I.jsx)(q.A,{title:r.formatMessage({id:"general.forward10"}),labelPos:"top",onClick:function(){e.handleForward(10)},children:"Forward10"}),(0,I.jsx)(q.A,{title:r.formatMessage({id:"general.forward30"}),labelPos:"top",onClick:function(){e.handleForward(30)},children:"Forward30"})]})})},ee=r(82094),te=r(61413),re=function(e){var t,r,n,i,s,c,u,p,f,g,h=(0,R.A)(),m=(0,v.d4)((function(e){return e.app.isDarkMode})),x=(0,b.A)((function(e){return{bloqueReproduccion:{width:"calc(100% - 40px)",margin:"20px",display:"flex",alignItems:"center",position:"absolute",zIndex:1,"&:hover .num_currentTime":{opacity:1}},playPauseBtn:{width:"70px",height:"70px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer","& svg":{width:"50%",height:"50%","& path":{fill:m?h.palette.primary.light:h.palette.primary.main}}},progressContainer:{width:"calc(100% - 140px)",height:"5px",backgroundColor:m?h.palette.grey[900]:h.palette.grey[100],display:"flex",alignItems:"center",borderRadius:"5px",cursor:"pointer"},progress:{width:"0%",height:"100%",backgroundColor:m?h.palette.primary.light:h.palette.primary.main,borderRadius:"5px",position:"relative",transition:"all .3s"},currentTime:{position:"absolute",top:"-20px",right:"-56px",fontSize:"12px",fontWeight:"bold",color:m?h.palette.primary.light:h.palette.primary.main,opacity:0,transition:"all .3s"},duration:{width:"100px",height:"70px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",color:m?h.palette.primary.light:h.palette.grey[700],fontSize:"12px",fontWeight:"bold"}}}))(),A=(0,o.useRef)(null),E=(0,o.useRef)(null),L=(0,o.useRef)(null),M=(0,o.useState)(!1),P=(0,a.A)(M,2),V=P[0],N=P[1],z=(0,o.useState)(0),B=(0,a.A)(z,2),F=B[0],K=B[1],W=(0,o.useState)(null),q=(0,a.A)(W,2),O=q[0],U=q[1],$=(0,o.useState)(null),H=(0,a.A)($,2),Y=H[0],X=H[1],re=(0,o.useState)(!1),ne=(0,a.A)(re,2),ie=ne[0],ae=ne[1],oe=(0,o.useState)(1),se=(0,a.A)(oe,2),le=se[0],ce=se[1],ue=(0,o.useState)("audioPlayer"),de=(0,a.A)(ue,2),pe=de[0],fe=de[1],ge=(0,o.useState)(!1),he=(0,a.A)(ge,2),me=he[0],xe=he[1],ve=function(e){var t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=Math.floor(e%3600%60);return"".concat(t.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))},be=function(){N(!1)},ye=function(){w().fire({title:"Error",text:"No se pudo cargar el archivo",icon:"error",confirmButtonText:"Ok"})},ke=function(){var e=A.current.duration;K(ve(e))},Ae=function(){if(A.current){e.setPlayTime(A.current.currentTime);var t=A.current.currentTime/A.current.duration*100;E.current&&L.current&&(E.current.style.width="".concat(t,"%"),L.current.innerHTML=ve(A.current.currentTime))}},we=function(e){"input"===e.target.tagName.toLowerCase()||"textarea"===e.target.tagName.toLowerCase()||e.target.classList.contains("medium-editor-element")||" "!==e.key&&32!==e.keyCode||(e.preventDefault(),je())};(0,o.useEffect)((function(){return l.xU(e.id).then((function(e){var t=URL.createObjectURL(e);A.current.src=t,A.current.addEventListener("ended",be),A.current.addEventListener("error",ye),A.current.addEventListener("loadedmetadata",ke),A.current.addEventListener("timeupdate",Ae),document.addEventListener("keydown",we)})).catch((function(e){w().fire({title:"Error",text:"No se pudo cargar el archivo: "+e.message,icon:"error",confirmButtonText:"Ok"})})),function(){A.current&&(A.current.removeEventListener("ended",be),A.current.removeEventListener("error",ye),A.current.removeEventListener("loadedmetadata",ke),A.current.removeEventListener("timeupdate",Ae),document.removeEventListener("keydown",we))}}),[]),(0,o.useEffect)((function(){e.time&&(A.current.currentTime=e.time)}),[e.time]);var je=function(){var e;null!==(e=A.current)&&void 0!==e&&e.paused?(A.current.play(),N(!0)):A.current&&(A.current.pause(),N(!1))},_e=function(e){A.current.currentTime=e};return(0,I.jsxs)(S.M,{onDrop:function(e,t){return console.log(e,t)},onDragStart:function(e,t){fe(e.id)},children:[(0,I.jsxs)(y.A,{className:x.bloqueReproduccion,style:{display:null!==A&&void 0!==A&&null!==(t=A.current)&&void 0!==t&&t.duration?"flex":"none",backgroundColor:m?h.palette.grey[800]:"white",zIndex:1},children:[(0,I.jsx)(d.A,{onClick:je,className:x.playPauseBtn,children:V?(0,I.jsx)(_.A,{}):(0,I.jsx)(j.A,{})}),(0,I.jsx)(d.A,{className:x.progressContainer,onClick:function(e){var t=document.querySelector(".".concat(x.progressContainer)),r=e.nativeEvent.offsetX/t.offsetWidth*100;A.current.currentTime=A.current.duration*r/100},children:(0,I.jsx)(d.A,{className:x.progress,ref:E,children:(0,I.jsx)(d.A,{ref:L,className:"".concat(x.currentTime," num_currentTime")})})}),(0,I.jsx)(d.A,{className:x.duration,children:F})]}),o.Children.map(e.children,(function(e){return o.isValidElement(e)?o.cloneElement(e,{setVideoTime:_e,textAlign:"center",totalTime:A.current.duration,setSpeakers:U,setCurrentLabel:X,updateTranscription:ie,setUpdateTranscription:ae,activeEditTranscription:me,setActiveEditTranscription:xe}):e})),(0,I.jsx)(C.V,{id:"metadata",initialPosition:{x:0,y:0},style:{display:e.metadata?"block":"none",zIndex:"metadata"===pe?1:0},children:(0,I.jsx)(T.A,{resource:e.metadata,setMetadata:e.setMetadata,history:e.history})}),(0,I.jsx)(C.V,{id:"aiasistent_msgs",initialPosition:{x:0,y:0},style:{display:null!==A&&void 0!==A&&null!==(r=A.current)&&void 0!==r&&r.duration&&e.subView.split(",").includes("aiasistent_msgs")?"block":"none",zIndex:"aiasistent_msgs"===pe?1:0},children:(null===A||void 0===A||null===(n=A.current)||void 0===n?void 0:n.duration)&&e.subView.split(",").includes("aiasistent_msgs")&&(0,I.jsx)(te.A,{id:e.id,slug:e.slug,type:"transcription"})}),(0,I.jsx)(C.V,{id:"speakers",initialPosition:{x:0,y:0},style:{display:null!==A&&void 0!==A&&null!==(i=A.current)&&void 0!==i&&i.duration&&O?"block":"none",zIndex:"speakers"===pe?1:0},children:(null===A||void 0===A||null===(s=A.current)||void 0===s?void 0:s.duration)&&O&&e.subView.split(",").includes("speakers_av_transcribe")&&(0,I.jsx)(D,{speakers:O,totalTime:A.current.duration,setVideoTime:_e})}),(0,I.jsx)(C.V,{id:"player_settings",initialPosition:{x:0,y:0},style:{display:null!==A&&void 0!==A&&null!==(c=A.current)&&void 0!==c&&c.duration&&e.subView.split(",").includes("player_settings")?"block":"none",zIndex:"player_settings"===pe?1:0},children:(0,I.jsx)(Z,{speed:le,setSpeed:function(e){A.current&&(A.current.playbackRate=e,ce(e))},handleForward:function(e){A.current&&(A.current.currentTime+=e)}})}),(0,I.jsx)(C.V,{id:"user_record_tasks",initialPosition:{x:0,y:0},style:{display:null!==A&&void 0!==A&&null!==(u=A.current)&&void 0!==u&&u.duration&&e.subView.split(",").includes("user_record_tasks")?"block":"none",zIndex:"user_record_tasks"===pe?1:0},children:(0,I.jsx)(ee.A,{id:e.id,record:!0})}),(0,I.jsx)(C.V,{id:"edit_av_transcribe",initialPosition:{x:0,y:0},style:{display:null!==A&&void 0!==A&&null!==(p=A.current)&&void 0!==p&&p.duration&&e.subView.split(",").includes("edit_av_transcribe")?"block":"none",zIndex:"edit_av_transcribe"===pe?1:0},children:(null===A||void 0===A||null===(f=A.current)||void 0===f?void 0:f.duration)&&e.subView.split(",").includes("edit_av_transcribe")&&(0,I.jsx)(G,{setSubView:e.setSubView,currentLabel:Y,id:e.id,slug:e.slug,setUpdateTranscription:ae,speakers:O,activeEditTranscription:me,setActiveEdit:function(){return xe(!me)}})}),(0,I.jsxs)("audio",{ref:A,children:[(0,I.jsx)("source",{src:"",type:"audio/mpeg"}),(0,I.jsx)("source",{src:"",type:"audio/ogg"})]}),!(null!==A&&void 0!==A&&null!==(g=A.current)&&void 0!==g&&g.duration)&&(0,I.jsx)(k.A,{style:{position:"absolute",top:20,left:20,backgroundColor:m?h.palette.grey[800]:"white"},children:(0,I.jsx)(Q.A,{options:{loop:!0,autoplay:!0,animationData:J,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}},height:70,width:70})})]})},ne=r(70567),ie=(0,b.A)((function(e){return{bloqueReproduccion:{width:"calc(100% - 20px)",margin:"10px",display:"flex",alignItems:"center",position:"absolute",bottom:0,backgroundColor:"rgba(0, 0, 0, .5)",backdropFilter:"blur(5px) saturate(10%) brightness(40%)",transition:"all .3s !important",overflow:"visible",opacity:1,"&:hover .num_currentTime":{opacity:1},"&.hide":{opacity:0}},playPauseBtn:{width:"50px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer","& svg":{width:"50%",height:"50%","& path":{fill:"#fff"}}},progressContainer:{width:"calc(100% - 140px)",height:"5px",backgroundColor:"rgba(255,255,255,.1)",display:"flex",alignItems:"center",borderRadius:"5px",cursor:"pointer"},progress:{width:"0%",height:"100%",backgroundColor:"#fff",borderRadius:"5px",position:"relative",transition:"all .3s"},currentTime:{position:"absolute",top:"0px",right:"-56px",fontSize:"12px",transform:"translateY(-170%)",fontWeight:"bold",color:"#fff",opacity:0,transition:"all .3s",textShadow:"0 0 5px rgba(0,0,0,0.6)"},duration:{width:"150px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",color:"rgba(255,255,255,1)",fontSize:"12px",fontWeight:"bold"},hide:{visibility:"hidden"}}})),ae=function(e){var t,r,n,i,s,c,u,p,f=ie(),g=(0,o.useRef)(null),h=(0,o.useState)(!1),m=(0,a.A)(h,2),x=m[0],b=m[1],A=(0,o.useState)(0),E=(0,a.A)(A,2),L=E[0],M=E[1],R=(0,o.useState)(1),P=(0,a.A)(R,2),V=P[0],N=P[1],z=(0,o.useState)(!1),B=(0,a.A)(z,2),F=B[0],K=B[1],W=(0,o.useState)(null),q=(0,a.A)(W,2),O=q[0],U=q[1],$=(0,o.useState)(!1),H=(0,a.A)($,2),Y=H[0],X=H[1],re=(0,o.useState)(null),ae=(0,a.A)(re,2),oe=ae[0],se=ae[1],le=(0,o.useState)(!1),ce=(0,a.A)(le,2),ue=ce[0],de=ce[1],pe=null,fe=(0,v.d4)((function(e){return e.app.isDarkMode})),ge=(0,ne.A)(),he=(0,o.useState)("videoPlayer"),me=(0,a.A)(he,2),xe=me[0],ve=me[1],be=(0,o.useState)(!1),ye=(0,a.A)(be,2),ke=ye[0],Ae=ye[1],we=function(e){var t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=Math.floor(e%3600%60);return"".concat(t.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))},je=function(){b(!1)},_e=function(){w().fire({title:"Error",text:"No se pudo cargar el archivo",icon:"error",confirmButtonText:"Ok"})},Ce=function(){var e=g.current,t=g.current.duration;M(we(t)),e.videoHeight>e.videoWidth?K(!0):K(!1)},Se=function(){if(g.current){e.setPlayTime(g.current.currentTime);var t=g.current.currentTime/g.current.duration*100,r=document.querySelector(".".concat(f.progress)),n=document.querySelector(".".concat(f.currentTime));r.style.width="".concat(t,"%"),n.innerHTML=we(g.current.currentTime)}},Te=function(){clearTimeout(pe);var e=document.querySelector(".".concat(f.bloqueReproduccion));e.classList.remove("hide"),pe=setTimeout((function(){e.classList.add("hide")}),4e3)},Ee=function(){X(!0)},Le=function(){var e;null!==(e=g.current)&&void 0!==e&&e.paused?(g.current.play(),b(!0)):g.current&&(g.current.pause(),b(!1))},Me=function(e){"input"===e.target.tagName.toLowerCase()||"textarea"===e.target.tagName.toLowerCase()||e.target.classList.contains("medium-editor-element")||" "!==e.key&&32!==e.keyCode||(e.preventDefault(),Le())};(0,o.useEffect)((function(){return l.xU(e.id).then((function(e){var t=URL.createObjectURL(e);g.current.src=t,g.current.addEventListener("ended",je),g.current.addEventListener("error",_e),g.current.addEventListener("loadedmetadata",Ce),g.current.addEventListener("canplay",Ee),g.current.addEventListener("timeupdate",Se),g.current.addEventListener("mousemove",Te),g.current.addEventListener("click",Le),document.addEventListener("keydown",Me)})).catch((function(e){console.log(e),w().fire({title:"Error",text:"No se pudo cargar el archivo",icon:"error",confirmButtonText:"Ok"})})),function(){g.current&&(g.current.removeEventListener("ended",je),g.current.removeEventListener("error",_e),g.current.removeEventListener("loadedmetadata",Ce),g.current.removeEventListener("timeupdate",Se),g.current.removeEventListener("mousemove",Te),g.current.removeEventListener("click",Le),document.removeEventListener("keydown",Me))}}),[]);var Re=function(e){g.current&&(g.current.currentTime=e)},Pe=F?{width:"auto",height:550,maxHeight:"100%",marginBottom:-7,cursor:"move"}:{width:550,height:"auto",maxWidth:"100%",marginBottom:-7,cursor:"move"};return(0,I.jsxs)(S.M,{onDrop:function(e,t){},onDragStart:function(e,t){ve(e.id)},children:[(0,I.jsx)(C.V,{id:"videoPlayer",style:{display:"flex",flexWrap:"wrap",justifyContent:"center",position:"absolute",zIndex:1,backgroundColor:"#000",visibility:Y?"visible":"hidden"},initialPosition:{x:0,y:0},children:(0,I.jsxs)("div",{children:[(0,I.jsx)("video",{style:Pe,ref:g}),(0,I.jsxs)(y.A,{className:f.bloqueReproduccion,style:{backgroundColor:"rgba(255, 255, 255, .25)"},sx:{overflow:"visible"},onMouseMove:function(){clearTimeout(pe)},children:[(0,I.jsx)(d.A,{onClick:Le,className:f.playPauseBtn,children:x?(0,I.jsx)(_.A,{}):(0,I.jsx)(j.A,{})}),(0,I.jsx)(d.A,{className:f.progressContainer,onClick:function(e){var t=document.querySelector(".".concat(f.progressContainer)),r=e.nativeEvent.offsetX/t.offsetWidth*100;g.current.currentTime=g.current.duration*r/100},children:(0,I.jsx)(d.A,{className:f.progress,children:(0,I.jsx)(d.A,{className:"".concat(f.currentTime," num_currentTime")})})}),(0,I.jsx)(d.A,{className:f.duration,children:L})]})]})}),o.Children.map(e.children,(function(e){return o.isValidElement(e)?o.cloneElement(e,{setVideoTime:Re,totalTime:g.current.duration,setSpeakers:U,setCurrentLabel:se,updateTranscription:ue,setUpdateTranscription:de,activeEditTranscription:ke,setActiveEditTranscription:Ae}):e})),(0,I.jsx)(C.V,{id:"metadata",initialPosition:{x:0,y:0},style:{display:e.metadata?"block":"none",zIndex:"metadata"===xe?1:0},children:(0,I.jsx)(T.A,{resource:e.metadata,setMetadata:e.setMetadata,history:e.history})}),(0,I.jsx)(C.V,{id:"aiasistent_msgs",initialPosition:{x:0,y:0},style:{display:null!==g&&void 0!==g&&null!==(t=g.current)&&void 0!==t&&t.duration&&e.subView.split(",").includes("aiasistent_msgs")?"block":"none",zIndex:"aiasistent_msgs"===xe?1:0},children:(null===g||void 0===g||null===(r=g.current)||void 0===r?void 0:r.duration)&&e.subView.split(",").includes("aiasistent_msgs")&&(0,I.jsx)(te.A,{id:e.id,slug:e.slug,type:"transcription"})}),(0,I.jsx)(C.V,{id:"speakers",initialPosition:{x:0,y:0},style:{display:null!==g&&void 0!==g&&null!==(n=g.current)&&void 0!==n&&n.duration&&O?"block":"none",zIndex:"speakers"===xe?1:0},children:(null===g||void 0===g||null===(i=g.current)||void 0===i?void 0:i.duration)&&O&&e.subView.split(",").includes("speakers_av_transcribe")&&(0,I.jsx)(D,{speakers:O,totalTime:g.current.duration,setVideoTime:Re})}),(0,I.jsx)(C.V,{id:"user_record_tasks",initialPosition:{x:0,y:0},style:{display:null!==g&&void 0!==g&&null!==(s=g.current)&&void 0!==s&&s.duration&&e.subView.split(",").includes("user_record_tasks")?"block":"none",zIndex:"user_record_tasks"===xe?1:0},children:(0,I.jsx)(ee.A,{id:e.id,record:!0})}),(0,I.jsx)(C.V,{id:"player_settings",initialPosition:{x:0,y:0},style:{display:null!==g&&void 0!==g&&null!==(c=g.current)&&void 0!==c&&c.duration&&e.subView.split(",").includes("player_settings")?"block":"none",zIndex:"player_settings"===xe?1:0},onClick:function(){ve("player_settings")},children:(0,I.jsx)(Z,{speed:V,setSpeed:function(e){g.current&&(g.current.playbackRate=e,N(e))},handleForward:function(e){g.current&&(g.current.currentTime+=e)}})}),(0,I.jsx)(C.V,{id:"edit_av_transcribe",initialPosition:{x:0,y:0},style:{display:null!==g&&void 0!==g&&null!==(u=g.current)&&void 0!==u&&u.duration&&e.subView.split(",").includes("edit_av_transcribe")?"block":"none",zIndex:"edit_av_transcribe"===xe?1:0},children:(null===g||void 0===g||null===(p=g.current)||void 0===p?void 0:p.duration)&&e.subView.split(",").includes("edit_av_transcribe")&&(0,I.jsx)(G,{setSubView:e.setSubView,currentLabel:oe,id:e.id,slug:e.slug,setUpdateTranscription:de,speakers:O,activeEditTranscription:ke,setActiveEdit:function(){return Ae(!ke)}})}),!Y&&(0,I.jsx)(k.A,{style:{position:"absolute",top:20,left:20,backgroundColor:fe?ge.palette.grey[800]:"white"},children:(0,I.jsx)(Q.A,{options:{loop:!0,autoplay:!0,animationData:J,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}},height:70,width:70})})]})},oe=r(63573),se=r(92392),le=r(37445),ce=r.n(le),ue=(r(13003),r(68050)),de=r(64600),pe=r(11906),fe=r(58140),ge=function(e){var t=e.id,r=e.slug,n=(e.subView,e.onChange),i=e.readOnly,s=void 0!==i&&i,c=(0,o.useRef)(null),u=(0,o.useRef)(null),p=(0,R.A)(),f=(0,fe.M)().showAlert,g=(0,v.d4)((function(e){return e.app.isDarkMode})),h=(0,o.useState)(null),m=(0,a.A)(h,2),x=m[0],y=m[1],k=(0,o.useState)(""),A=(0,a.A)(k,2),w=A[0],j=A[1],_=(0,o.useState)(""),C=(0,a.A)(_,2),S=C[0],T=C[1],E=(0,o.useState)([]),L=(0,a.A)(E,2),M=L[0],P=L[1],V=(0,o.useState)(-1),N=(0,a.A)(V,2),z=N[0],D=N[1],B=(0,o.useState)(!1),F=(0,a.A)(B,2),K=F[0],W=F[1],O=(0,o.useRef)(null),U=((0,o.useRef)(null),(0,b.A)((function(e){return{segment:{transition:"all .35s",cursor:"pointer",color:g?p.palette.grey[400]:p.palette.grey[800],"&:hover":{background:p.palette.primary.light,color:p.palette.primary.main},"&.selected":{opacity:1,background:p.palette.primary.main,color:"white"}},speaker:{fontWeight:"bold",marginRight:"10px"},paragraph:{fontSize:"16px",maxWidth:"650px",margin:"0 auto",marginBottom:"20px"},selected:{background:p.palette.primary.main,color:"white",borderRadius:"3px"},bloque:{"&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:p.palette.primary.main,border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:p.palette.primary.main},"&::-webkit-scrollbar-thumb:active":{background:p.palette.primary.main},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}}}}))()),$=function(e){K||(P((function(t){var r=t.slice(0,z+1);return r.push(e),r.length>50&&r.shift(),r})),D((function(e){return(M.slice(0,e+1).length+1>50?50:M.slice(0,e+1).length+1)-1})))};return(0,o.useEffect)((function(){if(c.current){u.current=new(ce())(c.current,{toolbar:!s&&{buttons:["bold","italic","underline","h2","h3"]},placeholder:{text:""},disableEditing:s,spellcheck:!s,keyboardCommands:!1,paste:{forcePlainText:!0,cleanPastedHTML:!0,cleanAttrs:["style","dir"],cleanTags:["meta","span"]}});var e,i=function(e){return!e.ctrlKey&&!e.metaKey||"z"!==e.key||e.shiftKey?(e.ctrlKey||e.metaKey)&&"z"===e.key&&e.shiftKey||(e.ctrlKey||e.metaKey)&&"y"===e.key?(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),function(){if(z<M.length-1){W(!0);var e=z+1,t=M[e];u.current?u.current.setContent(t,0):c.current&&(c.current.innerHTML=t),D(e),n&&n(t),setTimeout((function(){return W(!1)}),100)}}(),!1):(e.ctrlKey||e.metaKey)&&"b"===e.key?(e.preventDefault(),document.execCommand("bold"),!1):(e.ctrlKey||e.metaKey)&&"i"===e.key?(e.preventDefault(),document.execCommand("italic"),!1):(e.ctrlKey||e.metaKey)&&"u"===e.key?(e.preventDefault(),document.execCommand("underline"),!1):void("Backspace"===e.key&&setTimeout((function(){c.current.querySelectorAll("span").forEach((function(e){if(e.style.length>0&&!e.getAttribute("class")){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}})),K||$(c.current.innerHTML)}),0)):(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),function(){if(z>0){W(!0);var e=z-1,t=M[e];u.current?u.current.setContent(t,0):c.current&&(c.current.innerHTML=t),D(e),n&&n(t),setTimeout((function(){return W(!1)}),100)}}(),!1)};if(O.current=i,c.current.addEventListener("keydown",i,!0),u.current){var a=u.current.on;u.current.on=function(e,t,r,n){if("keydown"!==t)return a.call(this,e,t,r,n)},"function"===typeof u.current.handleKeydown&&(u.current.handleKeydown=function(e){})}if((0,l.lk)(t,r).then((function(e){if(e){var t=e.text;if(console.log(t),t.includes("\\n")){var r=t.split(/\\n\\n|\\n\s*\\n|\\n/);t=r.map((function(e){return e.trim()})).filter((function(e){return e.length>0})).map((function(e){return"<p>".concat(e,"</p>")})).join("")}else{var n=t.split(/\n\n|\n\s*\n|\n/);t=n.map((function(e){return e.trim()})).filter((function(e){return e.length>0})).map((function(e){return"<p>".concat(e,"</p>")})).join("")}t=(t=(t=t.replace(/__(.*?)__/g,"<strong>$1</strong>")).replace(/(\s|^)_([^_]+)_(\s|$)/g,"$1<em>$2</em>$3")).replace(/`(.*?)`/g,"<code>$1</code>"),c.current.innerHTML=t,P([t]),D(0)}})),!s&&u.current)u.current.subscribe("editableInput",(function(){if(c.current&&!K){var t=c.current.innerHTML;clearTimeout(e),e=setTimeout((function(){$(t)}),500),n&&n(t)}}))}return function(){c.current&&O.current&&c.current.removeEventListener("keydown",O.current,!0),u.current&&u.current.destroy()}}),[t,n,s]),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(d.A,{style:{position:"absolute",top:0,width:"100%",height:"calc(100% - 35vh)",overflow:"auto",paddingTop:"35vh",background:"white"},className:U.bloque,children:(0,I.jsx)("div",{ref:c,className:"editable"})}),(0,I.jsxs)("div",{style:{position:"absolute",bottom:"10px",right:"10px",zIndex:1e3,display:"flex",flexFlow:"column",gap:"2px"},children:[(0,I.jsx)("div",{onClick:function(e){y(e.currentTarget)},children:(0,I.jsx)(q.A,{title:"Buscar / Reemplazar",onClick:function(){},children:"FindReplace"})}),(0,I.jsx)(q.A,{title:"Guardar",onClick:function(){return function(){if(u.current){var e=c.current.innerHTML.replace(/<p><br><\/p>/g,""),n={id:t,slug:r,text:e};f("loading","Saving..."),(0,l.ll)(n).then((function(e){f("success",e.msg)})).catch((function(e){f("error",e.msg)}))}}()},children:"Save,WaterDrop"})]}),(0,I.jsx)(ue.Ay,{open:Boolean(x),anchorEl:x,onClose:function(){return y(null)},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:(0,I.jsxs)(d.A,{sx:{p:2,display:"flex",flexDirection:"column",gap:2,backgroundColor:g?p.palette.grey[800]:p.palette.grey[200]},children:[(0,I.jsx)(de.A,{label:"Buscar",value:w,onChange:function(e){return j(e.target.value)},variant:"outlined",size:"small",sx:{borderColor:g?p.palette.grey[600]:p.palette.grey[400],backgroundColor:"white",color:p.palette.grey[800]}}),(0,I.jsx)(de.A,{label:"Reemplazar",value:S,onChange:function(e){return T(e.target.value)},variant:"outlined",size:"small",sx:{borderColor:g?p.palette.grey[600]:p.palette.grey[400],backgroundColor:"white",color:p.palette.grey[800]}}),(0,I.jsx)(pe.A,{variant:"contained",sx:{backgroundColor:p.palette.primary.main,color:"white","&:hover":{backgroundColor:p.palette.primary.dark}},onClick:function(){if(c.current){var e=c.current.innerHTML.split(w).join(S);c.current.innerHTML=e,$(e)}y(null)},children:"Reemplazar"})]})})]})},he=r(94495),me=r(36795),xe=r(31269),ve=r(92530),be=r(93012),ye=r(88455),ke=r(73216),Ae=r(33745),we=r(11238),je=r(18751),_e=r(53536),Ce=r.n(_e),Se=r(88120),Te=(0,$.A)((function(e){return{toolbar:{minHeight:"auto",padding:5,paddingLeft:"10px !important",color:"#fff",borderTopLeftRadius:10,borderTopRightRadius:10,overflow:"hidden",alignItems:"center",width:"calc(100% - 34px)","& h6":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",fontSize:16,margin:0}}}})),Ee=function(e){var t=(0,o.useState)("viz"),r=(0,a.A)(t,2),b=r[0],y=r[1],k=(0,o.useState)(""),A=(0,a.A)(k,2),w=A[0],j=A[1],_=(0,o.useState)(null),C=(0,a.A)(_,2),S=C[0],T=C[1],E=(0,o.useState)(0),L=(0,a.A)(E,2),M=L[0],V=L[1],N=(0,o.useState)(0),z=(0,a.A)(N,2),D=z[0],B=z[1],K=(0,o.useState)(null),W=(0,a.A)(K,2),O=W[0],U=W[1],$=(0,o.useState)(!1),H=(0,a.A)($,2),G=H[0],Q=H[1],J=(0,o.useState)([]),Y=(0,a.A)(J,2),X=Y[0],Z=Y[1],ee=(0,o.useState)({}),te=(0,a.A)(ee,2),ne=te[0],ie=te[1],le=(0,v.d4)((function(e){return e.user})),ce=(0,ke.g)().id,ue=(0,R.A)(),de=Te(),pe=(0,fe.M)().showAlert,_e=(0,v.wA)(),Ee=(0,ke.Zp)(),Le=(0,v.d4)((function(e){return e.app.isDarkMode})),Me=(0,P.A)(),Re=(0,Se.Fu)();(0,o.useEffect)((function(){Pe()}),[e.match]),(0,o.useEffect)((function(){le.favorites&&(le.favorites.find((function(e){return e.id===ce}))?Q(!0):Q(!1))}),[le.favorites,e.match]),(0,o.useEffect)((function(){if(S){for(var e=Object.keys(S.processing),t=e[0];"fileProcessing"===t&&e.length>1;)e.shift(),t=e[0];c.ko("detail_record").then((function(e){var t=S.processing.fileProcessing.type;e.actions.length>0&&Z(e.actions.filter((function(e){return e.record_type.includes(t)})))})).catch((function(e){console.error(e)}))}}),[S]);var Pe=function(){ce&&(y("viz"),T(null),l.Hc(ce).then((function(e){T(e)})).catch((function(e){pe("error","No se pudo obtener el archivo").then((function(){Ee("/")}))})))},Ve=function(e){B(e)},Ie=function(e,t){e||(e="");var r=e.split(",").map((function(e){return e.trim()})).filter(Boolean);return r.includes(t)?r=r.filter((function(e){return e!==t})):r.push(t),r.join(",")};return(0,I.jsx)(s.Ay,{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-start"},children:S&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(s.EL,{style:(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)({width:"calc(100% - 40px)",marginBottom:0,height:"calc(100% - 20px)",padding:0},"width","400px"),"maxWidth","400px"),"border","none"),"display","block"),"placeContent","flex-start"),"overflow","auto"),"minWidth","300px"),"flexGrow",.5),"margin",10),children:[(0,I.jsxs)(p.A,{style:{background:ue.palette.primary.light},className:de.toolbar,children:[le.access_token&&"null"!==le.access_token&&(0,I.jsx)(f.A,{sx:{marginLeft:"12px",color:ue.palette.primary.main},size:"large",onClick:function(){var e={type:"records",id:ce};G?g.C5(e).then((function(e){pe("success",Me.formatMessage({id:"removed_from_favorites"})),_e((0,ye.me)(le.access_token))})).catch((function(e){pe("error",Me.formatMessage({id:"could_not_remove_from_favorites"}))})):g.Gm(e).then((function(e){pe("success",Me.formatMessage({id:"added_to_favorites"})),_e((0,ye.me)(le.access_token))})).catch((function(e){pe("error",Me.formatMessage({id:"could_not_add_to_favorites"}))}))},children:G?(0,I.jsx)(be.A,{}):(0,I.jsx)(ve.A,{})}),(0,I.jsx)(u.A,{variant:"h6",style:{flexGrow:1,marginLeft:0,color:ue.palette.primary.main},children:S.displayName?S.displayName:S.name})]}),(0,I.jsxs)(d.A,{children:[Re.includes("files_download")&&(0,I.jsx)(we.nA,{startIcon:(0,I.jsx)(je.A,{}),style:{borderRadius:5,backgroundColor:Le?ue.palette.grey[800]:ue.palette.grey[200],color:ue.palette.grey[500],margin:10,marginBottom:0,width:"calc(100% - 20px)"},label:"Descargar archivo",onClick:function(){pe("askUserDownloadType","Escoge el tipo de descarga").then((function(e){"original"===e?(pe("loading","Descargando archivo..."),l.U3({id:S._id.$oid,type:"original"},(function(e){pe("loading","Descargando archivo... ".concat(Math.round(e),"%"))})).then((function(){pe("success","Archivo descargado correctamente")})).catch((function(e){console.error(e),pe("error","Error al descargar el archivo")}))):"small"===e&&(pe("loading","Descargando archivo..."),l.U3({id:S._id.$oid,type:"small"},(function(e){pe("loading","Descargando archivo... ".concat(Math.round(e),"%"))})).then((function(){pe("success","Archivo descargado correctamente")})).catch((function(e){console.error(e),pe("error","Error al descargar el archivo")})))}))}}),(0,I.jsx)(h.M2,{record:S,setMetadata:U}),(X.length>0||"audio"===S.processing.fileProcessing.type||"video"===S.processing.fileProcessing.type||Ce().intersection(le.roles,["editor","admin"]).length>0)&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Ae.Separator,{title:"Acciones"}),(0,I.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",padding:10},children:[Ce().intersection(le.roles,["editor","admin","team_lead","transcriber"]).length>0&&(0,I.jsx)(q.A,{children:"TaskAlt",title:"Tareas de catalogaci\xf3n",onClick:function(){var e=Ie(w,"user_record_tasks");j(e)},selected:w.split(",").includes("user_record_tasks")}),("audio"===S.processing.fileProcessing.type||"video"===S.processing.fileProcessing.type)&&(0,I.jsx)(q.A,{children:"PlayArrow,Settings",title:"Opciones de reproducci\xf3n",onClick:function(){var e=Ie(w,"player_settings");j(e)},selected:w.split(",").includes("player_settings")}),"av_transcribe"===(null===b||void 0===b?void 0:b.view)&&(0,I.jsx)(q.A,{children:"InterpreterMode",title:"Ver oradores",onClick:function(){var e=Ie(w,"speakers_av_transcribe");j(e)},selected:w.split(",").includes("speakers_av_transcribe")}),"av_transcribe"===(null===b||void 0===b?void 0:b.view)&&Ce().intersection(le.roles,["editor","admin","transcriber"]).length>0&&(0,I.jsx)(q.A,{children:"Edit,Transcribe",title:"Editar transcripci\xf3n",onClick:function(){var e=Ie(w,"edit_av_transcribe");j(e)},selected:w.split(",").includes("edit_av_transcribe")}),("av_transcribe"===(null===b||void 0===b?void 0:b.view)||"lt_extraction"===(null===b||void 0===b?void 0:b.view))&&Ce().intersection(le.roles,["editor","admin","llm"]).length>0&&Re.includes("llm")&&(0,I.jsx)(q.A,{children:"ChatBubble,SmartToy",title:"Preg\xfantale a la IA",onClick:function(){var e=Ie(w,"aiasistent_msgs");j(e)},selected:w.split(",").includes("aiasistent_msgs")}),X.map((function(e,t){return(0,I.jsx)(I.Fragment,{children:Ce().intersection(le.roles,e.roles).length>0&&(0,I.jsx)(q.A,{index:t,children:e.icon,title:e.label,onClick:function(){e.extraOpts.length>0&&pe("askUserAction",JSON.stringify(e.extraOpts)).then((function(t){if(t){var r=(0,n.A)((0,n.A)({},t),{},{records:[S._id.$oid],opts:(0,n.A)({},ne)});c.Gj(e.plugin,JSON.stringify(r),e.endpoint).then((function(e){pe("success",e.msg)})).catch((function(e){console.error(e)}))}}))}},t)})}))]})]}),Object.keys(S.processing).length>1&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Ae.Separator,{icon:(0,I.jsx)(m.A,{}),title:"Procesamientos"}),Object.keys(S.processing).map((function(e,t){var r=S.processing[e].type,n=he.vJ.find((function(e){return e.value===r})),i=r;if("audio"!==r&&"video"!==r&&n)return(0,I.jsx)(Ae.ItemMenu,{icon:(0,I.jsx)(x.A,{}),name:n.label,onClick:function(){y({view:i,slug:e}),j("")},className:(null===b||void 0===b?void 0:b.view)===i?"selected":""},t)}))]})]})]}),(0,I.jsxs)(s.EL,{style:{width:"calc(100% - 400px)",height:"calc(100% - 20px)",position:"relative",margin:10,marginLeft:0,padding:0,overflow:"hidden",backgroundColor:"image"===S.processing.fileProcessing.type||"document"===S.processing.fileProcessing.type||Le?ue.palette.grey[900]:"white"},children:["audio"===S.processing.fileProcessing.type&&(0,I.jsx)(me.Q,{backend:xe.t2,children:(0,I.jsxs)(re,{id:S._id.$oid,setPlayTime:V,time:D,metadata:O,setMetadata:U,history:e.history,subView:w,slug:b.slug,view:null===b||void 0===b?void 0:b.view,children:["av_transcribe"===(null===b||void 0===b?void 0:b.view)&&(0,I.jsx)(F,{id:S._id.$oid,slug:b.slug,subView:w,time:M,setTime:function(e){Ve(e)}}),"liquidText"===(null===b||void 0===b?void 0:b.view)&&(0,I.jsx)(ge,{id:S._id.$oid,slug:b.slug,subView:w})]})}),"video"===S.processing.fileProcessing.type&&(0,I.jsx)(me.Q,{backend:xe.t2,children:(0,I.jsxs)(ae,{id:S._id.$oid,setPlayTime:V,time:D,metadata:O,setMetadata:U,history:e.history,subView:w,slug:b.slug,children:["av_transcribe"===(null===b||void 0===b?void 0:b.view)&&(0,I.jsx)(F,{id:S._id.$oid,slug:b.slug,subView:w,time:M,setTime:function(e){Ve(e)}}),"liquidText"===(null===b||void 0===b?void 0:b.view)&&(0,I.jsx)(ge,{id:S._id.$oid,slug:b.slug,subView:w})]})}),"document"===S.processing.fileProcessing.type&&(0,I.jsx)(me.Q,{backend:xe.t2,children:(0,I.jsx)(oe.A,{id:S._id.$oid,subView:w,setSubView:j,view:b,metadata:O,setMetadata:U,history:e.history,setOpts:ie,slug:b.slug,opts:ne})}),"image"===S.processing.fileProcessing.type&&(0,I.jsx)(me.Q,{backend:xe.t2,children:(0,I.jsx)(se.A,{id:S._id.$oid,setMetadata:U,metadata:O})})]})]})})},Le=Ee}}]);
//# sourceMappingURL=1950.0db17485.chunk.js.map