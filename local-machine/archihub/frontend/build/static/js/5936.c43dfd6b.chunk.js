"use strict";(self.webpackChunkarchihub=self.webpackChunkarchihub||[]).push([[5936],{25936:function(e,t,n){n.r(t),n.d(t,{Main:function(){return Me},default:function(){return Pe}});var r=n(89379),i=n(64467),a=n(5544),o=n(65043),s=n(72378),c=n(9920),l=n(19853),d=n(85865),u=n(15316),p=n(55263),f=n(17392),h=n(5670),g=n(42588),m=n(5374),x=n(95501),v=n(83003),b=n(41905),y=n(12110),k=n(63336),A=n(30064),j=n.n(A),w=n(54469),S=n(29704),C=n(6512),_=n(4319),T=n(76370),E=n(80045),M=n(60436),P=n(96479),L=n(26240),R=n(99246),V=n(25012),z=n(70579),I=["node"],N=["node"],H=function(e){var t=(0,v.d4)((function(e){return e.app.isDarkMode})),n=(0,R.A)(),r=(0,L.A)(),a=(0,b.A)((function(e){return{bloque:{"&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:r.palette.primary.main,border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:r.palette.primary.main},"&::-webkit-scrollbar-thumb:active":{background:r.palette.primary.main},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}}}}))();return(0,z.jsx)(u.A,{style:{padding:"5px",background:"transparent",maxHeight:"200px",overflow:"auto"},className:a.bloque,children:e.speakers.map((function(r,a){return(0,z.jsxs)(u.A,{style:{padding:"10px",border:"#444",marginBottom:"5px",borderRadius:"5px",display:"flex",maxWidth:"450px",background:t?"#333":"white",alignItems:"center"},children:[(0,z.jsx)("div",{style:{width:"150px",textAlign:"center",fontWeight:"bold",color:r.color},children:r.name.replace("SPEAKER",n.formatMessage({id:"general.speaker"}))}),(0,z.jsx)("div",{style:{position:"relative",width:"350px",marginLeft:"10px",background:t?"#555":"#f2f2f2",borderRadius:"3px",height:"10px"},children:r.segments.map((function(t,n){return(0,z.jsx)("div",{style:{position:"absolute",top:"0",height:"100%",left:"".concat(t.start/e.totalTime*100,"%"),width:"".concat((t.end-t.start)/e.totalTime*100,"%"),background:r.color,cursor:"pointer"},onClick:function(n){e.setVideoTime(t.start)}})}))}),(0,z.jsx)("div",{style:(0,i.A)({marginLeft:"10px",background:"transparent",color:"white",padding:"5px",fontSize:"10px",borderRadius:"5px",border:"2px solid "+r.color,fontWeight:"bold"},"color",r.color),children:e.totalTime&&(0,z.jsxs)(z.Fragment,{children:[Math.round(r.total/e.totalTime*100),"%"]})})]},a)}))})},D=function(e){var t=e.segment,n=(e.index,e.isCurrentSegment,e.onSave),r=e.refProp,i=e.segmentClass,s=(0,o.useState)(!1),c=(0,a.A)(s,2),l=c[0],d=c[1],u=(0,o.useState)(t.text),p=(0,a.A)(u,2),f=p[0],h=p[1],g=(0,o.useRef)(null),m=(0,L.A)();(0,o.useEffect)((function(){l&&g.current&&g.current.focus()}),[l]);return(0,z.jsx)("span",{ref:r,className:i,children:l?(0,z.jsx)("span",{ref:g,contentEditable:!0,suppressContentEditableWarning:!0,onBlur:function(){f!==t.text&&n(t,f),d(!1)},onKeyDown:function(e){"Enter"===e.key&&!1===e.shiftKey&&(e.preventDefault(),g.current.blur())},onInput:function(e){return h(e.currentTarget.textContent)},style:{outline:"none",background:m.palette.primary.light,color:m.palette.primary.main},children:t.text}):(0,z.jsx)("span",{onClick:function(){d(!0)},style:{cursor:"text"},children:t.text})})},F=function(e){var t=(0,L.A)(),n=(0,v.d4)((function(e){return e.app.isDarkMode})),i=(0,b.A)((function(e){return{segment:{transition:"all .35s",cursor:"pointer",color:n?t.palette.grey[400]:t.palette.grey[800],"&:hover":{background:t.palette.primary.light,color:t.palette.primary.main},"&.selected":{opacity:1,background:t.palette.primary.main,color:"white"}},speaker:{fontWeight:"bold",marginRight:"10px"},paragraph:{fontSize:"16px",maxWidth:"650px",margin:"0 auto",marginBottom:"20px"},selected:{background:t.palette.primary.main,color:"white",borderRadius:"3px"},bloque:{"&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:t.palette.primary.main,border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:t.palette.primary.main},"&::-webkit-scrollbar-thumb:active":{background:t.palette.primary.main},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}}}}))(),s=(0,o.useState)(null),l=(0,a.A)(s,2),d=l[0],p=l[1],f=(0,o.useState)(1),h=(0,a.A)(f,2),g=h[0],m=(h[1],(0,o.useState)(null)),x=(0,a.A)(m,2),y=x[0],k=x[1],A=(0,o.useState)([]),j=(0,a.A)(A,2),w=j[0],S=j[1],C=(0,R.A)(),_=function(){c.RS(e.id,e.slug).then((function(t){var n=P.Ks0,r=!1;if(t.speakers&&(r=!0),r){var i=P.UMr(t.speakers.map((function(e){return e.name})),n);t.segments.forEach((function(e){e.color=i(e.speaker)})),p(t.segments),S(t.segments.map((function(){return o.createRef()}))),t.speakers.forEach((function(e){e.color=i(e.name)})),e.setSpeakers(t.speakers)}else p(t.segments),S(t.segments.map((function(){return o.createRef()})))}))},T=function(t,n){if(t.text!==n){var i=(0,M.A)(d),a=i.findIndex((function(e){return e===t}));-1!==a&&(i[a].text=n,p(i),c.v(e.id,(0,r.A)((0,r.A)({},t),{},{text:n,slug:e.slug})))}};(0,o.useEffect)((function(){_()}),[]),(0,o.useEffect)((function(){e.updateTranscription&&(_(),e.setUpdateTranscription(!1))}),[e.updateTranscription]),(0,o.useEffect)((function(){if(d){d.forEach((function(t,n){if(t.index=n,t.start<=e.time&&t.end>=e.time&&y!==n){k(n),e.setCurrentLabel(t);var r=w[n].current;r&&r.scrollIntoView({behavior:"smooth",block:"center"})}}))}}),[e.time]);return(0,z.jsx)(z.Fragment,{children:(0,z.jsx)(u.A,{style:{position:"absolute",top:0,width:"100%",height:"100%",overflow:"auto"},className:i.bloque,children:1===g&&d&&(0,z.jsx)("div",{style:{float:"right",paddingTop:"50vh",paddingBottom:"50vh"},children:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=null,a=[],s=[];return d.forEach((function(o,c){var l;l={container:l=t?(0,z.jsx)(D,{segment:o,index:c,isCurrentSegment:c===y,onSave:T,refProp:w[c],segmentClass:"".concat(i.segment," segment_transcription seg_").concat(c," ").concat(c===y?"selected":"")},c):(0,z.jsx)("span",{ref:w[c],onClick:function(t){return e.setVideoTime(o.start)},className:"".concat(i.segment," segment_transcription seg_").concat(c," ").concat(c===y?"selected":""),children:(0,z.jsx)(V.$,{components:{p:function(e){e.node;var t=(0,E.A)(e,I);return(0,z.jsx)("span",(0,r.A)({},t))},a:function(e){e.node;var t=(0,E.A)(e,N);return(0,z.jsx)("a",(0,r.A)((0,r.A)({},t),{},{target:"_blank",rel:"noopener noreferrer",onClick:function(e){return e.stopPropagation()}}))}},children:o.text})},c),speaker:o.speaker,color:o.color},o.speaker!==n&&(n=o.speaker,a.length>0&&s.push(a),a=[]),a.push(l)})),a.length>0&&s.push(a),(0,z.jsx)(z.Fragment,{children:s.filter((function(e){return e.length>0})).map((function(e,t){return(0,z.jsx)("p",{className:i.paragraph,children:e.map((function(e,t){var n;return t>0?e.container:e.speaker?(0,z.jsxs)(o.Fragment,{children:[(0,z.jsx)("span",{style:{color:e.color},className:i.speaker,children:null===(n=e.speaker)||void 0===n?void 0:n.replace("SPEAKER",C.formatMessage({id:"general.speaker"}))}),e.container]},"speaker-".concat(t)):e.container}))},t)}))})}(e.activeEditTranscription)})})})},B=n(43845),W=n(10765),O=n(93440),U=n(74054),q=n(6456),$=n(81551),G=(0,$.A)((function(e){return{close:{width:24,height:24,"& .MuiChip-label":{display:"none"},"& svg":{margin:"0 !important"}}}})),J=function(e){var t=G(),n=(0,o.useState)(""),i=(0,a.A)(n,2),s=i[0],l=i[1],d=(0,o.useState)(""),p=(0,a.A)(d,2),f=p[0],h=p[1],g=(0,o.useState)(""),m=(0,a.A)(g,2),x=m[0],b=m[1],y=(0,o.useState)(""),k=(0,a.A)(y,2),A=k[0],j=k[1],w=(0,o.useState)(!1),S=(0,a.A)(w,2),C=(S[0],S[1]),_=(0,v.d4)((function(e){return e.app.isDarkMode})),T=(0,o.useState)("text"),E=(0,a.A)(T,2),M=E[0],P=E[1],V=(0,R.A)(),I=(0,L.A)();(0,o.useEffect)((function(){e.currentLabel&&(l(e.currentLabel.text),j(e.currentLabel.speaker))}),[e.currentLabel]);return(0,z.jsxs)(u.A,{style:{padding:"5px",background:"transparent",backdropFilter:"blur(10px)"},children:[(0,z.jsxs)(u.A,{style:{display:"flex",justifyContent:"center",border:"#444",background:_?"#333":"white",borderRadius:"5px",marginBottom:"5px"},children:[(0,z.jsx)(O.A,{title:V.formatMessage({id:"general.editTranscription"}),labelPos:"top",onClick:function(){P("text")},children:"TextFields",selected:"text"===M,disabled:e.activeEditTranscription}),(0,z.jsx)(O.A,{title:V.formatMessage({id:"general.editSpeakers"}),labelPos:"top",onClick:function(){P("speaker")},children:"InterpreterMode",selected:"speaker"===M}),(0,z.jsx)(O.A,{title:V.formatMessage({id:"general.directTextEdit"}),labelPos:"top",onClick:function(){e.setActiveEdit(),P("activeTextEdit")},children:"FormatColorText,EditNote",selected:e.activeEditTranscription})]}),!e.currentLabel&&(0,z.jsx)(u.A,{style:{border:"#444",background:_?"#333":"white",borderRadius:"5px",padding:"15px",color:_?I.palette.grey[400]:I.palette.grey[800]},children:V.formatMessage({id:"general.noSegmentSelected"})}),e.currentLabel&&"text"===M&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(u.A,{style:{border:"#444",background:_?"#333":"white",borderRadius:"5px"},children:[(0,z.jsx)(W.QA,{value:s,handleChange:function(e){return l(e.target.value)},handleBlur:function(){},style:{padding:"5px",width:"450px"}}),A&&(0,z.jsx)(W.BR,{value:A,handleChange:function(e){return j(e.target.value)},style:{padding:"5px",width:"450px"}})]}),(0,z.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",width:"100px",margin:"0 auto",marginTop:"10px",background:_?"#333":"white",borderRadius:"50px"},children:[(0,z.jsx)(B.A,{label:"Guardar",size:"small",onClick:function(){!function(){var t=(0,r.A)({},e.currentLabel);t.text=s,t.speaker=A,t.slug=e.slug,C(!0),c.v(e.id,t).then((function(t){e.setUpdateTranscription(!0),C(!1)})).catch((function(e){console.log(e)}))}()},icon:(0,z.jsx)(U.A,{}),style:{margin:10,border:"none"},variant:"outlined",className:t.close}),(0,z.jsx)(B.A,{label:"Eliminar",size:"small",onClick:function(){!function(){var t={slug:e.slug,index:e.currentLabel.index};c.bn(e.id,t).then((function(t){e.setUpdateTranscription(!0)})).catch((function(e){console.log(e)}))}()},icon:(0,z.jsx)(q.A,{}),style:{margin:10,border:"none"},variant:"outlined",className:t.close})]})]}),"speaker"===M&&(0,z.jsx)(u.A,{style:{border:"#444",background:_?"#333":"white",borderRadius:"5px"},children:(0,z.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,z.jsx)(W.Q5,{value:x,handleChange:function(e){h(e.target.value),b(e.target.value)},options:e.speakers.map((function(e){return{value:e.name,label:e.name}})),rootStyle:{padding:"5px",width:"50%",margin:"0"}}),(0,z.jsx)(W.BR,{value:f,handleChange:function(e){return h(e.target.value)},style:{padding:"5px",width:"50%"}}),(0,z.jsx)(B.A,{label:"Guardar",size:"small",onClick:function(){!function(){var t={oldSpeaker:x,speaker:f,slug:e.slug};C(!0),c.Z$(e.id,t).then((function(t){e.setUpdateTranscription(!0),C(!1)})).catch((function(e){console.log(e)}))}()},icon:(0,z.jsx)(U.A,{}),style:{margin:10,border:"none"},variant:"outlined",className:t.close})]})})]})},Q=n(65226),K=n(72003),Y=n(89044),Z=n(10673),X=function(e){var t=(0,v.d4)((function(e){return e.app.isDarkMode})),n=(0,R.A)(),r=(0,L.A)();return(0,z.jsx)(u.A,{style:{padding:"5px",background:"transparent",maxHeight:"200px",overflow:"auto"},children:(0,z.jsxs)(u.A,{style:{display:"flex",justifyContent:"center",alignItems:"center",border:"#444",background:t?"#333":"white",borderRadius:"5px",marginBottom:"5px",paddingRight:"5px",paddingLeft:"5px"},children:[(0,z.jsx)(O.A,{title:n.formatMessage({id:"general.rewind30"}),labelPos:"top",onClick:function(){e.handleForward(-30)},children:"Replay30"}),(0,z.jsx)(O.A,{title:n.formatMessage({id:"general.rewind10"}),labelPos:"top",onClick:function(){e.handleForward(-10)},children:"Replay10"}),(0,z.jsx)(O.A,{title:n.formatMessage({id:"general.rewind5"}),labelPos:"top",onClick:function(){e.handleForward(-5)},children:"Replay5",style:{marginRight:"5px"}}),(0,z.jsxs)(Y.A,{value:e.speed,onChange:function(t){e.setSpeed(t.target.value)},style:{margin:"5px",width:"100px",background:t?"#333":"white",color:t?r.palette.grey[400]:r.palette.grey[800]},children:[(0,z.jsx)(Z.A,{value:.25,children:"0.25x"}),(0,z.jsx)(Z.A,{value:.5,children:"0.5x"}),(0,z.jsx)(Z.A,{value:1,children:"1x"}),(0,z.jsx)(Z.A,{value:1.5,children:"1.5x"}),(0,z.jsx)(Z.A,{value:2,children:"2x"})]}),(0,z.jsx)(O.A,{title:n.formatMessage({id:"general.forward5"}),labelPos:"top",onClick:function(){e.handleForward(5)},children:"Forward5",style:{marginLeft:"5px"}}),(0,z.jsx)(O.A,{title:n.formatMessage({id:"general.forward10"}),labelPos:"top",onClick:function(){e.handleForward(10)},children:"Forward10"}),(0,z.jsx)(O.A,{title:n.formatMessage({id:"general.forward30"}),labelPos:"top",onClick:function(){e.handleForward(30)},children:"Forward30"})]})})},ee=n(82094),te=n(77739),ne=n(43360),re=n(97223),ie=n(61958),ae=n(75678),oe=n(27385),se=n(43288),ce=n(58140),le=function(e){var t=(0,o.useState)(null),n=(0,a.A)(t,2),r=n[0],i=n[1],s=(0,o.useState)([]),c=(0,a.A)(s,2),l=c[0],d=c[1],h=(0,o.useState)([]),g=(0,a.A)(h,2),m=g[0],x=g[1],b=(0,o.useState)(null),k=(0,a.A)(b,2),A=k[0],j=k[1],w=(0,o.useState)(null),S=(0,a.A)(w,2),C=S[0],_=S[1],T=(0,o.useState)([]),E=(0,a.A)(T,2),P=E[0],I=E[1],N=(0,o.useState)(null),H=(0,a.A)(N,2),D=H[0],F=H[1],B=(0,o.useState)(!1),W=(0,a.A)(B,2),O=W[0],U=W[1],q=(0,o.useState)(!1),G=(0,a.A)(q,2),J=G[0],Q=G[1],K=(0,o.useState)(!1),X=(0,a.A)(K,2),ee=X[0],le=X[1],de=(0,o.useState)([]),ue=(0,a.A)(de,2),pe=ue[0],fe=ue[1],he=(0,R.A)(),ge=(0,v.d4)((function(e){return e.app.isDarkMode})),me=(0,L.A)(),xe=(0,o.useRef)(null),ve=(0,o.useRef)(null),be=(0,ce.M)().showAlert,ye=(0,$.A)((function(e){return{bloque:{"&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:me.palette.primary.main,border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:me.palette.primary.main},"&::-webkit-scrollbar-thumb:active":{background:me.palette.primary.main},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}}}}));(0,o.useEffect)((function(){re.UK().then((function(e){d(e.map((function(e){return{name:e.name,id:e._id.$oid}}))),i({name:e[0].name,id:e[0]._id.$oid})})).catch((function(e){console.log(e)}))}),[]),(0,o.useEffect)((function(){r&&re.SM(r.id).then((function(e){x(e.map((function(e){return{name:e.name,id:e.id}}))),j({name:e[0].name,id:e[0].id})})).catch((function(e){console.log(e)}))}),[r]),(0,o.useEffect)((function(){ve.current&&ve.current.scrollIntoView({behavior:"smooth",block:"start"}),O&&re.Jb({message:P[P.length-1].message,provider:r,model:A,type:"transcription",id:e.id,conversation_id:C,slug:e.slug}).then((function(e){var t=e.response;_(e.conversation_id),I([].concat((0,M.A)(P),[{message:t,sender:"assistant"}])),U(!1)})).catch((function(e){U(!1),e.json().then((function(e){be("error",e.msg)}))}))}),[P]),(0,o.useEffect)((function(){ee&&(Q(!0),re.kP({id:e.id,type:"record"}).then((function(e){console.log(e),fe(e),Q(!1)})).catch((function(e){Q(!1),console.log(e)})))}),[ee]);var ke=function(){D&&!O&&A&&r&&(I([].concat((0,M.A)(P),[{message:D,sender:"user"}])),F(""),U(!0))};return(0,z.jsxs)(u.A,{sx:{backgroundColor:ge?me.palette.grey[800]:"#fff",borderRadius:"5px"},children:[(0,z.jsxs)(p.A,{children:[0===P.length&&r&&!ee&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(f.A,{onClick:function(){le(!ee)},style:{marginRight:10,color:ge?"#fff":me.palette.primary.main,backgroundColor:ge?me.palette.grey[700]:"#fff"},children:(0,z.jsx)(ie.A,{})}),(0,z.jsx)(Y.A,{value:r?r.id:"",sx:{width:200,backgroundColor:ge?me.palette.grey[700]:"#fff",color:ge?"#fff":me.palette.primary.main},children:l.map((function(e,t){return(0,z.jsx)(Z.A,{value:e.id,onClick:function(){i(e)},children:e.name},t)}))}),(0,z.jsx)(Y.A,{value:A?A.id:"",sx:{width:200,backgroundColor:ge?me.palette.grey[700]:"#fff",color:ge?"#fff":me.palette.primary.main},children:m.map((function(e,t){return(0,z.jsx)(Z.A,{value:e.id,onClick:function(){j(e)},children:e.name},t)}))})]}),(P.length>0||ee)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(te.A,{title:he.formatMessage({id:"general.history"}),children:(0,z.jsx)(f.A,{onClick:function(){le(!ee)},style:{marginRight:10,color:ge?"#fff":me.palette.primary.main,backgroundColor:ge?me.palette.grey[700]:"#fff"},children:(0,z.jsx)(ie.A,{})})}),(0,z.jsx)(te.A,{title:he.formatMessage({id:"general.newConversation"}),children:(0,z.jsx)(f.A,{onClick:function(){I([]),_(null),le(!1),F(""),U(!1),Q(!1),fe([])},style:{marginRight:10,color:ge?"#fff":me.palette.primary.main,backgroundColor:ge?me.palette.grey[700]:"#fff"},children:(0,z.jsx)(oe.A,{})})}),(0,z.jsx)(Y.A,{value:r?r.id:"",sx:{width:200,backgroundColor:ge?me.palette.grey[700]:"#fff",color:ge?"#fff":me.palette.primary.main},children:l.map((function(e,t){return(0,z.jsx)(Z.A,{value:e.id,onClick:function(){i(e)},children:e.name},t)}))}),(0,z.jsx)(Y.A,{value:A?A.id:"",sx:{width:200,backgroundColor:ge?me.palette.grey[700]:"#fff",color:ge?"#fff":me.palette.primary.main},children:m.map((function(e,t){return(0,z.jsx)(Z.A,{value:e.id,onClick:function(){j(e)},children:e.name},t)}))})]})]}),(0,z.jsxs)(u.A,{ref:xe,className:ye().bloque,sx:{height:200,width:500,backgroundColor:ge?me.palette.grey[700]:"#fff",overflowY:"auto",padding:2,display:"flex",flexDirection:"column",gap:1},children:[ee&&pe.length>0&&!J&&(0,z.jsx)(z.Fragment,{children:pe.map((function(e,t){return(0,z.jsx)(y.A,{onClick:function(){var t;t=e._id.$oid,Q(!0),re.QL(t).then((function(e){I(e.messages.map((function(e){return{message:e.content,sender:e.role}}))),_(e._id.$oid),le(!1),F(""),Q(!1)})).catch((function(e){Q(!1),U(!1),e.json().then((function(e){console.log(e.msg)}))}))},sx:{padding:2,backgroundColor:ge?me.palette.grey[600]:"#fff",color:ge?"#fff":"#000",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)",wordWrap:"break-word",cursor:"pointer","&:hover":{backgroundColor:ge?me.palette.grey[500]:"#f0f0f0"}},children:e.messages[0].content},t)}))}),P.length>0&&!ee&&P.map((function(e,t){return(0,z.jsx)(u.A,{ref:t===P.length-1?ve:null,sx:{alignSelf:"user"===e.sender?"flex-end":"flex-start",maxWidth:"90%",padding:1.5,borderRadius:2,backgroundColor:"user"===e.sender?me.palette.primary.main:ge?me.palette.grey[600]:me.palette.grey[100],color:"user"===e.sender||ge?"#fff":"#000",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)",wordWrap:"break-word"},children:(0,z.jsx)(V.$,{children:e.message})},t)})),O&&(0,z.jsx)(u.A,{sx:{alignSelf:"flex-start",maxWidth:"90%",padding:1.5,borderRadius:2,color:ge?"#fff":"#000",wordWrap:"break-word"},children:(0,z.jsx)(se.A,{width:60,height:60})}),J&&(0,z.jsx)(se.A,{width:60,height:60})]}),!ee&&(0,z.jsx)(p.A,{children:(0,z.jsxs)("form",{onSubmit:function(e){e.preventDefault(),ke()},style:{display:"flex",flexDirection:"row",alignItems:"center",width:"100%"},children:[(0,z.jsx)(ne.A,{placeholder:he.formatMessage({id:"general.typeMessage"}),value:D||"",style:{flex:1,backgroundColor:ge?me.palette.grey[700]:"#fff",color:ge?"#fff":me.palette.primary.main,padding:10},onChange:function(e){F(e.target.value)}}),(0,z.jsx)(f.A,{onClick:function(){ke()},style:{marginLeft:10,color:ge?"#fff":me.palette.primary.main},children:(0,z.jsx)(ae.A,{})})]})})]})},de=function(e){var t,n,r,i,s,l,d,p,f,h,g=(0,L.A)(),m=(0,v.d4)((function(e){return e.app.isDarkMode})),x=(0,b.A)((function(e){return{bloqueReproduccion:{width:"calc(100% - 40px)",margin:"20px",display:"flex",alignItems:"center",position:"absolute",zIndex:1,"&:hover .num_currentTime":{opacity:1}},playPauseBtn:{width:"70px",height:"70px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer","& svg":{width:"50%",height:"50%","& path":{fill:m?g.palette.primary.light:g.palette.primary.main}}},progressContainer:{width:"calc(100% - 140px)",height:"5px",backgroundColor:m?g.palette.grey[900]:g.palette.grey[100],display:"flex",alignItems:"center",borderRadius:"5px",cursor:"pointer"},progress:{width:"0%",height:"100%",backgroundColor:m?g.palette.primary.light:g.palette.primary.main,borderRadius:"5px",position:"relative",transition:"all .3s"},currentTime:{position:"absolute",top:"-20px",right:"-56px",fontSize:"12px",fontWeight:"bold",color:m?g.palette.primary.light:g.palette.primary.main,opacity:0,transition:"all .3s"},duration:{width:"100px",height:"70px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",color:m?g.palette.primary.light:g.palette.grey[700],fontSize:"12px",fontWeight:"bold"}}}))(),A=(0,o.useRef)(null),E=(0,o.useRef)(null),M=(0,o.useRef)(null),P=(0,o.useState)(!1),R=(0,a.A)(P,2),V=R[0],I=R[1],N=(0,o.useState)(0),D=(0,a.A)(N,2),F=D[0],B=D[1],W=(0,o.useState)(null),O=(0,a.A)(W,2),U=O[0],q=O[1],$=(0,o.useState)(null),G=(0,a.A)($,2),Y=G[0],Z=G[1],te=(0,o.useState)(!1),ne=(0,a.A)(te,2),re=ne[0],ie=ne[1],ae=(0,o.useState)(1),oe=(0,a.A)(ae,2),se=oe[0],ce=oe[1],de=(0,o.useState)("audioPlayer"),ue=(0,a.A)(de,2),pe=ue[0],fe=ue[1],he=(0,o.useState)(!1),ge=(0,a.A)(he,2),me=ge[0],xe=ge[1],ve=function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"))},be=function(){I(!1)},ye=function(){j().fire({title:"Error",text:"No se pudo cargar el archivo",icon:"error",confirmButtonText:"Ok"})},ke=function(){var e=A.current.duration;B(ve(e))},Ae=function(){if(A.current){e.setPlayTime(A.current.currentTime);var t=A.current.currentTime/A.current.duration*100;E.current&&M.current&&(E.current.style.width="".concat(t,"%"),M.current.innerHTML=ve(A.current.currentTime))}};(0,o.useEffect)((function(){return c.xU(e.id).then((function(e){console.log(e);var t=URL.createObjectURL(e);A.current.src=t,A.current.addEventListener("ended",be),A.current.addEventListener("error",ye),A.current.addEventListener("loadedmetadata",ke),A.current.addEventListener("timeupdate",Ae)})).catch((function(e){j().fire({title:"Error",text:"No se pudo cargar el archivo: "+e.message,icon:"error",confirmButtonText:"Ok"})})),function(){A.current&&(A.current.removeEventListener("ended",be),A.current.removeEventListener("error",ye),A.current.removeEventListener("loadedmetadata",ke),A.current.removeEventListener("timeupdate",Ae))}}),[]),(0,o.useEffect)((function(){e.time&&(A.current.currentTime=e.time)}),[e.time]);var je=function(e){A.current.currentTime=e};return(0,z.jsxs)(_.M,{onDrop:function(e,t){return console.log(e,t)},onDragStart:function(e,t){fe(e.id)},children:[(0,z.jsxs)(y.A,{className:x.bloqueReproduccion,style:{display:null!==A&&void 0!==A&&null!==(t=A.current)&&void 0!==t&&t.duration?"flex":"none",backgroundColor:m?g.palette.grey[800]:"white",zIndex:1},children:[(0,z.jsx)(u.A,{onClick:function(){A.current.paused?(A.current.play(),I(!0)):(A.current.pause(),I(!1))},className:x.playPauseBtn,children:V?(0,z.jsx)(S.A,{}):(0,z.jsx)(w.A,{})}),(0,z.jsx)(u.A,{className:x.progressContainer,onClick:function(e){var t=document.querySelector(".".concat(x.progressContainer)),n=e.nativeEvent.offsetX/t.offsetWidth*100;A.current.currentTime=A.current.duration*n/100},children:(0,z.jsx)(u.A,{className:x.progress,ref:E,children:(0,z.jsx)(u.A,{ref:M,className:"".concat(x.currentTime," num_currentTime")})})}),(0,z.jsx)(u.A,{className:x.duration,children:F})]}),o.Children.map(e.children,(function(e){return o.isValidElement(e)?o.cloneElement(e,{setVideoTime:je,textAlign:"center",totalTime:A.current.duration,setSpeakers:q,setCurrentLabel:Z,updateTranscription:re,setUpdateTranscription:ie,activeEditTranscription:me,setActiveEditTranscription:xe}):e})),(0,z.jsx)(C.V,{id:"metadata",initialPosition:{x:0,y:0},style:{display:e.metadata?"block":"none",zIndex:"metadata"===pe?1:0},children:(0,z.jsx)(T.A,{resource:e.metadata,setMetadata:e.setMetadata,history:e.history})}),(0,z.jsx)(C.V,{id:"aiasistent_msgs",initialPosition:{x:0,y:0},style:{display:null!==A&&void 0!==A&&null!==(n=A.current)&&void 0!==n&&n.duration&&e.subView.split(",").includes("aiasistent_msgs")?"block":"none",zIndex:"aiasistent_msgs"===pe?1:0},children:(null===A||void 0===A||null===(r=A.current)||void 0===r?void 0:r.duration)&&e.subView.split(",").includes("aiasistent_msgs")&&(0,z.jsx)(le,{id:e.id,slug:e.slug,type:"transcription"})}),(0,z.jsx)(C.V,{id:"speakers",initialPosition:{x:0,y:0},style:{display:null!==A&&void 0!==A&&null!==(i=A.current)&&void 0!==i&&i.duration&&U?"block":"none",zIndex:"speakers"===pe?1:0},children:(null===A||void 0===A||null===(s=A.current)||void 0===s?void 0:s.duration)&&U&&e.subView.split(",").includes("speakers_av_transcribe")&&(0,z.jsx)(H,{speakers:U,totalTime:A.current.duration,setVideoTime:je})}),(0,z.jsx)(C.V,{id:"player_settings",initialPosition:{x:0,y:0},style:{display:null!==A&&void 0!==A&&null!==(l=A.current)&&void 0!==l&&l.duration&&e.subView.split(",").includes("player_settings")?"block":"none",zIndex:"player_settings"===pe?1:0},children:(0,z.jsx)(X,{speed:se,setSpeed:function(e){A.current&&(A.current.playbackRate=e,ce(e))},handleForward:function(e){A.current&&(A.current.currentTime+=e)}})}),(0,z.jsx)(C.V,{id:"user_record_tasks",initialPosition:{x:0,y:0},style:{display:null!==A&&void 0!==A&&null!==(d=A.current)&&void 0!==d&&d.duration&&e.subView.split(",").includes("user_record_tasks")?"block":"none",zIndex:"user_record_tasks"===pe?1:0},children:(0,z.jsx)(ee.A,{id:e.id,record:!0})}),(0,z.jsx)(C.V,{id:"edit_av_transcribe",initialPosition:{x:0,y:0},style:{display:null!==A&&void 0!==A&&null!==(p=A.current)&&void 0!==p&&p.duration&&e.subView.split(",").includes("edit_av_transcribe")?"block":"none",zIndex:"edit_av_transcribe"===pe?1:0},children:(null===A||void 0===A||null===(f=A.current)||void 0===f?void 0:f.duration)&&e.subView.split(",").includes("edit_av_transcribe")&&(0,z.jsx)(J,{setSubView:e.setSubView,currentLabel:Y,id:e.id,slug:e.slug,setUpdateTranscription:ie,speakers:U,activeEditTranscription:me,setActiveEdit:function(){return xe(!me)}})}),(0,z.jsxs)("audio",{ref:A,children:[(0,z.jsx)("source",{src:"",type:"audio/mpeg"}),(0,z.jsx)("source",{src:"",type:"audio/ogg"})]}),!(null!==A&&void 0!==A&&null!==(h=A.current)&&void 0!==h&&h.duration)&&(0,z.jsx)(k.A,{style:{position:"absolute",top:20,left:20,backgroundColor:m?g.palette.grey[800]:"white"},children:(0,z.jsx)(Q.A,{options:{loop:!0,autoplay:!0,animationData:K,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}},height:70,width:70})})]})},ue=n(70567),pe=(0,b.A)((function(e){return{bloqueReproduccion:{width:"calc(100% - 20px)",margin:"10px",display:"flex",alignItems:"center",position:"absolute",bottom:0,backgroundColor:"rgba(0, 0, 0, .5)",backdropFilter:"blur(5px) saturate(10%) brightness(40%)",transition:"all .3s !important",overflow:"visible",opacity:1,"&:hover .num_currentTime":{opacity:1},"&.hide":{opacity:0}},playPauseBtn:{width:"50px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer","& svg":{width:"50%",height:"50%","& path":{fill:"#fff"}}},progressContainer:{width:"calc(100% - 140px)",height:"5px",backgroundColor:"rgba(255,255,255,.1)",display:"flex",alignItems:"center",borderRadius:"5px",cursor:"pointer"},progress:{width:"0%",height:"100%",backgroundColor:"#fff",borderRadius:"5px",position:"relative",transition:"all .3s"},currentTime:{position:"absolute",top:"0px",right:"-56px",fontSize:"12px",transform:"translateY(-170%)",fontWeight:"bold",color:"#fff",opacity:0,transition:"all .3s",textShadow:"0 0 5px rgba(0,0,0,0.6)"},duration:{width:"150px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",color:"rgba(255,255,255,1)",fontSize:"12px",fontWeight:"bold"},hide:{visibility:"hidden"}}})),fe=function(e){var t,n,r,i,s,l,d,p,f=pe(),h=(0,o.useRef)(null),g=(0,o.useState)(!1),m=(0,a.A)(g,2),x=m[0],b=m[1],A=(0,o.useState)(0),E=(0,a.A)(A,2),M=E[0],P=E[1],L=(0,o.useState)(1),R=(0,a.A)(L,2),V=R[0],I=R[1],N=(0,o.useState)(!1),D=(0,a.A)(N,2),F=D[0],B=D[1],W=(0,o.useState)(null),O=(0,a.A)(W,2),U=O[0],q=O[1],$=(0,o.useState)(!1),G=(0,a.A)($,2),Y=G[0],Z=G[1],te=(0,o.useState)(null),ne=(0,a.A)(te,2),re=ne[0],ie=ne[1],ae=(0,o.useState)(!1),oe=(0,a.A)(ae,2),se=oe[0],ce=oe[1],de=null,fe=(0,v.d4)((function(e){return e.app.isDarkMode})),he=(0,ue.A)(),ge=(0,o.useState)("videoPlayer"),me=(0,a.A)(ge,2),xe=me[0],ve=me[1],be=(0,o.useState)(!1),ye=(0,a.A)(be,2),ke=ye[0],Ae=ye[1],je=function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"))},we=function(){b(!1)},Se=function(){j().fire({title:"Error",text:"No se pudo cargar el archivo",icon:"error",confirmButtonText:"Ok"})},Ce=function(){var e=h.current,t=h.current.duration;P(je(t)),e.videoHeight>e.videoWidth?B(!0):B(!1)},_e=function(){if(h.current){e.setPlayTime(h.current.currentTime);var t=h.current.currentTime/h.current.duration*100,n=document.querySelector(".".concat(f.progress)),r=document.querySelector(".".concat(f.currentTime));n.style.width="".concat(t,"%"),r.innerHTML=je(h.current.currentTime)}},Te=function(){clearTimeout(de);var e=document.querySelector(".".concat(f.bloqueReproduccion));e.classList.remove("hide"),de=setTimeout((function(){e.classList.add("hide")}),4e3)},Ee=function(){Z(!0)},Me=function(){h.current.paused?(h.current.play(),b(!0)):(h.current.pause(),b(!1))};(0,o.useEffect)((function(){return c.xU(e.id).then((function(e){var t=URL.createObjectURL(e);h.current.src=t,h.current.addEventListener("ended",we),h.current.addEventListener("error",Se),h.current.addEventListener("loadedmetadata",Ce),h.current.addEventListener("canplay",Ee),h.current.addEventListener("timeupdate",_e),h.current.addEventListener("mousemove",Te),h.current.addEventListener("click",Me)})).catch((function(e){console.log(e),j().fire({title:"Error",text:"No se pudo cargar el archivo",icon:"error",confirmButtonText:"Ok"})})),function(){h.current&&(h.current.removeEventListener("ended",we),h.current.removeEventListener("error",Se),h.current.removeEventListener("loadedmetadata",Ce),h.current.removeEventListener("timeupdate",_e),h.current.removeEventListener("mousemove",Te),h.current.removeEventListener("click",Me))}}),[]);var Pe=function(e){h.current&&(h.current.currentTime=e)},Le=F?{width:"auto",height:550,maxHeight:"100%",marginBottom:-7,cursor:"move"}:{width:550,height:"auto",maxWidth:"100%",marginBottom:-7,cursor:"move"};return(0,z.jsxs)(_.M,{onDrop:function(e,t){},onDragStart:function(e,t){ve(e.id)},children:[(0,z.jsx)(C.V,{id:"videoPlayer",style:{display:"flex",flexWrap:"wrap",justifyContent:"center",position:"absolute",zIndex:1,backgroundColor:"#000",visibility:Y?"visible":"hidden"},initialPosition:{x:0,y:0},children:(0,z.jsxs)("div",{children:[(0,z.jsx)("video",{style:Le,ref:h}),(0,z.jsxs)(y.A,{className:f.bloqueReproduccion,style:{backgroundColor:"rgba(255, 255, 255, .25)"},sx:{overflow:"visible"},onMouseMove:function(){clearTimeout(de)},children:[(0,z.jsx)(u.A,{onClick:Me,className:f.playPauseBtn,children:x?(0,z.jsx)(S.A,{}):(0,z.jsx)(w.A,{})}),(0,z.jsx)(u.A,{className:f.progressContainer,onClick:function(e){var t=document.querySelector(".".concat(f.progressContainer)),n=e.nativeEvent.offsetX/t.offsetWidth*100;h.current.currentTime=h.current.duration*n/100},children:(0,z.jsx)(u.A,{className:f.progress,children:(0,z.jsx)(u.A,{className:"".concat(f.currentTime," num_currentTime")})})}),(0,z.jsx)(u.A,{className:f.duration,children:M})]})]})}),o.Children.map(e.children,(function(e){return o.isValidElement(e)?o.cloneElement(e,{setVideoTime:Pe,totalTime:h.current.duration,setSpeakers:q,setCurrentLabel:ie,updateTranscription:se,setUpdateTranscription:ce,activeEditTranscription:ke,setActiveEditTranscription:Ae}):e})),(0,z.jsx)(C.V,{id:"metadata",initialPosition:{x:0,y:0},style:{display:e.metadata?"block":"none",zIndex:"metadata"===xe?1:0},children:(0,z.jsx)(T.A,{resource:e.metadata,setMetadata:e.setMetadata,history:e.history})}),(0,z.jsx)(C.V,{id:"aiasistent_msgs",initialPosition:{x:0,y:0},style:{display:null!==h&&void 0!==h&&null!==(t=h.current)&&void 0!==t&&t.duration&&e.subView.split(",").includes("aiasistent_msgs")?"block":"none",zIndex:"aiasistent_msgs"===xe?1:0},children:(null===h||void 0===h||null===(n=h.current)||void 0===n?void 0:n.duration)&&e.subView.split(",").includes("aiasistent_msgs")&&(0,z.jsx)(le,{id:e.id,slug:e.slug,type:"transcription"})}),(0,z.jsx)(C.V,{id:"speakers",initialPosition:{x:0,y:0},style:{display:null!==h&&void 0!==h&&null!==(r=h.current)&&void 0!==r&&r.duration&&U?"block":"none",zIndex:"speakers"===xe?1:0},children:(null===h||void 0===h||null===(i=h.current)||void 0===i?void 0:i.duration)&&U&&e.subView.split(",").includes("speakers_av_transcribe")&&(0,z.jsx)(H,{speakers:U,totalTime:h.current.duration,setVideoTime:Pe})}),(0,z.jsx)(C.V,{id:"user_record_tasks",initialPosition:{x:0,y:0},style:{display:null!==h&&void 0!==h&&null!==(s=h.current)&&void 0!==s&&s.duration&&e.subView.split(",").includes("user_record_tasks")?"block":"none",zIndex:"user_record_tasks"===xe?1:0},children:(0,z.jsx)(ee.A,{id:e.id,record:!0})}),(0,z.jsx)(C.V,{id:"player_settings",initialPosition:{x:0,y:0},style:{display:null!==h&&void 0!==h&&null!==(l=h.current)&&void 0!==l&&l.duration&&e.subView.split(",").includes("player_settings")?"block":"none",zIndex:"player_settings"===xe?1:0},onClick:function(){ve("player_settings")},children:(0,z.jsx)(X,{speed:V,setSpeed:function(e){h.current&&(h.current.playbackRate=e,I(e))},handleForward:function(e){h.current&&(h.current.currentTime+=e)}})}),(0,z.jsx)(C.V,{id:"edit_av_transcribe",initialPosition:{x:0,y:0},style:{display:null!==h&&void 0!==h&&null!==(d=h.current)&&void 0!==d&&d.duration&&e.subView.split(",").includes("edit_av_transcribe")?"block":"none",zIndex:"edit_av_transcribe"===xe?1:0},children:(null===h||void 0===h||null===(p=h.current)||void 0===p?void 0:p.duration)&&e.subView.split(",").includes("edit_av_transcribe")&&(0,z.jsx)(J,{setSubView:e.setSubView,currentLabel:re,id:e.id,slug:e.slug,setUpdateTranscription:ce,speakers:U,activeEditTranscription:ke,setActiveEdit:function(){return Ae(!ke)}})}),!Y&&(0,z.jsx)(k.A,{style:{position:"absolute",top:20,left:20,backgroundColor:fe?he.palette.grey[800]:"white"},children:(0,z.jsx)(Q.A,{options:{loop:!0,autoplay:!0,animationData:K,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}},height:70,width:70})})]})},he=n(63573),ge=n(92392),me=n(94495),xe=n(36795),ve=n(31269),be=n(92530),ye=n(93012),ke=n(88455),Ae=n(73216),je=n(50264),we=n(11238),Se=n(18751),Ce=n(53536),_e=n.n(Ce),Te=n(88120),Ee=(0,$.A)((function(e){return{toolbar:{minHeight:"auto",padding:5,paddingLeft:"10px !important",color:"#fff",borderTopLeftRadius:10,borderTopRightRadius:10,overflow:"hidden",alignItems:"center",width:"calc(100% - 34px)","& h6":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",fontSize:16,margin:0}}}})),Me=function(e){var t=(0,o.useState)("viz"),n=(0,a.A)(t,2),b=n[0],y=n[1],k=(0,o.useState)(""),A=(0,a.A)(k,2),j=A[0],w=A[1],S=(0,o.useState)(null),C=(0,a.A)(S,2),_=C[0],T=C[1],E=(0,o.useState)(0),M=(0,a.A)(E,2),P=M[0],V=M[1],I=(0,o.useState)(0),N=(0,a.A)(I,2),H=N[0],D=N[1],B=(0,o.useState)(null),W=(0,a.A)(B,2),U=W[0],q=W[1],$=(0,o.useState)(!1),G=(0,a.A)($,2),J=G[0],Q=G[1],K=(0,o.useState)([]),Y=(0,a.A)(K,2),Z=Y[0],X=Y[1],ee=(0,v.d4)((function(e){return e.user})),te=(0,Ae.g)().id,ne=(0,L.A)(),re=Ee(),ie=(0,ce.M)().showAlert,ae=(0,v.wA)(),oe=(0,Ae.Zp)(),se=(0,v.d4)((function(e){return e.app.isDarkMode})),le=(0,R.A)(),ue=(0,Te.Fu)();(0,o.useEffect)((function(){pe()}),[e.match]),(0,o.useEffect)((function(){ee.favorites&&(ee.favorites.find((function(e){return e.id===te}))?Q(!0):Q(!1))}),[ee.favorites,e.match]),(0,o.useEffect)((function(){if(_){for(var e=Object.keys(_.processing),t=e[0];"fileProcessing"===t&&e.length>1;)e.shift(),t=e[0];l.ko("detail_record").then((function(e){var t=_.processing.fileProcessing.type;e.actions.length>0&&X(e.actions.filter((function(e){return e.record_type.includes(t)})))})).catch((function(e){console.error(e)}))}}),[_]);var pe=function(){te&&(y("viz"),T(null),c.Hc(te).then((function(e){T(e)})).catch((function(e){ie("error","No se pudo obtener el archivo").then((function(){oe("/")}))})))},Ce=function(e){D(e)},Me=function(e,t){e||(e="");var n=e.split(",").map((function(e){return e.trim()})).filter(Boolean);return n.includes(t)?n=n.filter((function(e){return e!==t})):n.push(t),n.join(",")};return(0,z.jsx)(s.Ay,{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-start"},children:_&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(s.EL,{style:(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)({width:"calc(100% - 40px)",marginBottom:0,height:"calc(100% - 20px)",padding:0},"width","400px"),"maxWidth","400px"),"border","none"),"display","block"),"placeContent","flex-start"),"overflow","auto"),"minWidth","300px"),"flexGrow",.5),"margin",10),children:[(0,z.jsxs)(p.A,{style:{background:ne.palette.primary.light},className:re.toolbar,children:[ee.access_token&&"null"!==ee.access_token&&(0,z.jsx)(f.A,{sx:{marginLeft:"12px",color:ne.palette.primary.main},size:"large",onClick:function(){var e={type:"records",id:te};J?h.C5(e).then((function(e){ie("success",le.formatMessage({id:"removed_from_favorites"})),ae((0,ke.me)(ee.access_token))})).catch((function(e){ie("error",le.formatMessage({id:"could_not_remove_from_favorites"}))})):h.Gm(e).then((function(e){ie("success",le.formatMessage({id:"added_to_favorites"})),ae((0,ke.me)(ee.access_token))})).catch((function(e){ie("error",le.formatMessage({id:"could_not_add_to_favorites"}))}))},children:J?(0,z.jsx)(ye.A,{}):(0,z.jsx)(be.A,{})}),(0,z.jsx)(d.A,{variant:"h6",style:{flexGrow:1,marginLeft:0,color:ne.palette.primary.main},children:_.displayName?_.displayName:_.name})]}),(0,z.jsxs)(u.A,{children:[ue.includes("files_download")&&(0,z.jsx)(we.nA,{startIcon:(0,z.jsx)(Se.A,{}),style:{borderRadius:5,backgroundColor:se?ne.palette.grey[800]:ne.palette.grey[200],color:ne.palette.grey[500],margin:10,marginBottom:0,width:"calc(100% - 20px)"},label:"Descargar archivo",onClick:function(){ie("askUserDownloadType","Escoge el tipo de descarga").then((function(e){"original"===e?(ie("loading","Descargando archivo..."),c.U3({id:_._id.$oid,type:"original"},(function(e){ie("loading","Descargando archivo... ".concat(Math.round(e),"%"))})).then((function(){ie("success","Archivo descargado correctamente")})).catch((function(e){console.error(e),ie("error","Error al descargar el archivo")}))):"small"===e&&(ie("loading","Descargando archivo..."),c.U3({id:_._id.$oid,type:"small"},(function(e){ie("loading","Descargando archivo... ".concat(Math.round(e),"%"))})).then((function(){ie("success","Archivo descargado correctamente")})).catch((function(e){console.error(e),ie("error","Error al descargar el archivo")})))}))}}),(0,z.jsx)(g.M2,{record:_,setMetadata:q}),(Z.length>0||"audio"===_.processing.fileProcessing.type||"video"===_.processing.fileProcessing.type||_e().intersection(ee.roles,["editor","admin"]).length>0)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(je.Separator,{title:"Acciones"}),(0,z.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",padding:10},children:[_e().intersection(ee.roles,["editor","admin","team_lead","transcriber"]).length>0&&(0,z.jsx)(O.A,{children:"TaskAlt",title:"Tareas de catalogaci\xf3n",onClick:function(){var e=Me(j,"user_record_tasks");w(e)},selected:j.split(",").includes("user_record_tasks")}),("audio"===_.processing.fileProcessing.type||"video"===_.processing.fileProcessing.type)&&(0,z.jsx)(O.A,{children:"PlayArrow,Settings",title:"Opciones de reproducci\xf3n",onClick:function(){var e=Me(j,"player_settings");w(e)},selected:j.split(",").includes("player_settings")}),"av_transcribe"===(null===b||void 0===b?void 0:b.view)&&(0,z.jsx)(O.A,{children:"InterpreterMode",title:"Ver oradores",onClick:function(){var e=Me(j,"speakers_av_transcribe");w(e)},selected:j.split(",").includes("speakers_av_transcribe")}),"av_transcribe"===(null===b||void 0===b?void 0:b.view)&&_e().intersection(ee.roles,["editor","admin","transcriber"]).length>0&&(0,z.jsx)(O.A,{children:"Edit,Transcribe",title:"Editar transcripci\xf3n",onClick:function(){var e=Me(j,"edit_av_transcribe");w(e)},selected:j.split(",").includes("edit_av_transcribe")}),"av_transcribe"===(null===b||void 0===b?void 0:b.view)&&_e().intersection(ee.roles,["editor","admin","llm"]).length>0&&ue.includes("llm")&&(0,z.jsx)(O.A,{children:"ChatBubble,SmartToy",title:"Preg\xfantale a la IA",onClick:function(){var e=Me(j,"aiasistent_msgs");w(e)},selected:j.split(",").includes("aiasistent_msgs")}),Z.map((function(e,t){return(0,z.jsx)(z.Fragment,{children:_e().intersection(ee.roles,e.roles).length>0&&(0,z.jsx)(O.A,{index:t,children:e.icon,title:e.label,onClick:function(){e.extraOpts.length>0&&ie("askUserAction",JSON.stringify(e.extraOpts)).then((function(t){if(t){var n=(0,r.A)((0,r.A)({},t),{},{records:[_._id.$oid]});l.Gj(e.plugin,JSON.stringify(n),e.endpoint).then((function(e){ie("success",e.msg)})).catch((function(e){console.error(e)}))}}))}},t)})}))]})]}),Object.keys(_.processing).length>1&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(je.Separator,{icon:(0,z.jsx)(m.A,{}),title:"Procesamientos"}),Object.keys(_.processing).map((function(e,t){var n=_.processing[e].type,r=me.vJ.find((function(e){return e.value===n})),i=n;if("audio"!==n&&"video"!==n&&r)return(0,z.jsx)(je.ItemMenu,{icon:(0,z.jsx)(x.A,{}),name:r.label,onClick:function(){y({view:i,slug:e}),w("")},className:(null===b||void 0===b?void 0:b.view)===i?"selected":""},t)}))]})]})]}),(0,z.jsxs)(s.EL,{style:{width:"calc(100% - 400px)",height:"calc(100% - 20px)",position:"relative",margin:10,marginLeft:0,padding:0,overflow:"hidden",backgroundColor:"image"===_.processing.fileProcessing.type||"document"===_.processing.fileProcessing.type||se?ne.palette.grey[900]:"white"},children:["audio"===_.processing.fileProcessing.type&&(0,z.jsx)(xe.Q,{backend:ve.t2,children:(0,z.jsx)(de,{id:_._id.$oid,setPlayTime:V,time:H,metadata:U,setMetadata:q,history:e.history,subView:j,slug:b.slug,children:"av_transcribe"===(null===b||void 0===b?void 0:b.view)&&(0,z.jsx)(F,{id:_._id.$oid,slug:b.slug,subView:j,time:P,setTime:function(e){Ce(e)}})})}),"video"===_.processing.fileProcessing.type&&(0,z.jsx)(xe.Q,{backend:ve.t2,children:(0,z.jsx)(fe,{id:_._id.$oid,setPlayTime:V,time:H,metadata:U,setMetadata:q,history:e.history,subView:j,slug:b.slug,children:"av_transcribe"===(null===b||void 0===b?void 0:b.view)&&(0,z.jsx)(F,{id:_._id.$oid,slug:b.slug,subView:j,time:P,setTime:function(e){Ce(e)}})})}),"document"===_.processing.fileProcessing.type&&(0,z.jsx)(xe.Q,{backend:ve.t2,children:(0,z.jsx)(he.A,{id:_._id.$oid,subView:j,setSubView:w,view:b,metadata:U,setMetadata:q,history:e.history})}),"image"===_.processing.fileProcessing.type&&(0,z.jsx)(xe.Q,{backend:ve.t2,children:(0,z.jsx)(ge.A,{id:_._id.$oid,setMetadata:q,metadata:U})})]})]})})},Pe=Me},97223:function(e,t,n){n.d(t,{De:function(){return c},Jb:function(){return d},QL:function(){return p},SM:function(){return l},UK:function(){return a},Z3:function(){return o},kP:function(){return u},v5:function(){return s}});var r=n(88120),i=n(91280);function a(){var e={method:"GET",headers:new Headers({Authorization:(0,i.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch((0,r.H6)()+"/llms",e).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function o(){var e={method:"GET",headers:new Headers({Authorization:(0,i.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch((0,r.H6)()+"/llms/providers",e).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function s(e){var t={method:"POST",headers:new Headers({Authorization:(0,i.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch((0,r.H6)()+"/llms",t).then((function(e){return 201!==e.status?Promise.reject(e):e.json()}))}function c(e){var t="/llms/"+e,n={method:"DELETE",headers:new Headers({Authorization:(0,i.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch((0,r.H6)()+t,n).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function l(e){var t="/llms/models/"+e,n={method:"GET",headers:new Headers({Authorization:(0,i.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch((0,r.H6)()+t,n).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function d(e){var t={method:"POST",headers:new Headers({Authorization:(0,i.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch((0,r.H6)()+"/llms/conversation",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function u(e){var t={method:"POST",headers:new Headers({Authorization:(0,i.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch((0,r.H6)()+"/llms/conversation/history",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function p(e){var t="/llms/conversation/"+e,n={method:"GET",headers:new Headers({Authorization:(0,i.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch((0,r.H6)()+t,n).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}},61958:function(e,t,n){var r=n(24994);t.A=void 0;var i=r(n(40039)),a=n(70579);t.A=(0,i.default)((0,a.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History")},27385:function(e,t,n){var r=n(24994);t.A=void 0;var i=r(n(40039)),a=n(70579);t.A=(0,i.default)((0,a.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3zm-3-7V3.5L18.5 9z"}),"NoteAdd")},29704:function(e,t,n){var r=n(24994);t.A=void 0;var i=r(n(40039)),a=n(70579);t.A=(0,i.default)((0,a.jsx)("path",{d:"M6 19h4V5H6zm8-14v14h4V5z"}),"Pause")},54469:function(e,t,n){var r=n(24994);t.A=void 0;var i=r(n(40039)),a=n(70579);t.A=(0,i.default)((0,a.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow")},5374:function(e,t,n){var r=n(24994);t.A=void 0;var i=r(n(40039)),a=n(70579);t.A=(0,i.default)((0,a.jsx)("path",{d:"m19.93 8.21-3.6 1.68L14 7.7V6.3l2.33-2.19 3.6 1.68c.38.18.82.01 1-.36.18-.38.01-.82-.36-1L16.65 2.6c-.38-.18-.83-.1-1.13.2l-1.74 1.6c-.18-.24-.46-.4-.78-.4-.55 0-1 .45-1 1v1H8.82C8.34 4.65 6.98 3.73 5.4 4.07c-1.16.25-2.15 1.25-2.36 2.43-.22 1.32.46 2.47 1.48 3.08L7.08 18H4v3h13v-3h-3.62L8.41 8.77c.17-.24.31-.49.41-.77H12v1c0 .55.45 1 1 1 .32 0 .6-.16.78-.4l1.74 1.6c.3.3.75.38 1.13.2l3.92-1.83c.38-.18.54-.62.36-1-.18-.37-.62-.54-1-.36M6 8c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"PrecisionManufacturing")},75678:function(e,t,n){var r=n(24994);t.A=void 0;var i=r(n(40039)),a=n(70579);t.A=(0,i.default)((0,a.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send")}}]);
//# sourceMappingURL=5936.c43dfd6b.chunk.js.map