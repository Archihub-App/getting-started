"use strict";(self.webpackChunkarchihub=self.webpackChunkarchihub||[]).push([[7468],{67468:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var r=n(90675),o=n(60436),a=n(10467),s=n(5544),i=n(65043),c=n(73216),u=n(68817),d=n.n(u),f=n(9920),h=n(78717),l=n(43288),p=n(70579),m=function(){var e=(0,i.useState)(!0),t=(0,s.A)(e,2),n=t[0],u=t[1],m=(0,i.useState)([]),g=(0,s.A)(m,2),y=g[0],j=g[1],v=(0,i.useState)(0),b=(0,s.A)(v,2),T=b[0],P=b[1],S=(0,c.g)().id,w=function(){var e=(0,a.A)((0,r.A)().mark((function e(t){var n,a,s;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,f.f2(S,[t],"big",!1);case 4:n=e.sent,a="data:image/jpg;base64,"+n[0].data,s={original:a,thumbnail:a,lazyLoad:!0},j((function(e){var n=(0,o.A)(e);return n[t]=s,n})),u(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){h.$R(S).then((function(e){var t=e.pages,n=Array.from({length:t},(function(){return{original:"",thumbnail:"",lazyLoad:!0}}));j(n),w(0),t>1&&w(1)})).catch((function(e){console.log(e)}))}),[S]),(0,p.jsxs)("div",{style:{backgroundColor:"black",position:"relative"},children:[(0,p.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3},children:n&&(0,p.jsx)(l.A,{})}),(0,p.jsx)(d(),{items:y,onSlide:function(e){""===y[e].original&&(w(e),P(e))},showThumbnails:!1,startIndex:T,additionalClass:"gallery",showFullscreenButton:!1,showPlayButton:!1,showNav:!1,infinite:!1})]})}},9920:function(e,t,n){n.d(t,{FZ:function(){return h},Hc:function(){return a},RS:function(){return i},Rm:function(){return l},S7:function(){return m},ao:function(){return p},bn:function(){return y},de:function(){return d},f2:function(){return f},v:function(){return g},vv:function(){return c},wp:function(){return u},xU:function(){return s}});var r=n(88120),o=n(91280);function a(e){var t="/records/"+e,n={method:"GET",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch(r.FM+t,n).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function s(e){var t="/records/"+e+"/stream",n={method:"GET",headers:new Headers({Authorization:(0,o.g)()}),mode:"cors",cache:"default"};return fetch(r.FM+t,n).then((function(e){return 200!==e.status?Promise.reject(e):e.blob()}))}function i(e,t){var n="/records/"+e+"/transcription",a={method:"POST",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify({slug:t})};return fetch(r.FM+n,a).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function c(e,t){var n="/records/"+e+"/metadata",a={method:"POST",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify({slug:t})};return fetch(r.FM+n,a).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function u(e){var t="/records/"+e+"/document",n={method:"GET",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch(r.FM+t,n).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function d(e){if((0,o.g)()){var t={method:"POST",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(r.FM+"/records/galleryinfo",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}t={method:"POST",headers:new Headers({"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(r.FM+"/records/public/galleryinfo",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function f(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if((0,o.g)()){var s="/records/"+e+"/pages",i={method:"POST",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify({pages:t,size:n,gallery:!a})};return fetch(r.FM+s,i).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}var c="/records/public/"+e+"/pages";i={method:"POST",headers:new Headers({"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify({pages:t,size:n,gallery:!a})};return fetch(r.FM+c,i).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function h(e,t,n,a){var s="/records/"+e+"/blocks",i={method:"POST",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify({page:t,block:a,slug:n})};return fetch(r.FM+s,i).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function l(e){var t={method:"POST",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(r.FM+"/records/setBlock",t).then((function(e){return 201!==e.status?Promise.reject(e):e.json()}))}function p(e){var t={method:"PUT",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(r.FM+"/records/setBlock",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function m(e){var t={method:"DELETE",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(r.FM+"/records/setBlock",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function g(e,t){var n="/records/"+e+"/edit-transcription",a={method:"PUT",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch(r.FM+n,a).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function y(e,t){var n="/records/"+e+"/edit-transcription",a={method:"DELETE",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch(r.FM+n,a).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}}}]);
//# sourceMappingURL=7468.ae9ecf54.chunk.js.map