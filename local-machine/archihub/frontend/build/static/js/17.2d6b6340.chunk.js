(this.webpackJsonpsim=this.webpackJsonpsim||[]).push([[17,21],{1015:function(e,t,a){"use strict";a.r(t),a.d(t,"BloqueContenido",(function(){return j})),a.d(t,"Main",(function(){return w}));var n=a(35),r=a(2),i=a.n(r),c=a(50),l=a(138),o=a(941),s=a(940),u=a(843),d=a(926),f=a(938),p=a(943),m=a(963),h=a(950),g=a.n(h),b=(a(944),a(46),a(939)),y=a(948),v=a(203),E=a.n(v),x=a(1388),O=Object(u.a)((function(e){return{bloque:{padding:"10px",backgroundColor:"rgba(255,255,255,.9)",margin:5,width:"100%",height:"100%",overflow:"auto",position:"relative",borderRadius:10,border:"3px solid #fff","&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:"#56749a",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:"#56749a"},"&::-webkit-scrollbar-thumb:active":{background:"#56749a"},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}},tituloBloque:{top:0,fontSize:15,fontWeight:"bold",padding:"10px 15px",position:"sticky",zIndex:10,width:"100%",left:0,background:"#e6e6e6",borderTopLeftRadius:10,borderTopRightRadius:10,color:"#56749a",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},breadcrumbs:{padding:"5px 15px",color:"#fff",borderBottomLeftRadius:10,borderBottomRightRadius:10,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},linkBreadcrumb:{color:"#fff",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:200,display:"inline-block","&:hover":{color:"#fff"}},selectedBread:{color:"#fff !important",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:150,backgroundColor:"rgba(255,255,255,.2)",display:"inline-block",padding:"0 5px",borderRadius:2},columnas:{display:"flex",height:"calc(100vh - 150px)"},separador:{borderBottom:"1px solid #dcdcdc",paddingTop:25,paddingBottom:10,fontWeight:"bold",color:"#56749a","& svg":{marginRight:10,marginLeft:5,width:20,height:20,padding:3,backgroundColor:"#56749a",borderRadius:50,"& path":{fill:"#fff"}}},toolbar:{minHeight:"auto",padding:5,backgroundColor:"#56749a",color:"#fff",borderTopLeftRadius:10,overflow:"hidden","& h6":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",fontSize:16}},itemMenu:{display:"flex",alignItems:"center",padding:15,borderBottom:"1px solid #dcdcdc","& svg":{"& path":{fill:"#9fb0c6"}},"&:hover":{backgroundColor:e.palette.grey[100],cursor:"pointer"},"&.selected":{backgroundColor:"#9fb0c6",color:"#fff","& path":{fill:"#fff"}}}}})),j=function(e){var t=O();return i.a.createElement(d.a,{className:t.bloque,style:e.style},e.title&&i.a.createElement(d.a,{className:t.tituloBloque},e.title),e.topBar&&i.a.createElement(i.a.Fragment,null,e.topBar),e.children)},w=function(e){O();var t=Object(r.useState)(null),a=Object(n.a)(t,2),c=a[0],l=a[1],u=Object(r.useState)(null),h=Object(n.a)(u,2),v=h[0],w=h[1],k=Object(r.useState)(null),S=Object(n.a)(k,2),C=(S[0],S[1],Object(r.useState)(null)),T=Object(n.a)(C,2),R=T[0],B=T[1],_=Object(r.useState)(!1),F=Object(n.a)(_,2);F[0],F[1];Object(r.useEffect)((function(){p.b().then((function(e){w(e),f.c().then((function(e){l(e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)})),m.c().then((function(e){B(e.map((function(e){return{slug:e.id,name:e.name}})))})).catch((function(e){console.log(e)}))}),[]);return i.a.createElement(s.a,null,i.a.createElement(o.a,{userRoles:e.user.roles,list:function(){var t=[];return t.push({name:"Volver",icon:i.a.createElement(i.a.Fragment,null,i.a.createElement(g.a,null)),callback:function(){e.history.push("/dashboard")}}),t}()}),i.a.createElement(j,{style:{width:"calc(50% - 20px)",height:"calc(100vh - 100px)",overflow:"auto"},title:"Configuraci\xf3n general"},c&&i.a.createElement(y.c,{initialValues:{tipo_defecto:c.settings.find((function(e){return"post_types_settings"===e.name})).data[0].value,tipos_vista_individual:c.settings.find((function(e){return"post_types_settings"===e.name})).data[1].value,access_rights_list:c.settings.find((function(e){return"access_rights"===e.name})).data[0].value,user_roles_list:c.settings.find((function(e){return"access_rights"===e.name})).data[1].value,api_activation_admin:c.settings.find((function(e){return"api_activation"===e.name})).data[0].value,api_activation_public:c.settings.find((function(e){return"api_activation"===e.name})).data[1].value,index_activation:c.settings.find((function(e){return"index_management"===e.name})).data[0].value,index_resources_remake:c.settings.find((function(e){return"index_management"===e.name})).data[1].value,index_resources_reindex:c.settings.find((function(e){return"index_management"===e.name})).data[2].value,cache_management:c.settings.find((function(e){return"cache_management"===e.name})).data[0].value},onSubmit:function(e,t){(0,t.setSubmitting)(!1),E.a.fire({title:"\xbfEst\xe1s seguro?",text:"Se guardar\xe1 la configuraci\xf3n",icon:"warning",showCancelButton:!0}).then((function(t){t.isConfirmed&&f.r(JSON.stringify(e)).then((function(e){E.a.fire("Guardado!","La configuraci\xf3n se guard\xf3 correctamente","success")})).catch((function(e){E.a.fire("Error!","Hubo un error al guardar la configuraci\xf3n","error")}))}))}},(function(e){var t=e.values,a=(e.errors,e.touched,e.handleChange,e.handleBlur,e.handleSubmit),n=e.isSubmitting,r=e.setFieldValue;return i.a.createElement("form",{onSubmit:a},c&&i.a.createElement(i.a.Fragment,null,c.settings.map((function(e,a){return Array.isArray(e.data)?i.a.createElement(b.r,{id:a,label:e.label,data:e.data,options:"post_types_settings"===e.name?v:"access_rights"===e.name?R:null,values:t,setFieldValue:function(e,t){return r(e,t)}}):"object"===typeof e.data?i.a.createElement(b.q,{id:a,label:e.label,data:e.data}):void 0}))),c&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.a,{style:{display:"flex",justifyContent:"flex-end",gap:10,marginTop:10}},i.a.createElement(x.a,{type:"button",variant:"outlined"},"Cancelar"),i.a.createElement(x.a,{type:"submit",variant:"outlined",disabled:n},"Guardar"))))}))))};t.default=Object(c.b)((function(e){return{user:e.auth.user}}),l.a)(w)},1033:function(e,t,a){"use strict";var n=a(40),r=a(205);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(2)),c=(0,n(a(206)).default)(i.createElement("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"}),"Undo");t.default=c},1303:function(e,t,a){"use strict";var n=a(15),r=a(3),i=a(2),c=a(332),l=a(442),o=a(912),s=a(333),u=a(334),d=a(118),f=a(913),p=a(833);function m(e){return Object(p.a)("MuiTypography",e)}Object(f.a)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var h=a(0),g=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],b=Object(s.a)("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(e,t){var a=e.ownerState;return[t.root,a.variant&&t[a.variant],"inherit"!==a.align&&t["align".concat(Object(d.a)(a.align))],a.noWrap&&t.noWrap,a.gutterBottom&&t.gutterBottom,a.paragraph&&t.paragraph]}})((function(e){var t=e.theme,a=e.ownerState;return Object(r.a)({margin:0},"inherit"===a.variant&&{font:"inherit"},"inherit"!==a.variant&&t.typography[a.variant],"inherit"!==a.align&&{textAlign:a.align},a.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},a.gutterBottom&&{marginBottom:"0.35em"},a.paragraph&&{marginBottom:16})})),y={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},v={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},E=i.forwardRef((function(e,t){var a=Object(u.a)({props:e,name:"MuiTypography"}),i=function(e){return v[e]||e}(a.color),s=Object(l.a)(Object(r.a)({},a,{color:i})),f=s.align,p=void 0===f?"inherit":f,E=s.className,x=s.component,O=s.gutterBottom,j=void 0!==O&&O,w=s.noWrap,k=void 0!==w&&w,S=s.paragraph,C=void 0!==S&&S,T=s.variant,R=void 0===T?"body1":T,B=s.variantMapping,_=void 0===B?y:B,F=Object(n.a)(s,g),I=Object(r.a)({},s,{align:p,color:i,className:E,component:x,gutterBottom:j,noWrap:k,paragraph:C,variant:R,variantMapping:_}),N=x||(C?"p":_[R]||y[R])||"span",q=function(e){var t=e.align,a=e.gutterBottom,n=e.noWrap,r=e.paragraph,i=e.variant,c=e.classes,l={root:["root",i,"inherit"!==e.align&&"align".concat(Object(d.a)(t)),a&&"gutterBottom",n&&"noWrap",r&&"paragraph"]};return Object(o.a)(l,m,c)}(I);return Object(h.jsx)(b,Object(r.a)({as:N,ref:t,ownerState:I,className:Object(c.a)(q.root,E)},F))}));t.a=E},1372:function(e,t,a){"use strict";a.r(t);var n=a(18),r=a(202),i=a(35),c=a(2),l=a.n(c),o=a(940),s=a(941),u=a(938),d=a(1033),f=a.n(d),p=a(1015),m=a(1400),h=a(1378),g=a(1386),b=a(930),y=a(1303),v=a(1388),E=a(843),x=a(943),O=a(977),j=a(203),w=a.n(j),k=a(939),S=a(948),C=Object(E.a)((function(e){return{instructions:{margin:10,fontSize:15}}}));t.default=function(e){var t=C(),a=Object(c.useState)([]),d=Object(i.a)(a,2),E=d[0],j=d[1],T=Object(c.useState)(null),R=Object(i.a)(T,2),B=R[0],_=R[1],F=Object(c.useState)(null),I=Object(i.a)(F,2),N=I[0],q=I[1],W=Object(c.useState)(null),D=Object(i.a)(W,2),L=D[0],P=D[1],z=Object(c.useState)(null),A=Object(i.a)(z,2),M=A[0],V=A[1],J=Object(c.useState)([]),H=Object(i.a)(J,2),Y=H[0],G=H[1];Object(c.useEffect)((function(){X()}),[e.match]);var X=function(){};Object(c.useEffect)((function(){e.match.params.slug&&u.d().then((function(e){x.c(e.value).then((function(e){_(e)}))}))}),[e.match]),Object(c.useEffect)((function(){x.b().then((function(e){j(e)})),X()}),[]);return Object(c.useEffect)((function(){console.log(Y)}),[Y]),Object(c.useEffect)((function(){e.match.params.slug&&u.i(e.match.params.slug,"bulk").then((function(e){q(e);var t={};e.map((function(e){"instructions"!==e.type&&"file"!==e.type&&((t=Object(n.a)({},t))[e.id]=e.default)})),t.files=[],P(t)}))}),[]),l.a.createElement("div",{className:"cev-dashboard"},l.a.createElement(o.a,null,l.a.createElement(s.a,{list:[{name:"Atr\xe1s",icon:l.a.createElement(f.a,null),callback:function(){e.history.push("/processing")}}]}),l.a.createElement(p.BloqueContenido,{style:{width:"calc(100% - 20px)",padding:"2px"}},l.a.createElement(m.a,{style:{minHeight:"auto"}},l.a.createElement(h.a,{size:"small",onChange:function(e){_(null),x.c(e.target.value).then((function(e){_(e)}))},value:B?B.slug:"",style:{borderRadius:50,height:32,textTransform:"uppercase",fontSize:11}},E.map((function(e){return l.a.createElement(g.a,{value:e.slug},e.name)}))))),B&&Y&&l.a.createElement(b.a,{style:{display:"flex"}},l.a.createElement(O.a,{type:"checkbox",selectedType:B,setSelected:V,setSelectedResources:function(e){Y.includes(e)?G(Y.filter((function(t){return t!==e}))):G([].concat(Object(r.a)(Y),[e]))},selectedResources:Y}),l.a.createElement(p.BloqueContenido,{title:"Ajustes del procesamiento masivo",style:{height:"calc(100vh - 170px)",overflow:"auto",marginRight:15}},N&&L&&l.a.createElement(S.c,{initialValues:L,onSubmit:function(t,a){var n=a.setSubmitting;t.post_type=B.slug,t.parent=M,t.resources=Y,n(!0),w.a.fire({title:"Procesando",html:"Espere un momento",allowOutsideClick:!1,showConfirmButton:!1}),u.a(e.match.params.slug,JSON.stringify(t)).then((function(t){n(!1),w.a.close(),w.a.fire({title:"Procesamiento iniciado",text:t.msg,icon:"success",confirmButtonText:"Aceptar"}).then((function(){e.history.push("/profile")}))})).catch((function(e){n(!1),w.a.close(),e.json().then((function(e){w.a.fire({title:"Error",text:e.msg,icon:"error",confirmButtonText:"Aceptar"})}))}))}},(function(a){var n=a.values,r=a.errors,i=(a.touched,a.handleChange),c=a.handleBlur,o=a.handleSubmit,s=a.isSubmitting,d=a.setFieldValue;return l.a.createElement("form",{onSubmit:o},N.map((function(a,o){return l.a.createElement(l.a.Fragment,null,"file"===a.type&&l.a.createElement(k.h,{key:o,name:a.label,id:a.name,values:n,required:a.required,change:d,limit:a.limit,acceptedFiles:a.acceptedFiles}),"instructions"===a.type&&l.a.createElement(y.a,{key:o,variant:"body1",className:t.instructions},a.text),"checkbox"===a.type&&l.a.createElement(k.g,{key:o,id:a.id,name:a.label,instructions:a.instructions,value:n[a.id],handleChange:function(e){d(a.id,e)},handleBlur:c,error:r[a.id],required:a.required}),"select"===a.type&&l.a.createElement(k.l,{key:o,id:a.id,name:a.label,value:n[a.id],handleChange:i,handleBlur:c,error:r[a.id],options:a.options,required:a.required}),"text"===a.type&&l.a.createElement(k.o,{key:o,id:a.id,name:a.label,value:n[a.id],handleChange:i,handleBlur:c,error:r[a.id],required:a.required}),"button"===a.type&&l.a.createElement(v.a,{variant:"contained",onClick:function(){var t,n;t=e.match.params.slug,n=a.callback,u.p(t,JSON.stringify({parent:M,post_type:B.slug}),n).then((function(e){w.a.fire({title:"\xc9xito",text:"Se ha ejecutado la acci\xf3n correctamente",icon:"success",confirmButtonText:"Ok"})}))},sx:{margin:"10px"}},a.label),"condition"===a.type&&l.a.createElement(k.a,{key:"".concat(o,"-").concat(n[a.id_condition]),id:a.id,label:a.label,value:n[a.id],condition:a.condition,options:a.options,conditionValue:n[a.id_condition],change:d}))})),l.a.createElement(b.a,{style:{display:"flex",justifyContent:"center",marginTop:25}},l.a.createElement(v.a,{variant:"outlined",type:"submit",disabled:s},"Iniciar")))}))))))}},944:function(e,t,a){"use strict";a.d(t,"a",(function(){return f})),a.d(t,"b",(function(){return p}));var n=a(2),r=a.n(n),i=a(488),c=a(1404),l=a(201),o=a(1061),s=a(926),u=a(945),d=a.n(u),f=Object(i.a)(c.a)((function(e){var t=e.theme;return{backgroundColor:"light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[200],height:t.spacing(3),color:t.palette.text.primary,fontWeight:t.typography.fontWeightRegular,border:"1px solid #dcdcdc",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:300,"& svg":{width:15,marginLeft:10,marginRight:5}}})),p=Object(i.a)(c.a)((function(e){var t=e.theme;return{backgroundColor:"rgb(85 116 154)",height:t.spacing(3),color:"white",fontWeight:t.typography.fontWeightRegular,border:"1px solid #dcdcdc",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:300,"& svg":{width:15,marginLeft:10,marginRight:5},"& path":{fill:"#fff"}}}));t.c=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{variant:"body2"},e.selectedType.description),r.a.createElement(o.a,{separator:r.a.createElement(d.a,{fontSize:"small",style:{margin:0}})},e.selectedType.parentsTypes.reverse().map((function(e,t){return r.a.createElement(f,{key:t,label:e.name})})),r.a.createElement(l.a,{variant:"body2",color:"text.primary"},e.selectedType.name)),e.selectedType.hierarchical&&r.a.createElement(s.a,null,r.a.createElement(l.a,{variant:"body2",color:"text.primary"},"Este tipo de contenido puede ser jer\xe1rquico entre si")),e.selectedType.metadata&&r.a.createElement(s.a,null,r.a.createElement(l.a,{variant:"body2",color:"text.primary"},"La estructura de metadatos es: ",e.selectedType.metadata.name)))}},947:function(e,t,a){"use strict";var n=a(35),r=a(16),i=a(2),c=a.n(i),l=a(843),o=a(930),s=a(1084),u=a(1402),d=a(1392),f=a(450),p=a(1009),m=a.n(p),h=a(1007),g=a.n(h),b=a(1008),y=a.n(b),v=Object(l.a)((function(e){return{columnas:{display:"flex",height:"calc(100vh - 150px)"},searchContainer:Object(r.a)(Object(r.a)({backgroundColor:"rgba(25,68,124,0.6)",backdropFilter:"blur(10px)",borderBottom:"1px solid rgba(255,255,255,0.1)",padding:e.spacing(1),display:"flex",position:"relative",alignItems:"center",minWidth:350,borderRadius:5},e.breakpoints.down("md"),{minWidth:"auto"}),"& input",{color:"#fff"}),searchContainerLight:Object(r.a)(Object(r.a)({backgroundColor:"rgb(115 141 175 / 23%)",backdropFilter:"blur(20px)",borderBottom:"1px solid rgba(255,255,255,0.1)",padding:e.spacing(1),display:"flex",position:"relative",alignItems:"center",minWidth:350,color:"#rgba(25,68,124,0.6)",borderRadius:5},e.breakpoints.down("md"),{minWidth:"auto"}),"& input",{color:"rgba(25,68,124,1)"}),searchInput:Object(r.a)({width:"100%",color:"white",fontWeight:"bold"},e.breakpoints.down("md"),{padding:0}),SearchIcon:{marginRight:"2%",color:"#fff","& path":{fill:"#fff"}},SearchIconLight:{marginRight:"2%",color:"#rgba(25,68,124,0.6)","& path":{fill:"#rgba(25,68,124,0.6)"}},tableRow:{width:"100%",display:"flex",alignItems:"center",alignContent:"stretch","&:nth-child(even)":{backgroundColor:"#ececec"}},tableCell:{width:"25%",padding:10,borderRight:"1px solid #ccc"},accessLevel:{width:30,height:30,textAlign:"center",lineHeight:"30px",borderRadius:"50%",display:"inline-block",backgroundColor:"#a7b7cb",color:"#fff","&.level_3":{backgroundColor:"#f7b500"},"&.level_2":{backgroundColor:"#eda73e"},"&.level_1":{backgroundColor:"#ed6e3e"}},help:{position:"absolute",top:85,right:40,maxWidth:700,width:"calc(100% - 440px)",height:"calc(100% - 100px)",backgroundColor:"rgb(114 141 174 / 82%)",zIndex:1,borderRadius:15,backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff","& .txt":{maxWidth:650,padding:20,"& p":{borderLeft:"3px solid #fff",borderTop:"1px dashed #fff",paddingTop:10,paddingLeft:10}},"& .box":{backgroundColor:"rgba(255,255,255,0.65)",paddingLeft:20,paddingRight:20,borderRadius:15,marginRight:5,marginLeft:5,color:"#333"},"& .bold":{fontWeight:"bold",color:"#2c3e50",marginRight:5,marginLeft:5}}}}));t.a=function(e){var t=v(),a=(e.onSearchSubmit,Object(i.useRef)(null)),r=c.a.useState(""),l=Object(n.a)(r,2),p=l[0],h=l[1];return c.a.createElement(o.a,{style:{position:"sticky",top:45,zIndex:1}},c.a.createElement("form",{className:"".concat("light"===e.variant?t.searchContainerLight:t.searchContainer),onSubmit:function(t){t.preventDefault(),e.onSearchSubmit(p)}},c.a.createElement(f.a,{className:"".concat("light"!==e.variant?t.SearchIcon:t.SearchIconLight)}),c.a.createElement(s.c,{className:t.searchInput,placeholder:"Buscar palabra clave",ref:a,inputProps:{maxLength:140},value:p,onChange:function(t){h(t.target.value),""===t.target.value&&e.onSearchSubmit("")}}),""!==p&&c.a.createElement(u.a,{onClick:function(){h(""),e.onSearchSubmit("")}},c.a.createElement(g.a,{className:"".concat("light"!==e.variant?t.SearchIcon:t.SearchIconLight)})),"light"!==e.variant&&c.a.createElement(c.a.Fragment,null,c.a.createElement(d.a,{size:"small",sx:{backgroundColor:"#f5f5f5",color:"light"===e.variant?"#333":"#2a5082",fontWeight:"bold"},label:e.total>=1?"".concat(e.total," resultados"):"No hay resultados"}),c.a.createElement(u.a,null,c.a.createElement(y.a,{className:"".concat("light"!==e.variant?t.SearchIcon:t.SearchIconLight)})),c.a.createElement(u.a,null,c.a.createElement(m.a,{className:"".concat("light"!==e.variant?t.SearchIcon:t.SearchIconLight)})))))}},954:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(35),r=a(2),i=function(e,t){var a,i=r.useState(null!==(a=JSON.parse(localStorage.getItem(e)))&&void 0!==a?a:t),c=Object(n.a)(i,2),l=c[0],o=c[1];return r.useEffect((function(){localStorage.setItem(e,JSON.stringify(l))}),[l,e]),[l,o]}},956:function(e,t,a){"use strict";var n=a(18),r=a(35),i=a(2),c=a.n(i),l=a(852),o=a(962),s=a(1392),u=a(1400),d=a(937),f=a(951),p=a(203),m=a.n(p),h=a(36),g=a(955),b=a.n(g),y=a(942),v=a.n(y),E=a(978),x=a.n(E),O=a(960),j=a.n(O),w=a(957),k=a(958),S=a(1360),C=a(967),T=a(959),R=a(338),B=a.n(R),_=a(339),F=Object(l.a)((function(e){return{btn_color:{color:"#869bb7 !important",padding:"5px !important",width:"30px !important",height:"30px !important",margin:"0 2px !important",borderRadius:"50%",border:"1px solid #c6d0dd !important","&:hover":{color:"#fff !important",backgroundColor:"#56749a !important"},"& .MuiSvgIcon-root":{width:"14px !important"}},chip_style:{margin:"1px 2px !important",backgroundColor:"rgb(115 141 175 / 10%) !important",color:"rgba(42, 80, 130, .6) !important",transition:"all .3s ease-in-out !important","& svg":{width:"15px !important",marginLeft:"10px !important"},"& path":{fill:"rgba(42, 80, 130, .6) !important",transition:"all .3s ease-in-out !important"},"&:hover":{backgroundColor:"rgba(42, 80, 130, .6) !important",color:"#fff !important","& path":{fill:"#fff !important"}}},access_chip:{backgroundColor:"rgba(42, 80, 130, .15) !important",border:"1px solid rgba(42, 80, 130, .5) !important",color:"rgba(42, 80, 130, .9) !important"}}}));t.a=function(e){var t=F(),a=Object(i.useState)([]),l=Object(r.a)(a,2),p=l[0],g=l[1],y=Object(i.useState)(0),E=Object(r.a)(y,2),O=E[0],R=E[1],I=Object(i.useState)(0),N=Object(r.a)(I,2),q=N[0],W=N[1],D=Object(h.k)(),L=Object(i.useState)(!1),P=Object(r.a)(L,2),z=P[0],A=P[1],M=Object(i.useState)(!1),V=Object(r.a)(M,2),J=V[0],H=V[1];Object(i.useEffect)((function(){var t=Object(n.a)({},e.filters);t.page=O,e.parent&&(t.parents||(t.parents={id:e.parent._id,post_type:e.parent.post_type})),e.viewDrafts?t.status="draft":t.status="published",t.post_type=e.selectedType.slug,g([]),A(!0),t.keyword?f.a(t).then((function(t){g(t.resources),A(!1),t.resources.length>0?(W(t.total),e.parentTotal(t.total)):(W(0),e.parentTotal&&e.parentTotal(0))})):d.b(e.selectedType.slug,JSON.stringify(t)).then((function(t){g(t.resources),A(!1),t.resources.length>0&&(W(t.total),e.parentTotal&&e.parentTotal(t.total))}))}),[e.selectedType,e.filters,O,e.viewDrafts]),Object(i.useEffect)((function(){R(0)}),[e.selectedType,e.filters]);return c.a.createElement(S.a,{backend:C.a},c.a.createElement(w.a,{onDrop:function(e,t){return console.log(e,t)},onDragStart:function(){console.log("start")}},z&&c.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},c.a.createElement(B.a,{options:{loop:!0,autoplay:!0,animationData:_,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}},height:100,width:100})),0===p.length&&!z&&c.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},c.a.createElement("h3",null,"No se encontraron resultados")),p.length>0&&!z&&c.a.createElement(o.a,{pagination:!0,resources:p,page:O,setPage:R,total:q,type:e.type,selectedResources:e.selectedResources,perpage:20,handleClick:e.handleClick,setSelected:e.setSelected,style:{position:"absolute"},columns:[{destiny:"",label:""},{destiny:"metadata.firstLevel.title",label:"T\xedtulo"},{destiny:"accessRights",label:"Derechos de acceso"}],columnSolver:function(a,n){return c.a.createElement(c.a.Fragment,null,"metadata.firstLevel.title"===n.destiny&&c.a.createElement("span",null,a.metadata.firstLevel.title),"accessRights"===n.destiny&&c.a.createElement(c.a.Fragment,null,a.accessRights&&c.a.createElement(s.a,{size:"small",label:a.accessRights,className:t.access_chip})),""===n.destiny&&c.a.createElement(u.a,{disableGutters:!0,variant:"dense",style:{minHeight:"auto",display:"flex",justifyContent:"center",flexFlow:"wrap"}},c.a.createElement(s.a,{label:"",size:"small",icon:c.a.createElement(v.a,null),onClick:function(){return t=a.id,void("users"===e.selectedType?D.push("/admin/users/edit/".concat(t)):D.push("/cataloging/".concat(e.selectedType.slug,"/edit/").concat(t)));var t},className:t.chip_style}),c.a.createElement(s.a,{label:"",size:"small",icon:c.a.createElement(b.a,null),onClick:function(){return e=a.id,void m.a.fire({title:"\xbfEst\xe1s seguro?",text:"No podr\xe1s revertir esta acci\xf3n",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar"}).then((function(t){t.isConfirmed&&d.a(e).then((function(e){m.a.fire({title:"Eliminado",text:"El recurso ha sido eliminado",icon:"success",confirmButtonText:"Aceptar"}).then((function(){window.location.reload()}))})).catch((function(e){e.json().then((function(e){m.a.fire({title:"Error",text:e.msg,icon:"error",confirmButtonText:"Aceptar"})}))}))}));var e},className:t.chip_style}),c.a.createElement(s.a,{label:"Ver metadatos",size:"small",icon:c.a.createElement(j.a,null),onClick:function(){var e;e=a.id,H({id:e})},className:t.chip_style}),c.a.createElement(s.a,{label:"Ver recurso",size:"small",icon:c.a.createElement(x.a,null),onClick:function(){return e.handleClick(a)},className:t.chip_style})))}}),c.a.createElement(k.a,{id:"metadata-info",initialPosition:{x:0,y:0},style:{display:J?"block":"none"},offsetOrigin:e.offsetOrigin?e.offsetOrigin:{x:0,y:-157}},c.a.createElement(T.a,{resource:J,setMetadata:H}))))}},957:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(18),r=a(35),i=a(2),c=a.n(i),l=a(1380),o=function(e){var t=e.onDrop,a=e.children,o=Object(i.useRef)(null),s=Object(i.useState)({x:0,y:0}),u=Object(r.a)(s,2),d=u[0],f=u[1],p=Object(l.a)((function(){return{accept:"box",drop:function(e,a){var r=a.getClientOffset(),i=o.current.getBoundingClientRect();if(r){var c={x:r.x-i.left,y:r.y-i.top,mousePosition:Object(n.a)({},d)};return t(Object(n.a)(Object(n.a)({},e),{},{newPosition:c})),{newPosition:c}}}}}),[t]),m=Object(r.a)(p,2);m[0];return(0,m[1])(o),c.a.createElement("div",{ref:o,id:"droppable-area",style:{width:"100%",height:"100%",position:"relative",overflow:"visible"},onMouseDown:function(e){f({x:e.pageX,y:e.pageY})}},a)}},958:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(18),r=a(35),i=a(2),c=a.n(i),l=a(1381),o=a(1144),s=a(843),u=a(954),d=Object(s.a)((function(e){return{}})),f=function(e){var t=e.offsetOrigin,a=e.id,s=e.children,f=e.initialPosition,p=e.style,m=(d(),Object(i.useState)(f)),h=Object(r.a)(m,2),g=h[0],b=h[1],y=Object(i.useState)({x:0,y:0}),v=Object(r.a)(y,2),E=v[0],x=(v[1],Object(i.useState)({x:0,y:0})),O=Object(r.a)(x,2),j=O[0],w=O[1],k=Object(i.useState)(!0),S=Object(r.a)(k,2),C=(S[0],S[1],Object(i.useRef)(null)),T=document.getElementById("droppable-area"),R=Object(u.a)("position-".concat(a),{x:0,y:0}),B=Object(r.a)(R,2),_=B[0],F=B[1],I=Object(l.a)((function(e){return{type:"box",item:{id:a,position:g},collect:function(e){return{isDragging:!!e.isDragging(),item:e.getItem(),initialClientOffset:e.getInitialClientOffset(),differenceFromInitialOffset:e.getDifferenceFromInitialOffset(),clientOffset:e.getClientOffset()}},end:function(e,t){if(t.getDropResult()){var a=t.getDropResult().newPosition;a.x=a.x+j.x,a.y=a.y+j.y}}}})),N=Object(r.a)(I,3),q=N[0].isDragging,W=N[1],D=N[2];Object(i.useEffect)((function(){D&&D(Object(o.a)(),{captureDraggingState:!0})}),[D]);Object(i.useEffect)((function(){if(C&&_)if(0===_.x&&0===_.y){var e=document.getElementById("droppable-area").getBoundingClientRect(),t=C.current.getBoundingClientRect(),a=e.height/2-t.height/2;b({x:0,y:a}),F({x:0,y:L().y})}else b({x:_.x,y:_.y})}),[C]);var L=function(){var e=g.x-500,a=g.y-77;return t&&(e+=t.x,a+=t.y),e<0&&(e=0),a<0&&(a=0),T&&(e+C.current.offsetWidth>T.offsetWidth&&(e=T.offsetWidth-C.current.offsetWidth),a+C.current.offsetHeight>T.offsetHeight&&(a=T.offsetHeight-C.current.offsetHeight)),{x:e,y:a}};return W(C),c.a.createElement("div",{ref:C,style:Object(n.a)(Object(n.a)({},p),{},{position:"absolute",translate:"".concat(L().x,"px ").concat(L().y,"px"),scale:"".concat(q?1.01:1),boxShadow:q?"0 0 10px 0 rgba(150,150,150,0.5)":"0 0 5px 0 rgba(150,150,150,0.6)"}),onMouseDown:function(e){var t=C.current.getBoundingClientRect(),a=e.pageX-t.left,n=e.pageY-t.top;w({x:a,y:n})},onDrag:function(e){C.current.getBoundingClientRect();b({x:e.clientX-E.x-j.x,y:e.clientY-E.y-j.y,mousePosition:g.mousePosition}),F({x:e.clientX-E.x-j.x,y:e.clientY-E.y-j.y})},draggable:!0},s)}},959:function(e,t,a){"use strict";var n=a(35),r=a(2),i=a.n(r),c=a(937),l=a(969),o=a(843),s=a(1404),u=a(995),d=a.n(u),f=a(1001),p=a.n(f),m=Object(o.a)((function(e){return{scrollbar:{"&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:"#56749a",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:"#56749a"},"&::-webkit-scrollbar-thumb:active":{background:"#56749a"},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}},close:{"& .MuiChip-label":{display:"none"},"& svg":{margin:"0 !important"}},noborder:{border:"none"}}}));t.a=function(e){var t=m(),a=Object(r.useState)(!1),o=Object(n.a)(a,2),u=(o[0],o[1]),f=Object(r.useState)(null),h=Object(n.a)(f,2),g=h[0],b=h[1],y=Object(r.useState)(null),v=Object(n.a)(y,2),E=v[0],x=v[1];return Object(r.useEffect)((function(){if(u(!0),e.resource){if(E===e.resource.id)return void u(!1);c.e(e.resource.id).then((function(t){b(t),u(!1),x(e.resource.id)})).catch((function(e){console.log(e)}))}}),[e.resource]),i.a.createElement(i.a.Fragment,null,g&&i.a.createElement("div",{style:{background:"white"}},i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},i.a.createElement("div",null,e.history&&i.a.createElement(s.a,{label:"Ir al recurso",size:"small",onClick:function(){e.history.push("/detail/".concat(e.resource.id))},icon:i.a.createElement(p.a,null),style:{margin:3},variant:"outlined",className:"".concat(t.noborder)})),i.a.createElement(s.a,{label:"Cerrar",size:"small",onClick:function(){e.setMetadata(null)},variant:"outlined",icon:i.a.createElement(d.a,null),style:{margin:3,width:24,height:24},className:"".concat(t.close," ").concat(t.noborder)})),i.a.createElement(l.a,{data:g,className:t.scrollbar,resource:e.resource,labelAlign:"top",style:{width:370,height:300,overflowY:"auto"}})))}},962:function(e,t,a){"use strict";var n=a(202),r=a(35),i=a(2),c=a.n(i),l=a(843),o=a(930),s=a(1395),u=a(1396),d=a(1398),f=a(1394),p=a(1399),m=a(1385),h=a(1397),g=a(1391),b=a(1387);Object(l.a)((function(e){return{btn_color:{color:"#869bb7 !important",padding:"5px !important",width:"30px !important",height:"30px !important",margin:"0 2px !important",border:"1px solid #c6d0dd !important","&:hover":{color:"#fff !important",backgroundColor:"#56749a !important"},"& .MuiSvgIcon-root":{width:"14px !important"}}}}));function y(e){e.onSelectAllClick;var t=e.order,a=e.orderBy,n=(e.numSelected,e.rowCount,e.onRequestSort,e.headCells);return c.a.createElement(p.a,null,c.a.createElement(h.a,null,n.map((function(e){return c.a.createElement(d.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"normal",sortDirection:a===e.id&&t},e.label)}))))}function v(e){e.numSelected;return c.a.createElement(m.a,{rowsPerPage:e.perpage,rowsPerPageOptions:[],count:e.total,page:e.page,onPageChange:function(t,a){e.setPage(a)}})}t.a=function(e){var t=e.style,a=e.resources,l=e.pagination,p=e.columns,m=e.columnSolver,E=e.page,x=e.setPage,O=e.total,j=e.handleClick,w=e.perpage,k=e.type,S=e.selectedResources,C=c.a.useState(!1),T=Object(r.a)(C,2),R=T[0],B=(T[1],Object(i.useState)([])),_=Object(r.a)(B,2),F=_[0];_[1];return Object(i.useEffect)((function(){console.log(a)}),[]),c.a.createElement(c.a.Fragment,null,a.length>0&&c.a.createElement(c.a.Fragment,null,c.a.createElement(o.a,{sx:{width:"100%"},style:t||null},c.a.createElement(g.a,{sx:{width:"100%",mb:2}},c.a.createElement(f.a,null,c.a.createElement(s.a,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:R?"small":"medium",padding:"none"},c.a.createElement(y,{numSelected:F.length,headCells:"checkbox"===k?[{id:"checkbox",numeric:!1,disablePadding:!0,label:""}].concat(Object(n.a)(p)):p}),c.a.createElement(u.a,null,a.map((function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(h.a,{hover:!0,role:"checkbox",tabIndex:-1,key:e.id,style:j?{cursor:"pointer"}:{}},"checkbox"===k&&c.a.createElement(d.a,{component:"th",id:"checkbox",scope:"row",sx:{padding:"10px 10px"}},c.a.createElement(b.a,{color:"primary",checked:!!S&&S.includes(e.id)})),p.map((function(t){return c.a.createElement(d.a,{component:"th",id:t.destiny,scope:"row",onClick:j&&""!==t.destiny?function(){return j(e)}:null,key:t.destiny,sx:{padding:"10px 10px"}},m(e,t))}))),e.snap&&c.a.createElement(h.a,null,c.a.createElement(d.a,{component:"th",scope:"row",sx:{padding:"10px 10px"}},c.a.createElement(g.a,null,e.snap))))}))),l&&c.a.createElement(v,{page:E,setPage:x,total:O,perpage:w})))))))}},965:function(e,t,a){"use strict";a.r(t),a.d(t,"BloqueContenido",(function(){return ye})),a.d(t,"Main",(function(){return ve}));var n=a(35),r=a(2),i=a.n(r),c=a(50),l=a(138),o=a(941),s=a(940),u=a(843),d=a(926),f=a(201),p=a(943),m=a(938),h=a(1400),g=a(1388),b=a(1378),y=a(1386),v=a(1389),E=a(973),x=a.n(E),O=a(979),j=a.n(O),w=a(949),k=a.n(w),S=a(950),C=a.n(S),T=a(944),R=a(968),B=a(202),_=a(36),F=a(925),I=a(939),N=a(948),q=a(937),W=a(1006),D=a.n(W),L=a(946),P=a(947),z=a(18),A=a(1030),M=a(1038),V=a(1404),J=a(848),H=a(1136),Y=a(852),G=a(1402),X=a(955),U=a.n(X),K=a(448),Q=a(1385),Z=a(964),$=Z.c(Z.e),ee=Object(Y.a)((function(e){return{card:{margin:5,"&.deleted":{backgroundColor:"#f44336",color:"#fff",textDecoration:"line-through"}}}})),te=function(e){var t=ee(),a=Object(r.useState)([]),c=Object(n.a)(a,2),l=c[0],o=c[1],s=Object(r.useState)(!1),u=Object(n.a)(s,2),d=u[0],f=u[1],p=Object(r.useState)(null),h=Object(n.a)(p,2),g=h[0],b=h[1];Object(r.useEffect)((function(){if(console.log(e.file),null!==e.file){var t=Object(z.a)({},e.file);"displayName"in t||(t.displayName=t.name),"accessRights"in t||(t.accessRight="public"),b(t)}}),[]),Object(r.useEffect)((function(){m.b().then((function(e){o([{id:"public",term:"P\xfablica"}].concat(Object(B.a)(e.options)))}))}),[e.file]);var y=function(t){e.onUpdate(t)};return i.a.createElement(A.a,{className:"".concat(t.card," ").concat(e.file.deleted?"deleted":""),key:e.key},i.a.createElement(M.a,{title:i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},i.a.createElement("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"calc(100% - 200px)"}},e.file.displayName),i.a.createElement("div",null,i.a.createElement(V.a,{label:e.file.tag,style:{marginLeft:5,marginRight:15,backgroundColor:$(e.file.tag),color:"#fff"},size:"small"}),i.a.createElement(G.a,{onClick:function(){e.onDeleted(e.file)},size:"small"},i.a.createElement(U.a,null)))),style:{padding:5},disableTypography:!0,action:i.a.createElement(i.a.Fragment,null,i.a.createElement(G.a,{onClick:function(){f(!d)}},i.a.createElement(K.a,null)))}),i.a.createElement(J.a,{in:d},g&&i.a.createElement(H.a,{style:{padding:5}},i.a.createElement(I.o,{name:"Nombre del archivo",value:g.displayName,handleChange:function(e){var t=Object(z.a)({},g);t.displayName=e.target.value,b(t),y(t)}}),i.a.createElement(I.l,{name:"Derechos de acceso",options:l.map((function(e){return{value:e.id,label:e.term}})),value:g.accessRights?g.accessRights:"public",handleChange:function(e){var t=Object(z.a)({},g);t.accessRights=e.target.value,b(t),y(t)}}))))},ae=function(e){ee();var t=Object(r.useState)([]),a=Object(n.a)(t,2),c=a[0],l=a[1],o=Object(r.useState)(0),s=Object(n.a)(o,2),u=s[0],d=s[1],f=Object(r.useState)(0),p=Object(n.a)(f,2),m=p[0],h=p[1];return Object(r.useEffect)((function(){q.f(e.resourceId).then((function(e){l(e.data),h(e.total)})).catch((function(e){console.log(e)}))}),[e.resourceId]),i.a.createElement(i.a.Fragment,null,c.map((function(t,a){return i.a.createElement(i.a.Fragment,null,i.a.createElement(te,{file:t,key:a,onDeleted:function(){e.deleteFile(t)},onUpdate:function(t){e.updateFile(t)}}))})),i.a.createElement(Q.a,{rowsPerPage:10,rowsPerPageOptions:[],count:m,page:u,onPageChange:function(e,t){d(t)},sx:{padding:0,display:"block"}}))},ne=a(1013),re=a.n(ne),ie=a(1012),ce=a.n(ie),le=a(1011),oe=a.n(le),se=a(1010),ue=a.n(se),de=a(203),fe=a.n(de),pe=Object(u.a)((function(e){return{columnas:{display:"flex",height:"calc(100vh - 170px)"},alert_detail:{fontSize:13,background:"#f27474",color:"white",padding:"2px",borderRadius:"5px",margin:"2px"}}})),me=Object(_.o)((function(e){var t=pe(),a=i.a.useState(null),c=Object(n.a)(a,2),l=c[0],o=c[1],s=i.a.useState(!1),u=Object(n.a)(s,2),p=u[0],m=u[1],h=i.a.useState({}),g=Object(n.a)(h,2),b=g[0],y=g[1],v=i.a.useState([]),E=Object(n.a)(v,2),x=E[0],O=E[1],j=i.a.useState({}),w=Object(n.a)(j,2),k=w[0],S=w[1],C=i.a.useState([]),T=Object(n.a)(C,2),_=T[0],W=T[1],z=i.a.useState([]),A=Object(n.a)(z,2),M=A[0],V=A[1],J=i.a.useState(1),H=Object(n.a)(J,2),Y=H[0],G=H[1];Object(r.useEffect)((function(){e.match.params.id?(m(!0),q.e(e.match.params.id).then((function(t){t&&(t.msg?fe.a.fire({title:"Error",text:t.msg,icon:"error",confirmButtonText:"Aceptar"}).then((function(){K("/cataloging/".concat(e.selectedType.slug))})):(m(!0),t.files=[],y(t),W([]),t.parents&&o(t.parents[0]),O(t.parents)))})).catch((function(t){t.json().then((function(t){fe.a.fire({title:"Error!",text:t.msg,icon:"error",confirmButtonText:"Aceptar"}).then((function(){K("/cataloging/".concat(e.selectedType.slug))}))}))}))):(m(!1),U())}),[e.match.params]),Object(r.useEffect)((function(){if(e.selectedType){var t=e.selectedType.metadata.fields,a=X(t);V(a)}}),[e.selectedType]);var X=function(e){var t=[],a=[];return e.forEach((function(e,n){"separator"===e.type?(t.push(a),(a=[]).push(e)):a.push(e)})),t.push(a),t},U=function(){var t={files:[]};t.post_type=e.selectedType.slug,t.parents=[l],y(t)},K=function(t){e.history.push("".concat(t))},Q=function(e,t){var a,n=t.split("."),r=e,i=Object(R.a)(n);try{for(i.s();!(a=i.n()).done;){if(void 0===(r=r[a.value]))return}}catch(c){i.e(c)}finally{i.f()}return r},Z=function(e,t,a){var n,r=t.split("."),i=0,c=Object(R.a)(r);try{for(c.s();!(n=c.n()).done;){var l=n.value;++i===r.length?e[l]=a:e=e[l]}}catch(o){c.e(o)}finally{c.f()}};return i.a.createElement(i.a.Fragment,null,Object.keys(b).length>0&&i.a.createElement(d.a,{className:t.columnas},e.selectedType.parentsTypes.length>0||e.selectedType.hierarchical?i.a.createElement(i.a.Fragment,null,i.a.createElement(ye,{style:{width:"calc(440px)",height:"calc(100vh - 170px)",overflow:"auto"},title:"Estructura de carpetas para: ".concat(e.selectedType.name),topBar:i.a.createElement(P.a,{variant:"light"})},i.a.createElement(L.a,{parents:e.selectedType.parentsTypes,setFondo:function(e,t){l&&t?l.id===e.id?(o(null),O([])):(o(e),O([].concat(Object(B.a)(t),[e]))):t?(o(e),O([].concat(Object(B.a)(t),[e]))):l?l.id===e.id&&(o(null),O([])):(o(e),O([e]))},activeTypes:Object(B.a)(e.selectedType.parentsTypes),childrenEditing:!0,selected:l?[l]:[],path:x}))):i.a.createElement(i.a.Fragment,null),i.a.createElement(ye,{style:{width:"calc(100% - 470px)",maxHeight:"calc(100vh - 170px)",overflow:"auto",maxWidth:"750px",position:"relative"},title:"Nuevo recurso para: ".concat(e.selectedType.name)},_&&i.a.createElement(ae,{files:_,resourceId:e.match.params.id,deleteFile:function(e){var t=_.findIndex((function(t){return t.id===e.id}));if(-1!==t){var a=Object(B.a)(_);a[t].deleted=!a[t].deleted,W(Object(B.a)(a))}else{var n=_;e.deleted=!0,n.push(e),W(Object(B.a)(n))}},updateFile:function(e){var t=_.findIndex((function(t){return t.id===e.id}));if(-1!==t){var a=Object(B.a)(_);a[t]=e,W(Object(B.a)(a))}else{var n=_;n.push(e),W(Object(B.a)(n))}}}),i.a.createElement(N.c,{initialValues:b,onSubmit:function(a,n){var r=n.setSubmitting;p?(r(!1),fe.a.fire({title:"\xbfEst\xe1s seguro?",text:"Se modificar\xe1 el recurso",icon:"warning",showCancelButton:!0}).then((function(n){if(n.isConfirmed){a.parents=l?[{id:l.id,post_type:l.post_type}]:null,a.parent=l?[{id:l.id,post_type:l.post_type}]:null,(void 0===a.accessRights||"none"===a.accessRights)&&(a.accessRights="public");var r=new FormData,c=[],o=[],s=[];a.files?(a.filesIds=[],a.files.forEach((function(e,t){"string"!==typeof e.file&&e.file&&(r.append("files",e.file),a.filesIds.push({file:t,filetag:e.id}))})),_.forEach((function(e){e.deleted?o.push(e.id):(c.push(e.id),s.push(e))})),a.files=c,a.deletedFiles=o,a.updatedFiles=s):a.files=[],r.append("data",JSON.stringify(a)),q.i(e.match.params.id,r).then((function(t){K("/cataloging/".concat(e.selectedType.slug))})).catch((function(e){e.json().then((function(e){e.errors&&S(e.errors);var a=Object.keys(e.errors).map((function(a){return D.a.renderToString(i.a.createElement("div",{className:t.alert_detail},"".concat(a,": ").concat(e.errors[a])))}));a=a.join(""),fe.a.fire({title:"Error!",html:"".concat(e.msg," ").concat(a),icon:"error",confirmButtonText:"Ok"})}))}))}}))):(r(!1),fe.a.fire({title:"\xbfEst\xe1s seguro?",text:"Se crear\xe1 un nuevo recurso",icon:"warning",showCancelButton:!0}).then((function(t){if(t.isConfirmed){a.parents=l?[{id:l.id,post_type:l.post_type}]:null,a.parent=l?[{id:l.id,post_type:l.post_type}]:null,(void 0===a.accessRights||"none"===a.accessRights)&&(a.accessRights="public");var n=new FormData;a.filesIds=[],a.files.forEach((function(e,t){n.append("files",e.file),a.filesIds.push({file:t,filetag:e.id})})),a.files=[],n.append("data",JSON.stringify(a)),q.h(n).then((function(t){K("/cataloging/".concat(e.selectedType.slug))})).catch((function(e){e.json().then((function(e){e.errors&&S(e.errors),fe.a.fire({title:"Error!",text:e.msg,icon:"error",confirmButtonText:"Ok"})}))}))}})))}},(function(t){var a=t.values,n=(t.errors,t.touched,t.handleChange),r=t.handleBlur,c=t.handleSubmit,l=(t.isSubmitting,t.setFieldValue);return i.a.createElement("form",{onSubmit:c},e.selectedType.metadata&&i.a.createElement(i.a.Fragment,null,M[Y-1].map((function(e,t){return i.a.createElement(i.a.Fragment,null,"file"===e.type&&i.a.createElement(I.h,{name:e.label,key:e.filetag,id:e.filetag,values:a,required:e.required,change:l}),"text"===e.type&&i.a.createElement(I.o,{name:e.label,id:e.destiny,handleChange:n,handleBlur:r,value:Q(a,e.destiny),required:e.required,errors:k[e.destiny]}),"text-area"===e.type&&i.a.createElement(I.n,{name:e.label,id:e.destiny,handleChange:n,handleBlur:r,value:Q(a,e.destiny),required:e.required,errors:k[e.destiny]}),"select"===e.type&&i.a.createElement(I.i,{name:e.label,id:e.destiny,handleChange:n,handleBlur:r,value:Q(a,e.destiny)?Q(a,e.destiny):"none",required:e.required,options:e.list,errors:k[e.destiny],destiny:e.destiny}),"select-multiple2"===e.type&&i.a.createElement(I.f,{handleChange:function(t){l(e.destiny,t)},id:e.destiny,name:e.label,field:e,required:e.required,value:Q(a,e.destiny),errors:k[e.destiny]}),"author"===e.type&&i.a.createElement(N.b,{name:e.destiny},(function(t){var n=t.insert,r=t.remove,c=t.push,o=t.move;return i.a.createElement(I.d,{name:e.label,id:e.destiny,insert:n,remove:r,push:c,setFieldValue:function(t){l(e.destiny,t)},move:o,value:Q(a,e.destiny)?Q(a,e.destiny):[],required:e.required,errors:k[e.destiny]})})),"simple-date"===e.type&&i.a.createElement(I.m,{name:e.label,id:e.destiny,setFieldValue:function(t){l(e.destiny,t)},handleBlur:r,value:Q(a,e.destiny),required:e.required,errors:k[e.destiny]}),"relation"===e.type&&i.a.createElement(I.k,{name:e.label,id:e.destiny,value:Q(a,e.destiny),required:e.required,errors:k[e.destiny],postType:e,setFieldValue:function(t){l(e.destiny,t)}}),"checkbox"===e.type&&i.a.createElement(I.g,{name:e.label,id:e.destiny,handleChange:function(t){l(e.destiny,t)},handleBlur:r,value:Q(a,e.destiny),required:e.required,errors:k[e.destiny]}),"number"===e.type&&i.a.createElement(I.j,{name:e.label,id:e.destiny,handleChange:n,handleBlur:r,value:Q(a,e.destiny),required:e.required,errors:k[e.destiny]}),"separator"===e.type&&i.a.createElement(f.a,{variant:"h6",style:{marginTop:10,marginBottom:10}},e.label))})),i.a.createElement(d.a,{style:{display:"flex",justifyContent:"space-between",gap:10,marginTop:10,position:"sticky",bottom:0,backgroundColor:"white"}},i.a.createElement(d.a,null,i.a.createElement(F.a,{type:"button",variant:"contained",onClick:function(){return K("/cataloging/"+e.selectedType.slug)},style:{margin:5}},"Cancelar"),i.a.createElement(F.a,{variant:"contained",type:"button",onClick:function(){Z(a,"status","draft"),c()},style:{margin:5},startIcon:i.a.createElement(ue.a,null)},"Guardar"),(e.user.roles.includes("publisher")||e.user.roles.includes("admin"))&&i.a.createElement(F.a,{variant:"contained",type:"button",onClick:function(){Z(a,"status","published"),c()},style:{margin:5},startIcon:i.a.createElement(oe.a,null)},"Publicar")),M.length>1&&i.a.createElement(d.a,null,i.a.createElement(F.a,{variant:"contained",onClick:function(){G(1===Y?1:Y-1)},disabled:1===Y,style:{margin:5},startIcon:i.a.createElement(ce.a,null)},"Anterior"),i.a.createElement(F.a,{variant:"contained",onClick:function(){Y===M.length?G(M.length):G(Y+1)},disabled:Y===M.length,style:{margin:5},endIcon:i.a.createElement(re.a,null)},"Siguiente")))))})))))})),he=a(977),ge=(a(263),a(954)),be=Object(u.a)((function(e){return{bloque:{padding:"10px",backgroundColor:"rgba(255,255,255,.9)",margin:5,width:"100%",height:"100%",overflow:"auto",position:"relative",borderRadius:10,border:"3px solid #fff","&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:"#56749a",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:"#56749a"},"&::-webkit-scrollbar-thumb:active":{background:"#56749a"},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}},tituloBloque:{top:0,fontSize:15,fontWeight:"bold",padding:"10px 15px",position:"sticky",zIndex:10,width:"100%",left:0,background:"#e6e6e6",borderTopLeftRadius:10,borderTopRightRadius:10,color:"#56749a",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},breadcrumbs:{padding:"5px 15px",background:"#56749a",position:"sticky",color:"#fff",borderBottomLeftRadius:10,borderBottomRightRadius:10,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},linkBreadcrumb:{color:"#fff",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:200,display:"inline-block","&:hover":{color:"#fff"}},selectedBread:{color:"#fff !important",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:150,backgroundColor:"rgba(255,255,255,.2)",display:"inline-block",padding:"0 5px",borderRadius:2},columnas:{display:"flex",height:"calc(100vh - 150px)"}}})),ye=function(e){var t=be();return i.a.createElement(d.a,{className:t.bloque,style:e.style},e.title&&i.a.createElement(d.a,{className:t.tituloBloque},e.title),e.topBar&&i.a.createElement(i.a.Fragment,null,e.topBar),e.children)},ve=function(e){var t=Object(r.useState)([]),a=Object(n.a)(t,2),c=a[0],l=a[1],u=Object(r.useState)(null),d=Object(n.a)(u,2),E=d[0],O=d[1],w=Object(r.useState)(!1),S=Object(n.a)(w,2),R=S[0],B=S[1],_=Object(r.useState)(!1),F=Object(n.a)(_,2),I=F[0],N=F[1],q=Object(r.useState)(null),W=Object(n.a)(q,2),D=W[0],L=W[1],P=Object(r.useState)(null),z=Object(n.a)(P,2),A=z[0],M=z[1],V=Object(ge.a)("viewDrafts",!1),J=Object(n.a)(V,2),H=J[0],Y=J[1];Object(r.useEffect)((function(){G()}),[e.match]);var G=function(){var t=e.match.path.split("/").filter((function(e){return""!==e}));t.length>2&&"new"===t[2]?(N(!0),L(null)):t.length>2&&"edit"===t[2]?(N(!0),L(t[3])):(N(!1),L(null))};Object(r.useEffect)((function(){e.match.params.slug?p.c(e.match.params.slug).then((function(e){O(e)})):m.d().then((function(t){e.history.push("/cataloging/"+t.value)}))}),[e.match]),Object(r.useEffect)((function(){p.b().then((function(e){l(e)})),G()}),[]);return i.a.createElement(s.a,null,i.a.createElement(o.a,{userRoles:e.user.roles,list:function(){var t=[];return(e.user.roles.includes("admin")||e.user.roles.includes("editor"))&&!I&&E&&t.push({name:"Agregar recursos",icon:i.a.createElement(k.a,null),action:"new",callback:function(){e.history.push("/cataloging/".concat(E.slug,"/new")),N(!0)}}),(e.user.roles.includes("admin")||e.user.roles.includes("editor"))&&!I&&E&&t.push({name:"Descargar inventario",icon:i.a.createElement(i.a.Fragment,null,i.a.createElement(x.a,null),i.a.createElement(j.a,null)),callback:function(){fe.a.fire({title:"\xbfEst\xe1s seguro?",text:"Se generar\xe1 un archivo con el inventario de la categor\xeda seleccionada",icon:"warning",showCancelButton:!0}).then((function(e){e.isConfirmed&&m.a("inventoryMaker",JSON.stringify({post_type:E.slug,parent:A,status:H?"draft":"published"})).then((function(e){fe.a.fire({title:"Procesamiento iniciado",text:e.msg,icon:"success",confirmButtonText:"Aceptar"})})).catch((function(e){e.json().then((function(e){fe.a.fire({title:"Error",text:e.msg,icon:"error",confirmButtonText:"Aceptar"})}))}))}))}}),(e.user.roles.includes("admin")||e.user.roles.includes("editor"))&&I&&E&&t.push({name:"Volver",icon:i.a.createElement(C.a,null),callback:function(){e.history.push("/cataloging/".concat(E.slug)),N(!1)}}),t}()}),i.a.createElement(ye,{style:{width:"calc(100% - 20px)",padding:"2px"}},i.a.createElement(h.a,{style:{minHeight:"auto"}},i.a.createElement(g.a,{variant:"outlined",style:{marginRight:15,borderRadius:50},onClick:function(){return B(!R)}},"Ver informaci\xf3n"),i.a.createElement(b.a,{size:"small",onChange:function(t){O(null),B(!1),I?e.history.push("/cataloging/"+t.target.value+"/new"):e.history.push("/cataloging/"+t.target.value)},value:E?E.slug:"",style:{borderRadius:50,height:32,textTransform:"uppercase",fontSize:11}},c.map((function(e){return i.a.createElement(y.a,{value:e.slug},e.name)}))),i.a.createElement(f.a,{style:{marginLeft:15}},"Ver borradores:"),i.a.createElement(v.a,{checked:H,onChange:function(){return Y(!H)}}))),R&&E&&i.a.createElement(ye,{style:{width:"calc(100% - 20px)",maxWidth:500},title:"Acerca de ".concat(E.name)},i.a.createElement(T.c,{selectedType:E})),I&&E&&!R&&!D&&i.a.createElement(me,{user:e.user,selectedType:E}),I&&E&&!R&&D&&i.a.createElement(me,{user:e.user,selectedType:E,selectedResource:D}),!I&&E&&!R&&i.a.createElement(he.a,{viewDrafts:H,history:e.history,selectedType:E,setSelected:M}))};t.default=Object(c.b)((function(e){return{user:e.auth.user}}),l.a)(ve)},969:function(e,t,a){"use strict";var n=a(18),r=a(2),i=a.n(r),c=a(1403),l=a(939);t.a=function(e){return i.a.createElement(c.a,{style:Object(n.a)({padding:"10px",width:"100%",maxWidth:"750px"},e.style),className:e.className},e.data.fields.map((function(t,a){return i.a.createElement(l.b,{label:t.label,value:t.value,labelAlign:e.labelAlign,type:t.type,redirect:e.redirect})})))}},977:function(e,t,a){"use strict";var n=a(16),r=a(18),i=a(202),c=a(35),l=a(2),o=a.n(l),s=a(50),u=a(138),d=a(965),f=a(947),p=a(956),m=a(946),h=a(843),g=a(926),b=Object(h.a)((function(e){return{columnas:{display:"flex",height:"calc(100vh - 150px)"}}}));t.a=Object(s.b)((function(e){return{user:e.auth.user}}),u.a)((function(e){var t=b(),a=Object(l.useState)(null),s=Object(c.a)(a,2),u=s[0],h=s[1],y=Object(l.useState)(null),v=Object(c.a)(y,2),E=v[0],x=v[1],O=Object(l.useState)([]),j=Object(c.a)(O,2),w=j[0],k=j[1],S=Object(l.useState)({}),C=Object(c.a)(S,2),T=C[0],R=C[1],B=Object(l.useState)(0),_=Object(c.a)(B,2),F=_[0],I=_[1],N=Object(l.useState)([]),q=Object(c.a)(N,2),W=(q[0],q[1],Object(l.useState)("")),D=Object(c.a)(W,2),L=D[0],P=D[1],z=Object(l.useState)(""),A=Object(c.a)(z,2),M=A[0],V=A[1];Object(l.useEffect)((function(){e.selectedType.parentsTypes?e.selectedType.parentsTypes.length>0?h("multiple"):e.selectedType.hierarchical?h("tree"):h("single"):h(null)}),[e.selectedType]),Object(l.useEffect)((function(){e.setSelected&&E?e.setSelected(E.id):e.setSelected&&e.setSelected(null)}),[E]),Object(l.useEffect)((function(){J("keyword",L)}),[L]),Object(l.useEffect)((function(){x(null),k([]),J("parents",null),J("treeKeyword",M)}),[M]),Object(l.useEffect)((function(){J("status",e.viewDrafts?"draft":"published")}),[e.viewDrafts]);var J=function(e,t){R(Object(r.a)(Object(r.a)({},T),{},Object(n.a)({},e,t)))};return o.a.createElement(o.a.Fragment,null,u&&o.a.createElement(o.a.Fragment,null,"single"===u&&o.a.createElement(d.BloqueContenido,{style:{width:"calc(100% - 20px)",height:"calc(100vh - 170px)",overflow:"auto"},title:"Buscar recursos para: ".concat(e.selectedType.name),topBar:o.a.createElement(f.a,{total:F,onSearchSubmit:function(e){P(e)}})},o.a.createElement(p.a,{selectedType:e.selectedType,type:e.type,filters:T,viewDrafts:e.viewDrafts,parentTotal:I,handleClick:function(t){e.history?e.history.push("/detail/".concat(t.id)):"checkbox"===e.type&&e.setSelectedResources(t.id)},selectedResources:e.selectedResources})),"multiple"===u&&o.a.createElement(g.a,{className:t.columnas},o.a.createElement(d.BloqueContenido,{style:{width:"calc(440px)",height:"calc(100vh - 170px)",overflow:"auto"},title:"Estructura de carpetas para: ".concat(e.selectedType.name),topBar:o.a.createElement(f.a,{variant:"light",onSearchSubmit:function(e){V(e)}})},o.a.createElement(m.a,{parents:e.selectedType.parentsTypes,setFondo:function(e,t){E&&t?E.id===e.id?(x(null),k([]),J("parents",null)):(x(e),k([].concat(Object(i.a)(t),[e])),J("parents",e)):t?(x(e),k([].concat(Object(i.a)(t),[e])),J("parents",e)):E&&E.id===e.id?(x(null),k([]),J("parents",null)):(x(e),k([e]),J("parents",e))},activeTypes:Object(i.a)(e.selectedType.parentsTypes),childrenEditing:!1,selected:E?[E]:[],path:w,filters:T})),o.a.createElement(d.BloqueContenido,{style:{minWidth:800,width:"calc(100% - 470px)",height:"calc(100vh - 170px)",overflow:"auto"},title:"Buscar recursos para: ".concat(e.selectedType.name),topBar:o.a.createElement(f.a,{total:F,onSearchSubmit:function(e){P(e)}})},o.a.createElement(p.a,{selectedType:e.selectedType,filters:T,type:e.type,parentTotal:I,viewDrafts:e.viewDrafts,handleClick:function(t){e.history?e.history.push("/detail/".concat(t.id)):"checkbox"===e.type&&e.setSelectedResources(t.id)},selectedResources:e.selectedResources})))))}))}}]);
//# sourceMappingURL=17.2d6b6340.chunk.js.map