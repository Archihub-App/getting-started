"use strict";(self.webpackChunkarchihub=self.webpackChunkarchihub||[]).push([[9464],{53171:function(e,t,i){i(65043);var n=i(26240),r=i(94777),a=i(70579);t.A=function(e){var t=(0,n.A)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{style:{textAlign:"center",padding:10,width:"100%"},children:(0,a.jsx)(r.A,{style:{fontSize:50,color:t.palette.primary.light}})})})}},72378:function(e,t,i){i.d(t,{EL:function(){return s},WB:function(){return c}});var n=i(89379),r=(i(65043),i(26240)),a=i(81551),l=i(83003),o=i(70579),s=function(e){var t=(0,r.A)(),i=(0,l.d4)((function(e){return e.app.isDarkMode})),s=(0,a.A)((function(e){return{bloque:{"&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:t.palette.primary.main,border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:t.palette.primary.main},"&::-webkit-scrollbar-thumb:active":{background:t.palette.primary.main},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}}}}))();return(0,o.jsx)("div",{id:e.id,style:(0,n.A)({width:"100%",height:"calc(100% - 40px)",display:"flex",margin:"10px",borderRadius:"10px",padding:"10px",background:i?t.palette.grey[900]:"white",boxShadow:"0px 0px 1px rgba(0,0,0,0.1)",justifyContent:"center",alignItems:"center",alignContent:"center",flexWrap:"wrap"},e.style),className:s.bloque,onMouseDown:e.onMouseDown,onScroll:e.onScroll,children:e.children})},c=function(e){var t=(0,r.A)(),i=(0,a.A)((function(e){return{bloque:{"&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:t.palette.grey[500],border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:t.palette.grey[500]},"&::-webkit-scrollbar-thumb:active":{background:t.palette.grey[500]},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}}}}))();return(0,o.jsx)("div",{id:e.id,style:(0,n.A)({padding:10,backgroundColor:t.palette.grey[100],borderRadius:5,color:t.palette.grey[600],height:100,overflow:"auto",width:"100%"},e.style),className:i.bloque,children:e.children})};t.Ay=function(e){var t=e.children,i=e.style;e.onScroll;return(0,o.jsx)("section",{style:(0,n.A)({display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh"},i),children:t})}},15089:function(e,t,i){var n=i(89379),r=i(5544),a=i(65043),l=i(26240),o=i(83003),s=i(70579);t.A=function(e){var t=(0,l.A)(),i=(0,a.useRef)(null),c=(0,a.useState)(0),d=(0,r.A)(c,2),u=d[0],p=d[1],g=(0,o.d4)((function(e){return e.app.isDarkMode}));return(0,a.useEffect)((function(){!function(){for(var t=5,n=0;n<u;n++)i.current.innerHTML=e.list[n].label,t+=i.current.offsetWidth;i.current.innerHTML=e.list[u].label,i.current.style.left="".concat(t,"px")}()}),[u]),(0,a.useEffect)((function(){if(e.value){var t=e.list.findIndex((function(t){return t.value===e.value}));t>=0&&p(t)}}),[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{style:(0,n.A)({display:"flex",alignItems:"center",background:g?t.palette.grey[800]:t.palette.grey[100],borderRadius:"50px",marginLeft:"10px",marginRight:"10px",padding:"5px",position:"relative",overflow:"hidden"},e.style),children:[(0,s.jsx)("div",{ref:i,style:{position:"absolute",padding:"7px",borderRadius:"50px",cursor:"pointer",background:t.palette.primary.main,color:"transparent",transition:"all 0.25s ease"}}),e.list.map((function(i,n){return(0,s.jsx)("div",{style:{position:"relative",padding:"7px",borderRadius:"50px",cursor:"pointer",color:u===n?"white":t.palette.secondary.contrastText},onClick:function(){p(n),e.onChange&&e.onChange(i)},children:i.label},n)}))]})})}},64904:function(e,t,i){i.d(t,{M:function(){return a}});var n=i(5544),r=i(65043),a=function(e,t){var i,a=r.useState(null!==(i=JSON.parse(localStorage.getItem(e)))&&void 0!==i?i:t),l=(0,n.A)(a,2),o=l[0],s=l[1];return r.useEffect((function(){localStorage.setItem(e,JSON.stringify(o))}),[o,e]),[o,s]}},29464:function(e,t,i){i.d(t,{M:function(){return F},n:function(){return S}});var n=i(89379),r=i(64467),a=i(60436),l=i(5544),o=i(65043),s=i(72378),c=i(91181),d=i(76445),u=i(81551),p=i(16702),g=i(43845),f=i(55263),y=i(51962),h=i(99070),m=i(4598),v=i(73216),x=i(83003),b=i(85211),A=i(26240),w=i(99246),k=i(24394),j=i(70579),C=(0,u.A)((function(e){return{columnas:{display:"flex",height:"calc(100vh - 150px)"}}})),S=function(e){var t,i,s,c,d,u,v,C,S,F,R=(0,o.useState)(-1),_=(0,l.A)(R,2),B=_[0],M=_[1],I=(0,x.d4)((function(e){return e.app.filters})),D=(0,x.wA)(),L=(0,A.A)(),T=(0,x.d4)((function(e){return e.app.isDarkMode})),N=(0,w.A)();return(0,o.useEffect)((function(){e.forms&&M(0)}),[]),(0,j.jsxs)(p.A,{style:{marginTop:10,width:"100%"},children:[(0,j.jsx)(p.A,{style:{marginLeft:50,marginBottom:20},children:e.forms.forms.map((function(e,t){return(0,j.jsx)(g.A,{label:e.name,sx:{marginRight:2,marginBottom:2,backgroundColor:B===t?L.palette.primary.light:"transparent",color:B===t?L.palette.primary.main:T?L.palette.grey[300]:L.palette.grey[700]}},t)}))}),(0,j.jsxs)(p.A,{sx:{width:"100%",padding:"20px",backgroundColor:T?L.palette.grey[800]:"#f0f0f0",borderRadius:"10px",boxShadow:T?"0px 0px 10px rgba(0, 0, 0, 0.5)":"0px 0px 10px rgba(0, 0, 0, 0.1)",marginBottom:20,display:"block",columnCount:2,columnGap:20,columnFill:"balance","& .span-all":{columnSpan:"all",display:"block",marginBottom:2}},children:[(0,j.jsxs)(p.A,{className:"span-all",children:[(0,j.jsx)(m.A,{checked:null===(t=I[e.view])||void 0===t||null===(i=t.activeFilters)||void 0===i?void 0:i.map((function(e){return e.destiny})).includes("files"),onClick:function(){var t,i;if(null!==(t=I[e.view])&&void 0!==t&&null!==(i=t.activeFilters)&&void 0!==i&&i.map((function(e){return e.destiny})).includes("files")){var n=I[e.view].activeFilters?I[e.view].activeFilters:[],r=(0,b.e)(I,e.view,"activeFilters",n.filter((function(e){return"files"!==e.destiny})));D((0,b.vm)(r))}else{var l=I[e.view].activeFilters?I[e.view].activeFilters:[],o=(0,b.e)(I,e.view,"activeFilters",[].concat((0,a.A)(l),[{destiny:"files"}]));D((0,b.vm)(o))}}}),(0,j.jsx)("label",{style:{color:T?L.palette.grey[300]:L.palette.grey[700]},children:N.formatMessage({id:"cataloging.filterByFiles"})})]}),(0,j.jsx)(p.A,{style:{width:"100%"},className:"span-all",children:(0,j.jsxs)(f.A,{style:{minHeight:"auto",height:"auto",borderBottom:"1px solid rgba(0,0,0,0.2)",backgroundColor:null!==(s=I[e.view])&&void 0!==s&&null!==(c=s.activeFilters)&&void 0!==c&&c.map((function(e){return e.destiny})).includes("ident")?L.palette.primary.light:"transparent"},children:[(0,j.jsx)(y.A,{checked:null===(d=I[e.view])||void 0===d||null===(u=d.activeFilters)||void 0===u?void 0:u.map((function(e){return e.destiny})).includes("ident"),sx:{padding:"2px"},id:"check_ident",onClick:function(t){if(t.target.checked){var i=I[e.view].activeFilters?I[e.view].activeFilters:[],n=(0,b.e)(I,e.view,"activeFilters",[].concat((0,a.A)(i),[{destiny:"ident"}]));D((0,b.vm)(n))}else{var r=I[e.view].activeFilters?I[e.view].activeFilters:[],l=(0,b.e)(I,e.view,"activeFilters",r.filter((function(e){return"ident"!==e.destiny})));D((0,b.vm)(l))}},style:{color:null!==(v=I[e.view])&&void 0!==v&&null!==(C=v.activeFilters)&&void 0!==C&&C.map((function(e){return e.destiny})).includes("ident")?L.palette.primary.main:T?L.palette.grey[300]:L.palette.grey[700]}}),(0,j.jsx)("label",{htmlFor:"check_ident",style:{cursor:"pointer",width:"100%",paddingTop:"10px",paddingBottom:"10px",color:null!==(S=I[e.view])&&void 0!==S&&null!==(F=S.activeFilters)&&void 0!==F&&F.map((function(e){return e.destiny})).includes("ident")?L.palette.primary.main:T?L.palette.grey[300]:L.palette.grey[700]},children:N.formatMessage({id:"general.identifier"})})]})}),B>=0&&(0,j.jsx)(j.Fragment,{children:e.forms.fields[B].map((function(t,i){var l,o,s,c,d,u,g,m,v,x,A,w,C,S,F,R;if("text"===t.type||"text-area"===t.type||"simple-date"===t.type||"location"===t.type)return(0,j.jsxs)(p.A,{style:(0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)({width:"100%"},"width","100%"),"marginBottom",2),"breakInside","avoid"),"pageBreakInside","avoid"),"display","block"),children:[(0,j.jsxs)(f.A,{style:{minHeight:"auto",height:"auto",borderBottom:"1px solid rgba(0,0,0,0.2)",backgroundColor:null!==(l=I[e.view])&&void 0!==l&&null!==(o=l.activeFilters)&&void 0!==o&&o.map((function(e){return e.destiny})).includes(t.destiny)?L.palette.primary.light:"transparent"},children:[(0,j.jsx)(y.A,{checked:null===(s=I[e.view])||void 0===s||null===(c=s.activeFilters)||void 0===c?void 0:c.map((function(e){return e.destiny})).includes(t.destiny),sx:{padding:"2px"},id:"check_".concat(i),onClick:function(i){if(i.target.checked){var r=I[e.view].activeFilters?I[e.view].activeFilters:[],l=(0,n.A)({},t);"simple-date"===t.type&&(l.range=[1500,(new Date).getFullYear()]);var o=(0,b.e)(I,e.view,"activeFilters",[].concat((0,a.A)(r),[l]));D((0,b.vm)(o))}else{var s=I[e.view].activeFilters?I[e.view].activeFilters:[],c=(0,b.e)(I,e.view,"activeFilters",s.filter((function(e){return e.destiny!==t.destiny})));D((0,b.vm)(c))}},style:{color:null!==(d=I[e.view])&&void 0!==d&&null!==(u=d.activeFilters)&&void 0!==u&&u.map((function(e){return e.destiny})).includes(t.destiny)?L.palette.primary.main:T?L.palette.grey[300]:L.palette.grey[700]}}),(0,j.jsx)("label",{htmlFor:"check_".concat(i),style:{cursor:"pointer",width:"100%",paddingTop:"10px",paddingBottom:"10px",color:null!==(g=I[e.view])&&void 0!==g&&null!==(m=g.activeFilters)&&void 0!==m&&m.map((function(e){return e.destiny})).includes(t.destiny)?L.palette.primary.main:T?L.palette.grey[300]:L.palette.grey[700]},children:t.label})]}),"simple-date"===t.type&&(null===(v=I[e.view])||void 0===v||null===(x=v.activeFilters)||void 0===x?void 0:x.map((function(e){return e.destiny})).includes(t.destiny))&&(0,j.jsx)(h.Ay,{getAriaLabel:function(){return"Ajustar rango de fechas"},min:1500,max:(new Date).getFullYear(),value:null===(A=I[e.view])||void 0===A||null===(w=A.activeFilters)||void 0===w?void 0:w.find((function(e){return e.destiny===t.destiny})).range,valueLabelDisplay:"on",sx:{marginTop:"35px",marginLeft:"50px",width:"calc(100% - 100px)"},onChange:function(i,r){var l=I[e.view].activeFilters?I[e.view].activeFilters:[];l=l.filter((function(e){return e.destiny!==t.destiny}));var o=(0,n.A)({},t);o.range=r;var s=(0,b.e)(I,e.view,"activeFilters",[].concat((0,a.A)(l),[o]));D((0,b.vm)(s))}}),"location"===t.type&&(null===(C=I[e.view])||void 0===C||null===(S=C.activeFilters)||void 0===S?void 0:S.map((function(e){return e.destiny})).includes(t.destiny))&&(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(k.aG,{id:"location_".concat(i),label:t.label,search:!0,value:null===(F=I[e.view])||void 0===F||null===(R=F.activeFilters)||void 0===R?void 0:R.find((function(e){return e.destiny===t.destiny})).value,setFieldValue:function(i){var r=I[e.view].activeFilters?I[e.view].activeFilters:[];r=r.filter((function(e){return e.destiny!==t.destiny}));var l=(0,n.A)({},t);l.value=i;var o=(0,b.e)(I,e.view,"activeFilters",[].concat((0,a.A)(r),[l]));D((0,b.vm)(o))}})})]},i)}))})]})]})},F=function(e){C();var t=(0,o.useState)(null),i=(0,l.A)(t,2),r=(i[0],i[1]),a=(0,o.useState)(null),u=(0,l.A)(a,2),g=u[0],f=u[1],y=(0,o.useState)([]),h=(0,l.A)(y,2),m=(h[0],h[1],(0,o.useState)({})),x=(0,l.A)(m,2),b=x[0],A=x[1],w=(0,o.useState)(0),k=(0,l.A)(w,2),F=k[0],R=k[1],_=(0,o.useState)(!1),B=(0,l.A)(_,2),M=B[0],I=B[1],D=(0,o.useState)([]),L=(0,l.A)(D,2),T=L[0],N=(L[1],(0,o.useState)("")),z=(0,l.A)(N,2),P=z[0],O=(z[1],(0,o.useState)(0)),E=(0,l.A)(O,2),W=E[0],H=E[1],Y=(0,v.Zp)();(0,o.useEffect)((function(){e.selectedResource&&X("parents",{id:e.selectedResource._id})}),[]),(0,o.useEffect)((function(){var t;null!==(t=e.type)&&void 0!==t&&t.parentsTypes?e.type.parentsTypes.length>0?r("multiple"):e.type.hierarchical?r("tree"):r("single"):r(null)}),[e.selectedType]),(0,o.useEffect)((function(){e.setSelected&&g?e.setSelected(g.id):e.setSelected&&e.setSelected(null)}),[g]),(0,o.useEffect)((function(){X("keyword",P)}),[P]),(0,o.useEffect)((function(){f(null)}),[e.selectedType]);var X=function(e,t){if(t){var i=(0,n.A)({},b);i[e]=t,A(i)}else{var r=(0,n.A)({},b);delete r[e],A(r)}};return(0,j.jsxs)("div",{style:{display:"flex",height:"100%",width:"100%",flexDirection:"column"},children:[(0,j.jsx)(s.EL,{style:{width:"calc(100% - 40px)",height:"55px",overflowX:"hidden",marginLeft:0,marginBottom:0},children:(0,j.jsx)(c.A,{total:F,showFilters:M,setShowFilters:I,view:e.view,setActiveFilters:function(){}})}),(0,j.jsxs)(s.EL,{id:"dropzone_scroll",onScroll:function(e){H(e.target.scrollTop)},onMouseDown:function(e){1===e.button&&e.preventDefault()},style:{width:"calc(100% - 40px)",height:"calc(100% - 40px)",overflowX:"hidden",marginLeft:0,placeContent:"flex-start"},children:[!M&&(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(p.A,{style:{width:"100%",height:"100%",display:"flex"},children:(0,j.jsx)(d.A,{selectedTypes:e.detail?e.type:e.types,selectedType:e.detail?e.type:e.selectedType?e.selectedType:null,records:null,filters:b,activeFilters:T,handleClick:function(t){e.detail?Y("/detail/".concat(t.id)):Y("/explore/".concat(e.view,"/detail/").concat(t.id))},handleAuxClick:function(t){e.detail?window.open("/detail/".concat(t.id),"_blank"):window.open("/explore/".concat(e.view,"/detail/").concat(t.id),"_blank")},editBtns:!!e.detail,parent:g?{_id:g.id}:e.selectedResource?e.selectedResource:null,parentTotal:R,viewDrafts:!1,view:e.view,single:e.single,scrollPosition:W,mobile:e.mobile,form:e.forms,setColumns:function(){}},JSON.stringify(g))})}),M&&(0,j.jsx)(S,{forms:e.forms,view:e.view})]})]})}},91181:function(e,t,i){var n=i(89379),r=i(64467),a=i(5544),l=i(65043),o=i(81551),s=i(96446),c=i(37541),d=i(43845),u=i(17392),p=i(79484),g=i(5983),f=i(74802),y=i(93635),h=i(98344),m=i(26240),v=(i(15089),i(83003)),x=i(85211),b=i(58140),A=i(14905),w=i(99246),k=i(70579);t.A=function(e){var t,i,j,C=(0,l.useRef)(null),S=l.useState(""),F=(0,a.A)(S,2),R=F[0],_=F[1],B=l.useState("keyword"),M=(0,a.A)(B,2),I=M[0],D=(M[1],(0,m.A)()),L=(0,v.d4)((function(e){return e.app.filters})),T=(0,v.d4)((function(e){return e.app.isDarkMode})),N=(0,v.wA)(),z=(0,b.M)().showAlert,P=(0,w.A)(),O=(0,o.A)((function(e){return{dot:{position:"absolute",top:0,right:0,width:10,height:10,backgroundColor:"#ffa84e",borderRadius:"50%"},columnas:{display:"flex",height:"calc(100vh - 150px)"},searchContainer:(0,r.A)((0,r.A)({backgroundColor:T?D.palette.grey[800]:D.palette.primary.light,display:"flex",position:"relative",alignItems:"center",minWidth:350,borderRadius:50,paddingLeft:10,paddingTop:3,paddingBottom:3,width:"100%"},D.breakpoints.down("md"),{minWidth:"auto"}),"& input",{color:D.palette.primary.dark}),searchContainerLight:(0,r.A)((0,r.A)({backgroundColor:"rgb(115 141 175 / 23%)",backdropFilter:"blur(20px)",borderBottom:"1px solid rgba(255,255,255,0.1)",padding:D.spacing(1),display:"flex",position:"relative",alignItems:"center",minWidth:350,color:"#rgba(25,68,124,0.6)",borderRadius:5},D.breakpoints.down("md"),{minWidth:"auto"}),"& input",{color:"rgba(25,68,124,1)"}),searchInput:(0,r.A)({width:"100%",color:"white",fontWeight:"bold"},D.breakpoints.down("md"),{padding:0}),SearchIconContainer:{"&.open":{backgroundColor:"white !important"}},SearchIcon:{marginRight:"2%",color:T?D.palette.primary.light:D.palette.primary.dark,width:"22px !important",height:"22px !important","& path":{color:D.palette.primary.main},"&.open":{backgroundColor:"white",borderRadius:50,color:D.palette.primary.main,"& path":{color:T?D.palette.primary.main+" !important":D.palette.primary.main}}},SearchIconLight:{marginRight:"2%",color:"#rgba(25,68,124,0.6)","& path":{fill:"#rgba(25,68,124,0.6)"}},tableRow:{width:"100%",display:"flex",alignItems:"center",alignContent:"stretch","&:nth-child(even)":{backgroundColor:"#ececec"}},tableCell:{width:"25%",padding:10,borderRight:"1px solid #ccc"},accessLevel:{width:30,height:30,textAlign:"center",lineHeight:"30px",borderRadius:"50%",display:"inline-block",backgroundColor:"#a7b7cb",color:"#fff","&.level_3":{backgroundColor:"#f7b500"},"&.level_2":{backgroundColor:"#eda73e"},"&.level_1":{backgroundColor:"#ed6e3e"}},help:{position:"absolute",top:85,right:40,maxWidth:700,width:"calc(100% - 440px)",height:"calc(100% - 100px)",backgroundColor:"rgb(114 141 174 / 82%)",zIndex:1,borderRadius:15,backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff","& .txt":{maxWidth:650,padding:20,"& p":{borderLeft:"3px solid #fff",borderTop:"1px dashed #fff",paddingTop:10,paddingLeft:10}},"& .box":{backgroundColor:"rgba(255,255,255,0.65)",paddingLeft:20,paddingRight:20,borderRadius:15,marginRight:5,marginLeft:5,color:"#333"},"& .bold":{fontWeight:"bold",color:"#2c3e50",marginRight:5,marginLeft:5}}}}))();return(0,l.useEffect)((function(){L[e.view]&&L[e.view].keyword&&_(L[e.view].keyword)}),[L]),(0,k.jsx)(s.A,{style:{width:"calc(100% - 20px)",display:"flex",alignItems:"center"},children:(0,k.jsxs)("form",{className:"".concat("light"===e.variant?O.searchContainerLight:O.searchContainer),onSubmit:function(t){t.preventDefault();var i=(0,n.A)({},L);i=(0,x.e)(i,e.view,"keyword",R),i=(0,x.e)(i,e.view,"sortBy","relevance"),i=(0,x.e)(i,e.view,"sortOrder","desc"),N((0,x.vm)(i))},children:[(0,k.jsx)(p.A,{className:"".concat("light"!==e.variant?O.SearchIcon:O.SearchIconLight)}),(0,k.jsx)(c.Ay,{className:O.searchInput,placeholder:"keyword"===I?P.formatMessage({id:"cataloging.searchKeywords"}):P.formatMessage({id:"cataloging.searchSemantic"}),ref:C,inputProps:{maxLength:140},value:R,onChange:function(t){if(_(t.target.value),""===t.target.value){var i=(0,n.A)({},L);i=(0,x.e)(i,e.view,"keyword",""),i=(0,x.e)(i,e.view,"sortBy","createdAt"),N((0,x.vm)(i))}},sx:{color:T?D.palette.primary.light:D.palette.primary.dark,"& .MuiInputBase-input":{color:T?D.palette.primary.light:D.palette.primary.dark}}}),""!==R&&(0,k.jsxs)(k.Fragment,{children:["relevance"!==(null===(t=L[e.view])||void 0===t?void 0:t.sortBy)&&(0,k.jsx)(d.A,{size:"small",sx:{backgroundColor:D.palette.primary.light,color:D.palette.primary.main,border:"1px solid ".concat(T?D.palette.primary.light:D.palette.primary.main," "),fontWeight:"bold",marginRight:"10px","&:hover":{backgroundColor:D.palette.primary.main,color:D.palette.primary.light}},label:P.formatMessage({id:"cataloging.sortRelevance"}),onClick:function(){var t=(0,n.A)({},L);t=(0,x.e)(L,e.view,"sortBy","relevance"),t=(0,x.e)(t,e.view,"sortOrder","desc"),N((0,x.vm)(t))}}),(0,k.jsx)(u.A,{onClick:function(){_("");var t=(0,n.A)({},L);t=(0,x.e)(L,e.view,"keyword",""),t=(0,x.e)(t,e.view,"sortBy","createdAt"),N((0,x.vm)(t))},children:(0,k.jsx)(f.A,{className:"".concat("light"!==e.variant?O.SearchIcon:O.SearchIconLight)})})]}),"light"!==e.variant&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(d.A,{size:"small",sx:{backgroundColor:"transparent",color:T?D.palette.primary.light:D.palette.primary.main,border:"1px solid ".concat(T?D.palette.primary.light:D.palette.primary.main," "),fontWeight:"bold",marginRight:"10px"},label:e.total>=1?"".concat((0,h.ZV)(e.total)," ").concat(P.formatMessage({id:"cataloging.results"})):P.formatMessage({id:"cataloging.noResults"})}),e.setActiveFilters&&(0,k.jsxs)(u.A,{style:{position:"relative"},onClick:function(){e.setShowFilters(!e.showFilters)},className:"".concat(e.showFilters?"open":""," ").concat(O.SearchIconContainer),children:[(null===(i=L[e.view])||void 0===i||null===(j=i.activeFilters)||void 0===j?void 0:j.length)>0&&(0,k.jsx)("div",{className:O.dot}),(0,k.jsx)(y.A,{className:"".concat("light"!==e.variant?O.SearchIcon:O.SearchIconLight)})]}),!(0,A.X)()&&(0,k.jsx)(u.A,{onClick:function(){z("video-info","search")},children:(0,k.jsx)(g.A,{className:"".concat("light"!==e.variant?O.SearchIcon:O.SearchIconLight)})})]})]})})}},46068:function(e,t,i){i(65043);var n=i(96446),r=i(24394),a=i(70579);t.A=function(e){return(0,a.jsxs)(n.A,{style:{width:"100%",borderRadius:"10px"},children:[e.data.ident&&"ident"!==e.data.ident&&(0,a.jsx)(r.yN,{label:"Identificador",value:e.data.ident,type:"text",header:!0,labelAlign:e.labelAlign}),e.data.fields.map((function(t,i){return(0,a.jsx)(a.Fragment,{children:t.value&&""!==t.value&&(0,a.jsx)(r.yN,{label:t.label,value:t.value,labelAlign:"location"===t.type?"top":e.labelAlign,type:t.type,redirect:e.redirect,header:"ident"===e.data.ident&&0===i})})}))]})}},76370:function(e,t,i){var n=i(5544),r=i(65043),a=i(73216),l=i(83003),o=i(78717),s=i(46068),c=i(81551),d=i(43845),u=i(96446),p=i(83903),g=i(26240),f=i(43288),y=i(16485),h=i(70579);t.A=function(e){var t=(0,g.A)(),i=(0,a.Zp)(),m=(0,c.A)((function(e){return{scrollbar:{"&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:t.palette.primary.main,border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:t.palette.primary.main},"&::-webkit-scrollbar-thumb:active":{background:t.palette.primary.main},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}},close:{"& .MuiChip-label":{display:"none"},"& svg":{margin:"0 !important"}},noborder:{border:"none"}}}))(),v=(0,r.useState)(!1),x=(0,n.A)(v,2),b=x[0],A=x[1],w=(0,r.useState)(null),k=(0,n.A)(w,2),j=k[0],C=k[1],S=(0,r.useState)(null),F=(0,n.A)(S,2),R=F[0],_=F[1],B=(0,l.d4)((function(e){return e.app.isDarkMode}));return(0,r.useEffect)((function(){if(A(!0),e.resource){if(R===e.resource.id)return void A(!1);o.HD(e.resource.id).then((function(t){C(t),A(!1),_(e.resource.id)})).catch((function(e){console.log(e)}))}}),[e.resource]),(0,h.jsxs)(h.Fragment,{children:[b&&(0,h.jsx)("div",{style:{background:B?t.palette.grey[900]:"white",borderRadius:10},children:(0,h.jsx)(f.A,{})}),j&&!b&&(0,h.jsxs)("div",{style:{background:B?t.palette.grey[800]:"white",maxWidth:600,maxHeight:500,overflowY:"auto",overflowX:"hidden",padding:10,borderRadius:10},className:m.scrollbar,children:[(0,h.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginBottom:10},children:[(0,h.jsx)(d.A,{size:"small",onClick:function(){e.view&&"cataloging"!==e.view&&"bulk"!==e.view?i("/explore/".concat(e.view,"/detail/").concat(e.resource.id)):i("/detail/".concat(e.resource.id))},onAuxClick:function(t){1===t.button&&(e.view&&"cataloging"!==e.view&&"bulk"!==e.view?window.open("/explore/".concat(e.view,"/detail/").concat(e.resource.id),"_blank"):window.open("/detail/".concat(e.resource.id),"_blank"))},icon:(0,h.jsx)(u.A,{style:{display:"flex",alignItems:"center",justifyContent:"center",color:B?t.palette.grey[400]:t.palette.grey[500]},children:(0,h.jsx)(y.A,{})}),style:{margin:3,paddingLeft:10,paddingRight:5,background:B?t.palette.grey[700]:t.palette.grey[100]},className:"".concat(m.noborder)}),(0,h.jsx)(d.A,{size:"small",onClick:function(){e.setMetadata(null)},icon:(0,h.jsx)(u.A,{style:{display:"flex",alignItems:"center",justifyContent:"center",color:B?t.palette.grey[400]:t.palette.grey[500]},children:(0,h.jsx)(p.A,{})}),style:{margin:3,paddingLeft:10,paddingRight:3,background:B?t.palette.grey[700]:t.palette.grey[100]},className:"".concat(m.noborder)})]}),(0,h.jsx)(s.A,{data:j,className:m.scrollbar,resource:e.resource,labelAlign:"left",style:{width:370,height:300,overflowY:"auto"}})]})]})}},6512:function(e,t,i){i.d(t,{V:function(){return g}});var n=i(89379),r=i(5544),a=i(65043),l=i(51887),o=i(34399),s=i(81551),c=i(64904),d=i(83003),u=i(70579),p=(0,s.A)((function(e){return{}})),g=function(e){var t=e.offsetOrigin,i=e.id,s=e.children,g=e.initialPosition,f=e.style,y=(p(),(0,a.useState)(g)),h=(0,r.A)(y,2),m=h[0],v=h[1],x=(0,a.useState)({x:0,y:0}),b=(0,r.A)(x,2),A=(b[0],b[1],(0,d.d4)((function(e){return e.app.isDarkMode}))),w=(0,a.useState)({x:0,y:0}),k=(0,r.A)(w,2),j=k[0],C=k[1],S=(0,a.useState)(!0),F=(0,r.A)(S,2),R=(F[0],F[1],(0,a.useRef)(null)),_=document.getElementById("droppable-area"),B=(0,c.M)("position-".concat(i),{x:0,y:0}),M=(0,r.A)(B,2),I=M[0],D=M[1],L=(0,l.i)((function(e){return{type:"box",item:{id:i,position:m},collect:function(e){return{isDragging:!!e.isDragging(),item:e.getItem(),initialClientOffset:e.getInitialClientOffset(),differenceFromInitialOffset:e.getDifferenceFromInitialOffset(),clientOffset:e.getClientOffset()}},end:function(e,t){if(t.getDropResult()){var i=t.getDropResult().newPosition;i.x=i.x+j.x,i.y=i.y+j.y}}}})),T=(0,r.A)(L,3),N=T[0].isDragging,z=T[1],P=T[2];(0,a.useEffect)((function(){P&&P((0,o.n)(),{captureDraggingState:!0})}),[P]);(0,a.useEffect)((function(){if(R&&I)if(0===I.x&&0===I.y){var e=document.getElementById("droppable-area").getBoundingClientRect(),t=R.current.getBoundingClientRect(),i=e.height/2-t.height/2;v({x:0,y:i}),D({x:0,y:O().y})}else v({x:I.x,y:I.y})}),[R]);var O=function(){var e,i=null===(e=document.getElementById("droppable-area"))||void 0===e?void 0:e.getBoundingClientRect(),n=m.x,r=m.y;if(i&&(n-=i.x,r-=i.y),t&&(n+=t.x/2,r+=t.y/2),n<0&&(n=0),r<0&&(r=0),_&&R.current){var a=document.getElementById("dropzone_scroll");a=a?a.scrollTop:0,n+R.current.offsetWidth>_.offsetWidth&&(n=_.offsetWidth-R.current.offsetWidth),r+R.current.offsetHeight>a.scrollHeight&&(r=a.scrollHeight-R.current.offsetHeight)}return"translate(".concat(n,"px, ").concat(r,"px)"),{x:n,y:r}};return z(R),(0,u.jsx)("div",{ref:R,style:(0,n.A)({position:"absolute",translate:"".concat(O().x,"px ").concat(O().y,"px"),borderRadius:"5px",scale:"".concat(N?1.01:1),boxShadow:N?"0 0 10px 0 ".concat(A?"rgba(50,50,50,0.5)":"rgba(150,150,150,0.5)"):"0 0 5px 0 ".concat(A?"rgba(50,50,50,0.5)":"rgba(150,150,150,0.5)")},f),onMouseDown:function(e){var t=R.current.getBoundingClientRect(),i=e.pageX-t.left,n=e.pageY-t.top;C({x:i,y:n})},onDrag:function(e){R.current.getBoundingClientRect();v({x:e.clientX-j.x,y:e.clientY-j.y,mousePosition:m.mousePosition}),D({x:e.clientX-j.x,y:e.clientY-j.y})},draggable:!0,children:s})}},4319:function(e,t,i){i.d(t,{M:function(){return s}});var n=i(89379),r=i(5544),a=i(65043),l=i(76512),o=i(70579),s=function(e){var t=e.onDrop,i=e.onDragStart,s=e.children,c=(0,a.useRef)(null),d=(0,a.useState)({x:0,y:0}),u=(0,r.A)(d,2),p=u[0],g=u[1],f=(0,a.useState)(!1),y=(0,r.A)(f,2),h=y[0],m=y[1],v=(0,l.H)((function(){return{accept:"box",hover:function(e,t){!h&&t.isOver()&&i&&(m(!0),i(e,t))},drop:function(e,i){m(!1);var r=i.getClientOffset(),a=c.current.getBoundingClientRect();if(r){var l={x:r.x-a.left,y:r.y-a.top,mousePosition:(0,n.A)({},p)};return t((0,n.A)((0,n.A)({},e),{},{newPosition:l}),i),{newPosition:l}}},collect:function(e){return{isOver:!!e.isOver(),canDrop:!!e.canDrop()}}}}),[t,i,h,p]),x=(0,r.A)(v,2),b=(x[0],x[1]);(0,a.useEffect)((function(){var e=function(){m(!1)};return window.addEventListener("dragend",e),function(){window.removeEventListener("dragend",e)}}),[]);return b(c),(0,o.jsx)("div",{ref:c,id:"droppable-area",style:{width:"100%",height:"100%",position:"relative",overflow:"visible"},onMouseDown:function(e){g({x:e.pageX,y:e.pageY})},children:s})}},98344:function(e,t,i){i.d(t,{RJ:function(){return F},ZV:function(){return C},xh:function(){return S}});var n=i(89379),r=i(5544),a=i(49658),l=i(65043),o=i(83003),s=i(94495),c=i(81551),d=i(53612),u=i(42366),p=i(67470),g=i(52733),f=i(29864),y=i(97062),h=i(50147),m=i(64851),v=i(6232),x=i(53326),b=i(31724),A=i(29923),w=i(52417),k=i(26240),j=i(70579),C=((0,c.A)((function(e){return{barBox:{padding:3,paddingTop:"3px",paddingBottom:"13px",borderRadius:"5px","&:hover":{background:"#f5f5f5",cursor:"pointer"},"&.selected":{background:"rgba(86,116,154,0.75)","& .txt, & .number":{color:"#fff","& path":{fill:"#fff"}},"& .borderBox":{border:"1px solid white",background:"rgba(255,255,255,0.15)"},"& .percentBar":{background:"white"}}},borderBox:{position:"relative",height:"5px",borderRadius:"10px",border:"1px solid #acbbd1"},percentBar:{position:"absolute",height:"100%",background:"#acbbd1",borderRadius:"10px"},txt:{textTransform:"uppercase",fontSize:11,display:"flex",alignItems:"center"},number:{float:"right",border:"#fff",fontWeight:"bold",color:"#56749a",minWidth:"20px",height:"20px",lineHeight:"20px",textAlign:"center",fontSize:"10px",borderRadius:"10px",padding:"0px 10px"},icon:{width:"14px",height:"14px",marginRight:5,marginLeft:5,padding:"4px",borderRadius:"50%",borderTopRightRadius:0,borderTopLeftRadius:0,"& svg":{width:"100%",height:"14px"},"& path":{fill:"#acbbd1"}}}})),function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}),S=function(e){var t=(0,l.useRef)(null),i=(0,k.A)(),s=(0,o.d4)((function(e){return e.app.isDarkMode})),c=[d.A[400],u.A[400],p.A[400],g.A[400],f.A[400],y.A[400],h.A[400],m.A[400],v.A[400],x.A[400],b.A[400],A.A[400],w.A[400]],C=c.indexOf(i.palette.primary.main);C>-1&&c.splice(C,1),c.unshift(i.palette.primary.main);var S=a.UMr().range(c),F=(0,l.useState)(null),R=(0,r.A)(F,2),_=(R[0],R[1]);return(0,l.useEffect)((function(){!function(){var n=e.data.map((function(e){return{type:e._id?e._id:"Sin procesar",value:e.count,color:S(e._id?e._id:"Sin procesar")}}));"time"===e.scale&&(n=n.map((function(e){return{type:new Date(e.type),value:e.value,color:e.color}}))),_(n);var r=a.Ltv(t.current);r.attr("viewBox","0 0 200 200"),n.length;var l=a.WH().domain(n.map((function(e){return e.type}))).range([0,200]).padding(.1);if("time"===e.scale){var o=a.Xxv(n,(function(e){return e.type})),c=[a.UAC.offset(o[0],-2),a.UAC.offset(o[1],5)];l=a.w7C().domain(c).range([0,200])}var d=a.m4Y().domain([0,a.T9B(n,(function(e){return e.value}))]).range([150,0]);r.append("g").attr("transform","translate(0, ".concat(165,")")).call("time"===e.scale?a.l78(l).ticks(5).tickFormat(a.DCK("%b %Y")):a.l78(l)).selectAll("text").style("text-anchor","end").attr("transform","rotate(-45)").style("font-size",6);var u=r.append("g").attr("transform","translate(200, 15)").call(a.V4s(d).ticks(5).tickSize(200).tickFormat((function(e){return 0===e?"":e})));if(u.selectAll("text").style("font-size",6).attr("x",-5).attr("dy",-3),u.selectAll("line").style("stroke-dasharray","4,4").style("stroke-width",1).style("stroke",s?i.palette.grey[700]:i.palette.grey[300]),u.selectAll(".domain").remove(),u.selectAll(".tick").filter((function(e){return 0===e})).remove(),"time"===e.scale){var p=r.append("g").attr("class","mouse-over-effects");p.append("path").attr("class","mouse-line").style("stroke",s?i.palette.grey[500]:i.palette.grey[300]).style("stroke-width",.5).style("opacity",0);var g=r.append("text").attr("class","viz_tooltip").style("font-size","10px").style("display","none").attr("fill",s?i.palette.grey[500]:i.palette.grey[300]);p.append("rect").attr("width",200).attr("height",200).attr("fill","none").attr("pointer-events","all").on("mouseover",(function(){p.select(".mouse-line").style("opacity",1),g.style("display",null),f.style("display",null)})).on("mouseout",(function(){p.select(".mouse-line").style("opacity",0),g.style("display","none"),f.style("display","none")})).on("mousemove",(function(e){var t=a.grR(this)[0];p.select(".mouse-line").attr("d","M".concat(t,",15 L").concat(t,",165"));var r=l.invert(t),o=a.DCK("%b %d, %Y"),c=(0,a.ylB((function(e){return e.type})).left)(n,r),u=o(r);if(c<n.length){var y=n[c];f.attr("cx",l(y.type)).attr("cy",d(y.value)+15)}g.text(u).attr("x",100).attr("y",10).style("font-size",6).style("text-anchor","middle").style("fill",s?i.palette.grey[400]:i.palette.grey[600])}))}r.append("g").selectAll("rect").data(n).join("rect").attr("x",(function(e){return l(e.type)-.5})).attr("y",(function(e){return d(e.value)+15})).attr("width","time"===e.scale?1:l.bandwidth()).attr("height",(function(e){return 150-d(e.value)})).attr("fill",(function(t){return"time"===e.scale?i.palette.primary.main:t.color}));var f=r.append("ellipse").attr("class","marker").attr("rx",3).attr("ry",3).style("fill",s?i.palette.primary.light:i.palette.primary.main).style("display","none")}()}),[]),(0,j.jsx)("div",{style:(0,n.A)({display:"flex",justifyContent:"space-around",alignItems:"center",position:"relative"},e.style),children:(0,j.jsx)("svg",{style:{width:"100%"},ref:t,className:e.className})})},F=function(e){var t,i=(0,l.useRef)(null),c=(0,k.A)(),S=(0,o.d4)((function(e){return e.app.isDarkMode})),F=[d.A[400],u.A[400],p.A[400],g.A[400],f.A[400],y.A[400],h.A[400],m.A[400],v.A[400],x.A[400],b.A[400],A.A[400],w.A[400]],R=F.indexOf(c.palette.primary.main);R>-1&&F.splice(R,1),F.unshift(c.palette.primary.main);var _=a.UMr().range(F),B=(0,l.useState)(null),M=(0,r.A)(B,2),I=M[0],D=M[1];return(0,l.useEffect)((function(){!function(){var t=e.data.map((function(e){return{type:e._id?e._id:"Sin procesar",value:e.count,color:_(e._id?e._id:"Sin procesar")}}));D(t);var n=a.Ltv(i.current);n.attr("viewBox","0 0 200 200");var r=a.JLW().innerRadius(75).outerRadius(85),l=a.rLf().value((function(e){return e.value})).sort(null),o=(a.JLW().innerRadius(95).outerRadius(95),l(t));n.append("g").attr("class","donut-container").attr("transform","translate(".concat(100,", ").concat(100,")")).selectAll("path").data(o).join("path").style("stroke","white").style("stroke-width",.5).style("fill",(function(e){return _(e.data.type)})).attr("d",r)}()}),[]),(0,j.jsxs)("div",{style:(0,n.A)({display:"flex",justifyContent:"space-around",alignItems:"center",position:"relative"},e.style),children:[(0,j.jsx)("svg",{style:{width:"100%"},ref:i,className:e.className}),e.legend&&I&&(0,j.jsx)("div",{style:{marginRight:20},children:null===(t=e.data)||void 0===t?void 0:t.map((function(e,t){return(0,j.jsxs)("div",{style:{borderRadius:5,padding:"2px 5px",background:S?c.palette.grey[600]:c.palette.grey[100],textTransform:"uppercase",fontSize:"10px",fontWeight:"normal",color:S?c.palette.grey[100]:"#333",marginBottom:5},children:[e._id?s.ZC.find((function(t){return t.value===e._id})).label:"Sin procesar",(0,j.jsx)("div",{style:{background:_(e._id),textAlign:"center",fontWeight:"bold",color:"white",maxWidth:60,borderRadius:3,marginTop:1},children:C(e.count)})]},t)}))})]})}},13870:function(e,t,i){i.d(t,{$:function(){return a},N:function(){return l}});var n=i(88120),r=i(91280);function a(e){if((0,r.g)()){var t={method:"POST",headers:new Headers({"Content-Type":"application/json",Authorization:(0,r.g)()}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch((0,n.H6)()+"/search",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}t={method:"POST",headers:new Headers({"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch((0,n.H6)()+"/search/public",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function l(e){var t={method:"POST",headers:new Headers({"Content-Type":"application/json",Authorization:(0,r.g)()}),mode:"cors",cache:"default",body:e};return fetch((0,n.H6)()+"/search/tree",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}},76445:function(e,t,i){var n=i(89379),r=i(5544),a=i(65043),l=i(41905),o=i(26240),s=i(83003),c=i(85211),d=i(8168),u=i(43845),p=i(96446),g=i(55263),f=i(77739),y=i(78717),h=i(13870),m=i(73216),v=i(63471),x=i(95540),b=i(57796),A=i(95065),w=i(4319),k=i(6512),j=i(36795),C=i(31269),S=i(76370),F=i(65226),R=i(72003),_=i(11867),B=i(58140),M=i(24394),I=i(53171),D=i(99246),L=i(67759),T=i(70579);t.A=function(e){var t,i,N,z,P=(0,a.useState)([]),O=(0,r.A)(P,2),E=O[0],W=O[1],H=(0,a.useState)(0),Y=(0,r.A)(H,2),X=Y[0],J=Y[1],V=(0,m.Zp)(),Z=(0,a.useState)(!1),U=(0,r.A)(Z,2),q=U[0],K=U[1],G=(0,a.useState)(!1),$=(0,r.A)(G,2),Q=$[0],ee=$[1],te=(0,o.A)(),ie=(0,s.d4)((function(e){return e.app.filters})),ne=(0,s.d4)((function(e){return e.app.isDarkMode})),re=(0,s.wA)(),ae=(0,B.M)().showAlert,le=(0,D.A)(),oe=(0,l.A)((function(e){return{btn_color:{color:"#869bb7 !important",padding:"5px !important",width:"30px !important",height:"30px !important",margin:"0 2px !important",borderRadius:"50%",border:"1px solid #c6d0dd !important","&:hover":{color:"#fff !important",backgroundColor:"#56749a !important"},"& .MuiSvgIcon-root":{width:"14px !important"}},chip_style:{margin:"1px 2px !important",backgroundColor:"".concat(ne?te.palette.grey[800]:te.palette.secondary.light," !important"),color:"".concat(ne?te.palette.grey[400]:te.palette.secondary.dark," !important"),border:"1px solid ".concat(ne?te.palette.grey[700]:te.palette.secondary.main," !important"),transition:"all .3s ease-in-out !important","& svg":{width:"15px !important",marginLeft:"10px !important"},"& path":{fill:te.palette.secondary.main+" !important",transition:"all .3s ease-in-out !important"},"&:hover":{backgroundColor:te.palette.primary.dark+" !important",color:"#fff !important","& path":{fill:"#fff !important"}}},access_chip:{backgroundColor:"".concat(ne?te.palette.grey[800]:te.palette.secondary.light," !important"),border:"1px solid ".concat(ne?te.palette.grey[700]:te.palette.secondary.main," !important"),color:"".concat(ne?te.palette.grey[400]:te.palette.secondary.dark," !important"),"& svg":{marginLeft:"10px !important",width:"15px !important",height:"15px !important",opacity:".5 !important"}},date_chip:{backgroundColor:"".concat(ne?te.palette.grey[800]:te.palette.secondary.light," !important"),border:"1px solid ".concat(ne?te.palette.grey[700]:te.palette.secondary.main," !important"),color:"".concat(ne?te.palette.grey[400]:te.palette.secondary.dark," !important"),"& svg":{marginLeft:"10px !important",width:"15px !important",height:"15px !important",opacity:".5 !important"}}}}))();(0,a.useEffect)((function(){ee(!1)}),[e.scrollPosition]),(0,a.useEffect)((function(){var t,i,r,a=(0,n.A)({},ie[e.view]);if((null===(t=a.activeFilters)||void 0===t?void 0:t.length)>0){var l=a.activeFilters.filter((function(e){return"text"===e.type||"text-area"===e.type}));a.input_filters=l.map((function(e){return e.destiny})),a.activeFilters.filter((function(e){return"files"===e.destiny})).length>0&&(a.input_filters=a.input_filters.filter((function(e){return"files"!==e})),a.files=!0);var o=a.activeFilters.filter((function(e){return"simple-date"===e.type}));a.date_filters=o.map((function(e){return{destiny:e.destiny,range:e.range}}));var s=a.activeFilters.filter((function(e){return"location"===e.type}));a.location_filters=s.map((function(e){return{destiny:e.destiny,value:e.value}}))}e.parent&&!a.parents&&(a.parents={id:e.parent._id,post_type:e.parent.post_type});var c=null!==(i=ie[e.view])&&void 0!==i&&i.post_type?ie[e.view].post_type.slug:e.selectedTypes;Array.isArray(c)&&c.length>0&&c[0].slug&&(c=c.map((function(e){return e.slug}))),null!==(r=c)&&void 0!==r&&r.slug?c=[c.slug]:c||(c=[e.selectedType.slug]),a.post_type=c,W([]),K(!0),e.single?(Array.isArray(a.post_type_single)?a.post_type=a.post_type_single:a.post_type_single?a.post_type=[a.post_type_single.slug]:e.selectedTypes&&(a.post_type=e.selectedTypes.map((function(e){return e.slug}))),delete a.post_type_single,a.parents={id:a.single_id},delete a.single_id,a.page=a.page_single,delete a.page_single):(delete a.post_type_single,delete a.root_single,delete a.page_single,a.post_type&&!Array.isArray(a.post_type)&&(a.post_type=[a.post_type])),a.keyword||a.date_filters||a.location_filters?h.$(a).then((function(t){W(t.resources),K(!1),t.resources.length>0?(J(t.total),e.parentTotal(t.total)):(J(0),e.parentTotal&&e.parentTotal(0))})).catch((function(e){K(!1)})):y.UK(c,a).then((function(t){W(t.resources),K(!1),t.resources.length>0&&(J(t.total),e.parentTotal&&e.parentTotal(t.total))})).catch((function(e){e.json().then((function(e){ae("error",e.msg)})),K(!1)}))}),[ie]);var se=function(){var t=[{destiny:"ident",label:le.formatMessage({id:"general.identifier"})},{destiny:"metadata.firstLevel.title",label:le.formatMessage({id:"general.title"}),sortBy:"metadata.firstLevel.title"},{destiny:"files",label:le.formatMessage({id:"general.files"})}];return e.mobile||(t.unshift({destiny:"createdAt",label:le.formatMessage({id:"general.creationDate"}),sortBy:"createdAt"}),t.unshift({destiny:"",label:""}),t.push({destiny:"accessRights",label:le.formatMessage({id:"general.accessRights"})})),t};return(0,T.jsx)(j.Q,{backend:C.t2,children:(0,T.jsxs)(w.M,{onDrop:function(e,t){return console.log(e,t)},onDragStart:function(){console.log("start")},children:[q&&(0,T.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,T.jsx)(F.A,{options:{loop:!0,autoplay:!0,animationData:R,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}},height:100,width:100})}),0===E.length&&!q&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(I.A,{}),(0,T.jsx)(u.A,{label:le.formatMessage({id:"general.clearFilters"}),className:oe.chip_style,icon:(0,T.jsx)(L.A,{}),onClick:function(){var t=(0,c.e)(ie,e.view,"activeFilters",[]);t[e.view].page=0,t[e.view].activeColumns=se(),re((0,c.vm)(t))}})]}),E.length>0&&!q&&(0,T.jsx)(d.A,{pagination:!0,resources:E,page:null!==(t=ie[e.view])&&void 0!==t&&t.page?ie[e.view].page:0,setPage:function(t){var i=(0,c.e)(ie,e.view,"page",t);re((0,c.vm)(i))},total:X,type:e.type,selectedResources:e.selectedResources,perpage:20,handleClick:e.handleClick,handleAuxClick:e.handleAuxClick,setSelected:e.setSelected,style:{position:e.mobile?"relative":"absolute"},columns:null!==(i=ie[e.view])&&void 0!==i&&i.activeColumns?ie[e.view].activeColumns:se(),columnSolver:function(t,i){var n,r,a=function(e,t){return t.split(".").reduce((function(e,t){return null===e||void 0===e?void 0:e[t]}),e)};if(!t)return null;var l=null===(n=e.form)||void 0===n?void 0:n.fields[0].find((function(e){return e.destiny===i.destiny}));if(l){if("text"===l.type||"text-area"===l.type)return(0,T.jsx)("span",{children:a(t,i.destiny)});if("simple-date"===l.type){if(a(t,i.destiny))return(0,T.jsx)(u.A,{size:"small",label:(0,M.pv)(a(t,i.destiny)),className:oe.date_chip})}else if("select"===l.type){if(a(t,i.destiny))return(0,T.jsx)(u.A,{size:"small",label:a(t,i.destiny),className:oe.access_chip})}}return(0,T.jsxs)(T.Fragment,{children:["metadata.firstLevel.title"===i.destiny&&(0,T.jsx)("span",{children:null===t||void 0===t||null===(r=t.metadata)||void 0===r?void 0:r.firstLevel.title}),"accessRights"===i.destiny&&(0,T.jsx)(T.Fragment,{children:t.accessRights&&(0,T.jsx)(u.A,{size:"small",label:t.accessRights,className:oe.access_chip})}),"createdAt"===i.destiny&&(0,T.jsx)(T.Fragment,{children:t.createdAt&&(0,T.jsx)(u.A,{size:"small",label:(0,M.pv)(t.createdAt),className:oe.date_chip})}),"files"===i.destiny&&(0,T.jsx)(T.Fragment,{children:t.files>0&&(0,T.jsx)(u.A,{size:"small",label:(0,T.jsxs)(p.A,{style:{display:"flex",alignItems:"center"},children:[t.files,(0,T.jsx)(_.A,{})]}),className:oe.access_chip})}),"ident"===i.destiny&&(0,T.jsx)(T.Fragment,{children:t.ident&&"ident"!==t.ident&&""!==t.ident&&(0,T.jsx)(u.A,{size:"small",label:(0,T.jsx)(T.Fragment,{children:t.ident}),className:oe.access_chip})}),""===i.destiny&&(0,T.jsxs)(g.A,{disableGutters:!0,variant:"dense",style:{minHeight:"auto",display:"flex",justifyContent:"center",flexFlow:"wrap"},children:[e.editBtns&&"cataloging"===e.view&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(u.A,{label:"",size:"small",icon:(0,T.jsx)(x.A,{}),onClick:function(){return function(t){"users"===e.selectedType?V("/admin/users/edit/".concat(t)):V("/cataloging/".concat(t.post_type,"/edit/").concat(t.id))}(t)},className:oe.chip_style}),(0,T.jsx)(u.A,{label:"",size:"small",icon:(0,T.jsx)(v.A,{}),onClick:function(){return e=t.id,void ae("confirm",le.formatMessage({id:"cataloging.confirmDelete"})).then((function(t){t&&y.o8(e).then((function(e){ae("success",e.msg).then((function(){window.location.reload()}))})).catch((function(e){e.json().then((function(e){ae("error",e.msg)}))}))}));var e},className:oe.chip_style})]}),(0,T.jsx)(f.A,{title:le.formatMessage({id:"cataloging.viewMeta"}),placement:"top",children:(0,T.jsx)(u.A,{label:"",size:"small",icon:(0,T.jsx)(A.A,{}),onClick:function(){var e;e=t.id,ee({id:e})},className:oe.chip_style})}),"bulk"!==e.view&&(0,T.jsx)(f.A,{title:le.formatMessage({id:"cataloging.viewResource"}),placement:"top",children:(0,T.jsx)(u.A,{label:"",size:"small",icon:(0,T.jsx)(b.A,{}),onClick:function(){return e.handleClick(t)},className:oe.chip_style})})]})]})},view:e.view,sortBy:null===(N=ie[e.view])||void 0===N?void 0:N.sortBy,sortOrder:null===(z=ie[e.view])||void 0===z?void 0:z.sortOrder,setColumns:function(){},form:e.form}),Q&&(0,T.jsx)("div",{style:{position:"absolute",top:e.scrollPosition-10,left:0,height:"calc(100% + 20px)",width:"100%",background:ne?"rgba(0,0,0,.5)":"rgba(255,255,255,.5)",backdropFilter:"blur(5px)"},onClick:function(){return ee(!1)}}),(0,T.jsx)(k.V,{id:"metadata-info",initialPosition:{x:0,y:0},style:{display:Q?"block":"none",borderRadius:"10px"},children:(0,T.jsx)(S.A,{resource:Q,setMetadata:ee,view:e.view})})]})})}},8168:function(e,t,i){var n=i(64467),r=i(89379),a=i(60436),l=i(5544),o=i(65043),s=i(83003),c=i(85211),d=i(51962),u=i(17392),p=i(688),g=i(10673),f=i(85293),y=i(96446),h=i(71806),m=i(73460),v=i(10039),x=i(79650),b=i(84882),A=i(41574),w=i(28076),k=i(63336),j=i(35084),C=i(26240),S=i(70579);function F(e){var t=(0,C.A)(),i=(0,s.d4)((function(e){return e.app.isDarkMode})),y=(0,s.d4)((function(e){return e.app.filters})),h=(0,s.wA)(),m=e.view,x=e.sortBy,A=e.form,k=e.headCells,F=o.useState(k.reduce((function(e,t){return(0,r.A)((0,r.A)({},e),{},(0,n.A)({},t.id,!0))}),{})),R=(0,l.A)(F,2),_=(R[0],R[1],o.useState(null)),B=(0,l.A)(_,2),M=B[0],I=B[1];return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(b.A,{onContextMenu:function(e){e.preventDefault(),I({top:e.clientY,left:e.clientX})},children:(0,S.jsx)(w.A,{children:k.map((function(e){return(0,S.jsxs)(v.A,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"normal",style:{color:i?t.palette.grey[400]:t.palette.grey[600],borderBottom:"1px solid ".concat(i?t.palette.grey[800]:t.palette.grey[200])},children:[e.label,e.sortBy&&(0,S.jsx)(u.A,{size:"small",style:{marginLeft:"5px",backgroundColor:x===e.sortBy&&i?t.palette.grey[100]:x===e.sortBy?t.palette.primary.light:i?t.palette.grey[800]:"#f5f5f5",color:x===e.sortBy&&i||x===e.sortBy?t.palette.primary.main:t.palette.grey[500]},onClick:function(){var t=y[m].sortBy===e.sortBy&&"asc"===y[m].sortOrder?"desc":"asc",i=(0,c.e)(y,m,"sortOrder",t);i=(0,c.e)(i,m,"sortBy",e.sortBy),h((0,c.vm)(i))},children:(0,S.jsx)(j.A,{})})]},e.id)}))})}),(0,S.jsx)(p.A,{open:Boolean(M),onClose:function(){I(null)},anchorReference:"anchorPosition",anchorPosition:M,sx:{"& .MuiPaper-root":{backgroundColor:i?t.palette.grey[800]:t.palette.grey[100],color:i?t.palette.grey[300]:t.palette.grey[600],borderRadius:5},"& .MuiMenuItem-root":{backgroundColor:i?t.palette.grey[800]:t.palette.grey[100],color:i?t.palette.grey[300]:t.palette.grey[600]},"& .MuiMenuItem-root:hover":{backgroundColor:i?t.palette.grey[700]:t.palette.grey[200],color:i?t.palette.grey[300]:t.palette.grey[600]},"& .MuiMenuItem-root:focus":{backgroundColor:i?t.palette.grey[700]:t.palette.grey[200],color:i?t.palette.grey[300]:t.palette.grey[600]},"& .MuiMenuItem-root:active":{backgroundColor:i?t.palette.grey[600]:t.palette.grey[300],color:i?t.palette.grey[300]:t.palette.grey[600]}},children:null===A||void 0===A?void 0:A.fields[0].map((function(e){var t,i,n;if("number"===e.type||"simple-date"===e.type||"text"===e.type)return(0,S.jsx)(g.A,{size:"small",dense:!0,children:(0,S.jsx)(f.A,{control:(0,S.jsx)(d.A,{checked:null===(t=null===(i=y[m])||void 0===i||null===(n=i.activeColumns)||void 0===n?void 0:n.map((function(e){return e.destiny})).includes(e.destiny))||void 0===t||t,onChange:function(){return function(e){var t,i,n,r=(0,c.e)(y,m,"activeColumns",null!==(t=y[m])&&void 0!==t&&null!==(i=t.activeColumns)&&void 0!==i&&i.map((function(e){return e.destiny})).includes(e.destiny)?y[m].activeColumns.filter((function(t){return t.destiny!==e.destiny})):[].concat((0,a.A)(null===(n=y[m])||void 0===n?void 0:n.activeColumns),[{destiny:e.destiny,label:e.label,sortBy:e.destiny}]));h((0,c.vm)(r))}(e)}}),label:e.label})},e.id)}))})]})}function R(e){var t=(0,s.wA)(),i=(0,s.d4)((function(e){return e.app.filters})),n=(0,s.d4)((function(e){return e.app.isDarkMode}));return(0,S.jsx)(A.A,{rowsPerPage:e.perpage,rowsPerPageOptions:[],count:e.total,page:i[e.view]&&e.view?i[e.view].page:e.page,onPageChange:function(n,r){if(e.view){var a=(0,c.e)(i,e.view,"page",r);t((0,c.vm)(a))}else e.setPage(r)},style:{color:n?"white":"black",borderTop:"1px solid ".concat(n?"rgba(255, 255, 255, 0.12)":"rgba(0, 0, 0, 0.12)"),backgroundColor:n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)",borderBottom:"1px solid ".concat(n?"rgba(255, 255, 255, 0.12)":"rgba(0, 0, 0, 0.12)")}})}t.A=function(e){var t=e.sortBy,i=e.sortOrder,n=e.style,r=e.resources,c=e.pagination,u=e.columns,p=e.columnSolver,g=e.page,f=e.setPage,b=e.total,A=e.handleClick,j=e.perpage,_=e.type,B=e.selectedResources,M=e.view,I=e.form,D=e.handleAuxClick,L=o.useState(!1),T=(0,l.A)(L,2),N=T[0],z=(T[1],(0,o.useState)([])),P=(0,l.A)(z,2),O=P[0],E=(P[1],(0,s.d4)((function(e){return e.app.isDarkMode}))),W=(0,C.A)();return(0,S.jsx)(S.Fragment,{children:r.length>0&&(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(y.A,{sx:{width:"100%"},style:n||null,children:(0,S.jsx)(x.A,{children:(0,S.jsxs)(h.A,{sx:{width:"100%"},"aria-labelledby":"tableTitle",size:N?"small":"medium",padding:"none",children:[(0,S.jsx)(F,{numSelected:O.length,headCells:"checkbox"===_?[{id:"checkbox",numeric:!1,disablePadding:!0,label:""}].concat((0,a.A)(u)):u,sortBy:t,sortOrder:i,view:M,form:I}),(0,S.jsx)(m.A,{children:r.map((function(e){return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(w.A,{hover:!0,role:"checkbox",tabIndex:-1,style:A?{cursor:"pointer"}:{},children:["checkbox"===_&&(0,S.jsx)(v.A,{component:"th",id:"checkbox",scope:"row",sx:{padding:"10px 10px",borderBottom:"1px solid ".concat(E?W.palette.grey[800]:W.palette.grey[200])},children:(0,S.jsx)(d.A,{onClick:A?function(){return A(e)}:null,color:"primary",checked:!!B&&B.includes(e.id),sx:{color:E?W.palette.grey[400]:W.palette.grey[600],"&.Mui-checked":{color:W.palette.primary.main+" !important"}}})}),u.map((function(t){return(0,S.jsx)(v.A,{component:"th",id:t.destiny,scope:"row",onClick:A&&""!==t.destiny?function(){return A(e)}:null,onAuxClick:function(i){1===i.button&&D&&""!==t.destiny&&(i.preventDefault(),D(e))},sx:{padding:"10px 10px",color:E?W.palette.grey[400]:W.palette.grey[600],borderBottom:"1px solid ".concat(E?W.palette.grey[800]:W.palette.grey[200])},children:p(e,t)},t.destiny)}))]},e.id),e.snap&&(0,S.jsx)(w.A,{children:(0,S.jsx)(v.A,{component:"th",scope:"row",sx:{padding:"10px 10px"},children:(0,S.jsx)(k.A,{children:e.snap})})})]})}))}),c&&(0,S.jsx)(R,{view:M,page:g,setPage:f,total:b,perpage:j})]})})})})})}}}]);
//# sourceMappingURL=9464.b10b0050.chunk.js.map