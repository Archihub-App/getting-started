"use strict";(self.webpackChunkarchihub=self.webpackChunkarchihub||[]).push([[5876],{14533:function(e,t,n){var i=n(89379),a=n(5544),r=n(65043),l=n(83003),s=n(73216),o=n(85211),c=n(72378),u=n(91181),d=n(76445),p=n(29464),f=n(81551),g=n(70579),v=(0,f.A)((function(e){return{columnas:{display:"flex",height:"calc(100vh - 150px)"}}}));t.A=function(e){v();var t=(0,r.useState)(null),n=(0,a.A)(t,2),f=n[0],h=n[1],m=(0,r.useState)(null),y=(0,a.A)(m,2),x=y[0],A=y[1],b=(0,r.useState)([]),w=(0,a.A)(b,2),j=(w[0],w[1]),k=(0,r.useState)(0),S=(0,a.A)(k,2),C=S[0],B=S[1],T=(0,r.useState)([]),_=(0,a.A)(T,2),M=_[0],F=_[1],E=(0,r.useState)(!1),D=(0,a.A)(E,2),R=D[0],N=D[1],z=(0,r.useState)(""),G=(0,a.A)(z,2),L=G[0],q=(G[1],(0,r.useState)("")),H=(0,a.A)(q,2),I=H[0],P=(H[1],(0,s.Zp)()),V=(0,l.wA)(),J=(0,l.d4)((function(e){return e.app.filters}));return(0,r.useEffect)((function(){e.selectedType.parentsTypes?e.selectedType.parentsTypes.length>0?h("multiple"):e.selectedType.hierarchical?h("tree"):h("single"):h(null)}),[e.selectedType]),(0,r.useEffect)((function(){e.setSelected&&x?e.setSelected(x.id):e.setSelected&&e.setSelected(null)}),[x]),(0,r.useEffect)((function(){var e=(0,i.A)({},J);V((0,o.vm)((0,o.e)(e,"cataloging","keyword",L)))}),[L]),(0,r.useEffect)((function(){A(null),j([]);var e=(0,i.A)({},J);e=(0,o.e)(e,"cataloging","parents",null),e=(0,o.e)(e,"cataloging","treeKeyword",I),V((0,o.vm)(e))}),[I]),(0,r.useEffect)((function(){var t=(0,i.A)({},J);t=(0,o.e)(t,"cataloging","status",e.viewDrafts?"draft":"published")}),[e.viewDrafts]),(0,g.jsx)("div",{style:(0,i.A)({display:"flex",height:"100%",width:"100%",flexDirection:"column"},e.style),children:f&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.EL,{style:{width:"calc(100% - 40px)",height:"55px",overflowX:"hidden",marginLeft:0,marginBottom:0},children:(0,g.jsx)(u.A,{total:C,showFilters:R,setShowFilters:N,activeFilters:M,setActiveFilters:e.forms?F:null,view:e.view})}),(0,g.jsxs)(c.EL,{id:"dropzone_scroll",onScroll:function(e){},style:{width:"calc(100% - 40px)",height:"calc(100% - 40px)",overflowX:"hidden",marginLeft:0,placeContent:"flex-start"},children:[!R&&(0,g.jsx)(d.A,{selectedType:e.selectedType,filters:J,type:e.type,editBtns:!0,parentTotal:B,handleClick:function(t){"checkbox"===e.type?e.setSelectedResources(t.id):P("/detail/".concat(t.id))},selectedResources:e.selectedResources,view:e.view}),R&&(0,g.jsx)(p.n,{forms:e.forms,activeFilters:M,setActiveFilters:F,view:e.view})]})]})})}},42588:function(e,t,n){n.d(t,{AD:function(){return B},M2:function(){return C},oF:function(){return T}});var i=n(60436),a=n(65043),r=n(15316),l=n(85865),s=n(17392),o=n(43845),c=n(81551),u=n(94495),d=n(39244),p=n(26240),f=n(11238),g=n(83003),v=n(85211),h=n(98344),m=n(5983),y=n(58140),x=n(18751),A=n(92429),b=n(78717),w=n(70579),j=(0,c.A)((function(e){return{container:{display:"flex",flexDirection:"column",width:"calc(100% - 20px)",overflowY:"auto",marginLeft:"10px"},item:{overflow:"hidden",color:"#777",fontSize:14,position:"relative",marginBottom:10,paddingBottom:10},itemName:{fontSize:15},chip:{margin:2,padding:2,"& .MuiChip-avatar":{backgroundColor:"transparent !important"}}}})),k=function(e){var t=j(),n=(0,p.A)(),i=(0,y.M)().showAlert,a=(0,g.d4)((function(e){return e.app.isDarkMode}));return(0,w.jsxs)(r.A,{className:t.item,style:e.style?e.style:{borderBottom:"1px solid ".concat(a?n.palette.grey[800]:n.palette.grey[200])},children:[(0,w.jsxs)(r.A,{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,w.jsx)(l.A,{className:t.itemName,style:{color:a?n.palette.primary.light:n.palette.primary.main},children:e.title}),e.help&&(0,w.jsx)(s.A,{onClick:function(){i("video-info",e.help)},children:(0,w.jsx)(m.A,{style:{color:a?n.palette.grey[400]:n.palette.grey[700]}})})]}),e.item?e.item:e.children]})},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=t<0?0:t,i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]},C=function(e){var t,n,i=j(),l=(0,g.d4)((function(e){return e.app.isDarkMode})),s=(0,p.A)();return(0,a.useEffect)((function(){0===e.record.parent.length?e.setMetadata(null):e.metadata&&e.setMetadata(e.record.parent[0])}),[e.record]),(0,w.jsxs)(r.A,{className:i.container,children:[(0,w.jsx)(k,{title:"Nombre del archivo",item:null!==e&&void 0!==e&&null!==(t=e.record)&&void 0!==t&&t.displayName?null===e||void 0===e||null===(n=e.record)||void 0===n?void 0:n.displayName:e.record.name}),(0,w.jsx)(k,{title:"HASH",item:e.record.hash}),(0,w.jsx)(k,{title:"Tama\xf1o",item:S(e.record.size)}),e.record.parent.length>0&&(0,w.jsx)(k,{title:"Contenido relacionado",children:e.record.parent.map((function(t,n){return(0,w.jsx)(o.A,{avatar:u.dR.filter((function(e){return e.value===t.icon}))?u.dR.filter((function(e){return e.value===t.icon}))[0].iconlight:(0,w.jsx)(d.A,{}),label:t.name,className:i.chip,onClick:function(){e.setMetadata(t)},sx:{background:l?s.palette.grey[800]:s.palette.grey[200],color:l?s.palette.grey[300]:s.palette.grey[600],"& svg":{width:15},"& path":{fill:l?s.palette.grey[300]:s.palette.grey[600]}}},n)}))})]})},B=function(e){var t=j(),n=((0,g.wA)(),(0,g.d4)((function(e){return e.app.filters}))),i=(0,g.d4)((function(e){return e.app.isDarkMode})),a=(0,p.A)(),s=(0,y.M)().showAlert;return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(r.A,{className:t.container,children:[(0,w.jsx)(f.nA,{startIcon:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(x.A,{}),(0,w.jsx)(A.A,{})]}),label:"Descargar inventario",style:{borderRadius:5,backgroundColor:i?a.palette.grey[800]:a.palette.grey[200],color:a.palette.grey[500]},onClick:function(){s("confirm","\xbfDesea descargar el inventario de los tipos de contenido?").then((function(t){if(t){s("loading","Generando archivo...");var i=n[e.view]&&n[e.view].post_type?n[e.view].post_type.slug:"*";b._Q({post_type:i,view:e.view},(function(e){s("loading","Descargando archivo... ".concat(Math.round(e),"%"))})).then((function(){s("success","Archivo descargado correctamente")})).catch((function(e){e.msg?s("error","Error al descargar el archivo: "+e.msg):s("error","Error al descargar el archivo")}))}}))}}),(0,w.jsx)(k,{title:"Descripci\xf3n",item:(0,w.jsx)(l.A,{children:e.type.description})}),e.files.total>0&&(0,w.jsx)(k,{title:"Balance general de los documentos",item:(0,w.jsx)(h.RJ,{data:e.files.data,legend:!0})}),(0,w.jsx)(T,{view:e.view,parents:e.parents,root:e.root})]})})},T=function(e){var t,n=(0,g.wA)(),a=(0,g.d4)((function(e){return e.app.filters})),r=j(),l=(0,g.d4)((function(e){return e.app.isDarkMode})),s=(0,p.A)();return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(k,{title:"Estructura de carpetas para",item:(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(f.$k,{label:"Tipo de recurso",style:{color:l?"white":"black",backgroundColor:l?"#333":"#f5f5f5",borderColor:l?"#333":"#f5f5f5"},showLabel:!1,value:a[e.view]?!e.single&&a[e.view].post_type?a[e.view].post_type.slug:e.single&&!Array.isArray(a[e.view].post_type_single)&&a[e.view].post_type_single?a[e.view].post_type_single.slug:"*":"*",onChange:function(t){if(e.onChange)e.onChange(t);else{var i=e.single?"post_type_single":"post_type";if("*"===t.target.value){var r=(0,v.e)(a,e.view,i,null);n((0,v.vm)(r))}else{var l=(0,v.e)(a,e.view,i,{slug:t.target.value});n((0,v.vm)(l))}}},options:function(){var t=(0,i.A)(e.parents.map((function(e){return{value:e.slug,label:e.name}})));return"cataloging"!==e.view&&(t=[{value:"*",label:"Todos los tipos"}].concat((0,i.A)(t))),t}()})}),help:"folder-structure"}),a[e.view]&&(null===(t=a[e.view].parents)||void 0===t?void 0:t.name)&&(0,w.jsx)("div",{style:{marginBottom:10},children:(0,w.jsx)(o.A,{avatar:u.dR.filter((function(t){return t.value===a[e.view].parents.icon}))?u.dR.filter((function(t){return t.value===a[e.view].parents.icon}))[0].iconlight:(0,w.jsx)(d.A,{}),label:a[e.view].parents.name,className:r.chip,onDelete:function(){var t=(0,v.e)(a,e.view,"parents",{id:e.root});n((0,v.vm)(t))},size:"small",color:"primary",sx:{backgroundColor:s.palette.primary.light,color:s.palette.primary.main,"& path":{fill:s.palette.primary.main}}})})]})}},61151:function(e,t,n){n.r(t);var i=n(60436),a=n(89379),r=n(5544),l=n(65043),s=n(73216),o=n(72378),c=n(83003),u=n(85211),d=n(19853),p=n(55263),f=n(85865),g=n(4598),v=n(11906),h=n(15316),m=n(31445),y=n(14533),x=n(30064),A=n.n(x),b=n(42588),w=n(69389),j=n(43288),k=n(26240),S=n(10765),C=n(63516),B=n(11238),T=n(58140),_=n(70579);t.default=function(e){var t=(0,l.useState)([]),n=(0,r.A)(t,2),x=n[0],M=n[1],F=(0,l.useState)(null),E=(0,r.A)(F,2),D=E[0],R=E[1],N=(0,l.useState)(null),z=(0,r.A)(N,2),G=z[0],L=z[1],q=(0,l.useState)(null),H=(0,r.A)(q,2),I=H[0],P=H[1],V=(0,l.useState)(null),J=(0,r.A)(V,2),O=J[0],Z=J[1],K=(0,l.useState)(null),Q=(0,r.A)(K,2),X=Q[0],Y=Q[1],U=(0,l.useState)([]),$=(0,r.A)(U,2),W=$[0],ee=$[1],te=(0,l.useState)([]),ne=(0,r.A)(te,2),ie=ne[0],ae=ne[1],re=(0,l.useState)(!1),le=(0,r.A)(re,2),se=le[0],oe=le[1],ce=(0,l.useState)(!1),ue=(0,r.A)(ce,2),de=ue[0],pe=ue[1],fe=(0,s.g)().slug,ge=((0,s.Zp)(),(0,c.d4)((function(e){return e.app.filters}))),ve=(0,c.wA)(),he=(0,k.A)(),me=(0,T.M)().showAlert;(0,l.useEffect)((function(){ye()}),[e.match]),(0,l.useEffect)((function(){var e,t;(console.log(ge),null!==(e=ge.bulk)&&void 0!==e&&e.parents)?ae(null===(t=ge.bulk)||void 0===t?void 0:t.parents):ae([])}),[ge]);var ye=function(){};(0,l.useEffect)((function(){var e,t;null!==(e=ge.bulk)&&void 0!==e&&e.post_type?m.Pw(null===(t=ge.bulk)||void 0===t?void 0:t.post_type.slug).then((function(e){R(e),Z({fields:[e.metadata.fields],forms:[{name:e.metadata.name,slug:e.metadata.slug}]})})):d.gD().then((function(e){m.Pw(e.value).then((function(e){R(e),Z({fields:[e.metadata.fields],forms:[{name:e.metadata.name,slug:e.metadata.slug}]});var t=(0,a.A)({},ge);ve((0,u.vm)((0,u.e)(t,"bulk","post_type",{slug:e.slug})))}))}))}),[fe]),(0,l.useEffect)((function(){m.DI().then((function(e){M(e)})),ye()}),[]);return(0,l.useEffect)((function(){console.log(W)}),[W]),(0,l.useEffect)((function(){fe&&d.DJ(fe,"bulk").then((function(e){L(e);var t={};e.map((function(e){"instructions"!==e.type&&"file"!==e.type&&((t=(0,a.A)({},t))[e.id]=e.default)})),t.files=[],P(t)}))}),[]),(0,_.jsxs)(o.Ay,{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-start"},children:[D&&W&&x&&O&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(o.EL,{style:{padding:0,height:"calc(100vh - 20px)",width:"40%",display:"block",overflow:"auto",placeContent:"flex-start"},children:(0,_.jsxs)("div",{style:{padding:10},children:[(0,_.jsxs)(p.A,{style:{justifyContent:"space-between",minHeight:"auto",padding:0,marginBottom:20},children:[(0,_.jsx)(f.A,{style:{color:he.palette.primary.main,fontSize:15},children:"Ver borradores"}),(0,_.jsx)(g.A,{checked:de,onChange:function(){pe(!de);var e=(0,a.A)({},ge);ve((0,u.vm)((0,u.e)(e,"bulk","status",de?"published":"draft")))}})]}),(0,_.jsx)(b.oF,{parents:x,view:"bulk",onChange:function(e){R(null),m.Pw(e.target.value).then((function(t){R(t),Z({fields:[t.metadata.fields],forms:[{name:t.metadata.name,slug:t.metadata.slug}]});var n=(0,a.A)({},ge);ve((0,u.vm)((0,u.e)(n,"bulk","post_type",{slug:e.target.value})))}))}}),(0,_.jsx)(w.A,{root:null,activeTypes:[{slug:D.slug}],postType:D.slug,view:"list",checkboxTypes:x.map((function(e){return e.slug})),multiple:!1,selected:[ie],childrenSelect:!1,setSelected:function(e){if(0===e.length){var t=(0,u.e)(ge,"bulk","parents",null);ve((0,u.vm)(t))}else{var n=(0,u.e)(ge,"bulk","parents",e[0]);ve((0,u.vm)(n))}}},D?[D.slug]:x),G&&I&&(0,_.jsx)("div",{style:{marginTop:20},children:(0,_.jsx)(C.l1,{initialValues:I,onSubmit:function(e,t){var n=t.setSubmitting;e.post_type=D.slug,e.parent=ie.id,e.resources=W,n(!0),oe(!0),d.eP(fe,JSON.stringify(e)).then((function(e){n(!1),oe(!1),me("success",e.msg).then((function(){}))})).catch((function(e){n(!1),oe(!1),e.json().then((function(e){me("error",e.msg)}))}))},children:function(e){var t=e.values,n=e.errors,i=(e.touched,e.handleChange),a=e.handleBlur,r=e.handleSubmit,l=e.isSubmitting,s=e.setFieldValue;return(0,_.jsxs)("form",{onSubmit:r,children:[G.map((function(e,r){return(0,_.jsxs)(_.Fragment,{children:["file"===e.type&&(0,_.jsx)(S.U0,{name:e.label,id:e.name,values:t,required:e.required,change:s,limit:e.limit,acceptedFiles:e.acceptedFiles},r),"instructions"===e.type&&(0,_.jsx)(f.A,{variant:"body1",sx:{padding:"10px",backgroundColor:"#f5f5f5",marginBottom:"10px",borderRadius:"5px",background:he.palette.primary.light,color:he.palette.primary.main},children:e.text},r),"checkbox"===e.type&&(0,_.jsx)(S.FO,{id:e.id,name:e.label,instructions:e.instructions,value:t[e.id],handleChange:function(t){s(e.id,t)},handleBlur:a,error:n[e.id],required:e.required},r),"select"===e.type&&(0,_.jsx)(S.Q5,{id:e.id,name:e.label,value:t[e.id],handleChange:i,handleBlur:a,error:n[e.id],options:e.options,required:e.required},r),"text"===e.type&&(0,_.jsx)(S.BR,{id:e.id,name:e.label,value:t[e.id],handleChange:i,handleBlur:a,error:n[e.id],required:e.required},r),"button"===e.type&&(0,_.jsx)(v.A,{variant:"contained",onClick:function(){!function(e,t){d.Gj(e,JSON.stringify({parent:X,post_type:D.slug}),t).then((function(e){A().fire({title:"\xc9xito",text:"Se ha ejecutado la acci\xf3n correctamente",icon:"success",confirmButtonText:"Ok"})}))}(fe,e.callback)},sx:{margin:"10px"},children:e.label}),"condition"===e.type&&(0,_.jsx)(S.e7,{id:e.id,label:e.label,value:t[e.id],condition:e.condition,options:e.options,conditionValue:t[e.id_condition],change:s},"".concat(r,"-").concat(t[e.id_condition]))]})})),(0,_.jsx)(h.A,{style:{display:"flex",justifyContent:"center",marginTop:25},children:(0,_.jsx)(B.nA,{variant:"outlined",type:"submit",disabled:l,style:{margin:5,width:"auto"},label:"Procesar"})})]})}})})]})}),(0,_.jsx)(y.A,{style:{width:"60%"},forms:O,view:"bulk",type:"checkbox",selectedType:D,setSelected:Y,setSelectedResources:function(e){W.includes(e)?ee(W.filter((function(t){return t!==e}))):ee([].concat((0,i.A)(W),[e]))},selectedResources:W})]}),se&&(0,_.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",position:"fixed",top:0,left:0,background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(5px) saturate(0%)",zIndex:9999},children:(0,_.jsx)(j.A,{})})]})}},92429:function(e,t,n){var i=n(24994);t.A=void 0;var a=i(n(40039)),r=n(70579);t.A=(0,a.default)((0,r.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment")},55263:function(e,t,n){n.d(t,{A:function(){return m}});var i=n(64467),a=n(98587),r=n(58168),l=n(65043),s=n(69292),o=n(98610),c=n(98206),u=n(34535),d=n(92532),p=n(72372);function f(e){return(0,p.Ay)("MuiToolbar",e)}(0,d.A)("MuiToolbar",["root","gutters","regular","dense"]);var g=n(70579),v=["className","component","disableGutters","variant"],h=(0,u.Ay)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,r.A)({position:"relative",display:"flex",alignItems:"center"},!n.disableGutters&&(0,i.A)({paddingLeft:t.spacing(2),paddingRight:t.spacing(2)},t.breakpoints.up("sm"),{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}),"dense"===n.variant&&{minHeight:48})}),(function(e){var t=e.theme;return"regular"===e.ownerState.variant&&t.mixins.toolbar})),m=l.forwardRef((function(e,t){var n=(0,c.b)({props:e,name:"MuiToolbar"}),i=n.className,l=n.component,u=void 0===l?"div":l,d=n.disableGutters,p=void 0!==d&&d,m=n.variant,y=void 0===m?"regular":m,x=(0,a.A)(n,v),A=(0,r.A)({},n,{component:u,disableGutters:p,variant:y}),b=function(e){var t=e.classes,n={root:["root",!e.disableGutters&&"gutters",e.variant]};return(0,o.A)(n,f,t)}(A);return(0,g.jsx)(h,(0,r.A)({as:u,className:(0,s.A)(b.root,i),ref:t,ownerState:A},x))}))},53326:function(e,t){t.A={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea"}}}]);
//# sourceMappingURL=5876.726eb46f.chunk.js.map