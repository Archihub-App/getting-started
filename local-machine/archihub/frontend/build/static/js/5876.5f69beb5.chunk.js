"use strict";(self.webpackChunkarchihub=self.webpackChunkarchihub||[]).push([[5876],{14533:function(e,t,n){var i=n(89379),r=n(5544),a=n(65043),l=n(83003),s=n(73216),o=n(85211),c=n(72378),u=n(91181),d=n(76445),p=n(29464),f=n(81551),v=n(70579),h=(0,f.A)((function(e){return{columnas:{display:"flex",height:"calc(100vh - 150px)"}}}));t.A=function(e){h();var t=(0,a.useState)(null),n=(0,r.A)(t,2),f=(n[0],n[1]),g=(0,a.useState)(null),m=(0,r.A)(g,2),y=m[0],x=m[1],A=(0,a.useState)([]),b=(0,r.A)(A,2),w=(b[0],b[1]),j=(0,a.useState)(0),k=(0,r.A)(j,2),S=k[0],C=k[1],M=(0,a.useState)([]),B=(0,r.A)(M,2),T=B[0],_=B[1],F=(0,a.useState)(!1),D=(0,r.A)(F,2),R=D[0],E=D[1],N=(0,a.useState)(""),z=(0,r.A)(N,2),L=z[0],G=(z[1],(0,a.useState)("")),q=(0,r.A)(G,2),H=q[0],I=(q[1],(0,s.Zp)()),V=(0,l.wA)(),J=(0,l.d4)((function(e){return e.app.filters}));return(0,a.useEffect)((function(){var t;null!==(t=e.selectedType)&&void 0!==t&&t.parentsTypes?e.selectedType.parentsTypes.length>0?f("multiple"):e.selectedType.hierarchical?f("tree"):f("single"):f(null)}),[e.selectedType]),(0,a.useEffect)((function(){e.setSelected&&y?e.setSelected(y.id):e.setSelected&&e.setSelected(null)}),[y]),(0,a.useEffect)((function(){var t=(0,i.A)({},J);V((0,o.vm)((0,o.e)(t,e.view,"keyword",L)))}),[L]),(0,a.useEffect)((function(){x(null),w([]);var t=(0,i.A)({},J);t=(0,o.e)(t,e.view,"parents",null),t=(0,o.e)(t,e.view,"treeKeyword",H),V((0,o.vm)(t))}),[H]),(0,a.useEffect)((function(){var t=(0,i.A)({},J);t=(0,o.e)(t,e.view,"status",e.viewDrafts?"draft":"published")}),[e.viewDrafts]),(0,v.jsxs)("div",{style:(0,i.A)({display:"flex",height:"100%",width:"100%",flexDirection:"column"},e.style),children:[(0,v.jsx)(c.EL,{style:{width:"calc(100% - 40px)",height:"55px",overflowX:"hidden",marginLeft:0,marginBottom:0},children:(0,v.jsx)(u.A,{total:S,showFilters:R,setShowFilters:E,activeFilters:T,setActiveFilters:e.forms?_:null,view:e.view})}),(0,v.jsxs)(c.EL,{id:"dropzone_scroll",onScroll:function(e){},style:{width:"calc(100% - 40px)",height:"calc(100% - 40px)",overflowX:"hidden",marginLeft:0,placeContent:"flex-start"},children:[!R&&(0,v.jsx)(d.A,{selectedTypes:e.detail?e.type:e.types,selectedType:e.selectedType,filters:J,type:e.type,editBtns:!0,parentTotal:C,handleClick:function(t){"checkbox"===e.type?e.setSelectedResources(t.id):I("/detail/".concat(t.id))},selectedResources:e.selectedResources,view:e.view}),R&&(0,v.jsx)(p.n,{forms:e.forms,activeFilters:T,setActiveFilters:_,view:e.view})]})]})}},42588:function(e,t,n){n.d(t,{AD:function(){return B},M2:function(){return M},oF:function(){return T}});var i=n(60436),r=n(65043),a=n(15316),l=n(85865),s=n(17392),o=n(43845),c=n(81551),u=n(94495),d=n(39244),p=n(26240),f=n(11238),v=n(83003),h=n(85211),g=n(98344),m=n(5983),y=n(58140),x=n(18751),A=n(92429),b=n(78717),w=n(99246),j=n(70579),k=(0,c.A)((function(e){return{container:{display:"flex",flexDirection:"column",width:"calc(100% - 20px)",overflowY:"auto",marginLeft:"10px"},item:{overflow:"hidden",color:"#777",fontSize:14,position:"relative",marginBottom:10,paddingBottom:10},itemName:{fontSize:15},chip:{margin:2,padding:2,"& .MuiChip-avatar":{backgroundColor:"transparent !important"}}}})),S=function(e){var t=k(),n=(0,p.A)(),i=(0,y.M)().showAlert,r=(0,v.d4)((function(e){return e.app.isDarkMode}));return(0,j.jsxs)(a.A,{className:t.item,style:e.style?e.style:{borderBottom:"1px solid ".concat(r?n.palette.grey[800]:n.palette.grey[200])},children:[(0,j.jsxs)(a.A,{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,j.jsx)(l.A,{className:t.itemName,style:{color:r?n.palette.primary.light:n.palette.primary.main},children:e.title}),e.help&&(0,j.jsx)(s.A,{onClick:function(){i("video-info",e.help)},children:(0,j.jsx)(m.A,{style:{color:r?n.palette.grey[400]:n.palette.grey[700]}})})]}),e.item?e.item:e.children]})},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=t<0?0:t,i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]},M=function(e){var t,n,i=k(),l=(0,v.d4)((function(e){return e.app.isDarkMode})),s=(0,p.A)();return(0,r.useEffect)((function(){0===e.record.parent.length?e.setMetadata(null):e.metadata&&e.setMetadata(e.record.parent[0])}),[e.record]),(0,j.jsxs)(a.A,{className:i.container,children:[(0,j.jsx)(S,{title:"Nombre del archivo",item:null!==e&&void 0!==e&&null!==(t=e.record)&&void 0!==t&&t.displayName?null===e||void 0===e||null===(n=e.record)||void 0===n?void 0:n.displayName:e.record.name}),(0,j.jsx)(S,{title:"HASH",item:e.record.hash}),(0,j.jsx)(S,{title:"Tama\xf1o",item:C(e.record.size)}),e.record.parent.length>0&&(0,j.jsx)(S,{title:"Contenido relacionado",children:e.record.parent.map((function(t,n){return(0,j.jsx)(o.A,{avatar:u.dR.filter((function(e){return e.value===t.icon}))?u.dR.filter((function(e){return e.value===t.icon}))[0].iconlight:(0,j.jsx)(d.A,{}),label:t.name,className:i.chip,onClick:function(){e.setMetadata(t)},sx:{background:l?s.palette.grey[800]:s.palette.grey[200],color:l?s.palette.grey[300]:s.palette.grey[600],"& svg":{width:15},"& path":{fill:l?s.palette.grey[300]:s.palette.grey[600]}}},n)}))})]})},B=function(e){var t=k(),n=((0,v.wA)(),(0,v.d4)((function(e){return e.app.filters}))),i=(0,v.d4)((function(e){return e.app.isDarkMode})),r=(0,p.A)(),s=(0,y.M)().showAlert;return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(a.A,{className:t.container,children:[(0,j.jsx)(f.nA,{startIcon:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(x.A,{}),(0,j.jsx)(A.A,{})]}),label:"Descargar inventario",style:{borderRadius:5,backgroundColor:i?r.palette.grey[800]:r.palette.grey[200],color:r.palette.grey[500]},onClick:function(){s("confirm","\xbfDesea descargar el inventario de los tipos de contenido?").then((function(t){if(t){s("loading","Generando archivo...");var i=n[e.view]&&n[e.view].post_type?n[e.view].post_type.slug:"*";b._Q({post_type:i,view:e.view},(function(e){s("loading","Descargando archivo... ".concat(Math.round(e),"%"))})).then((function(){s("success","Archivo descargado correctamente")})).catch((function(e){e.msg?s("error","Error al descargar el archivo: "+e.msg):s("error","Error al descargar el archivo")}))}}))}}),(0,j.jsx)(S,{title:"Descripci\xf3n",item:(0,j.jsx)(l.A,{children:e.type.description})}),e.files.total>0&&(0,j.jsx)(S,{title:"Balance general de los documentos",item:(0,j.jsx)(g.RJ,{data:e.files.data,legend:!0})}),(0,j.jsx)(T,{view:e.view,parents:e.parents,root:e.root})]})})},T=function(e){var t,n=(0,v.wA)(),r=(0,v.d4)((function(e){return e.app.filters})),a=k(),l=(0,v.d4)((function(e){return e.app.isDarkMode})),s=(0,p.A)(),c=(0,w.A)();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(S,{title:c.formatMessage({id:"cataloging.folderStructure"}),item:(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(f.$k,{label:c.formatMessage({id:"menuList.postTypes"}),style:{color:l?"white":"black",backgroundColor:l?"#333":"#f5f5f5",borderColor:l?"#333":"#f5f5f5"},showLabel:!1,value:r[e.view]?!e.single&&r[e.view].post_type?r[e.view].post_type.slug:e.single&&!Array.isArray(r[e.view].post_type_single)&&r[e.view].post_type_single?r[e.view].post_type_single.slug:"*":"*",onChange:function(t){if(e.onChange)e.onChange(t);else{var i=e.single?"post_type_single":"post_type";if("*"===t.target.value){var a=(0,h.e)(r,e.view,i,null);n((0,h.vm)(a))}else{var l=(0,h.e)(r,e.view,i,{slug:t.target.value});n((0,h.vm)(l))}}},options:function(){var t=(0,i.A)(e.parents.map((function(e){return{value:e.slug,label:e.name}})));return"cataloging"!==e.view&&(t=[{value:"*",label:c.formatMessage({id:"cataloging.allPostTypes"})}].concat((0,i.A)(t))),t}()})}),help:"folder-structure"}),r[e.view]&&(null===(t=r[e.view].parents)||void 0===t?void 0:t.name)&&(0,j.jsx)("div",{style:{marginBottom:10},children:(0,j.jsx)(o.A,{avatar:u.dR.filter((function(t){return t.value===r[e.view].parents.icon}))?u.dR.filter((function(t){return t.value===r[e.view].parents.icon}))[0].iconlight:(0,j.jsx)(d.A,{}),label:r[e.view].parents.name,className:a.chip,onDelete:function(){var t=(0,h.e)(r,e.view,"parents",{id:e.root});n((0,h.vm)(t))},size:"small",color:"primary",sx:{backgroundColor:s.palette.primary.light,color:s.palette.primary.main,"& path":{fill:s.palette.primary.main}}})})]})}},61151:function(e,t,n){n.r(t);var i=n(60436),r=n(89379),a=n(5544),l=n(65043),s=n(73216),o=n(72378),c=n(83003),u=n(85211),d=n(19853),p=n(55263),f=n(85865),v=n(4598),h=n(11906),g=n(15316),m=n(31445),y=n(14533),x=n(30064),A=n.n(x),b=n(42588),w=n(69389),j=n(43288),k=n(26240),S=n(99246),C=n(10765),M=n(63516),B=n(11238),T=n(58140),_=n(70579);t.default=function(e){var t,n=(0,l.useState)([]),x=(0,a.A)(n,2),F=x[0],D=x[1],R=(0,l.useState)(null),E=(0,a.A)(R,2),N=E[0],z=E[1],L=(0,l.useState)(null),G=(0,a.A)(L,2),q=G[0],H=G[1],I=(0,l.useState)(null),V=(0,a.A)(I,2),J=V[0],O=V[1],P=(0,l.useState)(null),Z=(0,a.A)(P,2),K=Z[0],Q=(Z[1],(0,l.useState)(null)),X=(0,a.A)(Q,2),Y=X[0],U=X[1],$=(0,l.useState)([]),W=(0,a.A)($,2),ee=W[0],te=W[1],ne=(0,l.useState)([]),ie=(0,a.A)(ne,2),re=ie[0],ae=ie[1],le=(0,l.useState)(!1),se=(0,a.A)(le,2),oe=se[0],ce=se[1],ue=(0,l.useState)(!1),de=(0,a.A)(ue,2),pe=(de[0],de[1],(0,s.g)().slug),fe=((0,s.Zp)(),(0,c.d4)((function(e){return e.app.filters}))),ve=(0,c.wA)(),he=(0,k.A)(),ge=(0,T.M)().showAlert,me=(0,S.A)(),ye=(0,c.d4)((function(e){return e.app.isDarkMode}));(0,l.useEffect)((function(){xe()}),[e.match]),(0,l.useEffect)((function(){var e;fe.bulk&&(fe.bulk.post_type?z(fe.bulk.post_type):z(null),fe.bulk.parents?ae(null===(e=fe.bulk)||void 0===e?void 0:e.parents):ae([]))}),[fe]);var xe=function(){};(0,l.useEffect)((function(){m.DI().then((function(e){D(e)})),xe()}),[]);return(0,l.useEffect)((function(){pe&&d.DJ(pe,"bulk").then((function(e){H(e);var t={};e.map((function(e){"instructions"!==e.type&&"file"!==e.type&&((t=(0,r.A)({},t))[e.id]=e.default)})),t.files=[],O(t)}))}),[]),(0,_.jsxs)(o.Ay,{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-start"},children:[ee&&F&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(o.EL,{style:{padding:0,height:"calc(100vh - 20px)",width:"40%",display:"block",overflow:"auto",placeContent:"flex-start"},children:(0,_.jsxs)("div",{style:{padding:10},children:[(0,_.jsxs)(p.A,{style:{justifyContent:"space-between",minHeight:"auto",padding:0,marginBottom:20},children:[(0,_.jsx)(f.A,{style:{color:ye?he.palette.primary.light:he.palette.primary.main,fontSize:15},children:me.formatMessage({id:"cataloging.viewDrafts"})}),(0,_.jsx)(v.A,{checked:"draft"===(null===(t=fe.bulk)||void 0===t?void 0:t.status),onChange:function(){var e,t=(0,r.A)({},fe);ve((0,u.vm)((0,u.e)(t,"bulk","status","draft"===(null===(e=fe.bulk)||void 0===e?void 0:e.status)?"published":"draft")))}})]}),(0,_.jsx)(b.oF,{parents:F,view:"bulk"}),(0,_.jsx)(w.A,{root:null,activeTypes:N?[{slug:N.slug}]:F.map((function(e){return{slug:e.slug}})),postType:N?N.slug:null,view:"list",mainView:"bulk",checkboxTypes:F.map((function(e){return e.slug})),multiple:!1,selected:[re],childrenSelect:!1,setSelected:function(e){if(0===e.length){var t=(0,u.e)(fe,"bulk","parents",null);ve((0,u.vm)(t))}else{var n=(0,u.e)(fe,"bulk","parents",e[0]);ve((0,u.vm)(n))}}},N?[N.slug]:F),q&&J&&(0,_.jsx)("div",{style:{marginTop:20},children:(0,_.jsx)(M.l1,{initialValues:J,onSubmit:function(e,t){var n,i,r=t.setSubmitting;null!==(n=fe.bulk)&&void 0!==n&&n.post_type?e.post_type=null===(i=fe.bulk)||void 0===i?void 0:i.post_type.slug:e.post_type=F.map((function(e){return e.slug})),e.parent=re.id,e.resources=ee,r(!0),ce(!0),d.eP(pe,JSON.stringify(e)).then((function(e){r(!1),ce(!1),ge("success",e.msg).then((function(){}))})).catch((function(e){r(!1),ce(!1),e.json().then((function(e){ge("error",e.msg)}))}))},children:function(e){var t=e.values,n=e.errors,i=(e.touched,e.handleChange),r=e.handleBlur,a=e.handleSubmit,l=e.isSubmitting,s=e.setFieldValue;return(0,_.jsxs)("form",{onSubmit:a,children:[q.map((function(e,a){return(0,_.jsxs)(_.Fragment,{children:["file"===e.type&&(0,_.jsx)(C.U0,{name:e.label,id:e.name,values:t,required:e.required,change:s,limit:e.limit,acceptedFiles:e.acceptedFiles},a),"instructions"===e.type&&(0,_.jsx)(f.A,{variant:"body1",sx:{padding:"10px",backgroundColor:"#f5f5f5",marginBottom:"10px",borderRadius:"5px",background:he.palette.primary.light,color:he.palette.primary.main},children:e.text},a),"checkbox"===e.type&&(0,_.jsx)(C.FO,{id:e.id,name:e.label,instructions:e.instructions,value:t[e.id],handleChange:function(t){s(e.id,t)},handleBlur:r,error:n[e.id],required:e.required},a),"select"===e.type&&(0,_.jsx)(C.Q5,{id:e.id,name:e.label,value:t[e.id],handleChange:i,handleBlur:r,error:n[e.id],options:e.options,required:e.required},a),"text"===e.type&&(0,_.jsx)(C.BR,{id:e.id,name:e.label,value:t[e.id],handleChange:i,handleBlur:r,error:n[e.id],required:e.required},a),"button"===e.type&&(0,_.jsx)(h.A,{variant:"contained",onClick:function(){!function(e,t){d.Gj(e,JSON.stringify({parent:Y,post_type:N.slug}),t).then((function(e){A().fire({title:"\xc9xito",text:"Se ha ejecutado la acci\xf3n correctamente",icon:"success",confirmButtonText:"Ok"})}))}(pe,e.callback)},sx:{margin:"10px"},children:e.label}),"condition"===e.type&&(0,_.jsx)(C.e7,{id:e.id,label:e.label,value:t[e.id],condition:e.condition,options:e.options,conditionValue:t[e.id_condition],change:s},"".concat(a,"-").concat(t[e.id_condition]))]})})),(0,_.jsx)(g.A,{style:{display:"flex",justifyContent:"center",marginTop:25},children:(0,_.jsx)(B.nA,{variant:"outlined",type:"submit",disabled:l,style:{margin:5,width:"auto"},label:"Procesar"})})]})}})})]})}),F.length>0&&(0,_.jsx)(y.A,{types:F,style:{width:"60%"},forms:K,view:"bulk",type:"checkbox",selectedType:N,setSelected:U,setSelectedResources:function(e){ee.includes(e)?te(ee.filter((function(t){return t!==e}))):te([].concat((0,i.A)(ee),[e]))},selectedResources:ee})]}),oe&&(0,_.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",position:"fixed",top:0,left:0,background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(5px) saturate(0%)",zIndex:9999},children:(0,_.jsx)(j.A,{})})]})}},92429:function(e,t,n){var i=n(24994);t.A=void 0;var r=i(n(40039)),a=n(70579);t.A=(0,r.default)((0,a.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment")},55263:function(e,t,n){n.d(t,{A:function(){return m}});var i=n(64467),r=n(98587),a=n(58168),l=n(65043),s=n(69292),o=n(98610),c=n(98206),u=n(34535),d=n(92532),p=n(72372);function f(e){return(0,p.Ay)("MuiToolbar",e)}(0,d.A)("MuiToolbar",["root","gutters","regular","dense"]);var v=n(70579),h=["className","component","disableGutters","variant"],g=(0,u.Ay)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,a.A)({position:"relative",display:"flex",alignItems:"center"},!n.disableGutters&&(0,i.A)({paddingLeft:t.spacing(2),paddingRight:t.spacing(2)},t.breakpoints.up("sm"),{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}),"dense"===n.variant&&{minHeight:48})}),(function(e){var t=e.theme;return"regular"===e.ownerState.variant&&t.mixins.toolbar})),m=l.forwardRef((function(e,t){var n=(0,c.b)({props:e,name:"MuiToolbar"}),i=n.className,l=n.component,u=void 0===l?"div":l,d=n.disableGutters,p=void 0!==d&&d,m=n.variant,y=void 0===m?"regular":m,x=(0,r.A)(n,h),A=(0,a.A)({},n,{component:u,disableGutters:p,variant:y}),b=function(e){var t=e.classes,n={root:["root",!e.disableGutters&&"gutters",e.variant]};return(0,o.A)(n,f,t)}(A);return(0,v.jsx)(g,(0,a.A)({as:u,className:(0,s.A)(b.root,i),ref:t,ownerState:A},x))}))},53326:function(e,t){t.A={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea"}}}]);
//# sourceMappingURL=5876.5f69beb5.chunk.js.map