"use strict";(self.webpackChunkarchihub=self.webpackChunkarchihub||[]).push([[621],{19541:function(e,t,n){n.d(t,{AI:function(){return v},Xm:function(){return x}});var i=n(5544),a=n(65043),r=n(34535),o=n(43845),l=n(12110),s=n(15316),c=n(55263),d=n(31445),p=n(98344),u=n(83003),g=n(26240),f=n(49658),h=n(88120),m=n(15089),y=n(70579),x=(0,r.Ay)(o.A)((function(e){var t=e.theme,n=((0,g.A)(),(0,u.d4)((function(e){return e.app.isDarkMode})));return{backgroundColor:n?t.palette.grey[800]:"white",height:t.spacing(3),color:n?t.palette.grey[300]:t.palette.secondary.dark,border:"none",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:200,"& svg":{width:15,marginLeft:10,marginRight:0},"& path":{fill:n?t.palette.grey[300]:t.palette.secondary.dark},"&:hover":{backgroundColor:t.palette.secondary.light,color:t.palette.secondary.dark,"& path":{fill:t.palette.secondary.main}}}})),v=(0,r.Ay)(o.A)((function(e){var t=e.theme;return{backgroundColor:t.palette.primary.light,height:t.spacing(3),color:t.palette.primary.main,border:"none",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:200,"& svg":{width:15,marginLeft:10,marginRight:0},"& path":{fill:t.palette.primary.main}}})),j=function(e){var t=(0,a.useState)([]),n=(0,i.A)(t,2),r=n[0],o=n[1],s=(0,g.A)(),c=(0,u.d4)((function(e){return e.app.isDarkMode}));return(0,a.useEffect)((function(){e.type&&e.slug&&d.sF(e.slug,e.type).then((function(e){var t=f.UMr(f.t55);o(e.map((function(e,n){return e.color=t(e._id),e})))})).catch((function(e){console.log(e)}))}),[]),(0,y.jsxs)(l.A,{sx:{margin:"5px",maxWidth:"400px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:c?s.palette.grey[800]:s.palette.grey[100],color:c?s.palette.grey[300]:s.palette.grey[600],borderRadius:5},children:["timeCreated"===e.type&&r.length>0&&(0,y.jsx)(p.xh,{data:r,legend:!0,scale:"time",direction:"vertical",style:{width:400,height:400}}),"statusCount"===e.type&&r.length>0&&(0,y.jsx)(p.RJ,{data:r,legend:!0,style:{width:400,height:400}}),"authorCount"===e.type&&r.length>0&&(0,y.jsx)(p.xh,{data:r,legend:!0,style:{width:400,height:400}})]})};t.Ay=function(e){var t=(0,a.useState)("general"),r=(0,i.A)(t,2),o=r[0],l=r[1],d=(0,h.Fu)(),p=null;return d.length>0&&(p=a.lazy((function(){return n.e(4679).then(n.bind(n,44679))}))),(0,y.jsxs)(s.A,{style:{width:"100%"},children:[d.includes("forms_data_viz")&&(0,y.jsx)(c.A,{style:{minHeight:"auto",margin:5,justifyContent:"center",width:"100%"},children:(0,y.jsx)(m.A,{value:o,list:[{value:"general",label:"General"},{value:"forms_data_viz",label:"Formulario"},{value:"hierarchical",label:"Jerarqu\xeda"}],onChange:function(e){l(e.value)}})}),"forms_data_viz"===o&&p&&(0,y.jsx)(a.Suspense,{fallback:(0,y.jsx)(y.Fragment,{}),children:(0,y.jsx)(p,{slug:e.selectedType.slug})}),"hierarchical"===o&&p&&(0,y.jsx)(a.Suspense,{fallback:(0,y.jsx)(y.Fragment,{}),children:(0,y.jsx)(p,{slug:e.selectedType.slug})}),"general"===o&&(0,y.jsxs)(s.A,{style:{display:"flex",alignContent:"flex-start",alignItems:"flex-start",width:"100%",flexWrap:"wrap",justifyContent:"center"},children:[(0,y.jsx)(j,{type:"timeCreated",slug:e.selectedType.slug}),(0,y.jsx)(j,{type:"statusCount",slug:e.selectedType.slug}),(0,y.jsx)(j,{type:"authorCount",slug:e.selectedType.slug})]})]})}},42588:function(e,t,n){n.d(t,{AD:function(){return M},M2:function(){return F},oF:function(){return N}});var i=n(60436),a=n(65043),r=n(15316),o=n(85865),l=n(17392),s=n(43845),c=n(81551),d=n(94495),p=n(39244),u=n(26240),g=n(11238),f=n(83003),h=n(85211),m=n(98344),y=n(5983),x=n(58140),v=n(18751),j=n(92429),A=n(78717),w=n(99246),k=n(70579),b=(0,c.A)((function(e){return{container:{display:"flex",flexDirection:"column",width:"calc(100% - 20px)",overflowY:"auto",marginLeft:"10px",marginTop:"10px"},item:{overflow:"hidden",color:"#777",fontSize:14,position:"relative",marginBottom:10,paddingBottom:10},itemName:{fontSize:15},chip:{margin:2,padding:2,"& .MuiChip-avatar":{backgroundColor:"transparent !important"}}}})),C=function(e){var t=b(),n=(0,u.A)(),i=(0,x.M)().showAlert,a=(0,f.d4)((function(e){return e.app.isDarkMode}));return(0,k.jsxs)(r.A,{className:t.item,style:e.style?e.style:{borderBottom:"1px solid ".concat(a?n.palette.grey[800]:n.palette.grey[200])},children:[(0,k.jsxs)(r.A,{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,k.jsx)(o.A,{className:t.itemName,style:{color:a?n.palette.primary.light:n.palette.primary.main},children:e.title}),e.help&&(0,k.jsx)(l.A,{onClick:function(){i("video-info",e.help)},children:(0,k.jsx)(y.A,{style:{color:a?n.palette.grey[400]:n.palette.grey[700]}})})]}),e.item?e.item:e.children]})},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=t<0?0:t,i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]},F=function(e){var t,n,i=b(),o=(0,f.d4)((function(e){return e.app.isDarkMode})),l=(0,u.A)();return(0,a.useEffect)((function(){0===e.record.parent.length?e.setMetadata(null):e.metadata&&e.setMetadata(e.record.parent[0])}),[e.record]),(0,k.jsxs)(r.A,{className:i.container,children:[(0,k.jsx)(C,{title:"Nombre del archivo",item:null!==e&&void 0!==e&&null!==(t=e.record)&&void 0!==t&&t.displayName?null===e||void 0===e||null===(n=e.record)||void 0===n?void 0:n.displayName:e.record.name}),(0,k.jsx)(C,{title:"HASH",item:e.record.hash}),(0,k.jsx)(C,{title:"Tama\xf1o",item:T(e.record.size)}),e.record.parent.length>0&&(0,k.jsx)(C,{title:"Contenido relacionado",children:e.record.parent.map((function(t,n){return(0,k.jsx)(s.A,{avatar:d.dR.filter((function(e){return e.value===t.icon}))?d.dR.filter((function(e){return e.value===t.icon}))[0].iconlight:(0,k.jsx)(p.A,{}),label:t.name,className:i.chip,onClick:function(){e.setMetadata(t)},sx:{background:o?l.palette.grey[800]:l.palette.grey[200],color:o?l.palette.grey[300]:l.palette.grey[600],"& svg":{width:15},"& path":{fill:o?l.palette.grey[300]:l.palette.grey[600]}}},n)}))})]})},M=function(e){var t=b(),n=((0,f.wA)(),(0,f.d4)((function(e){return e.app.filters}))),i=(0,f.d4)((function(e){return e.app.isDarkMode})),a=(0,u.A)(),l=(0,x.M)().showAlert;return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(r.A,{className:t.container,children:[(0,k.jsx)(g.nA,{startIcon:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(v.A,{}),(0,k.jsx)(j.A,{})]}),label:"Descargar inventario",style:{borderRadius:5,backgroundColor:i?a.palette.grey[800]:a.palette.grey[200],color:a.palette.grey[500]},onClick:function(){l("confirm","\xbfDesea descargar el inventario de los tipos de contenido?").then((function(t){if(t){l("loading","Generando archivo...");var i=n[e.view]&&n[e.view].post_type?n[e.view].post_type.slug:"*";A._Q({post_type:i,view:e.view},(function(e){l("loading","Descargando archivo... ".concat(Math.round(e),"%"))})).then((function(){l("success","Archivo descargado correctamente")})).catch((function(e){e.msg?l("error","Error al descargar el archivo: "+e.msg):l("error","Error al descargar el archivo")}))}}))}}),(0,k.jsx)(C,{title:"Descripci\xf3n",item:(0,k.jsx)(o.A,{children:e.type.description})}),e.files.total>0&&(0,k.jsx)(C,{title:"Balance general de los documentos",item:(0,k.jsx)(m.RJ,{data:e.files.data,legend:!0,style:{height:250,width:250,margin:"0 auto"}})}),(0,k.jsx)(N,{view:e.view,parents:e.parents,root:e.root})]})})},N=function(e){var t,n=(0,f.wA)(),a=(0,f.d4)((function(e){return e.app.filters})),r=b(),o=(0,f.d4)((function(e){return e.app.isDarkMode})),l=(0,u.A)(),c=(0,w.A)();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(C,{title:c.formatMessage({id:"cataloging.folderStructure"}),item:(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(g.$k,{label:c.formatMessage({id:"menuList.postTypes"}),style:{color:o?"white":"black",backgroundColor:o?"#333":"#f5f5f5",borderColor:o?"#333":"#f5f5f5"},showLabel:!1,value:a[e.view]?!e.single&&a[e.view].post_type?a[e.view].post_type.slug:e.single&&!Array.isArray(a[e.view].post_type_single)&&a[e.view].post_type_single?a[e.view].post_type_single.slug:"*":"*",onChange:function(t){if(e.onChange)e.onChange(t);else{var i=e.single?"post_type_single":"post_type";if("*"===t.target.value){var r=(0,h.e)(a,e.view,i,null);n((0,h.vm)(r))}else{var o=(0,h.e)(a,e.view,i,{slug:t.target.value});n((0,h.vm)(o))}}},options:function(){var t=(0,i.A)(e.parents.map((function(e){return{value:e.slug,label:e.name}})));return"cataloging"!==e.view&&(t=[{value:"*",label:c.formatMessage({id:"cataloging.allPostTypes"})}].concat((0,i.A)(t))),t}()})}),help:"folder-structure"}),a[e.view]&&(null===(t=a[e.view].parents)||void 0===t?void 0:t.name)&&(0,k.jsx)("div",{style:{marginBottom:10},children:(0,k.jsx)(s.A,{avatar:d.dR.filter((function(t){return t.value===a[e.view].parents.icon}))?d.dR.filter((function(t){return t.value===a[e.view].parents.icon}))[0].iconlight:(0,k.jsx)(p.A,{}),label:a[e.view].parents.name,className:r.chip,onDelete:function(){var t=(0,h.e)(a,e.view,"parents",{id:e.root});n((0,h.vm)(t))},size:"small",color:"primary",sx:{backgroundColor:l.palette.primary.light,color:l.palette.primary.main,"& path":{fill:l.palette.primary.main}}})})]})}},94072:function(e,t,n){n.d(t,{G:function(){return S},A:function(){return R}});var i=n(5544),a=n(65043),r=n(81551),o=n(16702),l=n(9989),s=n(60436),c=n(71322),d=n(51962),p=n(2050),u=n(48734),g=n(30279),f=n(35721),h=n(85473),m=n(39244),y=n(21337),x=n(44834),v=n(78717),j=n(33664),A=n(94495),w=n(53536),k=n(26240),b=n(70579),C=function(e){var t=(0,k.A)(),n=(0,r.A)((function(e){return{check:{padding:0},icon:{marginLeft:t.spacing(2),marginRight:t.spacing(1),minWidth:"auto","& path":{fill:t.palette.primary.main}},text:{"& span":{display:"inline-block",padding:"0 10px",fontSize:"14px",transition:"all 0.3s ease-in-out"},"&.selected span":{background:t.palette.primary.light,borderRadius:"5px",color:t.palette.primary.main}}}}))(),o=(0,a.useState)(!1),l=(0,i.A)(o,2),s=l[0],g=l[1],f=(0,a.useState)(!1),h=(0,i.A)(f,2),m=h[0],y=h[1];(0,a.useEffect)((function(){if((0,w.isArray)(e.path)){var t=e.path.find((function(t){return!!t&&t.id===e.id}));y(!!t)}}),[e.path]),(0,a.useEffect)((function(){if(e.selected)if(e.selected.length>0){var t=e.selected.find((function(t){return!!t&&t.id===e.id}));g(!!t)}else g(!1);else g(!1)}),[e.selected]);var x=function(){e.setFondo(e.original,e.parent)};return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(c.Ay,{className:e.class,style:{padding:0},children:[(e.activeTypes.filter((function(t){return t.slug===e.original.post_type}))[0].direct||e.directMode)&&(0,b.jsx)(d.A,{checked:s,className:n.check,edge:"start",color:"primary",onClick:function(){x()}}),(0,b.jsx)(p.A,{className:n.icon,children:A.dR.filter((function(t){return t.value===e.original.icon}))?A.dR.filter((function(t){return t.value===e.original.icon}))[0].iconlight:(0,b.jsx)(j.A,{})}),(0,b.jsx)(u.A,{style:{cursor:"pointer"},onClick:function(){x()},primary:e.original.name,className:"".concat(n.text," ").concat(m||s?"selected":"")})]})})},T=function(e){var t=(0,k.A)(),n=(0,r.A)((function(e){return{root:{flexGrow:1,display:"flex",paddingTop:t.spacing(4)},check:{padding:0},accordeons:{flexGrow:1,paddingLeft:t.spacing(2),paddingRight:t.spacing(2)},listado:{flexGrow:1,paddingLeft:t.spacing(2),paddingRight:t.spacing(2),maxWidth:600},nested:{paddingLeft:t.spacing(3)+"px !important",marginLeft:t.spacing(1)},icon:{marginLeft:t.spacing(2),marginRight:t.spacing(1),minWidth:"auto","&.loading":{"-webkit-animation":"rotate-center 1s linear infinite both !important",animation:"rotate-center 1s linear infinite both !important"},"& path":{fill:t.palette.primary.main}},iconExpand:{marginRight:t.spacing(1),minWidth:"auto","& path":{fill:"#999"}},text:{"& span":{display:"inline-block",padding:"0 10px",transition:"all 0.3s ease-in-out",fontSize:"14px"},"&.selected span":{background:t.palette.primary.light,borderRadius:"5px",color:t.palette.primary.main}}}}))(),o=(0,a.useState)(!1),l=(0,i.A)(o,2),j=l[0],F=l[1],M=(0,a.useState)(!1),N=(0,i.A)(M,2),_=N[0],S=N[1],R=(0,a.useState)(!1),L=(0,i.A)(R,2),E=L[0],B=L[1],D=(0,a.useState)(!1),W=(0,i.A)(D,2),z=W[0],G=W[1],J=(0,a.useState)([]),O=(0,i.A)(J,2),P=O[0],I=O[1],K=function(){F(!j)},H=function(){return[].concat((0,s.A)(e.parent),[{id:e.id,name:e.name}])};return(0,a.useEffect)((function(){0===P.length&&j&&(G(!0),v.Jv(JSON.stringify({root:e.id,tree:e.activeTypes,view:"tree"})).then((function(e){I(e),G(!1)})))}),[j]),(0,a.useEffect)((function(){if(G(!1),(0,w.isArray)(e.path)){var t=e.path.find((function(t){return!!t&&t.id===e.id}));B(!!t),F(!!t)}}),[e.path]),(0,a.useEffect)((function(){e.selected?e.selected.length>0&&e.selected.filter((function(t){return t.id===e.original.id})).length>0?S(!0):S(!1):S(!1)}),[e.selected]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(c.Ay,{className:e.class,style:{padding:0},children:[!e.onlyType&&(0,b.jsx)(b.Fragment,{children:(e.activeTypes.filter((function(t){return t.slug===e.original.post_type}))[0].direct||e.directMode)&&(0,b.jsx)(d.A,{checked:_,color:"primary",edge:"start",className:n.check,onClick:function(){e.setFondo(e.original,e.parent)},style:{padding:0}})}),e.onlyType&&e.original.post_type===e.selectedType&&(0,b.jsx)(d.A,{checked:_,color:"primary",edge:"start",className:n.check,onClick:function(){e.setFondo(e.original,e.parent)},style:{padding:0}}),z?(0,b.jsx)(p.A,{className:"loading ".concat(n.icon),style:{minWidth:"auto"},children:(0,b.jsx)(x.A,{})}):(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(p.A,{className:n.icon,style:{color:_||E?t.palette.primary.dark:t.palette.secondary.dark,minWidth:"auto"},children:A.dR.filter((function(t){return t.value===e.original.icon}))?A.dR.filter((function(t){return t.value===e.original.icon}))[0].icon:(0,b.jsx)(m.A,{})})}),j&&!z?(0,b.jsx)(h.A,{style:{cursor:"pointer"},onClick:K,className:n.iconExpand}):(0,b.jsx)(b.Fragment,{children:z?(0,b.jsx)(y.A,{className:n.iconExpand}):(0,b.jsx)(y.A,{style:{cursor:"pointer"},onClick:K,className:n.iconExpand})}),(0,b.jsx)(u.A,{style:{cursor:"pointer"},className:"".concat(n.text," ").concat(E||_?"selected":""),primary:e.original.name,onClick:function(){e.setFondo(e.original,e.parent)}})]}),(0,b.jsx)(g.A,{in:j,timeout:"auto",unmountOnExit:!0,children:(0,b.jsx)(f.A,{component:"div",disablePadding:!0,style:{paddingLeft:"30px"},children:P.map((function(t){return!0!==t.children?(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(C,{name:t.text,original:t,class:"".concat(e.class," ").concat(n.nested),setFondo:e.setFondo,fondo:e.fondo,id:t.id,parent:null!==e.parent?H():[{id:e.id,name:e.name}],path:e.path,selected:e.selected,activeTypes:e.activeTypes})}):(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(T,{name:t.text,class:"".concat(n.nested," ").concat(e.class),children:t.children,original:t,id:t.id,path:e.path,setFondo:e.setFondo,fondo:e.fondo,parent:null!==e.parent?H():[{id:e.id,name:e.name}],activeTypes:e.activeTypes,selected:e.selected})})}))})})]})},F=T,M=(0,r.A)((function(e){return{root:{flexGrow:1,display:"flex",paddingTop:e.spacing(4)},tabs:{},accordeons:{flexGrow:1,paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},listado:{flexGrow:1,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),maxWidth:600},nested:{paddingLeft:e.spacing(3),marginLeft:e.spacing(3),borderLeft:"1px solid #dcdcdc"},item:{padding:1}}})),N=function(e){var t=M();return(0,b.jsx)(o.A,{className:t.listado,children:(0,b.jsx)(l.A,{disablePadding:!0,component:"nav","aria-labelledby":"nested-list-subheader",children:e.root.map((function(n){return!0===n.children?(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(F,{name:"".concat(n.text),children:n.children,id:n.id,original:n,setFondo:e.setFondo,setLoading:e.setLoading,fondo:e.fondo,class:t.item,parent:null,path:e.path,activeTypes:e.activeTypes,selected:e.selected,directMode:e.directMode,selectedTypes:e.selectedTypes,onlyType:e.onlyType})}):(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(C,{id:n.id,name:n.text,original:n,setFondo:e.setFondo,fondo:e.fondo,parent:null,path:e.path,class:t.item,selected:e.selected,activeTypes:e.activeTypes,directMode:e.directMode})})}))})})},_=n(13870),S=function(e){var t=(0,a.useState)(0),n=(0,i.A)(t,2),r=(n[0],n[1],(0,a.useState)([])),o=(0,i.A)(r,2),l=o[0],s=o[1];return(0,a.useEffect)((function(){var t,n,i={root:e.root?e.root:"all",tree:e.parents,view:"tree"};e.parents.length>0&&(null!==(t=e.filters)&&void 0!==t&&t.treeKeyword&&""!==(null===(n=e.filters)||void 0===n?void 0:n.treeKeyword)?(i.keyword=e.filters.treeKeyword,(0,_.N)(JSON.stringify(i)).then((function(e){s(e)}))):(0,v.Jv)(JSON.stringify(i)).then((function(e){s(e)})))}),[e.parents,e.filters]),(0,b.jsx)("div",{style:{marginTop:10},children:(0,b.jsx)(N,{root:l,path:e.path,selected:e.selected,setFondo:e.setFondo,activeTypes:e.activeTypes,childrenEditing:e.childrenEditing,setPath:e.setPath,directMode:e.directMode,onlyType:e.onlyType,selectedType:e.selectedType})})},R=S}}]);
//# sourceMappingURL=621.7970c16f.chunk.js.map