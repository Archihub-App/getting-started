"use strict";(self.webpackChunkarchihub=self.webpackChunkarchihub||[]).push([[2826],{19541:function(e,t,n){n.d(t,{AI:function(){return x},Xm:function(){return y}});var r=n(5544),o=n(65043),l=n(34535),a=n(43845),i=n(12110),s=n(15316),c=n(55263),u=n(31445),d=n(98344),p=n(83003),f=n(26240),g=n(49658),h=n(88120),m=n(15089),v=n(70579),y=(0,l.Ay)(a.A)((function(e){var t=e.theme,n=((0,f.A)(),(0,p.d4)((function(e){return e.app.isDarkMode})));return{backgroundColor:n?t.palette.grey[800]:"white",height:t.spacing(3),color:n?t.palette.grey[300]:t.palette.secondary.dark,border:"none",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:200,"& svg":{width:15,marginLeft:10,marginRight:0},"& path":{fill:n?t.palette.grey[300]:t.palette.secondary.dark},"&:hover":{backgroundColor:t.palette.secondary.light,color:t.palette.secondary.dark,"& path":{fill:t.palette.secondary.main}}}})),x=(0,l.Ay)(a.A)((function(e){var t=e.theme;return{backgroundColor:t.palette.primary.light,height:t.spacing(3),color:t.palette.primary.main,border:"none",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:200,"& svg":{width:15,marginLeft:10,marginRight:0},"& path":{fill:t.palette.primary.main}}})),A=function(e){var t=(0,o.useState)([]),n=(0,r.A)(t,2),l=n[0],a=n[1],s=(0,f.A)(),c=(0,p.d4)((function(e){return e.app.isDarkMode}));return(0,o.useEffect)((function(){e.type&&e.slug&&u.sF(e.slug,e.type).then((function(e){var t=g.UMr(g.t55);a(e.map((function(e,n){return e.color=t(e._id),e})))})).catch((function(e){console.log(e)}))}),[]),(0,v.jsxs)(i.A,{sx:{margin:"5px",maxWidth:"400px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:c?s.palette.grey[800]:s.palette.grey[100],color:c?s.palette.grey[300]:s.palette.grey[600],borderRadius:5},children:["timeCreated"===e.type&&l.length>0&&(0,v.jsx)(d.xh,{data:l,legend:!0,scale:"time",direction:"vertical",style:{width:400,height:400}}),"statusCount"===e.type&&l.length>0&&(0,v.jsx)(d.RJ,{data:l,legend:!0,style:{width:400,height:400}}),"authorCount"===e.type&&l.length>0&&(0,v.jsx)(d.xh,{data:l,legend:!0,style:{width:400,height:400}})]})};t.Ay=function(e){var t=(0,o.useState)("general"),l=(0,r.A)(t,2),a=l[0],i=l[1],u=(0,h.Fu)(),d=null;return u.length>0&&(d=o.lazy((function(){return n.e(4679).then(n.bind(n,44679))}))),(0,v.jsxs)(s.A,{style:{width:"100%"},children:[u.includes("forms_data_viz")&&(0,v.jsx)(c.A,{style:{minHeight:"auto",margin:5,justifyContent:"center",width:"100%"},children:(0,v.jsx)(m.A,{value:a,list:[{value:"general",label:"General"},{value:"forms_data_viz",label:"Formulario"},{value:"hierarchical",label:"Jerarqu\xeda"}],onChange:function(e){i(e.value)}})}),"forms_data_viz"===a&&d&&(0,v.jsx)(o.Suspense,{fallback:(0,v.jsx)(v.Fragment,{}),children:(0,v.jsx)(d,{slug:e.selectedType.slug})}),"hierarchical"===a&&d&&(0,v.jsx)(o.Suspense,{fallback:(0,v.jsx)(v.Fragment,{}),children:(0,v.jsx)(d,{slug:e.selectedType.slug})}),"general"===a&&(0,v.jsxs)(s.A,{style:{display:"flex",alignContent:"flex-start",alignItems:"flex-start",width:"100%",flexWrap:"wrap",justifyContent:"center"},children:[(0,v.jsx)(A,{type:"timeCreated",slug:e.selectedType.slug}),(0,v.jsx)(A,{type:"statusCount",slug:e.selectedType.slug}),(0,v.jsx)(A,{type:"authorCount",slug:e.selectedType.slug})]})]})}},34305:function(e,t,n){var r=n(24994),o=n(6305);t.A=void 0;var l=o(n(65043)),a=(0,r(n(59846)).default)(l.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");t.A=a},46020:function(e,t,n){n.d(t,{Jt:function(){return l},O8:function(){return u},UK:function(){return c},hE:function(){return a},lD:function(){return s},yo:function(){return i}});var r=n(88120),o=n(91280);function l(e){var t="/views/"+e,n={method:"GET",headers:new Headers({Authorization:(0,o.g)()}),mode:"cors",cache:"default"};return fetch((0,r.H6)()+t,n).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function a(e){var t="/views/info/"+e,n={method:"GET",headers:new Headers({Authorization:(0,o.g)()}),mode:"cors",cache:"default"};return fetch((0,r.H6)()+t,n).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function i(e,t){var n="/views/"+e,l={method:"PUT",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:t};return fetch((0,r.H6)()+n,l).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function s(e){var t="/views/"+e,n={method:"DELETE",headers:new Headers({Authorization:(0,o.g)()}),mode:"cors",cache:"default"};return fetch((0,r.H6)()+t,n).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function c(){var e={method:"GET",headers:new Headers({Authorization:(0,o.g)()}),mode:"cors",cache:"default"};return fetch((0,r.H6)()+"/views",e).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function u(e){var t={method:"POST",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch((0,r.H6)()+"/views",t).then((function(e){return 201!==e.status?Promise.reject(e):e.json()}))}},53480:function(e,t,n){var r=n(5544),o=n(65043),l=n(41905),a=n(8168),i=n(43845),s=n(78717),c=n(49658),u=n(94495),d=n(83003),p=n(26240),f=n(72003),g=n(65226),h=n(70579),m=c.UMr(c.Ks0);(0,l.A)((function(e){return{btn_color:{color:"#869bb7 !important",padding:"5px !important",width:"30px !important",height:"30px !important",margin:"0 2px !important",borderRadius:"50%",border:"1px solid #c6d0dd !important","&:hover":{color:"#fff !important",backgroundColor:"#56749a !important"},"& .MuiSvgIcon-root":{width:"14px !important"}}}}));t.A=function(e){var t=(0,p.A)(),n=(0,d.d4)((function(e){return e.app.isDarkMode})),l=(0,o.useState)([]),c=(0,r.A)(l,2),v=c[0],y=c[1],x=(0,o.useState)(0),A=(0,r.A)(x,2),j=A[0],b=A[1],w=(0,o.useState)(0),C=(0,r.A)(w,2),S=C[0],_=C[1],k=(0,o.useState)(!0),M=(0,r.A)(k,2),P=M[0],R=M[1];(0,o.useEffect)((function(){y([]),R(!0),s.tB(e.records,j,!0).then((function(e){y(e.data),_(e.total),R(!1)})).catch((function(e){console.log(e)}))}),[e.records,j]);return(0,h.jsxs)(h.Fragment,{children:[P&&(0,h.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"},children:(0,h.jsx)(g.A,{options:{loop:!0,autoplay:!0,animationData:f,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}},height:100,width:100})}),v.length>0&&!P&&(0,h.jsx)(a.A,{pagination:!0,resources:v,page:j,setPage:b,total:S,perpage:10,handleClick:e.handleClick,columns:[{destiny:"displayName",label:"Nombre"},{destiny:"type",label:"Tipo"},{destiny:"tag",label:"Etiqueta"}],columnSolver:function(e,r){var o,l,a,s;return(0,h.jsxs)(h.Fragment,{children:["displayName"===r.destiny&&(0,h.jsx)("span",{children:e.displayName}),"type"===r.destiny&&(null===e||void 0===e||null===(o=e.processing)||void 0===o||null===(l=o.fileProcessing)||void 0===l?void 0:l.type)&&(0,h.jsx)(i.A,{size:"small",label:u.ZC.find((function(t){return t.value===e.processing.fileProcessing.type})).label,sx:{backgroundColor:n?t.palette.grey[800]:t.palette.grey[200],color:n?t.palette.grey[300]:t.palette.grey[600]}}),"tag"===r.destiny&&(0,h.jsx)(i.A,{size:"small",label:e.tag,style:{backgroundColor:m(e.tag),color:"#fff"}}),"type"===r.destiny&&!(null!==e&&void 0!==e&&null!==(a=e.processing)&&void 0!==a&&null!==(s=a.fileProcessing)&&void 0!==s&&s.type)&&(0,h.jsx)(i.A,{size:"small",label:"Sin procesar"})]})}})]})}},60083:function(e,t,n){n.r(t),n.d(t,{default:function(){return X}});var r=n(5544),o=n(65043),l=n(15089),a=n(46068),i=n(73216),s=n(83003),c=n(85211),u=n(78717),d=n(46020),p=n(58140),f=n(53480),g=n(60436),h=n(64467),m=n(58168),v=n(98587),y=n(69292),x=n(98610),A=n(58123),j=n(34535),b=n(98206),w=n(85865),C=n(67266),S=n(59662),_=n(70579),k=(0,S.A)((0,_.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz"),M=n(41538),P=["slots","slotProps"],R=(0,j.Ay)(M.A)((function(e){var t=e.theme;return(0,m.A)({display:"flex",marginLeft:"calc(".concat(t.spacing(1)," * 0.5)"),marginRight:"calc(".concat(t.spacing(1)," * 0.5)")},"light"===t.palette.mode?{backgroundColor:t.palette.grey[100],color:t.palette.grey[700]}:{backgroundColor:t.palette.grey[700],color:t.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,m.A)({},"light"===t.palette.mode?{backgroundColor:t.palette.grey[200]}:{backgroundColor:t.palette.grey[600]}),"&:active":(0,m.A)({boxShadow:t.shadows[0]},"light"===t.palette.mode?{backgroundColor:(0,C.tL)(t.palette.grey[200],.12)}:{backgroundColor:(0,C.tL)(t.palette.grey[600],.12)})})})),T=(0,j.Ay)(k)({width:24,height:16});var z=function(e){var t=e.slots,n=void 0===t?{}:t,r=e.slotProps,o=void 0===r?{}:r,l=(0,v.A)(e,P),a=e;return(0,_.jsx)("li",{children:(0,_.jsx)(R,(0,m.A)({focusRipple:!0},l,{ownerState:a,children:(0,_.jsx)(T,(0,m.A)({as:n.CollapsedIcon,ownerState:a},o.collapsedIcon))}))})},I=n(92532),H=n(72372);function E(e){return(0,H.Ay)("MuiBreadcrumbs",e)}var N=(0,I.A)("MuiBreadcrumbs",["root","ol","li","separator"]),B=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],L=(0,j.Ay)(w.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:function(e,t){return[(0,h.A)({},"& .".concat(N.li),t.li),t.root]}})({}),F=(0,j.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:function(e,t){return t.ol}})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),D=(0,j.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:function(e,t){return t.separator}})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function O(e,t,n,r){return e.reduce((function(o,l,a){return a<e.length-1?o=o.concat(l,(0,_.jsx)(D,{"aria-hidden":!0,className:t,ownerState:r,children:n},"separator-".concat(a))):o.push(l),o}),[])}var W=o.forwardRef((function(e,t){var n=(0,b.b)({props:e,name:"MuiBreadcrumbs"}),l=n.children,a=n.className,i=n.component,s=void 0===i?"nav":i,c=n.slots,u=void 0===c?{}:c,d=n.slotProps,p=void 0===d?{}:d,f=n.expandText,h=void 0===f?"Show path":f,j=n.itemsAfterCollapse,w=void 0===j?1:j,C=n.itemsBeforeCollapse,S=void 0===C?1:C,k=n.maxItems,M=void 0===k?8:k,P=n.separator,R=void 0===P?"/":P,T=(0,v.A)(n,B),I=o.useState(!1),H=(0,r.A)(I,2),N=H[0],D=H[1],W=(0,m.A)({},n,{component:s,expanded:N,expandText:h,itemsAfterCollapse:w,itemsBeforeCollapse:S,maxItems:M,separator:R}),G=function(e){var t=e.classes;return(0,x.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},E,t)}(W),U=(0,A.A)({elementType:u.CollapsedIcon,externalSlotProps:p.collapsedIcon,ownerState:W}),q=o.useRef(null),J=o.Children.toArray(l).filter((function(e){return o.isValidElement(e)})).map((function(e,t){return(0,_.jsx)("li",{className:G.li,children:e},"child-".concat(t))}));return(0,_.jsx)(L,(0,m.A)({ref:t,component:s,color:"text.secondary",className:(0,y.A)(G.root,a),ownerState:W},T,{children:(0,_.jsx)(F,{className:G.ol,ref:q,ownerState:W,children:O(N||M&&J.length<=M?J:function(e){return S+w>=e.length?e:[].concat((0,g.A)(e.slice(0,S)),[(0,_.jsx)(z,{"aria-label":h,slots:{CollapsedIcon:u.CollapsedIcon},slotProps:{collapsedIcon:U},onClick:function(){D(!0);var e=q.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis")],(0,g.A)(e.slice(e.length-w,e.length)))}(J),G.separator,R,W)})}))})),G=n(19541),U=n(94495),q=n(34305),J=n(29464),X=(n(76445),function(){var e,t,n,g=(0,o.useState)("metadata"),h=(0,r.A)(g,2),m=h[0],v=h[1],y=(0,o.useState)(null),x=(0,r.A)(y,2),A=x[0],j=x[1],b=(0,o.useState)(null),w=(0,r.A)(b,2),C=w[0],S=w[1],k=(0,o.useState)(null),M=(0,r.A)(k,2),P=M[0],R=M[1],T=(0,o.useState)([]),z=(0,r.A)(T,2),I=z[0],H=z[1],E=(0,o.useState)(!0),N=(0,r.A)(E,2),B=(N[0],N[1]),L=(0,i.g)(),F=L.id,D=L.slug,O=(0,i.Zp)(),X=(0,s.wA)(),K=(0,s.d4)((function(e){return e.app.filters})),Z=(0,p.M)().showAlert,V=(0,o.useState)(null),Y=(0,r.A)(V,2),Q=Y[0],$=Y[1],ee=(0,o.useState)(0),te=(0,r.A)(ee,2);te[0],te[1];(0,o.useEffect)((function(){ne()}),[F,D]);var ne=function(){F&&!D?(v("metadata"),j(null),u.HD(F).then((function(e){var t,n;if(console.log(null===(t=e.children)||void 0===t?void 0:t.filter((function(e){return"files"!==e.slug})).map((function(e){return e.slug}))[0]),B(!1),e.parents&&(e.parents=e.parents.reverse()),H([]),j(e),null!==(n=K.cataloging)&&void 0!==n&&n.single_id){if(K.cataloging.single_id!==F){var r,o=(0,c.e)(K,"cataloging","single_id",F);o=(0,c.e)(o,"cataloging","post_type_single",{slug:null===(r=e.children)||void 0===r?void 0:r.filter((function(e){return"files"!==e.slug})).map((function(e){return e.slug}))[0]}),X((0,c.vm)(o))}}else{var l,a=(0,c.e)(K,"cataloging","single_id",F);a=(0,c.e)(a,"cataloging","post_type_single",{slug:null===(l=e.children)||void 0===l?void 0:l.filter((function(e){return"files"!==e.slug})).map((function(e){return e.slug}))[0]}),X((0,c.vm)(a))}})).catch((function(e){Z("error","No se pudo obtener el recurso").then((function(){O("/")}))}))):F&&D&&($(D),v("metadata"),j(null),u.HD(F).then((function(e){var t;if(B(!1),e.parents&&(e.parents=e.parents.reverse()),null!==(t=K[D])&&void 0!==t&&t.single_id){if(K[D].single_id!==F){var n,r=(0,c.e)(K,D,"single_id",F);r=(0,c.e)(r,D,"post_type_single",null===(n=e.children)||void 0===n?void 0:n.filter((function(e){return"files"!==e.slug})).map((function(e){return e.slug}))),r=(0,c.e)(r,D,"page_single",0),r=(0,c.e)(r,D,"root_single",{id:F}),X((0,c.vm)(r))}}else{var o,l=(0,c.e)(K,D,"single_id",F);l=(0,c.e)(l,D,"post_type_single",null===(o=e.children)||void 0===o?void 0:o.filter((function(e){return"files"!==e.slug})).map((function(e){return e.slug}))),l=(0,c.e)(l,D,"page_single",0),l=(0,c.e)(l,D,"root_single",{id:F}),X((0,c.vm)(l))}j(e),d.hE(D).then((function(e){R(e.forms),S(e),H(e.types)})).catch((function(e){console.log(e)}))})).catch((function(e){Z("error","No se pudo obtener el recurso").then((function(){O("/")}))})))};return(0,_.jsx)(_.Fragment,{children:A&&(0,_.jsxs)(_.Fragment,{children:[null!==A&&void 0!==A&&A.parents?(0,_.jsx)("div",{style:{width:"100vw",overflowX:"auto",paddingTop:"10px",paddingBottom:"10px"},children:(0,_.jsxs)(W,{"aria-label":"breadcrumb",separator:(0,_.jsx)(q.A,{fontSize:"small",style:{margin:0}}),sx:{width:"1500px"},children:[A.parents.map((function(e,t){return(0,_.jsx)(G.Xm,{label:e.name,icon:U.dR.find((function(t){return t.value===e.icon})).icon,clickable:!0,onClick:function(){Q?e.id===C.parent?O("/explore/".concat(Q)):O("/explore/".concat(Q,"/detail/").concat(e.id)):O("/detail/".concat(e.id))}},t)})),(0,_.jsx)(G.AI,{label:A.metadata.firstLevel.title,icon:null===(e=U.dR.find((function(e){return e.value===(null===A||void 0===A?void 0:A.icon)})))||void 0===e?void 0:e.icon},A.id)]})}):(0,_.jsx)(G.AI,{label:null===A||void 0===A||null===(t=A.metadata)||void 0===t||null===(n=t.firstLevel)||void 0===n?void 0:n.title,icon:U.dR.find((function(e){return e.value===A.icon})).icon},A.id),(0,_.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"10px",borderBottom:"1px solid #e0e0e0"},children:(0,_.jsx)(l.A,{value:m,list:function(){var e=[{value:"metadata",label:"Metadatos"}];return A.children.find((function(e){return"files"===e.slug}))&&e.push({value:"files",label:"Archivos"}),A.children.find((function(e){return"files"!==e.slug}))&&e.push({value:"search",label:"Recursos"}),e}(),onChange:function(e){v(e.value)}})}),"metadata"===m&&(0,_.jsx)(a.A,{data:A,redirect:function(e){O(e)}}),"files"===m&&(0,_.jsx)(f.A,{selectedType:m.slug,resourceId:A._id,records:A._id,parents:{parents:{id:A._id}},handleClick:function(e){var t,n,r,o,l,a;null!==e&&void 0!==e&&null!==(t=e.processing)&&void 0!==t&&null!==(n=t.fileProcessing)&&void 0!==n&&n.type&&"image gallery"!==(null===e||void 0===e||null===(r=e.processing)||void 0===r||null===(o=r.fileProcessing)||void 0===o?void 0:o.type)?O("/file/".concat(e.id)):"image gallery"===(null===e||void 0===e||null===(l=e.processing)||void 0===l||null===(a=l.fileProcessing)||void 0===a?void 0:a.type)&&O("/gallery/".concat(A._id))}}),"search"===m&&(0,_.jsx)(J.M,{type:I,types:I,selectedType:m,selectedResource:A,detail:!Q,view:D||"cataloging",single:!0,forms:P,mobile:!0},m)]})})})},79484:function(e,t,n){var r=n(59662),o=n(70579);t.A=(0,r.A)((0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")}}]);
//# sourceMappingURL=2826.9dbcee52.chunk.js.map