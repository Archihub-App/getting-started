(this.webpackJsonpsim=this.webpackJsonpsim||[]).push([[27],{1381:function(e,t,a){"use strict";a.r(t),a.d(t,"Main",(function(){return C}));var n=a(18),r=a(35),o=a(2),i=a.n(o),s=a(50),l=a(119),u=a(937),c=a(938),d=a(843),m=a(926),h=a(968),f=a(940),p=a(943),b=a.n(p),g=a(939),v=a(945),E=a(138),B=a.n(E),x=a(1406),R=a(990),w=(a(263),Object(d.a)((function(e){return{item:{paddingTop:10,paddingLeft:5,alignContent:"flex-start",alignItems:"center",textAlign:"left",borderBottom:"1px solid #ccc",paddingBottom:20,"& h6":{margin:0,marginBottom:5,color:"#666",fontWeight:"bold"},"&:last-child":{borderBottom:"none",borderBottomLeftRadius:10,borderBottomRightRadius:10},"&:nth-child(odd)":{background:e.palette.grey[100]},"&:first-child":{marginTop:10},"& label":{width:150,textAlign:"left",paddingRight:10,fontWeight:"bold",color:"#666","& span":{color:"red",marginLeft:5},"&.simple":{fontWeight:"normal"}},"& input":{width:"100%",padding:5,border:"1px solid #ccc",borderTopLeftRadius:5,borderBottomLeftRadius:5,borderRight:"none"},"& textarea":{width:"100%",padding:5,borderRadius:5,border:"1px solid #ccc"},"& select":{width:"100%",padding:5,borderRadius:5,border:"1px solid #ccc"},"& input[type=checkbox]":{width:"auto"},"& input, & textarea, & select":{"&:focus":{outline:"none",border:"1px solid rgba(42, 80, 130, 0.8)"}},"&.error":{background:"rgba(255,0,0,0.05)","& label":{color:"red"}}},generateBlock:{display:"flex"},leftInput:{borderTopRightRadius:0,borderBottomRightRadius:0},rightButton:{borderTopLeftRadius:0,borderBottomLeftRadius:0,boxShadow:"none"}}}))),C=function(e){var t=w(),a=Object(o.useState)(!1),s=Object(r.a)(a,2),l=s[0],d=s[1],p=Object(o.useState)(null),E=Object(r.a)(p,2),C=E[0],y=E[1],j=Object(o.useState)(null),O=Object(r.a)(j,2),S=O[0],T=O[1],q=Object(o.useState)(null),L=Object(r.a)(q,2),k=L[0],N=L[1],P=Object(o.useState)({}),A=Object(r.a)(P,2),J=A[0],F=A[1];Object(o.useEffect)((function(){e.match.params.id?(d(!0),h.h(e.match.params.id).then((function(e){var t=Object(n.a)({},e);f.h().then((function(e){var a=[];t.roles.forEach((function(t){var n=e.options.find((function(e){return e.id===t}));a.push(n)})),t.roles=a,T(e.options),f.b().then((function(e){var a=[];t.accessRights.forEach((function(t){var n=e.options.find((function(e){return e.id===t}));a.push(n)})),t.accessRights=a,N(e.options),y(t)}))}))}))):(d(!1),y({name:"",username:"",password:"",confirmPassword:"",roles:[],accessRights:[]}),f.h().then((function(e){T(e.options)})),f.b().then((function(e){N(e.options)})))}),[]);return i.a.createElement(c.a,null,i.a.createElement(u.a,{userRoles:e.user.roles,list:function(){var t=[];return t.push({name:"Volver",icon:i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,null)),callback:function(){e.history.push("/admin/users")}}),t}()}),C&&S&&k&&i.a.createElement(R.BloqueContenido,{title:l?"Editar usuario: ".concat(C.username):"Nuevo usuario",style:{width:600,height:"calc(100vh - 150px)",overflow:"auto"}},i.a.createElement(v.c,{initialValues:C,onSubmit:function(t,a){var n=a.setSubmitting;l?B.a.fire({title:"\xbfEst\xe1 seguro?",icon:"question",showCancelButton:!0,confirmButtonText:"S\xed, guardar",cancelButtonText:"Cancelar"}).then((function(a){a.isConfirmed&&h.k(JSON.stringify(t)).then((function(t){B.a.fire("Guardado","El usuario se ha guardado correctamente","success"),e.history.push("/admin/users")})).catch((function(e){e.json().then((function(e){B.a.fire({title:"Error",text:e.msg,icon:"error",confirmButtonText:"Aceptar"})}))}))})):B.a.fire({title:"\xbfDesea crear un nuevo usuario?",icon:"question",showCancelButton:!0,confirmButtonText:"S\xed",cancelButtonText:"Cancelar"}).then((function(a){a.isConfirmed&&h.b(JSON.stringify(t)).then((function(t){B.a.fire("Creado","El usuario se ha creado correctamente","success"),e.history.push("/admin/users")})).catch((function(e){n(!1),e.json().then((function(e){F(e.errors),B.a.fire({title:"Error",text:e.msg,icon:"error",confirmButtonText:"Aceptar"})}))}))}))}},(function(e){var a=e.values,n=(e.errors,e.touched,e.handleChange),r=e.handleBlur,o=e.handleSubmit,s=e.isSubmitting,u=e.setFieldValue;return i.a.createElement("form",{onSubmit:o},!l&&i.a.createElement(i.a.Fragment,null,i.a.createElement(g.o,{name:"Nombre",value:a.name,handleChange:n,handleBlur:r,errors:null===J||void 0===J?void 0:J.name,required:!0,id:"name"}),i.a.createElement(g.o,{name:"Correo electr\xf3nico",value:a.username,handleChange:n,handleBlur:r,errors:null===J||void 0===J?void 0:J.username,required:!0,id:"username"}),i.a.createElement(g.o,{name:"Contrase\xf1a",value:a.password,handleChange:n,handleBlur:r,errors:null===J||void 0===J?void 0:J.password,required:!0,id:"password",type:"password"}),i.a.createElement(g.o,{name:"Confirmar contrase\xf1a",value:a.confirmPassword,handleChange:n,handleBlur:r,errors:null===J||void 0===J?void 0:J.confirmPassword,required:!0,id:"confirmPassword",type:"password"})),i.a.createElement(m.a,{className:t.item},i.a.createElement(m.a,null,i.a.createElement("h6",null,"Roles de usuario"),i.a.createElement("p",null,"Los roles de usuario desempe\xf1an un papel fundamental en el aplicativo, ya que permiten definir las habilidades y capacidades de cada usuario dentro de la herramienta.")),i.a.createElement(g.f,{label:"Roles",options:S,multiple:!0,value:a.roles,handleChange:function(e){u("roles",e)}})),i.a.createElement(m.a,{className:t.item},i.a.createElement(m.a,null,i.a.createElement("h6",null,"Niveles de acceso del usuario"),i.a.createElement("p",null,"Los niveles de acceso juegan un papel crucial en la aplicaci\xf3n, ya que determinan qu\xe9 informaci\xf3n puede acceder un usuario. Por defecto un usuario puede ver todo el contenido P\xfablico.")),i.a.createElement(g.f,{label:"accessRights",options:k,multiple:!0,value:a.accessRights,handleChange:function(e){u("accessRights",e)}})),i.a.createElement(m.a,{style:{display:"flex",justifyContent:"flex-end",gap:10,marginTop:10}},l&&i.a.createElement(x.a,{type:"submit",variant:"outlined",disabled:s},"Guardar"),!l&&i.a.createElement(x.a,{type:"submit",variant:"outlined",disabled:s},"Crear usuario")))}))))};t.default=Object(s.b)((function(e){return{user:e.auth.user}}),l.a)(C)}}]);
//# sourceMappingURL=27.a8f3ca7c.chunk.js.map