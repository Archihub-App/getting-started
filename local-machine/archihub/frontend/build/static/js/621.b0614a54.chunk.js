"use strict";(self.webpackChunkarchihub=self.webpackChunkarchihub||[]).push([[621],{94072:function(e,t,n){n.d(t,{G:function(){return S},A:function(){return _}});var i=n(5544),a=n(65043),r=n(81551),o=n(16702),l=n(9989),s=n(60436),c=n(71322),d=n(51962),p=n(2050),u=n(48734),g=n(30279),f=n(35721),h=n(85473),m=n(39244),y=n(21337),x=n(44834),v=n(78717),A=n(33664),j=n(94495),w=n(53536),k=n(26240),b=n(70579),T=function(e){var t=(0,k.A)(),n=(0,r.A)((function(e){return{check:{padding:0},icon:{marginLeft:t.spacing(2),marginRight:t.spacing(1),minWidth:"auto","& path":{fill:t.palette.primary.main}},text:{"& span":{display:"inline-block",padding:"0 10px",fontSize:"14px",transition:"all 0.3s ease-in-out"},"&.selected span":{background:t.palette.primary.light,borderRadius:"5px",color:t.palette.primary.main}}}}))(),o=(0,a.useState)(!1),l=(0,i.A)(o,2),s=l[0],g=l[1],f=(0,a.useState)(!1),h=(0,i.A)(f,2),m=h[0],y=h[1];(0,a.useEffect)((function(){if((0,w.isArray)(e.path)){var t=e.path.find((function(t){return!!t&&t.id===e.id}));y(!!t)}}),[e.path]),(0,a.useEffect)((function(){if(e.selected)if(e.selected.length>0){var t=e.selected.find((function(t){return!!t&&t.id===e.id}));g(!!t)}else g(!1);else g(!1)}),[e.selected]);var x=function(){e.setFondo(e.original,e.parent)};return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(c.Ay,{className:e.class,style:{padding:0},children:[(e.activeTypes.filter((function(t){return t.slug===e.original.post_type}))[0].direct||e.directMode)&&(0,b.jsx)(d.A,{checked:s,className:n.check,edge:"start",color:"primary",onClick:function(){x()}}),(0,b.jsx)(p.A,{className:n.icon,children:j.dR.filter((function(t){return t.value===e.original.icon}))?j.dR.filter((function(t){return t.value===e.original.icon}))[0].iconlight:(0,b.jsx)(A.A,{})}),(0,b.jsx)(u.A,{style:{cursor:"pointer"},onClick:function(){x()},primary:e.original.name,className:"".concat(n.text," ").concat(m||s?"selected":"")})]})})},C=function(e){var t=(0,k.A)(),n=(0,r.A)((function(e){return{root:{flexGrow:1,display:"flex",paddingTop:t.spacing(4)},check:{padding:0},accordeons:{flexGrow:1,paddingLeft:t.spacing(2),paddingRight:t.spacing(2)},listado:{flexGrow:1,paddingLeft:t.spacing(2),paddingRight:t.spacing(2),maxWidth:600},nested:{paddingLeft:t.spacing(3)+"px !important",marginLeft:t.spacing(1)},icon:{marginLeft:t.spacing(2),marginRight:t.spacing(1),minWidth:"auto","&.loading":{"-webkit-animation":"rotate-center 1s linear infinite both !important",animation:"rotate-center 1s linear infinite both !important"},"& path":{fill:t.palette.primary.main}},iconExpand:{marginRight:t.spacing(1),minWidth:"auto","& path":{fill:"#999"}},text:{"& span":{display:"inline-block",padding:"0 10px",transition:"all 0.3s ease-in-out",fontSize:"14px"},"&.selected span":{background:t.palette.primary.light,borderRadius:"5px",color:t.palette.primary.main}}}}))(),o=(0,a.useState)(!1),l=(0,i.A)(o,2),A=l[0],F=l[1],M=(0,a.useState)(!1),N=(0,i.A)(M,2),R=N[0],S=N[1],_=(0,a.useState)(!1),L=(0,i.A)(_,2),E=L[0],B=L[1],D=(0,a.useState)(!1),W=(0,i.A)(D,2),G=W[0],J=W[1],z=(0,a.useState)([]),O=(0,i.A)(z,2),P=O[0],I=O[1],K=function(){F(!A)},H=function(){return[].concat((0,s.A)(e.parent),[{id:e.id,name:e.name}])};return(0,a.useEffect)((function(){0===P.length&&A&&(J(!0),v.Jv(JSON.stringify({root:e.id,tree:e.activeTypes,view:"tree"})).then((function(e){I(e),J(!1)})))}),[A]),(0,a.useEffect)((function(){if(J(!1),(0,w.isArray)(e.path)){var t=e.path.find((function(t){return!!t&&t.id===e.id}));B(!!t),F(!!t)}}),[e.path]),(0,a.useEffect)((function(){e.selected?e.selected.length>0&&e.selected.filter((function(t){return t.id===e.original.id})).length>0?S(!0):S(!1):S(!1)}),[e.selected]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(c.Ay,{className:e.class,style:{padding:0},children:[!e.onlyType&&(0,b.jsx)(b.Fragment,{children:(e.activeTypes.filter((function(t){return t.slug===e.original.post_type}))[0].direct||e.directMode)&&(0,b.jsx)(d.A,{checked:R,color:"primary",edge:"start",className:n.check,onClick:function(){e.setFondo(e.original,e.parent)},style:{padding:0}})}),e.onlyType&&e.original.post_type===e.selectedType&&(0,b.jsx)(d.A,{checked:R,color:"primary",edge:"start",className:n.check,onClick:function(){e.setFondo(e.original,e.parent)},style:{padding:0}}),G?(0,b.jsx)(p.A,{className:"loading ".concat(n.icon),style:{minWidth:"auto"},children:(0,b.jsx)(x.A,{})}):(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(p.A,{className:n.icon,style:{color:R||E?t.palette.primary.dark:t.palette.secondary.dark,minWidth:"auto"},children:j.dR.filter((function(t){return t.value===e.original.icon}))?j.dR.filter((function(t){return t.value===e.original.icon}))[0].icon:(0,b.jsx)(m.A,{})})}),A&&!G?(0,b.jsx)(h.A,{style:{cursor:"pointer"},onClick:K,className:n.iconExpand}):(0,b.jsx)(b.Fragment,{children:G?(0,b.jsx)(y.A,{className:n.iconExpand}):(0,b.jsx)(y.A,{style:{cursor:"pointer"},onClick:K,className:n.iconExpand})}),(0,b.jsx)(u.A,{style:{cursor:"pointer"},className:"".concat(n.text," ").concat(E||R?"selected":""),primary:e.original.name,onClick:function(){e.setFondo(e.original,e.parent)}})]}),(0,b.jsx)(g.A,{in:A,timeout:"auto",unmountOnExit:!0,children:(0,b.jsx)(f.A,{component:"div",disablePadding:!0,style:{paddingLeft:"30px"},children:P.map((function(t){return!0!==t.children?(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(T,{name:t.text,original:t,class:"".concat(e.class," ").concat(n.nested),setFondo:e.setFondo,fondo:e.fondo,id:t.id,parent:null!==e.parent?H():[{id:e.id,name:e.name}],path:e.path,selected:e.selected,activeTypes:e.activeTypes})}):(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(C,{name:t.text,class:"".concat(n.nested," ").concat(e.class),children:t.children,original:t,id:t.id,path:e.path,setFondo:e.setFondo,fondo:e.fondo,parent:null!==e.parent?H():[{id:e.id,name:e.name}],activeTypes:e.activeTypes,selected:e.selected})})}))})})]})},F=C,M=(0,r.A)((function(e){return{root:{flexGrow:1,display:"flex",paddingTop:e.spacing(4)},tabs:{},accordeons:{flexGrow:1,paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},listado:{flexGrow:1,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),maxWidth:600},nested:{paddingLeft:e.spacing(3),marginLeft:e.spacing(3),borderLeft:"1px solid #dcdcdc"},item:{padding:1}}})),N=function(e){var t=M();return(0,b.jsx)(o.A,{className:t.listado,children:(0,b.jsx)(l.A,{disablePadding:!0,component:"nav","aria-labelledby":"nested-list-subheader",children:e.root.map((function(n){return!0===n.children?(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(F,{name:"".concat(n.text),children:n.children,id:n.id,original:n,setFondo:e.setFondo,setLoading:e.setLoading,fondo:e.fondo,class:t.item,parent:null,path:e.path,activeTypes:e.activeTypes,selected:e.selected,directMode:e.directMode,selectedTypes:e.selectedTypes,onlyType:e.onlyType})}):(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(T,{id:n.id,name:n.text,original:n,setFondo:e.setFondo,fondo:e.fondo,parent:null,path:e.path,class:t.item,selected:e.selected,activeTypes:e.activeTypes,directMode:e.directMode})})}))})})},R=n(13870),S=function(e){var t=(0,a.useState)(0),n=(0,i.A)(t,2),r=(n[0],n[1],(0,a.useState)([])),o=(0,i.A)(r,2),l=o[0],s=o[1];return(0,a.useEffect)((function(){var t,n,i={root:e.root?e.root:"all",tree:e.parents,view:"tree"};e.parents.length>0&&(null!==(t=e.filters)&&void 0!==t&&t.treeKeyword&&""!==(null===(n=e.filters)||void 0===n?void 0:n.treeKeyword)?(i.keyword=e.filters.treeKeyword,(0,R.N)(JSON.stringify(i)).then((function(e){s(e)}))):(0,v.Jv)(JSON.stringify(i)).then((function(e){s(e)})))}),[e.parents,e.filters]),(0,b.jsx)("div",{style:{marginTop:10},children:(0,b.jsx)(N,{root:l,path:e.path,selected:e.selected,setFondo:e.setFondo,activeTypes:e.activeTypes,childrenEditing:e.childrenEditing,setPath:e.setPath,directMode:e.directMode,onlyType:e.onlyType,selectedType:e.selectedType})})},_=S},19541:function(e,t,n){n.d(t,{AI:function(){return m},Xm:function(){return h}});var i=n(5544),a=n(65043),r=n(34535),o=n(19227),l=n(749),s=n(16702),c=n(31445),d=n(98344),p=n(83003),u=n(26240),g=n(65892),f=n(70579),h=(0,r.Ay)(o.A)((function(e){var t=e.theme,n=((0,u.A)(),(0,p.d4)((function(e){return e.app.isDarkMode})));return{backgroundColor:n?t.palette.grey[800]:"white",height:t.spacing(3),color:n?t.palette.grey[300]:t.palette.secondary.dark,border:"none",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:200,"& svg":{width:15,marginLeft:10,marginRight:0},"& path":{fill:n?t.palette.grey[300]:t.palette.secondary.dark},"&:hover":{backgroundColor:t.palette.secondary.light,color:t.palette.secondary.dark,"& path":{fill:t.palette.secondary.main}}}})),m=(0,r.Ay)(o.A)((function(e){var t=e.theme;return{backgroundColor:t.palette.primary.light,height:t.spacing(3),color:t.palette.primary.main,border:"none",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:200,"& svg":{width:15,marginLeft:10,marginRight:0},"& path":{fill:t.palette.primary.main}}})),y=function(e){var t=(0,a.useState)([]),n=(0,i.A)(t,2),r=n[0],o=n[1];return(0,a.useEffect)((function(){e.type&&e.slug&&c.sF(e.slug,e.type).then((function(e){var t=g.UMr(g.t55);o(e.map((function(e,n){return e.color=t(e._id),e})))})).catch((function(e){console.log(e)}))}),[]),(0,f.jsxs)(l.A,{style:{margin:"5px",maxWidth:"600px",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:["timeCreated"===e.type&&r.length>0&&(0,f.jsx)(d.bl,{data:r,legend:!0,scaleType:"time"}),"statusCount"===e.type&&r.length>0&&(0,f.jsx)(d.RJ,{data:r,legend:!0}),"authorCount"===e.type&&r.length>0&&(0,f.jsx)(d._8,{data:r,legend:!0})]})};t.Ay=function(e){return(0,f.jsxs)(s.A,{style:{display:"flex",width:"100%"},children:[(0,f.jsx)(y,{type:"timeCreated",slug:e.selectedType.slug}),(0,f.jsx)(y,{type:"statusCount",slug:e.selectedType.slug}),(0,f.jsx)(y,{type:"authorCount",slug:e.selectedType.slug})]})}},42588:function(e,t,n){n.d(t,{AD:function(){return M},M2:function(){return F},oF:function(){return N}});var i=n(60436),a=n(65043),r=n(15316),o=n(85865),l=n(17392),s=n(43845),c=n(81551),d=n(94495),p=n(39244),u=n(26240),g=n(11238),f=n(83003),h=n(85211),m=n(98344),y=n(5983),x=n(58140),v=n(18751),A=n(92429),j=n(78717),w=n(99246),k=n(70579),b=(0,c.A)((function(e){return{container:{display:"flex",flexDirection:"column",width:"calc(100% - 20px)",overflowY:"auto",marginLeft:"10px"},item:{overflow:"hidden",color:"#777",fontSize:14,position:"relative",marginBottom:10,paddingBottom:10},itemName:{fontSize:15},chip:{margin:2,padding:2,"& .MuiChip-avatar":{backgroundColor:"transparent !important"}}}})),T=function(e){var t=b(),n=(0,u.A)(),i=(0,x.M)().showAlert,a=(0,f.d4)((function(e){return e.app.isDarkMode}));return(0,k.jsxs)(r.A,{className:t.item,style:e.style?e.style:{borderBottom:"1px solid ".concat(a?n.palette.grey[800]:n.palette.grey[200])},children:[(0,k.jsxs)(r.A,{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,k.jsx)(o.A,{className:t.itemName,style:{color:a?n.palette.primary.light:n.palette.primary.main},children:e.title}),e.help&&(0,k.jsx)(l.A,{onClick:function(){i("video-info",e.help)},children:(0,k.jsx)(y.A,{style:{color:a?n.palette.grey[400]:n.palette.grey[700]}})})]}),e.item?e.item:e.children]})},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=t<0?0:t,i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]},F=function(e){var t,n,i=b(),o=(0,f.d4)((function(e){return e.app.isDarkMode})),l=(0,u.A)();return(0,a.useEffect)((function(){0===e.record.parent.length?e.setMetadata(null):e.metadata&&e.setMetadata(e.record.parent[0])}),[e.record]),(0,k.jsxs)(r.A,{className:i.container,children:[(0,k.jsx)(T,{title:"Nombre del archivo",item:null!==e&&void 0!==e&&null!==(t=e.record)&&void 0!==t&&t.displayName?null===e||void 0===e||null===(n=e.record)||void 0===n?void 0:n.displayName:e.record.name}),(0,k.jsx)(T,{title:"HASH",item:e.record.hash}),(0,k.jsx)(T,{title:"Tama\xf1o",item:C(e.record.size)}),e.record.parent.length>0&&(0,k.jsx)(T,{title:"Contenido relacionado",children:e.record.parent.map((function(t,n){return(0,k.jsx)(s.A,{avatar:d.dR.filter((function(e){return e.value===t.icon}))?d.dR.filter((function(e){return e.value===t.icon}))[0].iconlight:(0,k.jsx)(p.A,{}),label:t.name,className:i.chip,onClick:function(){e.setMetadata(t)},sx:{background:o?l.palette.grey[800]:l.palette.grey[200],color:o?l.palette.grey[300]:l.palette.grey[600],"& svg":{width:15},"& path":{fill:o?l.palette.grey[300]:l.palette.grey[600]}}},n)}))})]})},M=function(e){var t=b(),n=((0,f.wA)(),(0,f.d4)((function(e){return e.app.filters}))),i=(0,f.d4)((function(e){return e.app.isDarkMode})),a=(0,u.A)(),l=(0,x.M)().showAlert;return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(r.A,{className:t.container,children:[(0,k.jsx)(g.nA,{startIcon:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(v.A,{}),(0,k.jsx)(A.A,{})]}),label:"Descargar inventario",style:{borderRadius:5,backgroundColor:i?a.palette.grey[800]:a.palette.grey[200],color:a.palette.grey[500]},onClick:function(){l("confirm","\xbfDesea descargar el inventario de los tipos de contenido?").then((function(t){if(t){l("loading","Generando archivo...");var i=n[e.view]&&n[e.view].post_type?n[e.view].post_type.slug:"*";j._Q({post_type:i,view:e.view},(function(e){l("loading","Descargando archivo... ".concat(Math.round(e),"%"))})).then((function(){l("success","Archivo descargado correctamente")})).catch((function(e){e.msg?l("error","Error al descargar el archivo: "+e.msg):l("error","Error al descargar el archivo")}))}}))}}),(0,k.jsx)(T,{title:"Descripci\xf3n",item:(0,k.jsx)(o.A,{children:e.type.description})}),e.files.total>0&&(0,k.jsx)(T,{title:"Balance general de los documentos",item:(0,k.jsx)(m.RJ,{data:e.files.data,legend:!0})}),(0,k.jsx)(N,{view:e.view,parents:e.parents,root:e.root})]})})},N=function(e){var t,n=(0,f.wA)(),a=(0,f.d4)((function(e){return e.app.filters})),r=b(),o=(0,f.d4)((function(e){return e.app.isDarkMode})),l=(0,u.A)(),c=(0,w.A)();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(T,{title:c.formatMessage({id:"cataloging.folderStructure"}),item:(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(g.$k,{label:c.formatMessage({id:"menuList.postTypes"}),style:{color:o?"white":"black",backgroundColor:o?"#333":"#f5f5f5",borderColor:o?"#333":"#f5f5f5"},showLabel:!1,value:a[e.view]?!e.single&&a[e.view].post_type?a[e.view].post_type.slug:e.single&&!Array.isArray(a[e.view].post_type_single)&&a[e.view].post_type_single?a[e.view].post_type_single.slug:"*":"*",onChange:function(t){if(e.onChange)e.onChange(t);else{var i=e.single?"post_type_single":"post_type";if("*"===t.target.value){var r=(0,h.e)(a,e.view,i,null);n((0,h.vm)(r))}else{var o=(0,h.e)(a,e.view,i,{slug:t.target.value});n((0,h.vm)(o))}}},options:function(){var t=(0,i.A)(e.parents.map((function(e){return{value:e.slug,label:e.name}})));return"cataloging"!==e.view&&(t=[{value:"*",label:c.formatMessage({id:"cataloging.allPostTypes"})}].concat((0,i.A)(t))),t}()})}),help:"folder-structure"}),a[e.view]&&(null===(t=a[e.view].parents)||void 0===t?void 0:t.name)&&(0,k.jsx)("div",{style:{marginBottom:10},children:(0,k.jsx)(s.A,{avatar:d.dR.filter((function(t){return t.value===a[e.view].parents.icon}))?d.dR.filter((function(t){return t.value===a[e.view].parents.icon}))[0].iconlight:(0,k.jsx)(p.A,{}),label:a[e.view].parents.name,className:r.chip,onDelete:function(){var t=(0,h.e)(a,e.view,"parents",{id:e.root});n((0,h.vm)(t))},size:"small",color:"primary",sx:{backgroundColor:l.palette.primary.light,color:l.palette.primary.main,"& path":{fill:l.palette.primary.main}}})})]})}}}]);
//# sourceMappingURL=621.b0614a54.chunk.js.map