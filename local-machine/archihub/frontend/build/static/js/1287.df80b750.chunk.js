"use strict";(self.webpackChunkarchihub=self.webpackChunkarchihub||[]).push([[1287],{82094:function(e,t,n){var i=n(89379),r=n(5544),a=n(65043),o=n(83003),l=n(86279),s=n(11238),c=n(99562),u=n(26240),d=n(58140),g=n(43288),h=n(72378),b=n(99246),f=n(70579);t.A=function(e){var t=(0,a.useState)(null),n=(0,r.A)(t,2),p=n[0],x=n[1],m=(0,a.useState)(!0),w=(0,r.A)(m,2),v=w[0],k=w[1],y=(0,u.A)(),A=(0,d.M)().showAlert,j=(0,o.d4)((function(e){return e.user})),S=(0,o.d4)((function(e){return e.app.isDarkMode})),C=(0,b.A)();return(0,a.useEffect)((function(){e.record?l.Tk(e.id).then((function(e){k(!1),x(e)})).catch((function(e){k(!1),x(null)})):l.Qs(e.id).then((function(e){k(!1),x(e)})).catch((function(e){k(!1),x(null)}))}),[]),(0,a.useEffect)((function(){}),[j,p]),(0,f.jsxs)(f.Fragment,{children:[v&&(0,f.jsx)(g.A,{}),!p&&!v&&j.roles.includes("team_lead")&&(0,f.jsx)(s.nA,{style:{borderRadius:5},customColor:{background:S?y.palette.grey[800]:y.palette.grey[200],color:S?y.palette.primary.light:y.palette.primary.main},startIcon:(0,f.jsx)(c.A,{}),onClick:function(){A("taskForm","create").then((function(t){if(t){k(!0),x(null);var n=(0,i.A)({},t);e.record?n.recordId=e.id:n.resourceId=e.id,l.UT(JSON.stringify(n)).then((function(e){k(!1),x(e)})).catch((function(e){console.log(e)}))}}))},label:C.formatMessage({id:"usertask.create"})}),p&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.nA,{style:{borderRadius:5},customColor:{background:y.palette.grey[200],color:y.palette.primary.main},startIcon:(0,f.jsx)(c.A,{}),label:"".concat(C.formatMessage({id:"usertask.asignedTo"})," ").concat(p.user)}),(0,f.jsx)(h.WB,{children:(0,f.jsx)("div",{dangerouslySetInnerHTML:{__html:p.comment.replace(/\n/g,"<br />")}})}),("pending"===p.status||"rejected"===p.status)&&p.user===j.name&&(0,f.jsx)(s.nA,{style:{marginTop:10,borderRadius:5},customColor:{background:y.palette.grey[200],color:y.palette.grey[600]},onClick:function(){A("taskForm","update").then((function(e){e?(k(!0),x(null),l.lC(p._id,JSON.stringify((0,i.A)((0,i.A)({},e),{},{status:"review"}))).then((function(e){k(!1),x(e)})).catch((function(e){console.log(e)}))):k(!1)}))},label:C.formatMessage({id:"usertask.sendToReview"})}),"review"===p.status&&j.roles.includes("team_lead")&&(0,f.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10,width:"100%"},children:[(0,f.jsx)(s.nA,{style:{borderRadius:5,margin:2},customColor:{background:y.palette.grey[200],color:y.palette.grey[600]},onClick:function(){A("taskForm","update").then((function(e){e&&(k(!0),x(null),l.lC(p._id,JSON.stringify((0,i.A)((0,i.A)({},e),{},{status:"rejected"}))).then((function(e){k(!1),x(e)})).catch((function(e){console.log(e)})))}))},label:C.formatMessage({id:"usertask.reject"})}),(0,f.jsx)(s.nA,{style:{borderRadius:5,margin:2},customColor:{background:y.palette.grey[200],color:y.palette.grey[600]},onClick:function(){A("taskForm","update").then((function(e){e&&(k(!0),x(null),l.lC(p._id,JSON.stringify((0,i.A)((0,i.A)({},e),{},{status:"approved"}))).then((function(e){k(!1),x(null)})).catch((function(e){k(!1),x(null)})))}))},label:C.formatMessage({id:"usertask.approve"})})]})]})]})}},63573:function(e,t,n){n.d(t,{A:function(){return Q}});var i=n(89379),r=n(5544),a=n(65043),o=n(9920),l=n(19853),s=n(48210),c=n(4598),u=n(43845),d=n(15316),g=n(17392),h=n(99070),b=n(55263),f=n(90151),p=n(68641),x=n(42497),m=n(83903),w=n(34535),v=n(6512),k=n(4319),y=n(76370),A=n(81551),j=n(8939),S=n(24056),C=n(11906),B=n(41905),V=n(10765),R=n(30064),M=n.n(R),I=n(26240),E=n(70579),T=((0,B.A)((function(e){return{segment:{fontSize:"20px",opacity:.25,transition:"all .5s",textAlign:"center",cursor:"pointer","&:hover":{opacity:.55},"&.selected":{opacity:1}},paragraph:{fontSize:"15px",maxWidth:"750px",margin:"0 auto",marginBottom:"20px"}}})),function(e){var t=(0,a.useState)(0),n=(0,r.A)(t,2),o=n[0],s=n[1],c=(0,a.useState)(null),u=(0,r.A)(c,2),g=u[0],h=u[1],b=(0,a.useState)(null),f=(0,r.A)(b,2),p=f[0],x=f[1],m=(0,I.A)();(0,a.useEffect)((function(){e.view&&(e.setSubView(""),l.DJ(e.view.slug,"detail").then((function(e){e.forEach((function(e){"multicheckbox"===e.type&&w(e.id,e.default)})),h(e)})).catch((function(e){})))}),[]);var w=function(e,t){var n=(0,i.A)({},p);n[e]=t,x(n)};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(d.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:m.palette.primary.light,margin:0},children:(0,E.jsxs)(j.A,{value:o,onChange:function(t,n){s(n),e.setSelectedBlock(null),0===n?e.setSubView(""):1===n?e.setSubView("blocks"):2===n&&e.setSubView("words")},indicatorColor:"primary",textColor:"primary",centered:!0,children:[(0,E.jsx)(S.A,{label:"Documento",id:0}),(0,E.jsx)(S.A,{label:"Bloques",id:1}),(0,E.jsx)(S.A,{label:"Palabras",id:2})]})}),g&&(0,E.jsx)(d.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",marginRight:"20px",marginTop:"20px",backgroundColor:"#fff",borderRadius:"25px",boxShadow:"0px 3px 1px -2px rgba(0,0,0,0.2), 0px 2px 2px 0px rgba(0,0,0,0.14), 0px 1px 5px 0px rgba(0,0,0,0.12)"},children:g.map((function(t,n){return(0,E.jsxs)(E.Fragment,{children:["multicheckbox"===t.type&&(0,E.jsx)(V.lH,{options:t.options.map((function(e){return{id:e.value,term:e.label}})),value:p[t.id],handleChange:function(e){w(t.id,e)}}),"button"===t.type&&(0,E.jsx)(C.A,{variant:"contained",onClick:function(){var n;e.view.slug,n=t.callback,l.Gj(e.view.slug,JSON.stringify((0,i.A)((0,i.A)({},p),{},{id:e.id})),n).then((function(e){M().fire({title:"\xc9xito",text:"Se ha ejecutado la acci\xf3n correctamente",icon:"success",confirmButtonText:"Ok"})}))},sx:{margin:"10px"},children:t.label})]})}))})]})}),z=n(74054),F=n(6456),_=n(64904),D=n(2936),P=n.n(D),H=n(96479),N=n(43288),O=function(e){var t=(0,a.useRef)(),n=(0,a.useRef)(),l=(0,a.useRef)(),s=!1,c=(0,a.useState)(0),u=(0,r.A)(c,2),d=u[0],g=u[1],h=H.UMr(H.t55),b=(0,a.useState)(1),f=(0,r.A)(b,2),p=f[0],x=f[1],m=(0,a.useState)({width:0,height:0}),w=(0,r.A)(m,2),v=w[0],k=w[1],y=((0,I.A)(),(0,a.useState)(!0)),A=(0,r.A)(y,2),j=A[0];A[1];(0,a.useEffect)((function(){var t=setTimeout((function(){var t=document.getElementById("page-".concat(e.page-1));t&&t.scrollIntoView({duration:0})}),200),i=null;n.current=new IntersectionObserver((function(t){return t.forEach((function(t,n){if(t.isIntersecting){var r=t.target.querySelector("svg");i&&clearTimeout(i),i=setTimeout((function(){e.setPage(parseInt(t.target.dataset.index)+1),o.f2(e.id,[parseInt(t.target.dataset.index)],"big").then((function(e){var n=new Image,i="data:image/jpg;base64,"+e[0].data;t.target.style.backgroundImage="url(".concat(i,")"),n.src=t.target.style.backgroundImage.slice(5,-2);var a,o,l=n.width,s=n.height,c=t.target.getBoundingClientRect().width,u=t.target.getBoundingClientRect().height,d=c/u,g=l/s;x(g),g>d?(a=c,o=c/g):(o=u,a=u*g);var h=a/c*100,b=o/u*100;k({width:h,height:b}),r.setAttribute("viewBox","0 0 ".concat(h," ").concat(b)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("width","".concat(h,"%")),r.setAttribute("height","".concat(b,"%")),t.target.style.width=c+"px",t.target.style.height=c+"px"}))}),300)}}))}),{threshold:.25});var r=n.current;return function(){r.disconnect(),clearTimeout(t)}}),[]),(0,a.useEffect)((function(){var e=n.current;return e.disconnect(),document.querySelectorAll(".page").forEach((function(t){return e.observe(t)})),function(){return e.disconnect()}}),[e.pages]),(0,a.useEffect)((function(){if(!s){var t=Math.abs(e.page-d),n=document.getElementById("page-".concat(e.page-1));n&&n.scrollIntoView({behavior:"smooth",duration:5*t}),g(e.page)}}),[e.page]);var S=null,C=function(e){s=!0,S&&clearTimeout(S),S=setTimeout((function(){s=!1}),2e3)},B=function(e){return Array.isArray(e.label)?e.label.length>0?"O"===e.label[0]?"transparent":h(e.label[0]):void 0:e.type?h(e.type):"transparent"};(0,a.useEffect)((function(){return t.current&&t.current.addEventListener("wheel",C),function(){t.current&&t.current.removeEventListener("wheel",C)}}),[t]),(0,a.useEffect)((function(){l.current&&P()(l.current).resizable({edges:{left:!1,right:!0,bottom:!0,top:!1},listeners:{move:function(n){var r=n.target.width.animVal.value,a=n.target.height.animVal.value,o=t.current.getBoundingClientRect().width,l=t.current.querySelector("svg"),s=r/v.width*o,c=a/v.height*l.getBoundingClientRect().height,u=s+n.delta.x,d=c+n.delta.y;u=u/o*v.width,d=d/l.getBoundingClientRect().height*v.height,n.target.setAttribute("width","".concat(u)),n.target.setAttribute("height","".concat(d));var g={x:e.selectedBlock.bbox.x,y:e.selectedBlock.bbox.y,width:u/(p<1?100*p:100),height:d/(p>1?100/p:100)},h=(0,i.A)({},e.selectedBlock);h.bbox=g,e.setSelectedBlock(h)}}}).draggable({listeners:{move:function(n){var r=parseFloat(n.target.getAttribute("x")),a=parseFloat(n.target.getAttribute("y")),o=(parseFloat(n.target.getAttribute("width")),parseFloat(n.target.getAttribute("height")),t.current.getBoundingClientRect().width),l=a/100*o;r=(r=r/100*o+n.delta.x)/o*100,a=(a=l+n.delta.y)/o*100,n.target.setAttribute("x",r),n.target.setAttribute("y",a);var s={x:r/(p<1?100*p:100),y:a/(p>1?100*p:100),width:e.selectedBlock.bbox.width,height:e.selectedBlock.bbox.height},c=(0,i.A)({},e.selectedBlock);c.bbox=s,e.setSelectedBlock(c)}}})}),[l,e.selectedBlock]);return(0,E.jsx)("div",{ref:t,style:{height:"100%",width:"100%",justifyContent:"center",overflowY:"auto",position:"absolute",top:0,left:0},children:Array.from({length:e.pages},(function(t,n){return(0,E.jsxs)("div",{id:"page-".concat(n),className:"page","data-index":n,style:{backgroundColor:"transparent",marginBottom:30,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",display:"flex",justifyContent:"center",minHeight:"100%",flexDirection:"column"},children:[j&&(0,E.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:(0,E.jsx)(N.A,{})}),(0,E.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:e.selectedBlock&&e.selectedBlock.new&&e.page-1===n&&(0,E.jsx)("rect",{x:p>1?100*e.selectedBlock.bbox.x:100*e.selectedBlock.bbox.x*p,y:p<1?100*e.selectedBlock.bbox.y:100*e.selectedBlock.bbox.y/p,width:p>1?100*e.selectedBlock.bbox.width:100*e.selectedBlock.bbox.width*p,height:p<1?100*e.selectedBlock.bbox.height:100*e.selectedBlock.bbox.height*p,fill:B(e.selectedBlock,l.current),fillOpacity:.3,ref:l})})]},n)}))})},J=n(79175),Z=n(58140),q=(0,A.A)((function(e){return{scrollbar:{"&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:"#56749a",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:"#56749a"},"&::-webkit-scrollbar-thumb:active":{background:"#56749a"},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}},close:{width:24,height:24,"& .MuiChip-label":{display:"none"},"& svg":{margin:"0 !important"},"& path":{fill:"white"}}}})),L=(0,w.Ay)(c.A)((function(e){var t=e.theme;return{width:62,height:26,padding:8,"& .MuiSwitch-switchBase":{margin:1,padding:0,transform:"translateX(6px)","&.Mui-checked":{color:"#fff",transform:"translateX(30px)","& .MuiSwitch-thumb:before":{backgroundImage:'url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 24 24"><path fill="white" d="M2 7h4v10H2V7zm5 12h10V5H7v14zM18 7h4v10h-4V7z"></path></svg>\')'},"& + .MuiSwitch-track":{opacity:1,backgroundColor:(t.palette.mode,t.palette.grey[800])}}},"& .MuiSwitch-thumb":{backgroundColor:(t.palette.mode,t.palette.primary.main),width:23,height:23,"&::before":{content:"''",position:"absolute",width:"100%",height:"100%",left:0,top:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:'url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 24 24"><path fill="white" d="M2 21h19v-3H2v3zM20 8H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1zM2 3v3h19V3H2z"></path></svg>\')',backgroundSize:"60%"}},"& .MuiSwitch-track":{opacity:1,backgroundColor:(t.palette.mode,t.palette.grey[800]),borderRadius:10,border:"1px solid "+t.palette.grey[800],height:10}}})),G=function(e){var t=q(),n=(0,a.useState)({}),c=(0,r.A)(n,2),d=c[0],g=c[1],h=(0,a.useState)({}),b=(0,r.A)(h,2),f=b[0],p=b[1],x=(0,I.A)(),w=(0,Z.M)().showAlert;(0,a.useEffect)((function(){d[e.subView]||e.slug&&e.subView&&l.DJ(e.slug,e.subView).then((function(t){var n=(0,i.A)({},d);n[e.subView]?n[e.subView]=n[e.subView].concat(t):n[e.subView]=t;var r=(0,i.A)({},f);t.forEach((function(t){r[t.id]=e.block[t.id]})),p(r),g(n)})).catch((function(e){}))}),[e.subView]);var v=function(t,n){var r=(0,i.A)({},f);r[n.id]=t.target.value,p(r);var a=(0,i.A)({},e.block);a[n.id]=t.target.value,e.setSelectedBlock(a)};return(0,E.jsxs)("div",{style:{background:x.palette.grey[700],borderRadius:5,marginTop:5},children:[(0,E.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"5px"},children:[(0,E.jsxs)("div",{children:[(0,E.jsx)(u.A,{label:"Guardar",size:"small",onClick:function(){!function(){var t={data:f,id_doc:e.recordId,type_block:e.subView,index:e.block.index,page:e.page,slug:e.slug,bbox:e.block.bbox};if(e.slug&&e.subView)e.block.new?o.Rm(t).then((function(t){e.setSelectedBlock(null)})):o.ao(t).then((function(t){e.setSelectedBlock(null)}));else if(e.block.new){console.log(e.block);var n={x:e.block.bbox.x,y:e.block.bbox.y,width:e.block.bbox.width,height:e.block.bbox.height};s.vt({type:"document",record_id:e.recordId,data:{bbox:n,page:e.page}}).then((function(t){e.setSelectedBlock(null),w("success","Recorte creado correctamente")}))}}()},icon:(0,E.jsx)(z.A,{}),style:{margin:3,border:"none"},variant:"outlined",className:t.close}),!e.block.new&&(0,E.jsx)(u.A,{label:"Eliminar",size:"small",onClick:function(){!function(){var t={id_doc:e.recordId,type_block:e.subView,index:e.block.index,page:e.page,slug:e.slug};o.S7(t).then((function(t){console.log(t),e.setSelectedBlock(null)}))}()},icon:(0,E.jsx)(F.A,{}),style:{margin:3,border:"none"},variant:"outlined",className:t.close})]}),(0,E.jsx)(u.A,{label:"Cerrar",size:"small",onClick:function(){e.setSelectedBlock(null)},variant:"outlined",icon:(0,E.jsx)(m.A,{}),style:{margin:3,width:24,height:24,border:"none"},className:t.close})]}),d[e.subView]&&d[e.subView].map((function(t,n){return(0,E.jsxs)("div",{children:["text"===t.type&&(0,E.jsx)(V.BR,{name:t.id,value:f[t.id],handleChange:function(e){return v(e,t)},style:{width:"100%",padding:"0px",marginRight:"5px",backgroundColor:"white",borderBottom:"none"}}),"text-area"===t.type&&(0,E.jsx)(V.QA,{name:t.id,value:f[t.id],handleChange:function(e){return v(e,t)},style:{width:"350px",height:"400px",padding:"0px",marginRight:"5px",backgroundColor:"white",borderBottom:"none"},rootStyle:{width:"100%",margin:"0px",padding:"5px"}}),"select"===t.type&&(0,E.jsx)(V.Q5,{name:t.id,value:f[t.id],options:e.labels.map((function(e){return{value:e,label:e}})),handleChange:function(e){return v(e,t)},style:{width:"100%",padding:"0px",marginRight:"5px",backgroundColor:"white",borderBottom:"none"},rootStyle:{width:"100%",margin:"0px",padding:"5px"}})]},n)}))]})},Q=function(e){var t,n,l,s=(0,a.useState)(0),c=(0,r.A)(s,2),m=c[0],w=c[1],A=(0,a.useState)(0),j=(0,r.A)(A,2),S=j[0],C=j[1],B=(0,a.useState)(1),R=(0,r.A)(B,2),M=R[0],z=R[1],F=(0,a.useState)([]),D=(0,r.A)(F,2),P=D[0],H=D[1],N=(0,a.useState)([]),Z=(0,r.A)(N,2),q=Z[0],Q=Z[1],W=(0,a.useState)(null),U=(0,r.A)(W,2),X=U[0],Y=U[1],K=(0,a.useRef)(null),$=(0,a.useRef)(null),ee=(0,a.useState)(!1),te=(0,r.A)(ee,2),ne=te[0],ie=te[1],re=(0,_.M)("docViewType","carrousel"),ae=(0,r.A)(re,2),oe=ae[0],le=ae[1],se=(0,I.A)(),ce=function(e){return(0,E.jsxs)(d.A,{style:{display:"flex",width:"calc(100% - 20px)",minWidth:"250px",alignItems:"center",justifyContent:"space-between",backgroundColor:"dark"===e.variant?se.palette.grey[900]:"white",borderRadius:"50px"},children:[(0,E.jsx)(g.A,{color:"primary",onClick:function(){ge(M-1)},children:(0,E.jsx)(p.A,{})}),(0,E.jsx)(V.Z6,{name:null,value:M,handleChange:function(e){ge(parseInt(e.target.value))},min:1,max:m,style:{width:"100px",padding:"0px",backgroundColor:"dark"===e.variant?se.palette.grey[700]:"white",marginRight:"10px",borderBottom:"none"}}),(0,E.jsx)(h.Ay,{ref:$,defaultValue:0,"aria-label":"Default",valueLabelDisplay:"auto",size:"small",value:M,step:1,marks:!0,min:1,max:m,style:{width:"80%"},onChangeCommitted:function(e,t){ge(t)}}),(0,E.jsx)(g.A,{color:"primary",onClick:function(){ge(M+1)},children:(0,E.jsx)(x.A,{})})]})},ue=function(t){"carrousel"===oe?(0,f.vs)():"scroll"===oe&&(w(m),C(S),(0,f.Ts)(m,K.current,S,e.id,M),(0,f.Zv)(z),X&&((0,f.D8)(X),(0,f.P4)(P,M,S,Y)),(0,f.i0)()),le(t)};(0,a.useEffect)((function(){return o.wp(e.id).then((function(t){w(t.pages),C(1),"carrousel"===oe&&((0,f.Ts)(t.pages,K.current,1,e.id),(0,f.Zv)(z),(0,f.i0)())})),function(){"carrousel"===oe&&(0,f.vs)()}}),[]);var de=function(t){"blocks"===e.subView?o.FZ(e.id,t,e.view.slug,e.subView).then((function(e){H(e.blocks),Q(e.labels),ie(!0)})):"words"===e.subView?o.FZ(e.id,t,e.view.slug,e.subView).then((function(e){H(e.words),Q(e.labels),ie(!0)})):(H([]),ne&&"carrousel"===oe&&(0,f.a7)(t))};(0,a.useEffect)((function(){null===X?("carrousel"===oe&&(0,f.D8)(null),ne&&"carrousel"===oe&&(0,f.a7)(M),de(M)):(ne&&"carrousel"===oe&&(0,f.a7)(M),"carrousel"===oe&&(0,f.D8)(X),"carrousel"===oe&&(0,f.P4)(P,M,S,Y))}),[X]),(0,a.useEffect)((function(){null!==e.subView?((0,f.oS)(e.subView),de(M)):H([])}),[e.subView,M]),(0,a.useEffect)((function(){(0,f.kx)(e.view.slug)}),[e.view]),(0,a.useEffect)((function(){P&&P.length>0&&"carrousel"===oe&&(0,f.P4)(P,M,S,he)}),[P]);var ge=function(t){t>m&&(t=m),t<1&&(t=1),"carrousel"===oe&&(0,f.qV)(t,S,e.id),z(t)},he=function(e,t){var n=(0,i.A)({},e);n.index=t,Y(n),"carrousel"===oe&&((0,f.a7)(M),(0,f.D8)(n),(0,f.P4)(P,M,S,Y))};return(0,E.jsxs)(k.M,{onDrop:function(e,t){return console.log(e,t)},onDragStart:function(){console.log("start")},children:[(0,E.jsx)(d.A,{ref:K,style:{position:"absolute",width:"100%",height:"100%",cursor:"move"}}),"scroll"===oe&&(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(O,{pages:m,aspectRatio:S,page:M,id:e.id,setPage:z,selectedBlock:X,setSelectedBlock:Y})}),(0,E.jsx)(v.V,{id:"metadata",initialPosition:{x:0,y:0},style:{display:e.metadata?"block":"none"},children:(0,E.jsx)(y.A,{resource:e.metadata,setMetadata:e.setMetadata,history:e.history})}),(0,E.jsxs)(v.V,{id:"processing",initialPosition:{x:0,y:0},style:{borderRadius:5,boxShadow:"none"},children:["viz"===e.view&&(0,E.jsxs)("div",{style:{padding:"5px",background:se.palette.grey[700],borderRadius:5,boxShadow:"0 0 5px 0 rgba(0,0,0,0.6)"},children:[(0,E.jsx)(ce,{variant:"dark"}),(0,E.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:3},children:[(0,E.jsx)(u.A,{label:"Agregar un recorte",size:"small",onClick:function(){Y({index:P.length,bbox:{x:.1,y:.1,width:.1,height:.1},text:"",type:q[0]?q[0]:"default",new:!0}),ie(!0)},style:{margin:3,border:"none",color:"white",backgroundColor:se.palette.grey[600],paddingLeft:"10px",paddingRight:"10px"},icon:(0,E.jsx)(d.A,{sx:{color:"white !important",display:"flex",alignItems:"center"},children:(0,E.jsx)(J.A,{})}),variant:"outlined"}),(0,E.jsx)(b.A,{disableGutters:!0,variant:"dense",style:{minHeight:"auto"},children:(0,E.jsx)(L,{size:"small",checked:"carrousel"===oe,onChange:function(e){return ue(e.target.checked?"carrousel":"scroll")},color:"primary"})})]})]}),"lt_extraction"===(null===(t=e.view)||void 0===t?void 0:t.view)&&(0,E.jsxs)("div",{style:{background:se.palette.grey[700],paddingBottom:"10px"},children:[(0,E.jsx)(T,{setSubView:e.setSubView,view:e.view,setSelectedBlock:Y}),(0,E.jsx)(ce,{variant:"dark"}),(0,E.jsxs)("div",{style:{marginTop:"5px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"move"},children:[""===e.subView&&null===X&&(0,E.jsx)(E.Fragment,{}),"blocks"===e.subView&&null===X&&(0,E.jsx)(E.Fragment,{}),"words"===e.subView&&null===X&&(0,E.jsx)(E.Fragment,{}),(0,E.jsx)(b.A,{disableGutters:!0,variant:"dense",children:(0,E.jsx)(L,{size:"small",checked:"carrousel"===oe,onChange:function(e){return ue(e.target.checked?"carrousel":"scroll")},color:"primary"})})]})]}),"ner_extraction"===(null===(n=e.view)||void 0===n?void 0:n.view)&&(0,E.jsx)(T,{setSubView:e.setSubView,view:e.view,setSelectedBlock:Y,id:e.match.params.id}),"docseg_extraction"===(null===(l=e.view)||void 0===l?void 0:l.view)&&(0,E.jsx)(T,{setSubView:e.setSubView,view:e.view,setSelectedBlock:Y,id:e.match.params.id}),X&&(0,E.jsx)(G,{block:X,labels:q,subView:e.subView,setSelectedBlock:Y,slug:e.view.slug,recordId:e.id,page:M})]})]})}},92392:function(e,t,n){var i=n(5544),r=n(65043),a=n(9920),o=n(15316),l=n(90151),s=n(4319),c=n(6512),u=n(76370),d=(n(10765),n(70579));t.A=function(e){var t=(0,r.useState)(0),n=(0,i.A)(t,2),g=(n[0],n[1]),h=(0,r.useState)(0),b=(0,i.A)(h,2),f=(b[0],b[1]),p=(0,r.useState)(1),x=(0,i.A)(p,2),m=(x[0],x[1]),w=(0,r.useRef)(null);(0,r.useRef)(null);(0,r.useEffect)((function(){return a.wp(e.id).then((function(t){g(t.pages),f(t.aspect_ratio),(0,l.Ts)(t.pages,w.current,t.aspect_ratio,e.id),(0,l.Zv)(m),(0,l.i0)()})),function(){(0,l.vs)()}}),[]);return(0,d.jsxs)(s.M,{onDrop:function(e,t){return console.log(e,t)},onDragStart:function(){console.log("start")},children:[(0,d.jsx)(o.A,{ref:w,style:{position:"absolute",width:"100%",height:"100%"}}),(0,d.jsx)(c.V,{id:"metadata",initialPosition:{x:0,y:0},style:{display:e.metadata?"block":"none"},children:(0,d.jsx)(u.A,{resource:e.metadata,setMetadata:e.setMetadata,history:e.history})})]})}}}]);
//# sourceMappingURL=1287.df80b750.chunk.js.map