"use strict";(self.webpackChunkarchihub=self.webpackChunkarchihub||[]).push([[9347],{72378:function(e,t,n){n.d(t,{EL:function(){return l},WB:function(){return u}});var r=n(89379),a=(n(65043),n(26240)),i=n(81551),o=n(83003),c=n(70579),l=function(e){var t=(0,a.A)(),n=(0,o.d4)((function(e){return e.app.isDarkMode})),l=(0,i.A)((function(e){return{bloque:{"&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:t.palette.primary.main,border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:t.palette.primary.main},"&::-webkit-scrollbar-thumb:active":{background:t.palette.primary.main},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}}}}))();return(0,c.jsx)("div",{id:e.id,style:(0,r.A)({width:"100%",height:"calc(100% - 40px)",display:"flex",margin:"10px",borderRadius:"10px",padding:"10px",background:n?t.palette.grey[900]:"white",boxShadow:"0px 0px 1px rgba(0,0,0,0.1)",justifyContent:"center",alignItems:"center",alignContent:"center",flexWrap:"wrap"},e.style),className:l.bloque,onScroll:e.onScroll,children:e.children})},u=function(e){var t=(0,a.A)(),n=(0,i.A)((function(e){return{bloque:{"&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:t.palette.grey[500],border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:t.palette.grey[500]},"&::-webkit-scrollbar-thumb:active":{background:t.palette.grey[500]},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}}}}))();return(0,c.jsx)("div",{id:e.id,style:(0,r.A)({padding:10,backgroundColor:t.palette.grey[100],borderRadius:5,color:t.palette.grey[600],height:100,overflow:"auto",width:"100%"},e.style),className:n.bloque,children:e.children})};t.Ay=function(e){var t=e.children,n=e.style;e.onScroll;return(0,c.jsx)("section",{style:(0,r.A)({display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh"},n),children:t})}},79347:function(e,t,n){n.r(t);var r=n(89379),a=n(60436),i=n(5544),o=n(65043),c=n(83003),l=n(73216),u=n(26240),s=n(31445),d=n(77208),h=n(19853),f=n(81551),p=n(16702),m=n(72378),g=n(63516),b=n(94495),y=n(43288),x=n(58140),v=n(30064),j=n.n(v),w=n(10765),k=n(11238),A=n(70579),T=(0,f.A)((function(e){return{columna:{display:"flex",height:"calc(100vh - 150px)"},error:{color:"white",backgroundColor:"#f97b7b",padding:10,borderRadius:5,marginBottom:10,"&:first-child":{marginTop:10}}}}));t.default=function(e){T();var t=(0,o.useState)([]),n=(0,i.A)(t,2),f=n[0],v=n[1],R=(0,o.useState)([]),C=(0,i.A)(R,2),B=C[0],E=C[1],S=(0,o.useState)(!1),H=(0,i.A)(S,2),q=H[0],P=H[1],z=(0,o.useState)(null),O=(0,i.A)(z,2),D=O[0],I=O[1],F=(0,o.useState)([]),N=(0,i.A)(F,2),J=N[0],L=N[1],Q=(0,o.useState)(!1),G=(0,i.A)(Q,2),W=G[0],M=G[1],V=(0,l.g)().slug,U=(0,x.M)().showAlert,Y=(0,u.A)(),Z=((0,c.d4)((function(e){return e.app.user})),(0,l.Zp)());(0,o.useEffect)((function(){var e=[];s.DI().then((function(t){if(e=t,t&&v((0,a.A)(t)),V)s.Pw(V).then((function(t){t&&(t.msg?j().fire({title:"Error",text:t.msg,icon:"error",confirmButtonText:"Aceptar"}).then((function(){K("/types")})):(P(!0),t.metadata=t.metadata.slug,"string"===typeof t.parentType&&""!==t.parentType?t.parentType=e.find((function(e){return e.slug===t.parentType})):""===t.parentType&&(t.parentType=[]),h.O0().then((function(e){L(e.options);var n=(0,r.A)({},t),a=[];n.editRoles&&(n.editRoles.forEach((function(t){var n=e.options.find((function(e){return e.id===t}));a.push(n)})),n.editRoles=a),n.viewRoles&&(a=[],n.viewRoles.forEach((function(t){var n=e.options.find((function(e){return e.id===t}));a.push(n)})),n.viewRoles=a),I(n)})).catch((function(e){e.json().then((function(e){j().fire({title:"Error",text:e.msg,icon:"error",confirmButtonText:"Aceptar"})}))}))))})).catch((function(e){e.json().then((function(e){j().fire({title:"Error",text:e.msg,icon:"error",confirmButtonText:"Aceptar"}).then((function(){K("/types")}))}))}));else{P(!1);var n={name:"",description:"",slug:"",icon:"etiqueta",hierarchical:!1,parentType:[],metadata:[],editRoles:[],viewRoles:[]};h.O0().then((function(e){L(e.options);var t=(0,r.A)({},n),a=[];t.editRoles&&(t.editRoles.forEach((function(t){var n=e.options.find((function(e){return e.id===t}));a.push(n)})),t.editRoles=a),t.viewRoles&&(a=[],t.viewRoles.forEach((function(t){var n=e.options.find((function(e){return e.id===t}));a.push(n)})),t.viewRoles=a),I(t)})).catch((function(e){e.json().then((function(e){j().fire({title:"Error",text:e.msg,icon:"error",confirmButtonText:"Aceptar"})}))}))}})).catch((function(e){e.json().then((function(e){j().fire({title:"Error",text:e.msg,icon:"error",confirmButtonText:"Aceptar"})}))})),d.n7().then((function(e){e&&E(e)})).catch((function(e){e.json().then((function(e){j().fire({title:"Error",text:e.msg,icon:"error",confirmButtonText:"Aceptar"})}))}))}),[]);var K=function(e){Z("".concat(e))};return(0,A.jsxs)(m.Ay,{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-start"},children:[(0,A.jsxs)(m.EL,{style:{width:"70%",maxWidth:600,display:"block",overflow:"auto",placeContent:"flex-start"},children:[!D&&(0,A.jsx)(y.A,{}),D&&J.length>0&&(0,A.jsx)(g.l1,{initialValues:D,onSubmit:function(e,t){var n=t.setSubmitting;q?q&&U("confirm","\xbfEst\xe1s seguro de actualizar este tipo de contenido?").then((function(t){t&&(M(!0),"sin-padre"===e.parentType&&(e.parentType=""),s.Gg(V,JSON.stringify(e,null,2)).then((function(e){e&&K("/cataloging/types")})).catch((function(e){e.json().then((function(e){U("error",e.msg)}))})))})):U("confirm","\xbfEst\xe1s seguro de crear este tipo de contenido?").then((function(t){t&&(M(!0),"sin-padre"===e.parentType&&(e.parentType=""),s.jt(JSON.stringify(e,null,2)).then((function(e){e&&K("/cataloging/types")})).catch((function(e){e.json().then((function(e){U("error",e.msg)}))})))})),n(!1)},validate:function(e){var t={};return e.name||(t.name="El nombre es requerido"),e.description||(t.description="La descripci\xf3n es requerida"),e.metadata&&0!==e.metadata.length||(t.metadata="El est\xe1ndar de metadatos es requerido"),t},children:function(e){var t=e.values,n=e.errors,r=(e.touched,e.handleChange),a=e.handleBlur,i=e.handleSubmit,o=e.isSubmitting,c=e.setFieldValue;return(0,A.jsx)("form",{onSubmit:i,children:(0,A.jsxs)(p.A,{style:{display:"flex",flexDirection:"column"},children:[(0,A.jsx)(w.BR,{name:"Nombre",id:"name",handleChange:r,handleBlur:a,value:t.name,errors:n.name,required:!0}),(0,A.jsx)(w.QA,{name:"Descripci\xf3n",id:"description",handleChange:r,handleBlur:a,value:t.description,errors:n.description,required:!0}),(0,A.jsx)(w.BR,{name:"Slug",id:"slug",handleChange:r,handleBlur:a,value:t.slug}),(0,A.jsx)(w.Q5,{name:"Icono",id:"icon",handleChange:r,handleBlur:a,value:t.icon,options:b.dR}),(0,A.jsx)(w.lH,{name:"Roles de edici\xf3n",id:"editRoles",handleBlur:a,value:t.editRoles,options:J,handleChange:function(e){c("editRoles",e)}}),(0,A.jsx)(w.lH,{name:"Roles de visualizaci\xf3n",id:"viewRoles",handleBlur:a,value:t.viewRoles,options:J,handleChange:function(e){c("viewRoles",e)}}),!q&&(0,A.jsxs)(A.Fragment,{children:[f.length>0&&(0,A.jsx)(w.lH,{name:"Tipo padre",id:"parentType",handleBlur:a,value:t.parentType,options:f.map((function(e){return{id:e.slug,term:e.name}})),handleChange:function(e){c("parentType",e)}}),B.length>0&&(0,A.jsx)(w.Q5,{name:"Est\xe1ndar de metadatos",id:"metadata",handleChange:r,handleBlur:a,value:t.metadata,required:!0,options:B.map((function(e){return{value:e.slug,label:e.name}}))}),(0,A.jsx)(w.FO,{name:"Jer\xe1rquico",id:"hierarchical",handleChange:function(e){c("hierarchical",e)},handleBlur:a,value:t.hierarchical})]}),q&&(0,A.jsxs)(A.Fragment,{children:[f.length>0&&(0,A.jsx)(w.lH,{name:"Tipo padre",id:"parentType",handleBlur:a,value:t.parentType,options:f.map((function(e){return{id:e.slug,term:e.name}})),handleChange:function(e){c("parentType",e)}}),B.length>0&&(0,A.jsx)(w.Q5,{name:"Est\xe1ndar de metadatos",id:"metadata",handleChange:r,handleBlur:a,value:t.metadata,required:!0,options:B.map((function(e){return{value:e.slug,label:e.name}}))}),(0,A.jsx)(w.FO,{name:"Jer\xe1rquico",id:"hierarchical",handleChange:function(e){c("hierarchical",e)},handleBlur:a,value:t.hierarchical})]}),(0,A.jsxs)(p.A,{style:{display:"flex",justifyContent:"flex-end",gap:10,marginTop:10},children:[(0,A.jsx)(k.nA,{type:"button",variant:"outlined",style:{margin:5,width:"auto"},customColor:{color:Y.palette.grey[600],background:Y.palette.grey[200]},onClick:function(){return K("/cataloging/types")},label:"Cancelar"}),(0,A.jsx)(k.nA,{type:"submit",variant:"outlined",style:{margin:5,width:"auto"},disabled:o,label:q?"Actualizar":"Crear"})]})]})})}})]}),W&&(0,A.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",position:"fixed",top:0,left:0,background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(5px) saturate(0%)",zIndex:9999},children:(0,A.jsx)(y.A,{})})]})}},77208:function(e,t,n){n.d(t,{DG:function(){return l},Rs:function(){return o},YD:function(){return s},i6:function(){return u},n7:function(){return i},wi:function(){return c}});var r=n(88120),a=n(91280);function i(){var e={method:"GET",headers:new Headers({Authorization:(0,a.g)()}),mode:"cors",cache:"default"};return fetch((0,r.H6)()+"/forms",e).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="/forms/"+e,i={method:"POST",headers:new Headers({Authorization:(0,a.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch((0,r.H6)()+n,i).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function c(e,t){var n="/forms/"+e,i={method:"PUT",headers:new Headers({Authorization:(0,a.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:t};return fetch((0,r.H6)()+n,i).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function l(e){var t={method:"POST",headers:new Headers({Authorization:(0,a.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch((0,r.H6)()+"/forms",t).then((function(e){return 201!==e.status?Promise.reject(e):e.json()}))}function u(e){var t="/forms/"+e,n={method:"DELETE",headers:new Headers({Authorization:(0,a.g)()}),mode:"cors",cache:"default"};return fetch((0,r.H6)()+t,n).then((function(e){if(204!==e.status)return Promise.reject(e)}))}function s(e){var t="/forms/duplicate/"+e,n={method:"POST",headers:new Headers({Authorization:(0,a.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch((0,r.H6)()+t,n).then((function(e){if(201!==e.status)return Promise.reject(e)}))}}}]);
//# sourceMappingURL=9347.b96eb563.chunk.js.map