"use strict";(self.webpackChunkarchihub=self.webpackChunkarchihub||[]).push([[3459],{93440:function(e,t,r){r(65043);var n=r(70579);t.A=function(e){var t=e.className;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"".concat(t," ").concat(e.labelPos?e.labelPos:""),onClick:function(){return e.onClick(e.title)},children:[(0,n.jsx)("div",{className:"icon",children:e.children}),(0,n.jsx)("div",{className:"tooltipUi",children:e.title})]},e.index)})}},65454:function(e,t,r){r.d(t,{I:function(){return i}});r(65043);var n=r(81551),i=(r(70579),r(93440),(0,n.A)((function(e){return{root:{position:"fixed",width:"54px",background:"rgba(42, 80, 130, 0.8)",borderRadius:"10px",top:"50%",transform:"translateY(-50%)",left:"10px",zIndex:15},item:{cursor:"pointer",position:"relative",margin:2,"& .tooltipUi":{position:"absolute",top:"50%",transform:"translate(calc(50px + 5px), -50%)",background:"rgba(20, 20, 20, 0.9)",padding:"1em",color:"white",borderRadius:"10px",opacity:0,zIndex:-1,visibility:"hidden",transition:"all 0.25s ease"},"& .icon":{width:"50px",height:"50px",position:"relative",borderRadius:"10px",background:"rgba(42, 80, 130, 1)",display:"flex",justifyContent:"center",alignItems:"center","&::before":{content:'""',position:"absolute",top:"5%",left:"5%",width:"90%",height:"90%",background:"rgba(255, 255, 255, 0.2)",borderRadius:"10px",transform:"scale(0.8)",opacity:0,transition:"all 0.25s ease"},"& svg":{position:"relative",width:"20px","& path, & circle, & rect":{fill:"rgba(255, 255, 255, 0.8)"}}},"&.light .icon":{background:"rgba(42, 80, 130, 0.1)","& svg":{"& path, & circle, & rect":{fill:"rgba(100,100,100, 1)"}}},"&.top .tooltipUi":{transform:"translate(calc(-50% + 25px), -90px)"},"&:hover":{"& .icon":{"&::before":{transform:"scale(1)",opacity:1}},"& .tooltipUi":{transform:"translate(calc(50px + 10px), -50%)",opacity:1,zIndex:20,visibility:"visible"}},"&.top:hover .tooltipUi":{transform:"translate(calc(-50% + 25px), -90px)"},"&.edit .icon":{background:"#ed9f31"},"&.new .icon":{background:"#59b359"},"&.delete .icon":{background:"#d34a46"}}}})))},3459:function(e,t,r){r.r(t),r.d(t,{Main:function(){return ae},default:function(){return se}});var n=r(64467),i=r(5544),o=r(65043),a=r(72378),s=r(85865),c=r(15316),l=r(9920),u=r(55263),d=r(17392),p=r(5670),f=(r(95540),r(71027),r(42588)),h=r(5374),m=(r(85742),r(95501)),x=r(65240),g=r(12110),v=r(63336),b=r(30064),y=r.n(b),j=r(54469),A=r(29704),k=r(6512),w=r(4319),S=r(76370),T=r(65892),L=r(26240),C=r(70579),E=function(e){return(0,C.jsx)(c.A,{style:{padding:"5px",background:"white"},children:e.speakers.map((function(t,r){return(0,C.jsxs)(c.A,{style:{padding:"10px",border:"1px solid #dcdcdc",marginBottom:"5px",borderRadius:"5px",display:"flex",maxWidth:"450px",background:"white",alignItems:"center"},children:[(0,C.jsx)("div",{style:{width:"150px",textAlign:"center",fontWeight:"bold",color:t.color},children:t.name.replace("SPEAKER","Persona")}),(0,C.jsx)("div",{style:{position:"relative",width:"350px",marginLeft:"10px",background:"#f2f2f2",borderRadius:"3px",height:"10px"},children:t.segments.map((function(r,n){return(0,C.jsx)("div",{style:{position:"absolute",top:"0",height:"100%",left:"".concat(r.start/e.totalTime*100,"%"),width:"".concat((r.end-r.start)/e.totalTime*100,"%"),background:t.color,cursor:"pointer"},onClick:function(t){e.setVideoTime(r.start)}})}))}),(0,C.jsx)("div",{style:{marginLeft:"10px",background:t.color,color:"white",padding:"5px",fontSize:"10px",borderRadius:"5px"},children:e.totalTime&&(0,C.jsxs)(C.Fragment,{children:[Math.round(t.total/e.totalTime*100),"%"]})})]},r)}))})},R=function(e){var t=(0,L.A)(),r=(0,x.A)((function(e){return{segment:{transition:"all .35s",cursor:"pointer","&:hover":{background:t.palette.primary.light},"&.selected":{opacity:1,background:t.palette.primary.main,color:"white"}},speaker:{fontWeight:"bold",marginRight:"10px"},paragraph:{fontSize:"16px",maxWidth:"650px",margin:"0 auto",marginBottom:"20px"},selected:{background:t.palette.primary.main,color:"white",borderRadius:"3px"},bloque:{"&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:t.palette.primary.main,border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:t.palette.primary.main},"&::-webkit-scrollbar-thumb:active":{background:t.palette.primary.main},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}}}}))(),n=(0,o.useState)(null),a=(0,i.A)(n,2),s=a[0],u=a[1],d=(0,o.useState)(1),p=(0,i.A)(d,2),f=p[0],h=(p[1],(0,o.useState)(null)),m=(0,i.A)(h,2),g=m[0],v=m[1],b=(0,o.useState)([]),y=(0,i.A)(b,2),j=y[0],A=y[1],k=function(){l.RS(e.id,e.slug).then((function(t){var r=T.Ks0,n=!1;if(t.speakers&&(n=!0),n){var i=T.UMr(t.speakers.map((function(e){return e.name})),r);t.segments.forEach((function(e){e.color=i(e.speaker)})),u(t.segments),A(t.segments.map((function(){return o.createRef()}))),t.speakers.forEach((function(e){e.color=i(e.name)})),e.setSpeakers(t.speakers)}else u(t.segments),A(t.segments.map((function(){return o.createRef()})))}))};(0,o.useEffect)((function(){k()}),[]),(0,o.useEffect)((function(){e.updateTranscription&&(k(),e.setUpdateTranscription(!1))}),[e.updateTranscription]),(0,o.useEffect)((function(){if(s){s.forEach((function(t,r){if(t.index=r,t.start<=e.time&&t.end>=e.time&&g!==r){v(r),e.setCurrentLabel(t);var n=j[r].current;n&&n.scrollIntoView({behavior:"smooth",block:"center"})}}))}}),[e.time]);return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(c.A,{style:{position:"absolute",top:0,width:"100%",height:"100%",overflow:"auto"},className:r.bloque,children:1===f&&s&&(0,C.jsx)("div",{style:{float:"right",paddingTop:110},children:function(){var t=null,n=[],i=[];return s.map((function(o,a){var s=(0,C.jsx)("span",{ref:j[a],onClick:function(t){return e.setVideoTime(o.start)},className:"".concat(r.segment," segment_transcription seg_").concat(a," ").concat(a===g?"selected":""),children:o.text},a);s={container:s,speaker:o.speaker,color:o.color},o.speaker!==t&&(t=o.speaker,i.push(n),n=[]),n.push(s)})),i.push(n),(0,C.jsx)(C.Fragment,{children:i.map((function(e,t){return(0,C.jsx)("p",{className:r.paragraph,children:e.map((function(e,t){return t>0?e.container:e.speaker?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{style:{color:e.color},className:r.speaker,children:e.speaker.replace("SPEAKER","Persona")}),e.container]}):void 0}))},t)}))})}()})})})},M=r(89379),V=r(43845),N=r(10765),P=r(93440),_=r(65454),z=r(27138),I=r(74054),U=r(6456),B=r(81551),W=(0,B.A)((function(e){return{close:{width:24,height:24,"& .MuiChip-label":{display:"none"},"& svg":{margin:"0 !important"}}}})),q=function(e){var t=(0,_.I)(),r=W(),n=(0,o.useState)(""),a=(0,i.A)(n,2),s=a[0],u=a[1],d=(0,o.useState)(""),p=(0,i.A)(d,2),f=p[0],h=p[1];(0,o.useEffect)((function(){console.log(e.currentLabel),e.currentLabel&&(u(e.currentLabel.text),h(e.currentLabel.speaker))}),[e.currentLabel]);return(0,C.jsxs)(c.A,{style:{backgroundColor:"white"},children:[(0,C.jsx)(c.A,{style:{display:"flex",justifyContent:"center"},children:(0,C.jsx)(P.A,{className:"".concat(t.item," light"),title:"Editar texto",labelPos:"top",onClick:function(){},children:(0,C.jsx)(z.A,{})})}),e.currentLabel&&(0,C.jsxs)(c.A,{children:[(0,C.jsx)(N.BR,{value:s,handleChange:function(e){return u(e.target.value)},style:{padding:"5px",width:"350px"}}),f&&(0,C.jsx)(N.BR,{value:f,handleChange:function(e){return h(e.target.value)},style:{padding:"5px",width:"350px"}}),(0,C.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,C.jsx)(V.A,{label:"Guardar",size:"small",onClick:function(){!function(){var t=(0,M.A)({},e.currentLabel);t.text=s,t.speaker=f,t.slug=e.slug,l.v(e.id,t).then((function(t){e.setUpdateTranscription(!0)})).catch((function(e){console.log(e)}))}()},icon:(0,C.jsx)(I.A,{}),style:{margin:3,border:"none"},variant:"outlined",className:r.close}),(0,C.jsx)(V.A,{label:"Eliminar",size:"small",onClick:function(){!function(){var t={slug:e.slug,index:e.currentLabel.index};l.bn(e.id,t).then((function(t){e.setUpdateTranscription(!0)})).catch((function(e){console.log(e)}))}()},icon:(0,C.jsx)(U.A,{}),style:{margin:3,border:"none"},variant:"outlined",className:r.close})]})]})]})},O=r(65226),F=r(72003),H=function(e){var t,r,n,a,s,u,d=(0,L.A)(),p=(0,x.A)((function(e){return{bloqueReproduccion:{width:"calc(100% - 40px)",margin:"20px",display:"flex",alignItems:"center",position:"absolute",zIndex:1,"&:hover .num_currentTime":{opacity:1}},playPauseBtn:{width:"70px",height:"70px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer","& svg":{width:"50%",height:"50%","& path":{fill:d.palette.primary.main}}},progressContainer:{width:"calc(100% - 140px)",height:"5px",backgroundColor:"#ececec",display:"flex",alignItems:"center",borderRadius:"5px",cursor:"pointer"},progress:{width:"0%",height:"100%",backgroundColor:d.palette.primary.main,borderRadius:"5px",position:"relative",transition:"all .3s"},currentTime:{position:"absolute",top:"-20px",right:"-56px",fontSize:"12px",fontWeight:"bold",color:d.palette.primary.main,opacity:0,transition:"all .3s"},duration:{width:"100px",height:"70px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",color:"#555",fontSize:"12px",fontWeight:"bold"}}}))(),f=(0,o.useRef)(null),h=(0,o.useRef)(null),m=(0,o.useRef)(null),b=(0,o.useState)(!1),T=(0,i.A)(b,2),R=T[0],M=T[1],V=(0,o.useState)(0),N=(0,i.A)(V,2),P=N[0],_=N[1],z=(0,o.useState)(null),I=(0,i.A)(z,2),U=I[0],B=I[1],W=(0,o.useState)(null),H=(0,i.A)(W,2),D=H[0],$=H[1],G=(0,o.useState)(!1),Q=(0,i.A)(G,2),Y=Q[0],K=Q[1],X=function(e){var t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=Math.floor(e%3600%60);return"".concat(t.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))},J=function(){M(!1)},Z=function(){y().fire({title:"Error",text:"No se pudo cargar el archivo",icon:"error",confirmButtonText:"Ok"})},ee=function(){var e=f.current.duration;_(X(e))},te=function(){if(f.current){e.setPlayTime(f.current.currentTime);var t=f.current.currentTime/f.current.duration*100;h.current&&m.current&&(h.current.style.width="".concat(t,"%"),m.current.innerHTML=X(f.current.currentTime))}};(0,o.useEffect)((function(){return l.xU(e.id).then((function(e){var t=URL.createObjectURL(e);f.current.src=t,f.current.addEventListener("ended",J),f.current.addEventListener("error",Z),f.current.addEventListener("loadedmetadata",ee),f.current.addEventListener("timeupdate",te)})).catch((function(e){y().fire({title:"Error",text:"No se pudo cargar el archivo: "+e.message,icon:"error",confirmButtonText:"Ok"})})),function(){f.current&&(f.current.removeEventListener("ended",J),f.current.removeEventListener("error",Z),f.current.removeEventListener("loadedmetadata",ee),f.current.removeEventListener("timeupdate",te))}}),[]),(0,o.useEffect)((function(){e.time&&(f.current.currentTime=e.time)}),[e.time]);var re=function(e){f.current.currentTime=e};return(0,C.jsxs)(w.M,{onDrop:function(e,t){return console.log(e,t)},onDragStart:function(){console.log("start")},children:[(0,C.jsxs)(g.A,{className:p.bloqueReproduccion,style:{display:null!==f&&void 0!==f&&null!==(t=f.current)&&void 0!==t&&t.duration?"flex":"none"},children:[(0,C.jsx)(c.A,{onClick:function(){f.current.paused?(f.current.play(),M(!0)):(f.current.pause(),M(!1))},className:p.playPauseBtn,children:R?(0,C.jsx)(A.A,{}):(0,C.jsx)(j.A,{})}),(0,C.jsx)(c.A,{className:p.progressContainer,onClick:function(e){var t=document.querySelector(".".concat(p.progressContainer)),r=e.nativeEvent.offsetX/t.offsetWidth*100;f.current.currentTime=f.current.duration*r/100},children:(0,C.jsx)(c.A,{className:p.progress,ref:h,children:(0,C.jsx)(c.A,{ref:m,className:"".concat(p.currentTime," num_currentTime")})})}),(0,C.jsx)(c.A,{className:p.duration,children:P})]}),o.Children.map(e.children,(function(e){return o.isValidElement(e)?o.cloneElement(e,{setVideoTime:re,textAlign:"center",totalTime:f.current.duration,setSpeakers:B,setCurrentLabel:$,updateTranscription:Y,setUpdateTranscription:K}):e})),(0,C.jsx)(k.V,{id:"metadata",initialPosition:{x:0,y:0},style:{display:e.metadata?"block":"none"},children:(0,C.jsx)(S.A,{resource:e.metadata,setMetadata:e.setMetadata,history:e.history})}),(0,C.jsx)(k.V,{id:"speakers",initialPosition:{x:0,y:0},style:{display:null!==f&&void 0!==f&&null!==(r=f.current)&&void 0!==r&&r.duration&&U?"block":"none"},children:(null===f||void 0===f||null===(n=f.current)||void 0===n?void 0:n.duration)&&U&&(0,C.jsx)(E,{speakers:U,totalTime:f.current.duration,setVideoTime:re})}),(0,C.jsx)(k.V,{id:"edit_av_transcribe",initialPosition:{x:0,y:0},style:{display:null!==f&&void 0!==f&&null!==(a=f.current)&&void 0!==a&&a.duration&&"edit_av_transcribe"===e.subView?"block":"none"},children:(null===f||void 0===f||null===(s=f.current)||void 0===s?void 0:s.duration)&&"edit_av_transcribe"===e.subView&&(0,C.jsx)(q,{setSubView:e.setSubView,currentLabel:D,id:e.id,slug:e.slug,setUpdateTranscription:K})}),(0,C.jsxs)("audio",{ref:f,children:[(0,C.jsx)("source",{src:"",type:"audio/mpeg"}),(0,C.jsx)("source",{src:"",type:"audio/ogg"})]}),!(null!==f&&void 0!==f&&null!==(u=f.current)&&void 0!==u&&u.duration)&&(0,C.jsx)(v.A,{style:{position:"absolute",top:20,left:20},children:(0,C.jsx)(O.A,{options:{loop:!0,autoplay:!0,animationData:F,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}},height:70,width:70})})]})},D=(0,x.A)((function(e){return{bloqueReproduccion:{width:"calc(100% - 20px)",margin:"10px",display:"flex",alignItems:"center",position:"absolute",bottom:0,backgroundColor:"rgba(0, 0, 0, .5)",backdropFilter:"blur(5px) saturate(10%) brightness(40%)",transition:"all .3s !important",overflow:"visible",opacity:1,"&:hover .num_currentTime":{opacity:1},"&.hide":{opacity:0}},playPauseBtn:{width:"50px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer","& svg":{width:"50%",height:"50%","& path":{fill:"#fff"}}},progressContainer:{width:"calc(100% - 140px)",height:"5px",backgroundColor:"rgba(255,255,255,.1)",display:"flex",alignItems:"center",borderRadius:"5px",cursor:"pointer"},progress:{width:"0%",height:"100%",backgroundColor:"#fff",borderRadius:"5px",position:"relative",transition:"all .3s"},currentTime:{position:"absolute",top:"0px",right:"-56px",fontSize:"12px",transform:"translateY(-170%)",fontWeight:"bold",color:"#fff",opacity:0,transition:"all .3s",textShadow:"0 0 5px rgba(0,0,0,0.6)"},duration:{width:"150px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",color:"rgba(255,255,255,1)",fontSize:"12px",fontWeight:"bold"},hide:{visibility:"hidden"}}})),$=function(e){var t,r,n,a,s=D(),u=(0,o.useRef)(null),d=(0,o.useState)(!1),p=(0,i.A)(d,2),f=p[0],h=p[1],m=(0,o.useState)(0),x=(0,i.A)(m,2),b=x[0],T=x[1],L=(0,o.useState)(null),R=(0,i.A)(L,2),M=R[0],V=R[1],N=(0,o.useState)(!1),P=(0,i.A)(N,2),_=P[0],z=P[1],I=(0,o.useState)(null),U=(0,i.A)(I,2),B=U[0],W=U[1],H=(0,o.useState)(!1),$=(0,i.A)(H,2),G=$[0],Q=$[1],Y=null,K=function(e){var t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=Math.floor(e%3600%60);return"".concat(t.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))},X=function(){h(!1)},J=function(){y().fire({title:"Error",text:"No se pudo cargar el archivo",icon:"error",confirmButtonText:"Ok"})},Z=function(){var e=u.current.duration;T(K(e))},ee=function(){if(u.current){e.setPlayTime(u.current.currentTime);var t=u.current.currentTime/u.current.duration*100,r=document.querySelector(".".concat(s.progress)),n=document.querySelector(".".concat(s.currentTime));r.style.width="".concat(t,"%"),n.innerHTML=K(u.current.currentTime)}},te=function(){clearTimeout(Y);var e=document.querySelector(".".concat(s.bloqueReproduccion));e.classList.remove("hide"),Y=setTimeout((function(){e.classList.add("hide")}),4e3)},re=function(){z(!0)},ne=function(){u.current.paused?(u.current.play(),h(!0)):(u.current.pause(),h(!1))};(0,o.useEffect)((function(){return l.xU(e.id).then((function(e){var t=URL.createObjectURL(e);u.current.src=t,u.current.addEventListener("ended",X),u.current.addEventListener("error",J),u.current.addEventListener("loadedmetadata",Z),u.current.addEventListener("canplay",re),u.current.addEventListener("timeupdate",ee),u.current.addEventListener("mousemove",te),u.current.addEventListener("click",ne)})).catch((function(e){console.log(e),y().fire({title:"Error",text:"No se pudo cargar el archivo",icon:"error",confirmButtonText:"Ok"})})),function(){u.current&&(u.current.removeEventListener("ended",X),u.current.removeEventListener("error",J),u.current.removeEventListener("loadedmetadata",Z),u.current.removeEventListener("timeupdate",ee),u.current.removeEventListener("mousemove",te),u.current.removeEventListener("click",ne))}}),[]);var ie=function(e){u.current&&(u.current.currentTime=e)};return(0,C.jsxs)(w.M,{onDrop:function(e,t){return console.log(e,t)},onDragStart:function(){console.log("start")},children:[(0,C.jsx)(k.V,{id:"videoPlayer",style:{display:"flex",flexWrap:"wrap",justifyContent:"center",position:"absolute",zIndex:1,backgroundColor:"#000",visibility:_?"visible":"hidden"},initialPosition:{x:0,y:0},children:(0,C.jsxs)("div",{children:[(0,C.jsx)("video",{style:{width:550,height:"auto",maxWidth:"100%",marginBottom:-7,cursor:"move"},ref:u}),(0,C.jsxs)(g.A,{className:s.bloqueReproduccion,style:{backgroundColor:"rgba(255, 255, 255, .25)"},sx:{overflow:"visible"},onMouseMove:function(){clearTimeout(Y)},children:[(0,C.jsx)(c.A,{onClick:ne,className:s.playPauseBtn,children:f?(0,C.jsx)(A.A,{}):(0,C.jsx)(j.A,{})}),(0,C.jsx)(c.A,{className:s.progressContainer,onClick:function(e){var t=document.querySelector(".".concat(s.progressContainer)),r=e.nativeEvent.offsetX/t.offsetWidth*100;u.current.currentTime=u.current.duration*r/100},children:(0,C.jsx)(c.A,{className:s.progress,children:(0,C.jsx)(c.A,{className:"".concat(s.currentTime," num_currentTime")})})}),(0,C.jsx)(c.A,{className:s.duration,children:b})]})]})}),o.Children.map(e.children,(function(e){return o.isValidElement(e)?o.cloneElement(e,{setVideoTime:ie,totalTime:u.current.duration,setSpeakers:V,setCurrentLabel:W,updateTranscription:G,setUpdateTranscription:Q}):e})),(0,C.jsx)(k.V,{id:"metadata",initialPosition:{x:0,y:0},style:{display:e.metadata?"block":"none"},children:(0,C.jsx)(S.A,{resource:e.metadata,setMetadata:e.setMetadata,history:e.history})}),(0,C.jsx)(k.V,{id:"speakers",initialPosition:{x:0,y:0},style:{display:null!==u&&void 0!==u&&null!==(t=u.current)&&void 0!==t&&t.duration&&M?"block":"none"},children:(null===u||void 0===u||null===(r=u.current)||void 0===r?void 0:r.duration)&&M&&(0,C.jsx)(E,{speakers:M,totalTime:u.current.duration,setVideoTime:ie})}),(0,C.jsx)(k.V,{id:"edit_av_transcribe",initialPosition:{x:0,y:0},style:{display:null!==u&&void 0!==u&&null!==(n=u.current)&&void 0!==n&&n.duration&&"edit_av_transcribe"===e.subView?"block":"none"},children:(null===u||void 0===u||null===(a=u.current)||void 0===a?void 0:a.duration)&&"edit_av_transcribe"===e.subView&&(0,C.jsx)(q,{setSubView:e.setSubView,currentLabel:B,id:e.id,slug:e.slug,setUpdateTranscription:Q})}),!_&&(0,C.jsx)(v.A,{style:{position:"absolute",top:20,left:20},children:(0,C.jsx)(O.A,{options:{loop:!0,autoplay:!0,animationData:F,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}},height:100,width:100})})]})},G=r(63573),Q=r(92392),Y=r(88120),K=r(36795),X=r(31269),J=r(92530),Z=r(93012),ee=r(83003),te=r(88455),re=r(73216),ne=r(50264),ie=r(58140),oe=(0,B.A)((function(e){return{toolbar:{minHeight:"auto",padding:5,paddingLeft:"10px !important",color:"#fff",borderTopLeftRadius:10,borderTopRightRadius:10,overflow:"hidden",alignItems:"center",width:"calc(100% - 34px)","& h6":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",fontSize:16,margin:0}}}})),ae=function(e){var t=(0,o.useState)("viz"),r=(0,i.A)(t,2),x=r[0],g=r[1],v=(0,o.useState)(null),b=(0,i.A)(v,2),y=b[0],j=b[1],A=(0,o.useState)(null),k=(0,i.A)(A,2),w=k[0],S=k[1],T=(0,o.useState)(0),E=(0,i.A)(T,2),M=E[0],V=E[1],N=(0,o.useState)(0),P=(0,i.A)(N,2),_=P[0],z=P[1],I=(0,o.useState)(null),U=(0,i.A)(I,2),B=U[0],W=U[1],q=(0,o.useState)(!1),O=(0,i.A)(q,2),F=O[0],D=O[1],ae=(0,ee.d4)((function(e){return e.user})),se=(0,re.g)().id,ce=(0,L.A)(),le=oe(),ue=(0,ie.M)().showAlert,de=(0,ee.wA)(),pe=(0,re.Zp)();(0,o.useEffect)((function(){fe()}),[e.match]),(0,o.useEffect)((function(){ae.favorites&&(ae.favorites.find((function(e){return e.id===se}))?D(!0):D(!1))}),[ae.favorites,e.match]),(0,o.useEffect)((function(){if(w)for(var e=Object.keys(w.processing),t=e[0];"fileProcessing"===t&&e.length>1;)e.shift(),t=e[0]}),[w]);var fe=function(){se&&(g("viz"),S(null),l.Hc(se).then((function(e){S(e)})).catch((function(e){ue("error","No se pudo obtener el archivo").then((function(){pe("/")}))})))},he=function(e){z(e)};return(0,C.jsx)(a.Ay,{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-start"},children:w&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(a.EL,{style:(0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)({width:"calc(100% - 40px)",marginBottom:0,height:"calc(100% - 20px)",padding:0},"width","400px"),"maxWidth","400px"),"border","none"),"display","block"),"placeContent","flex-start"),"overflow","auto"),"minWidth","300px"),"flexGrow",.5),"margin",10),children:[(0,C.jsxs)(u.A,{style:{background:ce.palette.primary.light},className:le.toolbar,children:[ae.access_token&&"null"!==ae.access_token&&(0,C.jsx)(d.A,{sx:{marginLeft:"12px",color:ce.palette.primary.main},size:"large",onClick:function(){var e={type:"records",id:se};F?p.C5(e).then((function(e){ue("success","Eliminado de favoritos"),de((0,te.me)(ae.access_token))})).catch((function(e){ue("error","No se pudo eliminar de favoritos")})):p.Gm(e).then((function(e){ue("success","Agregado a favoritos"),de((0,te.me)(ae.access_token))})).catch((function(e){ue("error","No se pudo agregar a favoritos")}))},children:F?(0,C.jsx)(Z.A,{}):(0,C.jsx)(J.A,{})}),(0,C.jsx)(s.A,{variant:"h6",style:{flexGrow:1,marginLeft:0,color:ce.palette.primary.main},children:w.displayName?w.displayName:w.name})]}),(0,C.jsxs)(c.A,{children:[(0,C.jsx)(f.M2,{record:w,setMetadata:W}),Object.keys(w.processing).length>1&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ne.Separator,{icon:(0,C.jsx)(h.A,{}),title:"Procesamientos"}),Object.keys(w.processing).map((function(e,t){var r=w.processing[e].type,n=Y.vJ.find((function(e){return e.value===r})),i=r;if("audio"!==r&&"video"!==r&&n)return(0,C.jsx)(ne.ItemMenu,{icon:(0,C.jsx)(m.A,{}),name:n.label,onClick:function(){g({view:i,slug:e}),j(null)},className:(null===x||void 0===x?void 0:x.view)===i?"selected":""},t)}))]})]})]}),(0,C.jsxs)(a.EL,{style:{width:"calc(100% - 400px)",height:"calc(100% - 20px)",position:"relative",margin:10,marginLeft:0,padding:0,overflow:"hidden",backgroundColor:"image"===w.processing.fileProcessing.type||"document"===w.processing.fileProcessing.type?ce.palette.grey[900]:"white"},children:["audio"===w.processing.fileProcessing.type&&(0,C.jsx)(K.Q,{backend:X.t2,children:(0,C.jsx)(H,{id:w._id.$oid,setPlayTime:V,time:_,metadata:B,setMetadata:W,history:e.history,subView:y,slug:x.slug,children:"av_transcribe"===(null===x||void 0===x?void 0:x.view)&&(0,C.jsx)(R,{id:w._id.$oid,slug:x.slug,subView:y,time:M,setTime:function(e){he(e)}})})}),"video"===w.processing.fileProcessing.type&&(0,C.jsx)(K.Q,{backend:X.t2,children:(0,C.jsx)($,{id:w._id.$oid,setPlayTime:V,time:_,metadata:B,setMetadata:W,history:e.history,subView:y,slug:x.slug,children:"av_transcribe"===(null===x||void 0===x?void 0:x.view)&&(0,C.jsx)(R,{id:w._id.$oid,slug:x.slug,subView:y,time:M,setTime:function(e){he(e)}})})}),"document"===w.processing.fileProcessing.type&&(0,C.jsx)(K.Q,{backend:X.t2,children:(0,C.jsx)(G.A,{id:w._id.$oid,subView:y,setSubView:j,view:x,metadata:B,setMetadata:W,history:e.history})}),"image"===w.processing.fileProcessing.type&&(0,C.jsx)(K.Q,{backend:X.t2,children:(0,C.jsx)(Q.A,{id:w._id.$oid,setMetadata:W,metadata:B})})]})]})})},se=ae},29704:function(e,t,r){var n=r(24994);t.A=void 0;var i=n(r(40039)),o=r(70579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M6 19h4V5H6zm8-14v14h4V5z"}),"Pause")},54469:function(e,t,r){var n=r(24994);t.A=void 0;var i=n(r(40039)),o=r(70579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow")},5374:function(e,t,r){var n=r(24994);t.A=void 0;var i=n(r(40039)),o=r(70579);t.A=(0,i.default)((0,o.jsx)("path",{d:"m19.93 8.21-3.6 1.68L14 7.7V6.3l2.33-2.19 3.6 1.68c.38.18.82.01 1-.36.18-.38.01-.82-.36-1L16.65 2.6c-.38-.18-.83-.1-1.13.2l-1.74 1.6c-.18-.24-.46-.4-.78-.4-.55 0-1 .45-1 1v1H8.82C8.34 4.65 6.98 3.73 5.4 4.07c-1.16.25-2.15 1.25-2.36 2.43-.22 1.32.46 2.47 1.48 3.08L7.08 18H4v3h13v-3h-3.62L8.41 8.77c.17-.24.31-.49.41-.77H12v1c0 .55.45 1 1 1 .32 0 .6-.16.78-.4l1.74 1.6c.3.3.75.38 1.13.2l3.92-1.83c.38-.18.54-.62.36-1-.18-.37-.62-.54-1-.36M6 8c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"PrecisionManufacturing")},27138:function(e,t,r){var n=r(24994);t.A=void 0;var i=n(r(40039)),o=r(70579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M2.5 4v3h5v12h3V7h5V4zm19 5h-9v3h3v7h3v-7h3z"}),"TextFields")},71027:function(e,t,r){var n=r(24994);t.A=void 0;var i=n(r(40039)),o=r(70579);t.A=(0,i.default)((0,o.jsx)("path",{d:"m17.93 16 1.63-1.63c-2.77-3.02-2.77-7.56 0-10.74L17.93 2c-3.9 3.89-3.91 9.95 0 14m4.99-5.05c-.84-1.18-.84-2.71 0-3.89l-1.68-1.69c-2.02 2.02-2.02 5.07 0 7.27zM9 13c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m6.39 2.56C13.71 14.7 11.53 14 9 14s-4.71.7-6.39 1.56C1.61 16.07 1 17.1 1 18.22V21h16v-2.78c0-1.12-.61-2.15-1.61-2.66"}),"Transcribe")},85742:function(e,t,r){var n=r(24994);t.A=void 0;var i=n(r(40039)),o=r(70579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8"}),"Undo")}}]);
//# sourceMappingURL=3459.6df905b8.chunk.js.map