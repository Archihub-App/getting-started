"use strict";(self.webpackChunkarchihub=self.webpackChunkarchihub||[]).push([[5593],{72378:function(e,t,n){n.d(t,{EL:function(){return c},WB:function(){return u}});var r=n(89379),o=(n(65043),n(26240)),a=n(81551),i=n(83003),s=n(70579),c=function(e){var t=(0,o.A)(),n=(0,i.d4)((function(e){return e.app.isDarkMode})),c=(0,a.A)((function(e){return{bloque:{"&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:t.palette.primary.main,border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:t.palette.primary.main},"&::-webkit-scrollbar-thumb:active":{background:t.palette.primary.main},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}}}}))();return(0,s.jsx)("div",{id:e.id,style:(0,r.A)({width:"100%",height:"calc(100% - 40px)",display:"flex",margin:"10px",borderRadius:"10px",padding:"10px",background:n?t.palette.grey[900]:"white",boxShadow:"0px 0px 1px rgba(0,0,0,0.1)",justifyContent:"center",alignItems:"center",alignContent:"center",flexWrap:"wrap"},e.style),className:c.bloque,onMouseDown:e.onMouseDown,onScroll:e.onScroll,children:e.children})},u=function(e){var t=(0,o.A)(),n=(0,a.A)((function(e){return{bloque:{"&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:t.palette.grey[500],border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:t.palette.grey[500]},"&::-webkit-scrollbar-thumb:active":{background:t.palette.grey[500]},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}}}}))();return(0,s.jsx)("div",{id:e.id,style:(0,r.A)({padding:10,backgroundColor:t.palette.grey[100],borderRadius:5,color:t.palette.grey[600],height:100,overflow:"auto",width:"100%"},e.style),className:n.bloque,children:e.children})};t.Ay=function(e){var t=e.children,n=e.style;e.onScroll;return(0,s.jsx)("section",{style:(0,r.A)({display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh"},n),children:t})}},75593:function(e,t,n){n.r(t);var r=n(5544),o=n(65043),a=n(83003),i=n(73216),s=n(77208),c=n(81551),u=n(16702),l=n(72378),d=n(19853),f=n(63516),h=n(24394),g=n(43288),b=n(11238),m=n(26240),p=n(58140),y=n(99246),x=n(70579);(0,c.A)((function(e){return{columna:{display:"flex",height:"calc(100vh - 150px)"},error:{color:"white",backgroundColor:"#f97b7b",padding:10,borderRadius:5,marginBottom:10,"&:first-child":{marginTop:10}}}}));t.default=function(e){var t=(0,o.useState)(!1),n=(0,r.A)(t,2),c=n[0],w=n[1],k=(0,o.useState)(null),v=(0,r.A)(k,2),j=v[0],A=v[1],C=(0,o.useState)([]),S=(0,r.A)(C,2),R=S[0],T=S[1],M=((0,a.d4)((function(e){return e.app.user})),(0,i.Zp)()),H=(0,i.g)().slug,P=(0,m.A)(),D=(0,p.M)().showAlert,E=(0,o.useState)(!1),q=(0,r.A)(E,2),B=q[0],z=q[1],N=(0,y.A)();(0,o.useEffect)((function(){d.WP().then((function(e){T(e.options)})).catch((function(e){e.json().then((function(e){D("error",e.msg)}))})),H?s.Rs(H).then((function(e){e&&(e.msg?D("error",e.msg).then((function(){O("/forms")})):(w(!0),e.fields.shift(),A(e)))})).catch((function(e){e.json().then((function(e){D("error",e.msg).then((function(){O("/forms")}))}))})):(w(!1),A({name:"",description:"",slug:"",fields:[]}))}),[]);var O=function(e){M("".concat(e))};return(0,x.jsxs)(l.Ay,{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-start"},children:[(0,x.jsx)(l.EL,{style:{width:"100%",maxWidth:1e3,display:"block",overflow:"auto",placeContent:"flex-start"},children:j&&(0,x.jsx)(f.l1,{initialValues:j,onSubmit:function(e,t){var n=t.setSubmitting;c?c&&D("confirm",N.formatMessage({id:"cataloging.confirmEditResource"})).then((function(t){t&&(z(!0),s.wi(H,JSON.stringify(e,null,2)).then((function(e){z(!1),D("info",e.msg).then((function(){O("/cataloging/forms")}))})).catch((function(e){z(!1),e.json().then((function(e){D("error",e.msg)}))})))})):D("confirm",N.formatMessage({id:"cataloging.confirmNewResource"})).then((function(t){t&&(z(!0),"sin-padre"===e.parentType&&(e.parentType=""),s.DG(JSON.stringify(e,null,2)).then((function(e){z(!1),D("info",e.msg).then((function(){O("/cataloging/forms")}))})).catch((function(e){z(!1),e.json().then((function(e){D("error",e.msg)}))})))})),n(!1)},validate:function(e){var t={};return e.name||(t.name="El nombre es requerido"),e.description||(t.description="La descripci\xf3n es requerida"),t},children:function(e){var t=e.values,n=e.errors,r=(e.touched,e.handleChange),o=e.handleBlur,a=e.handleSubmit,i=e.isSubmitting,s=e.setFieldValue;return(0,x.jsx)("form",{onSubmit:a,children:(0,x.jsxs)(u.A,{style:{display:"flex",flexDirection:"column"},children:[(0,x.jsx)(h.BR,{name:N.formatMessage({id:"general.name"}),id:"name",handleChange:r,handleBlur:o,value:t.name,errors:n.name,required:!0}),(0,x.jsx)(h.QA,{name:N.formatMessage({id:"general.description"}),id:"description",handleChange:r,handleBlur:o,value:t.description,errors:n.description,required:!0}),(0,x.jsx)(h.BR,{name:N.formatMessage({id:"general.slug"}),id:"slug",handleChange:r,handleBlur:o,value:t.slug,disabled:c}),(0,x.jsx)(f.ED,{name:"fields",children:function(e){var n=e.insert,r=e.remove,o=e.push,a=e.move;return(0,x.jsx)(h.Yp,{name:N.formatMessage({id:"general.metadata"}),id:"metadata",insert:n,remove:r,push:o,move:a,value:t.fields,accessRights:R,setFieldValue:s})}}),(0,x.jsxs)(u.A,{style:{display:"flex",justifyContent:"flex-end",gap:10,marginTop:10},children:[(0,x.jsx)(b.nA,{type:"button",variant:"outlined",style:{margin:5,width:"auto"},customColor:{color:P.palette.grey[600],background:P.palette.grey[200]},onClick:function(){return O("/cataloging/forms")},label:N.formatMessage({id:"general.cancel"})}),(0,x.jsx)(b.nA,{type:"submit",variant:"outlined",style:{margin:5,width:"auto"},disabled:i,label:c?N.formatMessage({id:"general.update"}):N.formatMessage({id:"general.save"})})]})]})})}},0)}),B&&(0,x.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",position:"fixed",top:0,left:0,background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(5px) saturate(0%)",zIndex:9999},children:(0,x.jsx)(g.A,{})})]})}},77208:function(e,t,n){n.d(t,{DG:function(){return c},Rs:function(){return i},YD:function(){return l},i6:function(){return u},n7:function(){return a},wi:function(){return s}});var r=n(88120),o=n(91280);function a(){var e={method:"GET",headers:new Headers({Authorization:(0,o.g)()}),mode:"cors",cache:"default"};return fetch((0,r.H6)()+"/forms",e).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="/forms/"+e,a={method:"POST",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch((0,r.H6)()+n,a).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function s(e,t){var n="/forms/"+e,a={method:"PUT",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:t};return fetch((0,r.H6)()+n,a).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function c(e){var t={method:"POST",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch((0,r.H6)()+"/forms",t).then((function(e){return 201!==e.status?Promise.reject(e):e.json()}))}function u(e){var t="/forms/"+e,n={method:"DELETE",headers:new Headers({Authorization:(0,o.g)()}),mode:"cors",cache:"default"};return fetch((0,r.H6)()+t,n).then((function(e){if(204!==e.status)return Promise.reject(e)}))}function l(e){var t="/forms/duplicate/"+e,n={method:"POST",headers:new Headers({Authorization:(0,o.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch((0,r.H6)()+t,n).then((function(e){if(201!==e.status)return Promise.reject(e)}))}}}]);
//# sourceMappingURL=5593.611678a4.chunk.js.map