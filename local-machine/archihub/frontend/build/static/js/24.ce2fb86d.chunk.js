(this.webpackJsonpsim=this.webpackJsonpsim||[]).push([[24],{1274:function(e,t,n){"use strict";n.r(t),n.d(t,"BloqueContenido",(function(){return y})),n.d(t,"Main",(function(){return v}));var a=n(36),r=n(2),o=n.n(r),i=n(49),c=n(132),s=n(849),l=n(847),u=n(749),d=n(833),f=(n(845),n(850),n(858)),m=n.n(f),p=n(859),h=n.n(p),b=(n(851),n(55),n(846),n(191),n(900)),g=Object(u.a)((function(e){return{bloque:{padding:"10px",backgroundColor:"rgba(255,255,255,.9)",margin:5,width:"100%",height:"100%",overflow:"auto",position:"relative",borderRadius:10,border:"3px solid #fff","&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:"#56749a",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:"#56749a"},"&::-webkit-scrollbar-thumb:active":{background:"#56749a"},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}},tituloBloque:{top:0,fontSize:15,fontWeight:"bold",padding:"10px 15px",position:"sticky",zIndex:10,width:"100%",left:0,background:"#e6e6e6",borderTopLeftRadius:10,borderTopRightRadius:10,color:"#56749a",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},breadcrumbs:{padding:"5px 15px",color:"#fff",borderBottomLeftRadius:10,borderBottomRightRadius:10,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},linkBreadcrumb:{color:"#fff",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:200,display:"inline-block","&:hover":{color:"#fff"}},selectedBread:{color:"#fff !important",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:150,backgroundColor:"rgba(255,255,255,.2)",display:"inline-block",padding:"0 5px",borderRadius:2},columnas:{display:"flex",height:"calc(100vh - 150px)"},separador:{borderBottom:"1px solid #dcdcdc",paddingTop:25,paddingBottom:10,fontWeight:"bold",color:"#56749a","& svg":{marginRight:10,marginLeft:5,width:20,height:20,padding:3,backgroundColor:"#56749a",borderRadius:50,"& path":{fill:"#fff"}}},toolbar:{minHeight:"auto",padding:5,backgroundColor:"#56749a",color:"#fff",borderTopLeftRadius:10,overflow:"hidden","& h6":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",fontSize:16}},itemMenu:{display:"flex",alignItems:"center",padding:15,borderBottom:"1px solid #dcdcdc","& svg":{"& path":{fill:"#9fb0c6"}},"&:hover":{backgroundColor:e.palette.grey[100],cursor:"pointer"},"&.selected":{backgroundColor:"#9fb0c6",color:"#fff","& path":{fill:"#fff"}}}}})),y=function(e){var t=g();return o.a.createElement(d.a,{className:t.bloque,style:e.style},e.title&&o.a.createElement(d.a,{className:t.tituloBloque},e.title),e.topBar&&o.a.createElement(o.a.Fragment,null,e.topBar),e.children)},v=function(e){g();var t=Object(r.useState)(null),n=Object(a.a)(t,2),i=(n[0],n[1],Object(r.useState)(null)),c=Object(a.a)(i,2),u=(c[0],c[1],Object(r.useState)(!1)),d=Object(a.a)(u,2);d[0],d[1];Object(r.useEffect)((function(){}),[]);return o.a.createElement(l.a,null,o.a.createElement(s.a,{userRoles:e.user.roles,list:function(){var t=[];return t.push({name:"Volver",icon:o.a.createElement(o.a.Fragment,null,o.a.createElement(h.a,null)),callback:function(){e.history.push("/dashboard")}}),e.user.roles.includes("admin")&&t.push({name:"Agregar usuario",icon:o.a.createElement(m.a,null),action:"new",callback:function(){e.history.push("/admin/users/new")}}),t}()}),o.a.createElement(y,{style:{width:"calc(50% - 20px)",height:"calc(100vh - 100px)",overflow:"auto"},title:"Usuarios"},o.a.createElement(b.a,{selectedType:"users",filters:{}})))};t.default=Object(i.b)((function(e){return{user:e.auth.user}}),c.a)(v)},851:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m}));var a=n(2),r=n.n(a),o=n(444),i=n(1311),c=n(189),s=n(968),l=n(833),u=n(852),d=n.n(u),f=Object(o.a)(i.a)((function(e){var t=e.theme;return{backgroundColor:"light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[200],height:t.spacing(3),color:t.palette.text.primary,fontWeight:t.typography.fontWeightRegular,border:"1px solid #dcdcdc",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:300,"& svg":{width:15,marginLeft:10,marginRight:5}}})),m=Object(o.a)(i.a)((function(e){var t=e.theme;return{backgroundColor:"rgb(85 116 154)",height:t.spacing(3),color:"white",fontWeight:t.typography.fontWeightRegular,border:"1px solid #dcdcdc",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:300,"& svg":{width:15,marginLeft:10,marginRight:5},"& path":{fill:"#fff"}}}));t.c=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,{variant:"body2"},e.selectedType.description),r.a.createElement(s.a,{separator:r.a.createElement(d.a,{fontSize:"small",style:{margin:0}})},e.selectedType.parentsTypes.reverse().map((function(e,t){return r.a.createElement(f,{key:t,label:e.name})})),r.a.createElement(c.a,{variant:"body2",color:"text.primary"},e.selectedType.name)),e.selectedType.hierarchical&&r.a.createElement(l.a,null,r.a.createElement(c.a,{variant:"body2",color:"text.primary"},"Este tipo de contenido puede ser jer\xe1rquico entre si")),e.selectedType.metadata&&r.a.createElement(l.a,null,r.a.createElement(c.a,{variant:"body2",color:"text.primary"},"La estructura de metadatos es: ",e.selectedType.metadata.name)))}},858:function(e,t,n){"use strict";var a=n(40);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(67)),o=n(0);t.default=(0,r.default)((0,o.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},862:function(e,t,n){"use strict";n.d(t,"k",(function(){return o})),n.d(t,"l",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"h",(function(){return s})),n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"j",(function(){return b}));n(908);var a=n(55),r=n(192);function o(e){var t={method:"PUT",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch(a.e+"/users/update",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function i(e){var t={method:"PUT",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch(a.e+"/users/update-me",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function c(e){var t={method:"POST",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch(a.e+"/users/register",t).then((function(e){return 201!==e.status?Promise.reject(e):e.json()}))}function s(e){var t="/users/"+e,n={method:"GET",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch(a.e+t,n).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function l(e){var t={method:"POST",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch(a.e+"/users",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function u(e){var t={method:"POST",headers:{Authorization:Object(r.a)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(a.e+"/users/token",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function d(e){var t={method:"POST",headers:{Authorization:Object(r.a)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(a.e+"/users/admin-token",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function f(e){var t={method:"POST",headers:{Authorization:Object(r.a)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(a.e+"/users/node-token",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function m(e){var t={method:"POST",headers:{Authorization:Object(r.a)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(a.e+"/users/favorites",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function p(e){var t={method:"DELETE",headers:{Authorization:Object(r.a)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(a.e+"/users/favorites",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function h(e){var t={method:"POST",headers:{Authorization:Object(r.a)(),"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(a.e+"/users/favorites_list",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}function b(){var e={method:"GET",headers:{Authorization:Object(r.a)(),"Content-Type":"application/json"},mode:"cors",cache:"default"};return fetch(a.e+"/users/requests",e).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))}},863:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(865),r=function(e,t){var n,r=t.split("."),o=e,i=Object(a.a)(r);try{for(i.s();!(n=i.n()).done;){o=o[n.value]}}catch(c){i.e(c)}finally{i.f()}return o}},900:function(e,t,n){"use strict";var a=n(18),r=n(190),o=n(36),i=n(2),c=n.n(i),s=n(862),l=n(844),u=n(55),d=n(192);var f=n(845),m=n(863),p=n(749),h=n(837),b=n(1302),g=n(1303),y=n(1305),v=n(1301),j=n(1306),O=n(1292),E=n(1304),w=n(1307),T=n(1298),x=n(1309),k=n(1295),S=n(1296),C=n(855),P=n.n(C),z=n(848),A=n.n(z),R=n(870),N=n.n(R),B=n(856),F=n.n(B),J=n(191),W=n.n(J),H=n(35),L=n(1299),q=(n(860),Object(p.a)((function(e){return{btn_color:{color:"#869bb7 !important",padding:"5px !important",width:"30px !important",height:"30px !important",margin:"0 2px !important",border:"1px solid #c6d0dd !important","&:hover":{color:"#fff !important",backgroundColor:"#56749a !important"},"& .MuiSvgIcon-root":{width:"14px !important"}}}})));function _(e){e.onSelectAllClick;var t=e.order,n=e.orderBy,a=(e.numSelected,e.rowCount,e.onRequestSort,e.headCells);return c.a.createElement(j.a,null,c.a.createElement(E.a,null,a.map((function(e){return c.a.createElement(y.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"normal",sortDirection:n===e.id&&t},e.label)}))))}function I(e){e.numSelected;return c.a.createElement(O.a,{rowsPerPage:20,rowsPerPageOptions:[],count:e.total,page:e.page,onPageChange:function(t,n){e.setPage(n)}})}t.a=function(e){var t=Object(H.k)(),n=q(),p=Object(i.useState)([]),j=Object(o.a)(p,2),O=j[0],C=j[1],z=Object(i.useState)([]),R=Object(o.a)(z,2),B=R[0],J=R[1],M=c.a.useState(!1),U=Object(o.a)(M,2),D=U[0],G=(U[1],Object(i.useState)([])),V=Object(o.a)(G,2),K=V[0],Q=(V[1],Object(i.useState)(0)),X=Object(o.a)(Q,2),Y=X[0],Z=X[1],$=Object(i.useState)(0),ee=Object(o.a)($,2),te=ee[0],ne=ee[1];Object(i.useEffect)((function(){if(C([]),J([]),e.selectedType&&"string"!==typeof e.selectedType){e.filters.page=te,l.b(e.selectedType.slug,JSON.stringify(e.filters)).then((function(e){C(e),e.length>0&&Z(e[0].total)}));var t=e.selectedType.metadata.fields.map((function(e){return{destiny:e.destiny,label:e.label}}));t=[{destiny:"",label:""}].concat(Object(r.a)(t)),J(t=[{destiny:"",label:""},{destiny:"metadata.firstLevel.title",label:"T\xedtulo"},{destiny:"accessRights",label:"Derechos de acceso"}])}else if(e.selectedType&&"string"===typeof e.selectedType)if("users"===e.selectedType)s.g(JSON.stringify({page:te,filters:e.filters})).then((function(e){C(e.map((function(e){return Object(a.a)({},e)}))),e.length>0&&Z(e[0].total);J([{destiny:"",label:""},{destiny:"name",label:"Nombre"},{destiny:"username",label:"Usuario"},{destiny:"roles",label:"Roles"},{destiny:"accessRights",label:"Niveles de acceso"}])}));else if("logs"===e.selectedType)(function(e){var t={method:"POST",headers:new Headers({Authorization:Object(d.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch(u.e+"/logs",t).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()}))})(JSON.stringify({page:te,filters:e.filters})).then((function(e){C(e.map((function(e){return Object(a.a)({},e)}))),e.length>0&&Z(e[0].total);J([{destiny:"username",label:"Usuario"},{destiny:"action",label:"Evento"}])}));else if("plugins"===e.selectedType)f.g().then((function(e){C(e.plugins);J([{destiny:"name",label:"Nombre"},{destiny:"description",label:"Descripci\xf3n"},{destiny:"active",label:"Activo"}])})).catch((function(e){console.log(e)}));else if("tasks"===e.selectedType)f.j("beta").then((function(e){C(e);J([{destiny:"name",label:"Nombre"},{destiny:"status",label:"Estado"},{destiny:"",label:"Acciones"}])}));else if("files"!==e.selectedType){l.b(e.selectedType,JSON.stringify(e.filters)).then((function(e){C(e.resources)}));J([{destiny:"",label:""},{destiny:"metadata.firstLevel.title",label:"T\xedtulo"}])}else e.resourceId||l.c(JSON.stringify({page:te,filters:e.filters})).then((function(e){e.length>0&&Z(e[0].total),C(e.map((function(e){return Object(a.a)({},e)})));J([{destiny:"name",label:"T\xedtulo"},{destiny:"size",label:"Tama\xf1o"},{destiny:"parent",label:"Carpeta"}])}))}),[e.selectedType,e.filters,te]);var ae=function(e){t.push("/detail/".concat(e))};return O.length>0&&console.log(Object(m.a)(O[0],"accessRights")),c.a.createElement(c.a.Fragment,null,O.length>0&&c.a.createElement(c.a.Fragment,null,c.a.createElement(h.a,{sx:{width:"100%"}},c.a.createElement(T.a,{sx:{width:"100%",mb:2}},c.a.createElement(v.a,null,c.a.createElement(b.a,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:D?"small":"medium",padding:"none"},c.a.createElement(_,{numSelected:K.length,headCells:B}),c.a.createElement(g.a,null,O.map((function(a){return c.a.createElement(E.a,{hover:!0,role:"checkbox",tabIndex:-1,key:a.id,onClick:function(){}},B.map((function(r){return c.a.createElement(y.a,{component:"th",id:r.destiny,scope:"row",key:r.destiny,sx:{padding:"6px 2px",fontSize:"1rem",minHeight:"auto"}},""!==r.label&&"active"!==r.destiny&&"accessRights"!==r.destiny&&c.a.createElement(c.a.Fragment,null,("string"===typeof Object(m.a)(a,r.destiny)||"number"===typeof Object(m.a)(a,r.destiny))&&c.a.createElement(c.a.Fragment,null,Object(m.a)(a,r.destiny)),Array.isArray(Object(m.a)(a,r.destiny))&&c.a.createElement(c.a.Fragment,null,Object(m.a)(a,r.destiny).map((function(t,n){return c.a.createElement(c.a.Fragment,null,"users"===e.selectedType&&c.a.createElement(L.a,{size:"small",label:t,style:{margin:"2px"}}),"files"===e.selectedType&&c.a.createElement(k.a,{onClick:function(){ae(t.id)}},n))})))),""===r.label&&c.a.createElement(w.a,{disableGutters:!0,variant:"dense",style:{minHeight:"auto",display:"flex",justifyContent:"center"}},"tasks"!==e.selectedType&&c.a.createElement(x.a,{className:n.btn_color,size:"small",variant:"contained",onClick:function(){return n=a.id,void("users"===e.selectedType?t.push("/admin/users/edit/".concat(n)):t.push("/cataloging/".concat(e.selectedType.slug,"/edit/").concat(n)));var n}},c.a.createElement(A.a,null)),"users"!==e.selectedType&&c.a.createElement(c.a.Fragment,null,c.a.createElement(x.a,{className:n.btn_color,size:"small",variant:"contained",onClick:function(){return ae(a.id)}},c.a.createElement(N.a,null)),c.a.createElement(x.a,{className:n.btn_color,size:"small",variant:"contained"},c.a.createElement(F.a,null)),c.a.createElement(x.a,{className:n.btn_color,size:"small",variant:"contained",onClick:function(){return e=a.id,void W.a.fire({title:"\xbfEst\xe1s seguro?",text:"No podr\xe1s revertir esta acci\xf3n",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar"}).then((function(t){t.isConfirmed&&l.a(e).then((function(e){W.a.fire({title:"Eliminado",text:"El recurso ha sido eliminado",icon:"success",confirmButtonText:"Aceptar"}).then((function(){window.location.reload()}))})).catch((function(e){e.json().then((function(e){W.a.fire({title:"Error",text:e.msg,icon:"error",confirmButtonText:"Aceptar"})}))}))}));var e}},c.a.createElement(P.a,null)))),"active"===r.destiny&&c.a.createElement(w.a,{disableGutters:!0,variant:"dense"},c.a.createElement(S.a,{checked:a.active,onChange:function(t){e.onPluginChange(a.slug,t.target.checked).then((function(){W.a.fire({title:"Actualizado",text:"El plugin ha sido actualizado. Para que los cambios surtan efecto, es necesario reiniciar el servidor.",icon:"success",confirmButtonText:"Aceptar"}),f.g().then((function(e){C(e.plugins)})).catch((function(e){console.log(e)}))}))}})),"accessRights"===r.destiny&&Object(m.a)(a,r.destiny)&&c.a.createElement(c.a.Fragment,null,Array.isArray(Object(m.a)(a,r.destiny))&&c.a.createElement(c.a.Fragment,null,Object(m.a)(a,r.destiny).map((function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement(L.a,{size:"small",label:e,style:{margin:"2px"}}))})))))})))}))),"plugins"!==e.selectedType&&c.a.createElement(I,{page:te,setPage:ne,total:Y})))))))}}}]);
//# sourceMappingURL=24.ce2fb86d.chunk.js.map