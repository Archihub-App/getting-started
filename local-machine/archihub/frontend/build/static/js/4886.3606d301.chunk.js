"use strict";(self.webpackChunkarchihub=self.webpackChunkarchihub||[]).push([[4886],{24886:function(e,t,n){n.r(t);var r=n(5544),i=n(65043),o=n(73216),a=n(26240),s=n(83003),l=n(85211),c=n(46020),u=(n(85742),n(69389)),d=n(81551),f=n(66187),p=n(88120),h=n(43288),m=n(55003),v=n(72378),g=n(42588),w=n(55263),x=n(29464),b=n(70579),y=(0,d.A)((function(e){return{toolbar:{minHeight:"auto",padding:5,paddingLeft:"10px !important",color:"#fff",borderTopLeftRadius:10,borderTopRightRadius:10,overflow:"hidden",alignItems:"center",width:"calc(100% - 34px)","& h6":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",fontSize:16,margin:0}},bloque:{"&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:"#56749a",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:"#56749a"},"&::-webkit-scrollbar-thumb:active":{background:"#56749a"},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}}}}));t.default=function(e){var t=y(),n=(0,a.A)(),d=(0,i.useState)(null),j=(0,r.A)(d,2),A=j[0],k=j[1],T=(0,i.useState)(null),M=(0,r.A)(T,2),B=M[0],S=M[1],z=(0,i.useState)(null),C=(0,r.A)(z,2),E=C[0],R=C[1],_=(0,i.useState)(null),F=(0,r.A)(_,2),N=F[0],H=F[1],P=(0,i.useState)(null),D=(0,r.A)(P,2),L=D[0],G=D[1],O=(0,i.useState)([]),I=(0,r.A)(O,2),J=I[0],K=I[1],U=(0,i.useState)(null),Y=(0,r.A)(U,2),q=Y[0],Z=Y[1],$=((0,s.d4)((function(e){return e.user})),(0,s.d4)((function(e){return e.app.filters}))),Q=(0,o.g)().slug,V=(0,i.useState)(!0),W=(0,r.A)(V,2),X=W[0],ee=W[1],te=(0,s.wA)();(0,i.useEffect)((function(){$[Q]&&($[Q].post_type?R($[Q].post_type):R(null),$[Q].parents?K($[Q].parents):K([]))}),[$]),(0,i.useEffect)((function(){Q&&c.hE(Q).then((function(e){if(ee(!1),Z(e.forms),console.log(e.forms),k(e.types.sort((function(e,t){return e.count-t.count})).reverse()),H(e.files),S({name:e.name,icon:e.icon,description:e.description,slug:e.slug}),e.parent&&""!==e.parent){G(e.parent);var t=(0,l.e)($,Q,"root",{id:e.parent});te((0,l.vm)(t))}})).catch((function(e){console.log(e)}))}),[]);return(0,b.jsxs)(v.Ay,{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:X?"center":"flex-start"},children:[X&&(0,b.jsx)(h.A,{}),A&&N&&B&&q&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.ResizableBox,{onResize:function(){console.log("resize")},draggableOpts:{grid:[25,25]},handle:(0,b.jsx)("div",{style:{width:"10px",height:"100%",background:n.palette.primary.light,cursor:"col-resize"}}),children:(0,b.jsxs)(v.EL,{style:{padding:0,height:"calc(100vh - 20px)",width:"400px",display:"block",overflow:"auto",placeContent:"flex-start"},children:[(0,b.jsxs)(w.A,{className:t.toolbar,style:{background:n.palette.primary.light},children:[(0,b.jsx)("div",{style:{marginLeft:"24px",color:n.palette.primary.main},children:p.dR.find((function(e){return e.value===B.icon})).icon}),(0,b.jsx)(f.A,{variant:"h6",style:{flexGrow:1,marginLeft:15,color:n.palette.primary.main},children:B.name})]}),(0,b.jsx)(g.AD,{type:B,parents:A,files:N,view:Q,root:L}),(0,b.jsx)(u.A,{root:L||null,activeTypes:A,postType:E?E.slug:null,view:"list",checkboxTypes:A.map((function(e){return e.slug})),multiple:!1,selected:[J],childrenSelect:!1,setSelected:function(e){if(0===e.length){var t=(0,l.e)($,Q,"parents",{id:L});te((0,l.vm)(t))}else{var n=(0,l.e)($,Q,"parents",e[0]);te((0,l.vm)(n))}}},E?[E.slug]:A)]})}),(0,b.jsx)(x.M,{types:A,selectedType:E,history:e.history,view:Q,selectedResource:L?{_id:L}:null,mainType:B,forms:q},L)]})]})}},42588:function(e,t,n){n.d(t,{AD:function(){return k},M2:function(){return A},oF:function(){return T}});var r=n(60436),i=n(65043),o=n(15316),a=n(17392),s=n(43845),l=n(81551),c=n(66187),u=n(88120),d=n(39244),f=n(26240),p=n(11238),h=n(83003),m=n(85211),v=n(98344),g=n(5983),w=n(58140),x=n(70579),b=(0,l.A)((function(e){return{container:{display:"flex",flexDirection:"column",width:"calc(100% - 20px)",overflowY:"auto",marginLeft:"10px"},item:{borderBottom:"1px solid #dcdcdc",overflow:"hidden",color:"#777",fontSize:14,position:"relative",marginBottom:10,paddingBottom:10},itemName:{fontSize:15},chip:{margin:2,padding:2,"& .MuiChip-avatar":{backgroundColor:"transparent !important"}}}})),y=function(e){var t=b(),n=(0,f.A)(),r=(0,w.M)().showAlert;return(0,x.jsxs)(o.A,{className:t.item,style:e.style?e.style:{},children:[(0,x.jsxs)(o.A,{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,x.jsx)(c.A,{className:t.itemName,style:{color:n.palette.primary.main},children:e.title}),e.help&&(0,x.jsx)(a.A,{onClick:function(){r("video-info",e.help)},children:(0,x.jsx)(g.A,{})})]}),e.item?e.item:e.children]})},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=t<0?0:t,r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]},A=function(e){var t,n,r=b();return(0,i.useEffect)((function(){0===e.record.parent.length?e.setMetadata(null):e.metadata&&e.setMetadata(e.record.parent[0])}),[e.record]),(0,x.jsxs)(o.A,{className:r.container,children:[(0,x.jsx)(y,{title:"Nombre del archivo",item:null!==e&&void 0!==e&&null!==(t=e.record)&&void 0!==t&&t.displayName?null===e||void 0===e||null===(n=e.record)||void 0===n?void 0:n.displayName:e.record.name}),(0,x.jsx)(y,{title:"HASH",item:e.record.hash}),(0,x.jsx)(y,{title:"Tama\xf1o",item:j(e.record.size)}),e.record.parent.length>0&&(0,x.jsx)(y,{title:"Contenido relacionado",children:e.record.parent.map((function(t,n){return(0,x.jsx)(s.A,{avatar:u.dR.filter((function(e){return e.value===t.icon}))?u.dR.filter((function(e){return e.value===t.icon}))[0].iconlight:(0,x.jsx)(d.A,{}),label:t.name,className:r.chip,onClick:function(){e.setMetadata(t)}},n)}))})]})},k=function(e){var t=b();(0,h.wA)(),(0,h.d4)((function(e){return e.app.filters}));return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(o.A,{className:t.container,children:[(0,x.jsx)(y,{title:"Descripci\xf3n",item:(0,x.jsx)(c.A,{children:e.type.description})}),e.files.total>0&&(0,x.jsx)(y,{title:"Balance general de los documentos",item:(0,x.jsx)(v.RJ,{data:e.files.data,legend:!0})}),(0,x.jsx)(T,{view:e.view,parents:e.parents,root:e.root})]})})},T=function(e){var t,n=(0,h.wA)(),i=(0,h.d4)((function(e){return e.app.filters})),o=b();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(y,{title:"Estructura de carpetas para",item:(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(p.$k,{label:"Tipo de recurso",showLabel:!1,value:i[e.view]?!e.single&&i[e.view].post_type?i[e.view].post_type.slug:e.single&&!Array.isArray(i[e.view].post_type_single)&&i[e.view].post_type_single?i[e.view].post_type_single.slug:"*":"*",onChange:function(t){if(e.onChange)e.onChange(t);else{var r=e.single?"post_type_single":"post_type";if("*"===t.target.value){var o=(0,m.e)(i,e.view,r,null);n((0,m.vm)(o))}else{var a=(0,m.e)(i,e.view,r,{slug:t.target.value});n((0,m.vm)(a))}}},options:function(){var t=(0,r.A)(e.parents.map((function(e){return{value:e.slug,label:e.name}})));return"cataloging"!==e.view&&(t=[{value:"*",label:"Todos los tipos"}].concat((0,r.A)(t))),t}()})}),help:"folder-structure"}),i[e.view]&&(null===(t=i[e.view].parents)||void 0===t?void 0:t.name)&&(0,x.jsx)("div",{style:{marginBottom:10},children:(0,x.jsx)(s.A,{avatar:u.dR.filter((function(t){return t.value===i[e.view].parents.icon}))?u.dR.filter((function(t){return t.value===i[e.view].parents.icon}))[0].iconlight:(0,x.jsx)(d.A,{}),label:i[e.view].parents.name,className:o.chip,onDelete:function(){var t=(0,m.e)(i,e.view,"parents",{id:e.root});n((0,m.vm)(t))},size:"small",color:"primary"})})]})}},46020:function(e,t,n){n.d(t,{Jt:function(){return o},O8:function(){return u},UK:function(){return c},hE:function(){return a},lD:function(){return l},yo:function(){return s}});var r=n(88120),i=n(91280);function o(e){var t="/views/"+e,n={method:"GET",headers:new Headers({Authorization:(0,i.g)()}),mode:"cors",cache:"default"};return fetch(r.FM+t,n).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function a(e){var t="/views/info/"+e,n={method:"GET",headers:new Headers({Authorization:(0,i.g)()}),mode:"cors",cache:"default"};return fetch(r.FM+t,n).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function s(e,t){var n="/views/"+e,o={method:"PUT",headers:new Headers({Authorization:(0,i.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:t};return fetch(r.FM+n,o).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function l(e){var t="/views/"+e,n={method:"DELETE",headers:new Headers({Authorization:(0,i.g)()}),mode:"cors",cache:"default"};return fetch(r.FM+t,n).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function c(){var e={method:"GET",headers:new Headers({Authorization:(0,i.g)()}),mode:"cors",cache:"default"};return fetch(r.FM+"/views",e).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function u(e){var t={method:"POST",headers:new Headers({Authorization:(0,i.g)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:e};return fetch(r.FM+"/views",t).then((function(e){return 201!==e.status?Promise.reject(e):e.json()}))}}}]);
//# sourceMappingURL=4886.3606d301.chunk.js.map